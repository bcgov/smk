{
    "_id": "b4e25749-55a0-4e7f-8bb7-11b999d4d492",
    "_rev": "2-8b2c7921e9b7884e072860e21afe42e3",
    "lmfId": "ben-6",
    "lmfRevision": 1,
    "name": "ben 6",
    "createdBy": "",
    "published": false,
    "surround": {
        "type": "default",
        "title": "ben 6"
    },
    "viewer": {
        "type": "leaflet",
        "location": { "extent": [
            -139.1782,
            47.6039,
            -110.3533,
            60.5939
        ] },
        "baseMap": "Topographic"
    },
    "tools": [
       { "type": "menu" },
       { "type": "dropdown" },
       { "type": "query", "instance": "746--query1", "position": "dropdown", "icon": "account_balance" },
        { "type": "query", "instance": "746--query2", "position": "dropdown", "icon": "account_box" },
        { "type": "query", "instance": "746--query4", "position": "dropdown", "icon": "account_box" },
        { "type": "query", "instance": "746--query5", "position": "dropdown", "icon": "account_box" },
        { "type": "query", "instance": "746--query6", "position": "dropdown", "icon": "account_box" },
        { "type": "query", "instance": "746--query3", "icon": "bug_report" },
         {
            "type": "coordinate",
            "enabled": true
        },
        {
            "type": "attribution",
            "enabled": true
        },
        {
            "type": "sidebar",
            "enabled": true
        },
        {
            "type": "layers",
            "enabled": true
        },
        {
            "type": "identify",
            "enabled": true
        },
        {
            "type": "pan",
            "enabled": true
        },
        {
            "type": "zoom",
            "enabled": true,
            "mouseWheel": true,
            "doubleClick": true,
            "box": true,
            "control": true
        },
        {
            "type": "measure",
            "enabled": true
        },
        {
            "type": "markup",
            "enabled": true
        },
        {
            "type": "scale",
            "enabled": true,
            "showFactor": true,
            "showBar": true
        },
        {
            "type": "minimap",
            "enabled": true,
            "baseMap": "Topographic"
        },
        {
            "type": "directions",
            "enabled": true
        },
        {
            "type": "about",
            "enabled": true,
            "title": "Ben 6 Test",
            "content": "This application is a demonstration of Simple Mapping Kit (SMK).<p>It is a standalone web app."
        },
        {
            "type": "baseMaps",
            "enabled": true,
            "choices": [
                "Topographic",
                "Streets",
                "Imagery",
                "Oceans",
                "NationalGeographic",
                "DarkGray",
                "Gray"
            ]
        },
        {
            "type": "select",
            "enabled": true
        },
        {
            "type": "search",
            "enabled": true
        }
    ],
    "layers": [
        {
            "type": "esri-dynamic",
            "id": "746",
            "title": "All Fish points",
            "isVisible": true,
            "attribution": "Copyright 2018 DataBC, Government of British Columbia",
            "metadataUrl": "http://catalogue.data.gov.bc.ca/dataset/aca81811-4b08-4382-9af7-204e0b9d2448",
            "opacity": 0.65,
            "minScale": 1000001,
            "maxScale": 0,
            "isQueryable": true,
            "titleAttribute": "SPECIES_NAME",
            "attributes": [
                {
                    "id": "fish-observation-point-id",
                    "name": "FISH_OBSERVATION_POINT_ID",
                    "title": "Fish Observation Point ID",
                    "visible": true
                },
                {
                    "id": "wbody-id",
                    "name": "WBODY_ID",
                    "title": "Waterbody ID",
                    "visible": true
                },
                {
                    "id": "species-code",
                    "name": "SPECIES_CODE",
                    "title": "Species Code",
                    "visible": true
                },
                {
                    "id": "agency-id",
                    "name": "AGENCY_ID",
                    "title": "Agency ID",
                    "visible": true
                },
                {
                    "id": "point-type-code",
                    "name": "POINT_TYPE_CODE",
                    "title": "Point Type Code",
                    "visible": true
                },
                {
                    "id": "observation-date",
                    "name": "OBSERVATION_DATE",
                    "title": "Observation date",
                    "visible": true
                },
                {
                    "id": "agency-name",
                    "name": "AGENCY_NAME",
                    "title": "Agency Name",
                    "visible": true
                },
                {
                    "id": "source",
                    "name": "SOURCE",
                    "title": "Source",
                    "visible": true
                },
                {
                    "id": "source-ref",
                    "name": "SOURCE_REF",
                    "title": "Source Reference",
                    "visible": true
                },
                {
                    "id": "activity-code",
                    "name": "ACTIVITY_CODE",
                    "title": "Activity Code",
                    "visible": true
                },
                {
                    "id": "activity",
                    "name": "ACTIVITY",
                    "title": "Activity",
                    "visible": true
                },
                {
                    "id": "life-stage-code",
                    "name": "LIFE_STAGE_CODE",
                    "title": "Life Stage Code",
                    "visible": true
                },
                {
                    "id": "life-stage",
                    "name": "LIFE_STAGE",
                    "title": "Life Stage",
                    "visible": true
                },
                {
                    "id": "species-name",
                    "name": "SPECIES_NAME",
                    "title": "Species Name",
                    "visible": true
                },
                {
                    "id": "waterbody-identifier",
                    "name": "WATERBODY_IDENTIFIER",
                    "title": "Waterbody Identifier",
                    "visible": true
                },
                {
                    "id": "waterbody-type",
                    "name": "WATERBODY_TYPE",
                    "title": "Waterbody Type",
                    "visible": true
                },
                {
                    "id": "gazetted-name",
                    "name": "GAZETTED_NAME",
                    "title": "Gazetted Name",
                    "visible": true
                },
                {
                    "id": "new-watershed-code",
                    "name": "NEW_WATERSHED_CODE",
                    "title": "New Watershed Code",
                    "visible": true
                },
                {
                    "id": "trimmed-watershed-code",
                    "name": "TRIMMED_WATERSHED_CODE",
                    "title": "Trimmed Watershed Code",
                    "visible": true
                },
                {
                    "id": "feature-code",
                    "name": "FEATURE_CODE",
                    "title": "Feature Code",
                    "visible": true
                },
                {
                    "id": "acat-report-url",
                    "name": "ACAT_REPORT_URL",
                    "title": "ACAT_REPORT_URL",
                    "visible": true
                },
                {
                    "id": "geometry",
                    "name": "GEOMETRY",
                    "title": "GEOMETRY",
                    "visible": true
                },
                {
                    "id": "objectid",
                    "name": "OBJECTID",
                    "title": "OBJECTID",
                    "visible": true
                }
            ],
            "mpcmId": 746,
            "mpcmWorkspace": "MPCM_ALL_PUB",
            "serviceUrl": "https://maps.gov.bc.ca/arcgis/rest/services/mpcm/bcgw/MapServer",
            "dynamicLayers": [
                "{\"id\":746,\"source\":{\"type\":\"dataLayer\",\"dataSource\":{\"type\":\"table\",\"workspaceId\":\"MPCM_ALL_PUB\",\"dataSourceName\":\"WHSE_FISH.FISS_FISH_OBSRVTN_PNT_SP\",\"gdbVersion\":\"\"}},\"drawingInfo\":{\"renderer\":{\"type\":\"uniqueValue\",\"field1\":\"POINT_TYPE_CODE\",\"field2\":null,\"field3\":null,\"fieldDelimiter\":\", \",\"defaultSymbol\":null,\"defaultLabel\":null,\"uniqueValueInfos\":[{\"symbol\":{\"type\":\"esriSMS\",\"style\":\"esriSMSCircle\",\"color\":[255,0,0,255],\"size\":6,\"angle\":0,\"xoffset\":0,\"yoffset\":0,\"outline\":{\"color\":[0,0,0,255],\"width\":1}},\"value\":\"Observation\",\"label\":\"Observation\",\"description\":\"\"},{\"symbol\":{\"type\":\"esriSMS\",\"style\":\"esriSMSCircle\",\"color\":[0,77,168,255],\"size\":7,\"angle\":0,\"xoffset\":0,\"yoffset\":0,\"outline\":{\"color\":[0,0,0,255],\"width\":1}},\"value\":\"Summary\",\"label\":\"Summary\",\"description\":\"\"}]},\"transparency\":0,\"labelingInfo\":null}}"
            ],
            "queries": [
                {
                    "id": "query4",
                    "title": "contains",
                    "description": "Find features that contain text in Agency, Source or Source Reference",
                    "parameters": [
                        {
                            "id": "param1",
                            "type": "input",
                            "title": "Matching text",
                            "value": "kamloops"
                        }
                    ],
                    "predicate": {
                        "operator": "or",
                        "arguments": [
                            {
                                "operator": "contains",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "AGENCY_NAME"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param1"
                                    }
                                ]
                            },
                            {
                                "operator": "contains",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "SOURCE"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param1"
                                    }
                                ]
                            },
                            {
                                "operator": "contains",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "SOURCE_REF"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param1"
                                    }
                                ]
                            }
                        ]
                    }
                },

                {
                    "id": "query1",
                    "title": "less than",
                    "description": "Query FISH_OBSERVATION_POINT_ID",
                    "parameters": [
                        {
                            "id": "param2",
                            "type": "input",
                            "title": "Fish Observation Point ID",
                            "value": "100"
                        }
                    ],
                    "predicate": {
                        "operator": "and",
                        "arguments": [
                            {
                                "operator": "less-than",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "FISH_OBSERVATION_POINT_ID"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param2"
                                    }
                                ]
                            }
                        ]
                    }
                },

                {
                    "id": "query2",
                    "title": "contains and equals",
                    "description": "species & type",
                    "parameters": [
                        {
                            "id": "param1",
                            "type": "input",
                            "title": "Species contains",
                            "value": "salmon"
                        },
                        {
                            "id": "param2",
                            "type": "input",
                            "title": "type code equals",
                            "value": "Observation"
                        }
                    ],
                    "predicate": {
                        "operator": "and",
                        "arguments": [
                            {
                                "operator": "contains",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "SPECIES_NAME"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param1"
                                    }
                                ]
                            },
                            {
                                "operator": "equals",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "POINT_TYPE_CODE"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param2"
                                    }
                                ]
                            }
                        ]
                    }
                },

                {
                    "id": "query3",
                    "title": "Test query 3",
                    "description": "contains or equals",
                    "parameters": [
                        {
                            "id": "param1",
                            "type": "input",
                            "title": "Species contains",
                            "value": "salmon"
                        },
                        {
                            "id": "param2",
                            "type": "input",
                            "title": "type code equals",
                            "value": "Observation"
                        }
                    ],
                    "predicate": {
                        "operator": "or",
                        "arguments": [
                            {
                                "operator": "contains",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "SPECIES_NAME"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param1"
                                    }
                                ]
                            },
                            {
                                "operator": "equals",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "POINT_TYPE_CODE"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param2"
                                    }
                                ]
                            }
                        ]
                    }
                },

                {
                    "id": "query5",
                    "title": "select species",
                    "description": "Find features by Species",
                    "parameters": [
                        {
                            "id": "param1",
                            "type": "select",
                            "title": "Species",
                            "value": null,
                            "choices": [
                                { "value":"ABT", "title":"Anadromous Bull Trout" },
                                { "value":"ACT", "title":"Cutthroat Trout (Anadromous)" },
                                { "value":"BB",  "title":"Burbot" },
                                { "value":"BCB", "title":"Black Crappie" },
                                { "value":"BH",  "title":"Bullhead (General)" },
                                { "value":"BL",  "title":"Western Brook Lamprey" },
                                { "value":"BNH", "title":"Brown Catfish (formerly Brown Bullhead)" },
                                { "value":"BSU", "title":"Bridgelip Sucker" },
                                { "value":"BT",  "title":"Bull Trout" },
                                { "value":"C",   "title":"Minnow (General)" },
                                { "value":"CAL", "title":"Coastrange Sculpin (formerly Aleutian Sculpin)" },
                                { "value":"CAS", "title":"Prickly Sculpin" },
                                { "value":"CBA", "title":"Mottled Sculpin" },
                                { "value":"CBC", "title":"Chub (General)" },
                                { "value":"CC",  "title":"Sculpin (General)" },
                                { "value":"CCA", "title":"Sharpnose Sculpin" },
                                { "value":"CCG", "title":"Slimy Sculpin" },
                                { "value":"CCL", "title":"Cultus Lake Sculpin" },
                                { "value":"CCT", "title":"Coastal Cutthroat Trout" },
                                { "value":"CH",  "title":"Chinook Salmon" },
                                { "value":"CLA", "title":"Staghorn Sculpin" },
                                { "value":"CM",  "title":"Chum Salmon" },
                                { "value":"CO",  "title":"Coho Salmon" },
                                { "value":"CRH", "title":"Torrent Sculpin" },
                                { "value":"CSU", "title":"Largescale Sucker" },
                                { "value":"CT",  "title":"Cutthroat Trout" },
                                { "value":"DV",  "title":"Dolly Varden" },
                                { "value":"EB",  "title":"Brook Trout" },
                                { "value":"GB",  "title":"Brown Trout" },
                                { "value":"IN",  "title":"Inconnu" },
                                { "value":"KO",  "title":"Kokanee" },
                                { "value":"LKC", "title":"Lake Chub" },
                                { "value":"LMB", "title":"Largemouth Bass" },
                                { "value":"LSU", "title":"Longnose Sucker" },
                                { "value":"LT",  "title":"Lake Trout" },
                                { "value":"LW",  "title":"Lake Whitefish" },
                                { "value":"MW",  "title":"Mountain Whitefish" },
                                { "value":"NP",  "title":"Northern Pike" },
                                { "value":"NSB", "title":"Ninespine Stickleback" },
                                { "value":"NSC", "title":"Northern Pikeminnow" },
                                { "value":"PCC", "title":"Peamouth Chub" },
                                { "value":"PK",  "title":"Pink Salmon" },
                                { "value":"PL",  "title":"Pacific Lamprey" },
                                { "value":"PMB", "title":"Pumpkinseed" },
                                { "value":"PW",  "title":"Pygmy Whitefish" },
                                { "value":"RB",  "title":"Rainbow Trout" },
                                { "value":"RSC", "title":"Redside Shiner" },
                                { "value":"RSM", "title":"Rainbow Smelt" },
                                { "value":"SA",  "title":"Salmon (General)" },
                                { "value":"SB",  "title":"Stickleback (General)" },
                                { "value":"SFL", "title":"Starry Flounder" },
                                { "value":"SG",  "title":"Sturgeon (General)" },
                                { "value":"SK",  "title":"Sockeye Salmon" },
                                { "value":"SMB", "title":"Smallmouth Bass" },
                                { "value":"SP",  "title":"Fish Unidentified Species" },
                                { "value":"ST",  "title":"Steelhead" },
                                { "value":"SU",  "title":"Sucker (General)" },
                                { "value":"TR",  "title":"Unidentifiable Trout - only fry <70mm in length " },
                                { "value":"TSB", "title":"Threespine Stickleback" },
                                { "value":"WCT", "title":"Westslope (Yellowstone) Cutthroat Trout" },
                                { "value":"WF",  "title":"Whitefish (General)" },
                                { "value":"WSU", "title":"White Sucker" }
                            ]
                        }
                    ],
                    "predicate": {
                        "operator": "or",
                        "arguments": [
                            {
                                "operator": "equals",
                                "arguments": [
                                    {
                                        "operand": "attribute",
                                        "name": "SPECIES_CODE"
                                    },
                                    {
                                        "operand": "parameter",
                                        "id": "param1"
                                    }
                                ]
                            }
                        ]
                    }
                },

                {
                    "id": "query6",
                    "title": "complex",
                    "description": "complex query ",
                    "parameters": [
                        {
                            "id": "param2",
                            "type": "input",
                            "title": "name contains",
                            "value": null
                        },
                        {
                            "id": "param1",
                            "type": "input",
                            "title": "waterbody id less than",
                            "value": 400000
                        },
                        {
                            "id": "param3",
                            "type": "constant",
                            "title": "waterbody id greater than",
                            "value": 100000
                        },
                        {
                            "id": "param4",
                            "type": "input",
                            "title": "point type code is not",
                            "value": "foo"
                        }
                    ],
                    "predicate": {
                        "operator": "and",
                        "arguments": [
                            {
                                "operator": "or",
                                "arguments": [
                                    {
                                        "operator": "contains",
                                        "arguments": [
                                            {
                                                "operand": "attribute",
                                                "name": "SPECIES_NAME"
                                            },
                                            {
                                                "operand": "parameter",
                                                "id": "param2"
                                            }
                                        ]
                                    },
                                    {
                                        "operator": "starts-with",
                                        "arguments": [
                                            {
                                                "operand": "attribute",
                                                "name": "GAZETTED_NAME"
                                            },
                                            {
                                                "operand": "parameter",
                                                "id": "param2"
                                            }
                                        ]
                                    },
                                    {
                                        "operator": "ends-with",
                                        "arguments": [
                                            {
                                                "operand": "attribute",
                                                "name": "AGENCY_NAME"
                                            },
                                            {
                                                "operand": "parameter",
                                                "id": "param2"
                                            }
                                        ]
                                    },
                                    {
                                        "operator": "and",
                                        "arguments": [
                                            {
                                                "operator": "less-than",
                                                "arguments": [
                                                    {
                                                        "operand": "attribute",
                                                        "name": "WBODY_ID"
                                                    },
                                                    {
                                                        "operand": "parameter",
                                                        "id": "param1"
                                                    }
                                                ]
                                            },
                                            {
                                                "operator": "greater-than",
                                                "arguments": [
                                                    {
                                                        "operand": "attribute",
                                                        "name": "WBODY_ID"
                                                    },
                                                    {
                                                        "operand": "parameter",
                                                        "id": "param3"
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "operator": "not",
                                "arguments": [
                                    {
                                        "operator": "equals",
                                        "arguments": [
                                            {
                                                "operand": "attribute",
                                                "name": "POINT_TYPE_CODE"
                                            },
                                            {
                                                "operand": "parameter",
                                                "id": "param4"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                }

            ]
        }
    ]
}