// SMK v1.0.2
window.include||function(){"use strict";var r={},o={baseUrl:document.location,timeout:6e4};function a(e,t){if(!t){if(!r[e])throw new Error('tag "'+e+'" not defined');return r[e]}if(e in r)throw new Error('tag "'+e+'" already defined');return r[e]=t}var i={};function u(e,t){switch(d(e)){case"object":e=[e];break;case"array":break;case"string":e=[].slice.call(arguments),t=null;break;default:throw new Error("unable to include tags: "+JSON.stringify(e))}return i.sequence({tags:e},t,!1)}i.$resolveUrl=function(e){return/^[.][/]/.test(e)?e:new URL(e,o.baseUrl).toString()},i.tags=function(e){return this.template(e).then(function(e){var t=JSON.parse(e);return Object.keys(t).forEach(function(e){a(e,t[e])}),t})},i.script=function(o){var e=this;if(o.load)return new Promise(function(e,t){e(o.load.call(window))});if(o.url)return new Promise(function(t,r){var n=document.createElement("script");o.integrity&&(n.setAttribute("integrity",o.integrity),n.setAttribute("crossorigin","")),n.addEventListener("load",function(e){t(n)}),n.addEventListener("error",function(e){r(new Error("failed to load script from "+n.src))}),n.setAttribute("src",e.$resolveUrl(o.url)),document.getElementsByTagName("head")[0].appendChild(n)});throw new Error("Can't load script")},i.style=function(e){var o=this;return new Promise(function(t,r){var n;e.load?((n=document.createElement("style")).textContent=e.load,t(n)):((n=document.createElement("link")).setAttribute("rel","stylesheet"),e.integrity&&(n.setAttribute("integrity",e.integrity),n.setAttribute("crossorigin","")),n.addEventListener("load",function(e){t(n)}),n.addEventListener("error",function(e){r(new Error("failed to load stylesheet from "+n.href))}),e.url?n.setAttribute("href",o.$resolveUrl(e.url)):r(new Error("Can't load style"))),document.getElementsByTagName("head")[0].appendChild(n)})},i.template=function(o){var i=this;if(o.load)return new Promise(function(e,t){e(o.data=o.load)});if(o.url)return new Promise(function(e,t){var r=new XMLHttpRequest,n=i.$resolveUrl(o.url);r.addEventListener("load",function(){200!=this.status&&t(new Error("status "+this.status+" trying to load template from "+n)),e(o.data=this.responseText)}),r.addEventListener("error",function(e){t(new Error("failed to load template from "+n))}),r.open("GET",n),r.send()});throw new Error("Can't load template")},i.sequence=function(e,n,o){e.tags.forEach(function(e,t,r){r[t]=l(e,n,o)});var r=Promise.resolve(),i={};return e.tags.forEach(function(t){r=r.then(function(){return s(t)}).then(function(e){i[t]=e})}),r.then(function(){return i})},i.group=function(e,n){e.tags.forEach(function(e,t,r){r[t]=l(e,n)});var t=e.tags.map(function(e){return Promise.resolve().then(function(){return s(e)})});return Promise.all(t).then(function(r){var n={};return e.tags.forEach(function(e,t){n[e]=r[t]}),n})},i.asset=function(e){return Promise.resolve(this.$resolveUrl(e.url))};var t={js:"script",css:"style",html:"template"};function l(e,t,r){if("string"==typeof e)return e;var n,o=e;t&&e.url&&!e.external&&!/[/][/]/.test(e.url)?n=t+"."+e.url.match(/(^|[/])([^/]+)$/)[2].replace(/[.]/g,"-").toLowerCase():n="anon-"+f(o);try{var i=a(n);!1!==r&&console.warn('tag "'+n+'" already defined as',i,", will be used instead of",e)}catch(e){a(n,o)}return n}function s(r){var n=a(l(r));if(n.include)return n.include;if(!n.loader){var e=n.url.match(/[.]([^.]+)$/);e&&(n.loader=t[e[1]])}if(!n.loader)throw new Error('tag "'+r+'" has no loader for "'+n.url+'"');if(!i[n.loader])throw new Error('tag "'+r+'" has unknown loader "'+n.loader+'"');return n.include=new Promise(function(e,t){i[n.loader].call(i,n,r).then(function(e){return n.loaded=e,n.module?n.module:e}).then(e,t),setTimeout(function(){t(new Error("timeout"))},o.timeout)}).then(function(e){return console.debug("included "+n.loader+' "'+r+'"',n.url||n.tags),e}).catch(function(e){throw e.message+=', for tag "'+r+'"',console.warn(e),e})}var c={undefined:"\0",null:"",boolean:"",number:"",string:"",function:"",array:"",object:"\n"};function d(e){var t=typeof e;return"object"!=t?t:Array.isArray(e)?"array":null===e?"null":"object"}function f(e){var n=2166136261;return function e(t){var r=d(t);switch(r){case"string":return u(t);case"array":for(var n in u(c[r]),t)e(t[n]);return;case"object":u(c[r]);var o=Object.keys(t).sort();for(var i in o){var a=o[i];u(a),e(t[a])}return;case"undefined":case"null":return u(c[r]);default:return u(c[r]+String(t))}}(e),("0000000"+(n>>>0).toString(16)).substr(-8);function u(e){for(var t=0,r=e.length;t<r;t+=1)n^=e.charCodeAt(t),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24)}}window.include=u,window.include.module=function(t,e,r){var n,o;try{n=a(t)}catch(e){console.warn('tag "'+t+'" for module not defined, creating'),n=a(t,{})}return n.module&&console.warn('tag "'+t+'" for module already defined, overwriting'),o=e?u(e):Promise.resolve(),n.module=o.then(function(e){return"function"==typeof r?r.call(n,e):r}).then(function(e){return console.debug('module "'+t+'"'),n.exported=e})},window.include.tag=a,window.include.hash=f,window.include.option=function(e){if("string"==typeof e)return o[e];Object.assign(o,e)}}();
( function ( skip ) {
"use strict";
if ( skip ) return;

    include.tag( "api",
        { loader: "group", tags: [
            { loader: "script", url: "smk/api/geocoder.js", load: function () { console.debug( "[smk/api/geocoder.js]" ); include.module("api.geocoder-js",["jquery","util"],function(){"use strict";function e(e){Object.assign(this,{timeout:1e4,url:"https://geocoder.api.gov.bc.ca/",parameter:{}},e)}(SMK.TYPE.Geocoder=e).prototype.fetchAddresses=function(e,t){return delete(t=Object.assign({maxResults:20,outputSRS:4326,addressString:e,autoComplete:!0,locationDescriptor:"accessPoint"},this.parameter,t)).maxDistance,delete t.locationMode,this.fetchGeocoder("addresses",t).then(function(e){return e.features.filter(function(e){return!!e.geometry.coordinates&&"BC"!=e.properties.fullAddress}).map(function(e){return{longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1],civicNumber:e.properties.civicNumber,civicNumberSuffix:e.properties.civicNumberSuffix,fullAddress:e.properties.fullAddress,localityName:e.properties.localityName,localityType:e.properties.localityType,streetName:e.properties.streetName,streetType:e.properties.streetType,siteName:e.properties.siteName,matchPrecision:e.properties.matchPrecision}})})},e.prototype.fetchNearestSite=function(r,e){var o=(e=Object.assign({locationOut:"geocoder",point:[r.longitude,r.latitude].join(","),outputSRS:4326,locationDescriptor:"routingPoint",maxDistance:1e3},this.parameter,e)).locationOut;return delete e.locationOut,this.fetchGeocoder("sites/nearest",e).then(function(e){var t={civicNumber:e.properties.civicNumber,civicNumberSuffix:e.properties.civicNumberSuffix,fullAddress:e.properties.fullAddress,localityName:e.properties.localityName,localityType:e.properties.localityType,streetName:e.properties.streetName,streetType:e.properties.streetType,siteName:e.properties.siteName,matchPrecision:e.properties.matchPrecision};return"geocoder"==o?(t.longitude=e.geometry.coordinates[0],t.latitude=e.geometry.coordinates[1]):"input"==o&&(t=Object.assign(t,r)),t}).catch(function(e){return console.debug(e.responseText),r})},e.prototype.fetchIntersections=function(e,t){},e.prototype.fetchOccupants=function(e,t){},e.prototype.fetchGeocoder=function(r,o){var i=this;return SMK.UTIL.makePromise(function(e,t){$.ajax({timeout:i.timeout,dataType:"json",url:i.url+r+".geojson",data:o}).then(e,t)})}});} },
            { loader: "script", url: "smk/api/route-planner.js", load: function () { console.debug( "[smk/api/route-planner.js]" ); include.module("api.route-planner-js",["jquery","util"],function(){"use strict";function e(e){Object.assign(this,{url:"https://router.api.gov.bc.ca/",apiKey:null},e)}(SMK.TYPE.RoutePlanner=e).prototype.fetchDirections=function(e,r){var i=this;this.request&&this.request.abort();var a=Object.assign({optimal:!1,truck:!1,oversize:!1},r);delete(r=Object.assign({criteria:"shortest",roundTrip:!1,correctSide:null,height:null,weight:null,distanceUnits:"km",followTruckRoute:null,truckRouteMultiplier:null,disable:null,outputSRS:4326,partition:a.truck?"isFerry,isTruckRoute,locality":""},r)).optimal,delete r.truck,delete r.oversize;var t=["directions","optimalDirections","truck/directions","truck/optimalDirections"][!!a.optimal+2*!!a.truck]+".json",n=Object.keys(r).reduce(function(e,t){return r[t]&&(e[t]=r[t]),e},{});n.points=e.map(function(e){return e.longitude+","+e.latitude}).join(",");var c={timeout:1e4,dataType:"json",url:this.url+t,data:n,headers:{apikey:this.apiKey}};return SMK.UTIL.makePromise(function(e,t){(i.request=$.ajax(c)).then(e,t)}).then(function(s){if(!s.routeFound)throw new Error("failed to find route");function o(o){return s.directions.filter(function(e){return t=e.point,r=o,i=1e-5,n=t[0]-r[0],s=t[1]-r[1],n*n+s*s<=i*i;var t,r,i,n,s})}if(s.directions&&(s.directions=s.directions.map(function(s,e){return null!=s.distance?s.distanceUnit=(t=1e3*s.distance)<=500?{value:t,unit:"meters"}:{value:t,unit:"kilometers"}:s.instruction=s.text.replace(/^"|"$/g,"").replace(/\s(?:for|and travel)\s((?:\d+.?\d*\s)?k?m)\s[(](\d+).+?((\d+).+)?$/,function(e,t,r,i,n){return s.distanceUnit={value:s.distance,unit:""},s.time=n?60*parseInt(r)+parseInt(n):parseInt(r),""}),s;var t})),s.route){if(s.partitions){var e=s.route.length,t=s.partitions.length;s.partitions[t-1].index<e-1&&(s.partitions.push({index:e-1}),t+=1),s.segments=[];for(var r=1;r<t;r+=1){var i=s.partitions[r-1];i.isOversize=!!a.oversize,s.segments.push(turf.lineString(s.route.slice(i.index,s.partitions[r].index+1),i))}}else s.segments=[turf.lineString(s.route,{index:0})];s.segments=turf.featureCollection(s.segments),s.segments.properties={isOversize:!!a.oversize};var u=s.route.map(function(){return{segs:{}}});s.segments.features.forEach(function(e,t){for(var r=0;r<e.geometry.coordinates.length;r+=1){var i=r+e.properties.index;u[i].segs[t]=!0,u[i].dirs=o(s.route[i]),u[i].index=i;for(var n=0;n<u[i].dirs.length;n+=1)u[i].dirs[n].segmentIndex=t}});var n=u.filter(function(e){return 1<Object.keys(e.segs).length&&0==e.dirs.length});0<n.length&&(n.forEach(function(e){e.dirs=[{type:"CONTINUE",point:JSON.parse(JSON.stringify(s.route[e.index])),segmentIndex:Math.max.apply(Math,Object.keys(e.segs))}]}),s.directions=u.map(function(e){return e.dirs}).filter(function(e){return!!e}).reduce(function(e,t){return e.concat(t)},[]))}return s.request=c,s})}});} }
        ] }
    );
    include.tag( "component",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/component.css", load: "/* [smk/component/component.css] */\n.smk-tool{display:flex;justify-content:flex-start}.smk-tool i{background-color:transparent;border:0;padding:0;margin:0;outline:0;width:26px;height:26px}.smk-tool:focus{outline:0}.smk-tool.smk-tool-title{width:auto;display:flex;flex-direction:row;align-items:center}.smk-tool.smk-tool-title span{font-size:15px;margin-right:5px;margin-left:5px}" },
            { loader: "script", url: "smk/component/component.js", load: function () { console.debug( "[smk/component/component.js]" ); include.module("component",["component.format-link-html","component.tool-widget-html"],function(inc){"use strict";function makeFormatter(t,e){var o=Vue.extend({template:t}),r=e||function(){};return function(e,a,n){return function(){var t=r.apply(null,arguments);return(new(Vue.extend({extends:o,data:function(){return Object.assign({attribute:e,feature:a,layer:n},t)}}))).$mount().$el.outerHTML}}}SMK.COMPONENT.FeatureBase={props:["feature","layer","showHeader","attributes"],methods:{insertWordBreaks:function(t){return t.replace(/[^a-z0-9 ]+/gi,function(t){return"<wbr>"+t})},formatValue:function(t){return/^https?[:][/]{2}[^/]/.test((""+t).trim())?'<a href="'+t+'" target="_blank">Open in new window</a>':t},formatAttribute:function(attr){var self=this,m=attr.format.match(/^(.+)[(](.+)[)]$/);if(m)return formatter[m[1]](attr,this.feature,this.layer).apply(this,eval("["+m[2]+"]"));var value=SMK.UTIL.templateReplace(attr.value,function(token){return function(){var e=eval(token);return e}.call(self)});return formatter[attr.format](Object.assign({},attr,{value:value}),this.feature,this.layer)()},formatTitle:function(attr){var self=this,title=SMK.UTIL.templateReplace(attr.title,function(token){return function(){var e=eval(token);return e}.call(self)});return this.insertWordBreaks(title)}}};var formatter={simple:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ attribute.value }}</span>'),asLocalTimestamp:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ ( new Date( attribute.value ) ).toLocaleString() }}</span>'),asLocalDate:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ ( new Date( attribute.value ) ).toLocaleDateString() }}</span>'),asLocalTime:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ ( new Date( attribute.value ) ).toLocaleTimeString() }}</span>'),asUnit:makeFormatter('<span class="smk-value" v-if="attribute.value">{{ attribute.value }} <span class="smk-unit">{{ unit }}</span></span>',function(t){return{unit:t}}),asLink:makeFormatter(inc["component.format-link-html"],function(t,e){return{url:t,label:e}}),asHTML:makeFormatter('<span class="smk-value" v-if="html" v-html="html"></span>',function(t){return{html:t}})};SMK.COMPONENT.ToolEmit={methods:{$$emit:function(t,e){this.$root.trigger(this.id,t,e,this)}}},SMK.COMPONENT.ToolBase={mixins:[SMK.COMPONENT.ToolEmit],props:{id:String,type:String,title:String,status:String,active:Boolean,enabled:Boolean,visible:Boolean,group:Boolean,showTitle:Boolean,icon:String},computed:{baseClasses:function(){var t={"smk-tool-active":this.active,"smk-tool-visible":this.visible,"smk-tool-enabled":this.enabled};return t["smk-tool-"+this.id]=!0,this.status&&(t["smk-tool-status-"+this.status]=!0),t}}};var componentProps={};SMK.COMPONENT.ToolPanelBase={extends:SMK.COMPONENT.ToolBase,props:{showPanel:Boolean,showHeader:Boolean,showSwipe:Boolean,busy:Boolean,expand:Number,hasPrevious:Boolean,parentId:String},computed:{classes:function(){return this.baseClasses}},methods:{$$projectProps:function(t){return componentProps[t]||(componentProps[t]=SMK.UTIL.projection.apply(null,Object.keys((new(Vue.component(t)))._props))),componentProps[t](this.$props)}}},SMK.COMPONENT.ToolWidgetBase={extends:SMK.COMPONENT.ToolBase,template:inc["component.tool-widget-html"],props:{showWidget:Boolean},computed:{classes:function(){var t=this.baseClasses;return t["smk-tool-title"]=this.showTitle,t}}}});} },
            { loader: "template", url: "smk/component/format-link.html", load:"<span class=\"smk-value\" v-if=\"url\">\n    <a v-bind:href=\"url\" target=\"_blank\">{{ label || attribute.value || url }}<i class=\"material-icons\">open_in_new</i></a>\n</span>" },
            { loader: "template", url: "smk/component/tool-widget.html", load:"<div class=\"smk-tool\"\n    v-bind:class=\"classes\"\n    v-on:click=\"$$emit( 'activate' )\"\n    v-bind:title=\"title\"\n    v-if=\"showWidget !== false\"\n>\n    <i class=\"material-icons\">{{ icon }}</i>\n    <span v-if=\"showTitle && title\">{{ title }}</span>\n</div>\n" }
        ] }
    );
    include.tag( "component-activate-tool",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/activate-tool/component-activate-tool.css", load: "/* [smk/component/activate-tool/component-activate-tool.css] */\n.smk-activate-tool{font-weight:700;cursor:pointer}.smk-activate-tool:hover{text-decoration:underline}" },
            { loader: "template", url: "smk/component/activate-tool/component-activate-tool.html", load:"<div class=\"smk-activate-tool\"\n    v-bind:title=\"title\" \n    v-on:click=\"$$emit( 'activate' )\"\n>\n    <slot></slot>\n</div>" },
            { loader: "script", url: "smk/component/activate-tool/component-activate-tool.js", load: function () { console.debug( "[smk/component/activate-tool/component-activate-tool.js]" ); include.module("component-activate-tool",["component","component-activate-tool.component-activate-tool-html"],function(t){"use strict";Vue.component("activate-tool",{extends:SMK.COMPONENT.ToolEmit,template:t["component-activate-tool.component-activate-tool-html"],props:{id:{type:String},title:{type:String}}})});} }
        ] }
    );
    include.tag( "component-address-search",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/address-search/component-address-search.css", load: "/* [smk/component/address-search/component-address-search.css] */\n.smk-address-search{position:relative;display:inline-block}.smk-popup-list{z-index:5;position:absolute;top:26px;left:6px;border:1px solid gray;box-shadow:0 1px 5px rgba(0,0,0,.65);background-color:#fff;font-size:12px;max-width:200px;padding:1px}.smk-popup-item{overflow-x:hidden;white-space:nowrap}.smk-popup-item.smk-active-item{background-color:#87cefa;font-weight:700}" },
            { loader: "template", url: "smk/component/address-search/component-address-search.html", load:"<div class=\"smk-address-search\">\n    <enter-input\n        v-bind:placeholder=\"placeholder\"\n        v-bind:value=\"search\"\n        v-on:change=\"onChange( $event )\"\n        v-on:key-down-arrow=\"onArrowDown\"\n        v-on:key-up-arrow=\"onArrowUp\"\n        v-on:key-enter=\"onEnter\"\n    ></enter-input>\n\n    <div class=\"smk-popup-list\" v-if=\"expanded\">\n        <div class=\"smk-popup-item\"\n            v-for=\"( item, i ) in list\"\n            v-bind:class=\"{ 'smk-active-item': i == selectedIndex }\"\n            v-on:mouseenter=\"selectedIndex = i\"\n            v-on:mouseleave=\"selectedIndex = null\"\n            v-on:click=\"onEnter\"\n        >{{ item.fullAddress }}</div>\n    </div>\n</div>" },
            { loader: "script", url: "smk/component/address-search/component-address-search.js", load: function () { console.debug( "[smk/component/address-search/component-address-search.js]" ); include.module("component-address-search",["component","component-enter-input","component-address-search.component-address-search-html","api"],function(e){"use strict";Vue.component("address-search",{template:e["component-address-search.component-address-search-html"],props:{placeholder:{type:String},geocoderService:{type:Object,default:function(){return{}}}},data:function(){return{search:"",list:null,selectedIndex:null,expanded:!1,geocoder:new SMK.TYPE.Geocoder(this.geocoderService)}},methods:{clear:function(){this.search=""},onChange:function(e){var t=this;return this.search=e,this.list=null,this.geocoder.fetchAddresses(e,{maxResults:5}).then(function(e){t.list=e,t.expanded=0<t.list.length,t.selectedIndex=0<t.list.length?0:null})},onArrowDown:function(){if(!this.expanded&&this.list)return this.expanded=!0,void(this.selectedIndex=0);this.selectedIndex=((this.selectedIndex||0)+1)%this.list.length},onArrowUp:function(){this.expanded&&(this.selectedIndex=((this.selectedIndex||0)+this.list.length-1)%this.list.length)},onEnter:function(){this.expanded&&(this.expanded=!1,this.$emit("update",this.list[this.selectedIndex]))},handleClickOutside:function(e){this.$el.contains(e.target)||(this.expanded=!1,this.selectedIndex=null)}},mounted:function(){document.addEventListener("click",this.handleClickOutside)},destroyed:function(){document.removeEventListener("click",this.handleClickOutside)}})});} }
        ] }
    );
    include.tag( "component-command-button",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/command-button/component-command-button.css", load: "/* [smk/component/command-button/component-command-button.css] */\n.smk-command-button{display:flex;justify-content:center}.smk-command-button .smk-command{cursor:pointer;color:#000;background-color:#fff;padding:2px 6px;border:2px solid #bbb;border-radius:8px;font-size:12px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-command-button.smk-icon .smk-command{color:#000;background-color:transparent;border:2px solid transparent;padding:0;width:26px;height:26px;font-size:24px}.smk-command-button .smk-command:hover{border:2px solid #000;background-color:#ddd}.smk-command-button.smk-disabled .smk-command{cursor:default;color:#bbb;font-style:italic}.smk-command-button.smk-disabled .smk-command:hover{border:2px solid transparent;background-color:#fff}.smk-command-button.smk-disabled.smk-icon .smk-command{font-style:normal}.smk-command-button.smk-disabled.smk-icon .smk-command:hover{background-color:transparent}" },
            { loader: "template", url: "smk/component/command-button/component-command-button.html", load:"<div class=\"smk-command-button\"\n    v-bind:class=\"{ \n        'smk-disabled': disabled,\n        'smk-icon': !!icon,\n    }\"\n>\n    <div class=\"smk-command\"\n        v-on:click=\"clickButton( $event )\"\n        v-bind:title=\"title\"\n    >\n        <i class=\"material-icons\" v-if=\"icon\">{{ icon }}</i>\n        <slot></slot>\n    </div>\n</div>" },
            { loader: "script", url: "smk/component/command-button/component-command-button.js", load: function () { console.debug( "[smk/component/command-button/component-command-button.js]" ); include.module("component-command-button",["component","component-command-button.component-command-button-html"],function(t){"use strict";Vue.component("command-button",{template:t["component-command-button.component-command-button-html"],props:{title:{type:String},disabled:{type:Boolean,default:!1},icon:{type:String}},methods:{clickButton:function(t){this.disabled||this.$emit("click",t)}}})});} }
        ] }
    );
    include.tag( "component-enter-input",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/enter-input/component-enter-input.css", load: "/* [smk/component/enter-input/component-enter-input.css] */\n.smk-enter-input label{font-size:12px;display:block;position:relative}.smk-enter-input.smk-disabled label{color:#aaa}.smk-enter-input .smk-input{border-radius:8px;padding:2px;display:flex;justify-content:space-around;align-items:center;background-color:#bbb}.smk-enter-input input{display:block;flex-grow:1;border:0;font-size:14px;padding:3px;background-color:#fff;border-radius:6px;width:1px}.smk-enter-input input:focus{outline:0}.smk-enter-input .smk-reset.smk-command.smk-icon{width:20px;height:20px;font-size:20px}" },
            { loader: "template", url: "smk/component/enter-input/component-enter-input.html", load:"<div class=\"smk-enter-input\"\n    v-bind:class=\"{ 'smk-disabled': disabled }\"\n>\n    <label>\n        <slot></slot>\n        <div class=\"smk-input\">\n            <slot name=\"before-input\"></slot>\n            <input\n                v-bind:type=\"type\"\n                v-bind:value=\"value\"\n                v-bind:placeholder=\"placeholder\"\n                v-bind:disabled=\"disabled\"\n                v-bind=\"option\"\n                v-on:input=\"onChange( $event.target.value, $event.target.selectionStart )\"\n                v-on:keyup.down=\"$emit( 'key-down-arrow' )\"\n                v-on:keyup.up=\"$emit( 'key-up-arrow' )\"\n                v-on:keyup.enter=\"$emit( 'key-enter' )\"\n                v-bind:data-position=\"position\"\n                v-position\n            >\n            <i class=\"smk-reset smk-command smk-icon material-icons\" \n                v-if=\"clear\"\n                v-bind:class=\"{ 'smk-disabled': !value }\"\n                title=\"Reset\"\n                v-on:click=\"$emit( 'change', '' )\"\n            >cancel</i>\n            <slot name=\"after-input\"></slot>\n        </div>\n    </label>\n</div>" },
            { loader: "script", url: "smk/component/enter-input/component-enter-input.js", load: function () { console.debug( "[smk/component/enter-input/component-enter-input.js]" ); include.module("component-enter-input",["component","component-enter-input.component-enter-input-html"],function(t){"use strict";Vue.component("enter-input",{template:t["component-enter-input.component-enter-input-html"],data:function(){return{position:null}},props:{value:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String},clear:{type:Boolean,default:!0},option:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},methods:{onChange:function(t){this.$emit("change",t)}},directives:{position:function(){}}}),Vue.component("enter-number",{template:t["component-enter-input.component-enter-input-html"],data:function(){return{type:"tel",position:null}},props:{value:{type:[Number,String],default:0},placeholder:{type:String},clear:{type:Boolean,default:!1},option:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},methods:{onChange:function(t,e){this.position=e,this.$emit("change",parseFloat(t||"0"))}},directives:{position:function(t,e,n){var o=t.dataset.position;null!=o&&(t.selectionStart=o,t.selectionEnd=o)}}})});} }
        ] }
    );
    include.tag( "component-feature-attribute",
        { loader: "group", tags: [
            { loader: "template", url: "smk/component/feature-attribute/component-feature-attribute.html", load:"<div class=\"smk-attribute\" v-if=\"title && value && value.trim()\">\n    <span class=\"smk-attribute-title\" v-html=\"title\"></span>\n    <span v-html=\"value\"></span>\n</div>" },
            { loader: "script", url: "smk/component/feature-attribute/component-feature-attribute.js", load: function () { console.debug( "[smk/component/feature-attribute/component-feature-attribute.js]" ); include.module("component-feature-attribute",["component-feature-attribute.component-feature-attribute-html"],function(t){"use strict";Vue.component("feature-attribute",{template:t["component-feature-attribute.component-feature-attribute-html"],props:{title:{type:String},value:{type:String}}})});} }
        ] }
    );
    include.tag( "component-feature-attributes",
        { loader: "group", tags: [
            { loader: "template", url: "smk/component/feature-attributes/component-feature-attributes.html", load:"<div>\n    <div class=\"smk-header\" v-if=\"showHeader\">\n        <h3>{{ layer.title }}</h3>\n        <h2>{{ feature.title }}</h2>\n    </div>\n\n    <div class=\"smk-layer\">{{ layer.title }}</div>\n\n    <div class=\"smk-attributes\"\n        v-if=\"attributes && attributes.length > 0\"\n    >\n        <feature-attribute \n            v-for=\"attr, i in attributes\"\n            v-bind:key=\"'attr' + i\"\n            v-bind:title=\"formatTitle( attr )\"\n            v-bind:value=\"formatAttribute( attr )\"\n        ></feature-attribute>        \n    </div>\n</div>" },
            { loader: "script", url: "smk/component/feature-attributes/component-feature-attributes.js", load: function () { console.debug( "[smk/component/feature-attributes/component-feature-attributes.js]" ); include.module("component-feature-attributes",["component","component-feature-attribute","component-feature-attributes.component-feature-attributes-html"],function(t){"use strict";Vue.component("feature-attributes",{extends:SMK.COMPONENT.FeatureBase,template:t["component-feature-attributes.component-feature-attributes-html"]})});} }
        ] }
    );
    include.tag( "component-feature-description",
        { loader: "group", tags: [
            { loader: "template", url: "smk/component/feature-description/component-feature-description.html", load:"<div class=\"smk-description\"\n    v-html=\"feature.properties.description\"\n></div>\n\n" },
            { loader: "script", url: "smk/component/feature-description/component-feature-description.js", load: function () { console.debug( "[smk/component/feature-description/component-feature-description.js]" ); include.module("component-feature-description",["component","component-feature-description.component-feature-description-html"],function(e){"use strict";Vue.component("feature-description",{extends:SMK.COMPONENT.FeatureBase,template:e["component-feature-description.component-feature-description-html"]})});} }
        ] }
    );
    include.tag( "component-feature-list",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/feature-list/component-feature-list.css", load: "/* [smk/component/feature-list/component-feature-list.css] */\n.smk-feature-list .smk-layer{position:relative;margin-bottom:5px;border-radius:5px}.smk-feature-list .smk-layer h2{display:flex;justify-content:space-between;align-items:flex-end;width:calc(100% - 10px);font-size:13px;font-weight:700;position:sticky;top:0;background-color:#fff;padding:5px;border-bottom:1px solid #a9a9a9;margin:0}.smk-feature-list .smk-layer h2 .smk-count{font-size:10px;vertical-align:bottom}.smk-feature-list .smk-layer .smk-feature{font-size:12px;margin-left:10px;cursor:pointer;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.smk-feature-list .smk-layer .smk-feature span{flex-basis:100%;margin-left:5px;font-size:14px;margin-top:5px;margin-bottom:5px}.smk-feature-list .smk-layer .smk-feature.smk-highlighted{font-weight:700}.smk-feature-list .smk-layer .smk-feature .smk-highlight{opacity:0}.smk-feature-list .smk-layer .smk-feature:hover .smk-highlight{opacity:.3}.smk-feature-list-panel .smk-layer .smk-feature.smk-highlighted .smk-highlight{opacity:1}" },
            { loader: "template", url: "smk/component/feature-list/component-feature-list.html", load:" <div class=\"smk-feature-list\">\n    <div class=\"smk-layer\"\n        v-for=\"layer in layers\"\n        v-if=\"layer && layer.features.length > 0\"\n    >\n        <h2>{{ layer.title }}<span class=\"smk-count\" v-if=\"layer.features.length > 1\">({{ layer.features.length }})</span></h2>\n\n        <div class=\"smk-feature smk-item\" title=\"Click to see attributes\"\n            v-for=\"feature in layer.features\"\n            v-bind:class=\"{ 'smk-highlighted': feature.id == highlightId }\"\n            v-on:click=\"$emit( 'active', { featureId: feature.id } )\"\n            v-on:mouseenter=\"$emit( 'hover', { features: [ feature ] } )\"\n            v-on:mouseleave=\"$emit( 'hover', { features: null } )\"\n        >\n            <span >{{ feature.title }}</span>\n\n            <i class=\"smk-highlight material-icons smk-command smk-icon\"\n            >speaker_notes</i>\n\n            <slot name=\"item\"\n                v-bind:layer=\"layer\"\n                v-bind:feature=\"feature\"\n            ></slot>\n            <!-- <command-button class=\"smk-remove\"\n                title=\"Remove item\"\n                v-on:click=\"$emit( 'remove', { layerId: layer.id, featureId: feature.id } )\"\n                icon=\"delete\"\n            ></command-button> -->\n\n            <!-- <i class=\"smk-remove material-icons smk-command smk-icon\"\n                v-if=\"canRemove\"\n                v-on:click.stop=\"$emit( 'remove', { layerId: layer.id, featureId: feature.id } )\"\n            >delete</i> -->\n        </div>\n    </div>\n</div>\n" },
            { loader: "script", url: "smk/component/feature-list/component-feature-list.js", load: function () { console.debug( "[smk/component/feature-list/component-feature-list.js]" ); include.module("component-feature-list",["component-feature-list.component-feature-list-html"],function(t){"use strict";Vue.component("feature-list",{template:t["component-feature-list.component-feature-list-html"],props:{layers:Array,highlightId:String},computed:{featureCount:{get:function(){return this.layers&&0!=this.layers.length?this.layers.reduce(function(t,e){return t+e.features.length},0):0}}}})});} }
        ] }
    );
    include.tag( "component-feature-properties",
        { loader: "group", tags: [
            { loader: "template", url: "smk/component/feature-properties/component-feature-properties.html", load:"<div>\n    <div class=\"smk-header\" v-if=\"showHeader\">\n        <h3>{{ layer.title }}</h3>\n        <h2>{{ feature.title }}</h2>\n    </div>\n\n    <div class=\"smk-layer\">{{ layer.title }}</div>\n\n    <div class=\"smk-attributes\"\n        v-if=\"feature.properties\"\n    >\n        <div class=\"smk-attribute\"\n            v-for=\"(attr) in sortedProperties\"\n        >\n            <span class=\"smk-attribute-title\" v-html=\"insertWordBreaks( attr )\"></span>\n            <span class=\"smk-value\" v-html=\"formatValue( feature.properties[ attr ] )\"></span>\n        </div>\n    </div>\n</div>" },
            { loader: "script", url: "smk/component/feature-properties/component-feature-properties.js", load: function () { console.debug( "[smk/component/feature-properties/component-feature-properties.js]" ); include.module("component-feature-properties",["component","component-feature-properties.component-feature-properties-html"],function(e){"use strict";Vue.component("feature-properties",{extends:SMK.COMPONENT.FeatureBase,template:e["component-feature-properties.component-feature-properties-html"],computed:{sortedProperties:function(){return this.feature&&this.feature.properties?Object.keys(this.feature.properties).sort():[]}}})});} }
        ] }
    );
    include.tag( "component-parameter",
        { loader: "group", tags: [
            { loader: "template", url: "smk/component/parameter/component-parameter-constant.html", load:"<div class=\"smk-parameter\">\n    <label v-if=\"title\">\n        {{ title }}\n        <span>{{ value }}</span>\n    </label>\n</div>" },
            { loader: "template", url: "smk/component/parameter/component-parameter-input.html", load:"<div class=\"smk-parameter\">\n    <label>\n        {{ title }}\n        <input\n            ref=\"in\"\n            v-model=\"input\"\n            v-on:input=\"$emit( 'input', { value: $event.target.value } )\"\n            v-on:keyup.down=\"$emit( 'pickDown' )\"\n            v-on:keyup.up=\"$emit( 'pickUp' )\"\n            v-on:keyup.enter=\"$emit( 'execute' )\"\n            v-on:focus=\"$emit( 'change', { active: true } )\"\n            v-on:blur=\"$emit( 'change', { active: false } )\"\n        >\n        <i class=\"smk-parameter-reset smk-command smk-icon material-icons\" title=\"Reset\"\n            v-on:click=\"$emit( 'reset' )\"\n        >cancel</i>\n    </label>\n</div>" },
            { loader: "template", url: "smk/component/parameter/component-parameter-select.html", load:"<div class=\"smk-parameter\">\n    <label>\n        {{ title }}\n        <select\n            v-model=\"selected\"\n            v-on:change=\"$emit( 'input', { value: $event.target.value } )\"\n            v-bind:disabled=\"isEmpty\"\n            v-if=\"!useFallback || !isEmpty\"\n        >\n            <option disabled value=\"\" v-if=\"isEmpty\">(No choices available)</option>\n            <!-- <option disabled value=\"\" v-if=\"!isEmpty\">Please choose</option> -->\n            <option value=\"\" v-if=\"!isEmpty\" >(No value selected)</option>\n\n            <option\n                v-for=\"option in choices\"\n                v-bind:value=\"option.value\"\n            >{{ option.title ? option.title : '' }}{{ option.title ? '' : option.value | formatTitle }}</option>\n        </select>\n\n        <input\n            v-model=\"selected\"\n            v-on:input=\"$emit( 'input', { value: $event.target.value } )\"\n            v-if=\"useFallback && isEmpty\"\n        >\n    </label>\n</div>\n" },
            { loader: "script", url: "smk/component/parameter/component-parameter.js", load: function () { console.debug( "[smk/component/parameter/component-parameter.js]" ); include.module("component-parameter",["component","component-parameter.component-parameter-constant-html","component-parameter.component-parameter-input-html","component-parameter.component-parameter-select-html"],function(t){"use strict";Vue.component("parameter-constant",{template:t["component-parameter.component-parameter-constant-html"],props:["id","title","value","type","focus"],mounted:function(){this.$emit("mounted")}}),Vue.component("parameter-input",{template:t["component-parameter.component-parameter-input-html"],props:["id","title","value","type","focus"],data:function(){return{input:this.value||""}},watch:{value:function(t){this.input=t||""},focus:function(){this.$refs.in.focus()}},mounted:function(){this.$emit("mounted")}}),Vue.component("parameter-select",{template:t["component-parameter.component-parameter-select-html"],props:["id","title","choices","value","type","focus","useFallback"],data:function(){return{selected:this.value||""}},watch:{value:function(t){this.selected=t||""}},mounted:function(){this.$emit("mounted")},computed:{isEmpty:function(){return!this.choices||0==this.choices.length}}})});} },
            { loader: "style", url: "smk/component/parameter/tool-query.css", load: "/* [smk/component/parameter/tool-query.css] */\n.smk-parameter label{font-size:12px;display:block;width:calc(100% - 10px);position:relative}.smk-parameter input,.smk-parameter select,.smk-parameter span{display:block;width:100%;border:0;font-size:16px;padding:3px;border-bottom:1px solid #d3d3d3;background-color:#fff}.smk-parameter input:focus,.smk-parameter select:focus,.smk-parameter span:focus{outline:0;border-bottom:1px dashed gray}" }
        ] }
    );
    include.tag( "component-select-dropdown",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/select-dropdown/component-select-dropdown.css", load: "/* [smk/component/select-dropdown/component-select-dropdown.css] */\n" },
            { loader: "template", url: "smk/component/select-dropdown/component-select-dropdown.html", load:"<div class=\"smk-select-dropdown\">\n    <slot></slot>\n    <select class=\"smk-dropdown\"\n        v-bind:value=\"value\"\n        v-on:change=\"clickOption( $event.target.value )\"\n    >\n        <option \n            v-for=\"opt, i in options\"\n            v-bind:title=\"opt.title\"\n            v-bind:value=\"opt.value\"\n        >{{ opt.label }}</option>\n    </select>\n</div>\n" },
            { loader: "script", url: "smk/component/select-dropdown/component-select-dropdown.js", load: function () { console.debug( "[smk/component/select-dropdown/component-select-dropdown.js]" ); include.module("component-select-dropdown",["component","component-select-dropdown.component-select-dropdown-html"],function(e){"use strict";Vue.component("select-dropdown",{template:e["component-select-dropdown.component-select-dropdown-html"],props:{options:{type:Array,default:[]},value:{}},model:{prop:"value",event:"change"},methods:{clickOption:function(e){this.$emit("change",e)}}})});} }
        ] }
    );
    include.tag( "component-select-option",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/select-option/component-select-option.css", load: "/* [smk/component/select-option/component-select-option.css] */\n.smk-select-option{font-size:12px}.smk-select-option .smk-options{border-radius:8px;padding:2px;display:flex;justify-content:space-around;background-color:#bbb}.smk-select-option .smk-options .smk-command{flex-grow:1;flex-shrink:1;flex-basis:100%;text-align:center;color:#000}.smk-select-option .smk-options .smk-selected-option{font-weight:700;background-color:#fff}.smk-select-option .smk-options .smk-command:hover{background-color:#ddd;border:1px solid transparent}" },
            { loader: "template", url: "smk/component/select-option/component-select-option.html", load:"<div class=\"smk-select-option\">\n    <slot></slot>\n    <div class=\"smk-options\">\n        <label class=\"smk-command\" \n            v-for=\"opt, i in options\"\n            v-on:click=\"clickOption( opt, i )\" \n            v-bind:title=\"opt.title\"\n            v-bind:class=\"{ 'smk-selected-option': opt.value == value }\"\n        >{{ opt.label }}</label>\n    </div>\n</div>\n" },
            { loader: "script", url: "smk/component/select-option/component-select-option.js", load: function () { console.debug( "[smk/component/select-option/component-select-option.js]" ); include.module("component-select-option",["component","component-select-option.component-select-option-html"],function(e){"use strict";Vue.component("select-option",{template:e["component-select-option.component-select-option-html"],props:{options:{type:Array,default:[]},value:{}},model:{prop:"value",event:"change"},methods:{clickOption:function(e,o){this.$emit("change",e.value)}}})});} }
        ] }
    );
    include.tag( "component-toggle-button",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/toggle-button/component-toggle-button.css", load: "/* [smk/component/toggle-button/component-toggle-button.css] */\n.smk-toggle-button label.smk-command{display:flex;align-items:center}.smk-toggle-button .smk-toggle{font-size:30px;line-height:18px}.smk-toggle-button.smk-toggle-off .smk-toggle{color:red}.smk-toggle-button.smk-toggle-on .smk-toggle{color:#90ee90}" },
            { loader: "template", url: "smk/component/toggle-button/component-toggle-button.html", load:"<div class=\"smk-toggle-button\"\n    v-bind:class=\"{ \n        'smk-toggle-on': value,\n        'smk-toggle-off': !value \n    }\"\n>\n    <label class=\"smk-command\" v-on:click=\"clickToggle\" v-bind:title=\"value ? titleOn : titleOff\">\n        <i class=\"smk-toggle material-icons\">{{ value ? iconOn : iconOff }}</i>\n        <slot></slot>\n    </label>\n</div>" },
            { loader: "script", url: "smk/component/toggle-button/component-toggle-button.js", load: function () { console.debug( "[smk/component/toggle-button/component-toggle-button.js]" ); include.module("component-toggle-button",["component","component-toggle-button.component-toggle-button-html"],function(t){"use strict";Vue.component("toggle-button",{template:t["component-toggle-button.component-toggle-button-html"],props:{value:{type:Boolean,default:!1},iconOff:{type:String,default:"toggle_off"},iconOn:{type:String,default:"toggle_on"},titleOff:{type:String,default:"Off. Click to turn on"},titleOn:{type:String,default:"On. Click to turn off"}},model:{prop:"value",event:"change"},methods:{clickToggle:function(){this.$emit("change",!this.value)}}})});} }
        ] }
    );
    include.tag( "component-tool-panel",
        { loader: "group", tags: [
            { loader: "template", url: "smk/component/tool-panel/component-tool-panel.html", load:"<div v-bind:class=\"{ 'smk-busy': busy }\">\n    <div class=\"smk-panel\">\n        <div class=\"smk-header\" \n            v-if=\"showHeader\"\n            v-on:touchstart=\"startSwipe\"\n            v-on:touchmove=\"moveSwipe\"\n        >\n            <div class=\"smk-swipe-handle\" v-if=\"showSwipe\"></div>\n            \n            <slot name=\"header\"></slot>\n        </div>\n\n        <div class=\"smk-commands\"\n            v-if=\"$slots.commands\"\n        >\n            <slot name=\"commands\"></slot>\n        </div>\n\n        <div class=\"smk-above-body\">\n            <i class=\"smk-can-scroll-up material-icons\" \n                v-if=\"canScrollUp\"\n            >arrow_drop_up</i>\n        </div>\n\n        <div class=\"smk-body\" ref=\"body\"\n            v-on:scroll=\"scrollBody\"\n        >\n            <slot></slot>\n        </div>\n\n        <div class=\"smk-below-body\">\n            <i class=\"smk-can-scroll-down material-icons\" \n                v-if=\"canScrollDown\"\n            >arrow_drop_down</i>\n        </div>\n    </div>\n</div>" },
            { loader: "script", url: "smk/component/tool-panel/component-tool-panel.js", load: function () { console.debug( "[smk/component/tool-panel/component-tool-panel.js]" ); include.module("component-tool-panel",["component","component-tool-panel.component-tool-panel-html"],function(t){"use strict";Vue.component("tool-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:t["component-tool-panel.component-tool-panel-html"],data:function(){return{canScrollUp:!1,canScrollDown:!1}},methods:{startSwipe:function(t){this.xDown=t.touches[0].clientX,this.yDown=t.touches[0].clientY},moveSwipe:function(t){if(this.xDown&&this.yDown){var o=this.xDown-t.touches[0].clientX,n=this.yDown-t.touches[0].clientY;Math.abs(o)>Math.abs(n)?0<o?this.$emit("swipe-left"):this.$emit("swipe-right"):0<n?this.$emit("swipe-up"):this.$emit("swipe-down"),this.xDown=null,this.yDown=null}},scrollBody:function(t){this.updateScroll()},updateScroll:function(){var t=this.$refs.body;this.canScrollUp=0<t.scrollTop,this.canScrollDown=t.scrollTop+t.clientHeight<t.scrollHeight}},mounted:function(){this.$nextTick(this.updateScroll)},updated:function(){this.$nextTick(this.updateScroll)}})});} }
        ] }
    );
    include.tag( "component-tool-panel-feature",
        { loader: "group", tags: [
            { loader: "style", url: "smk/component/tool-panel-feature/component-tool-panel-feature.css", load: "/* [smk/component/tool-panel-feature/component-tool-panel-feature.css] */\n.smk-feature-panel .smk-feature{position:relative}.smk-feature-panel .smk-header h2{padding-bottom:5px;font-size:18px;margin-left:-10px;display:inline}.smk-feature-panel .smk-header h3{margin-top:0;padding-bottom:0;margin-bottom:0;font-size:13px;font-weight:700;margin-left:-10px}.smk-feature-panel .smk-layer{font-size:15px;font-weight:700;position:sticky;top:0;background-color:#fff;padding:5px;border-bottom:1px solid #a9a9a9}.smk-header+.smk-attributes{border-top:1px solid gray}.smk-feature-panel .smk-attributes,.smk-feature-panel .smk-description{width:100%;overflow-y:auto;overflow-x:hidden}.smk-feature-panel .smk-attribute:nth-child(2n){background-color:#ddd}.smk-feature-panel .smk-attribute:nth-child(2n+1){padding-top:2px;padding-bottom:2px}.smk-feature-panel .smk-attribute .smk-attribute-title{display:inline-block;vertical-align:top;width:33%;font-size:11px;padding-left:5px}.smk-feature-panel .smk-attribute .smk-value{display:inline-block;vertical-align:top;font-weight:700;padding-left:10px;font-size:12px}.smk-feature-panel .smk-value .material-icons{font-size:12px}.smk-feature-panel .smk-commands{user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-feature-panel .smk-commands .smk-navigator{flex-grow:1;display:flex;flex-direction:row;justify-content:flex-start;align-items:center;align-content:flex-end;order:60}.smk-feature-panel .smk-commands .smk-zoom{order:110;flex-grow:1;justify-content:flex-end}.smk-feature-panel .smk-commands .smk-select{order:120}.smk-feature-panel .smk-commands .smk-attribute-mode{order:130}.smk-feature-panel .smk-navigator .smk-position{white-space:nowrap;display:inline-block;font-weight:700;margin:0 5px}.smk-feature-panel .smk-navigator .smk-move{cursor:pointer;margin:0;padding:0}" },
            { loader: "template", url: "smk/component/tool-panel-feature/component-tool-panel-feature.html", load:"<tool-panel class=\"smk-feature-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <span class=\"smk-navigator\" v-if=\"resultCount > 1 && command.navigator\">\n            <command-button class=\"smk-move\"\n                v-on:click=\"$$emit( 'move-previous', { instance: instance } )\"\n                icon=\"navigate_before\"\n            ></command-button>\n\n            <span class=\"smk-position\">{{ resultPosition + 1 }}</span> of <span class=\"smk-position\">{{ resultCount }}</span>\n\n            <command-button class=\"smk-move\"\n                v-on:click=\"$$emit( 'move-next', { instance: instance } )\"\n                icon=\"navigate_next\"\n            ></command-button>\n        </span>\n\n        <command-button class=\"smk-zoom\"\n            v-if=\"tool.zoom && command.zoom\"\n            v-on:click=\"$$emit( 'zoom', { instance: instance } )\"\n        >Zoom to</command-button>\n\n        <command-button class=\"smk-select\"\n            v-if=\"tool.select && command.select\"\n            v-on:click=\"$$emit( 'select', { instance: instance } )\"\n        >Add to selection</command-button>\n\n        <select class=\"smk-command smk-attribute-mode\" \n            v-if=\"layer && command.attributeMode\"\n            v-model=\"attributeMode\"\n        >\n            <option value=\"default\">Default View</option>        \n            <option v-bind:value=\"'feature-template-' + layer.id\"\n                v-if=\"attributeComponent == 'feature-template-' + layer.id\"\n            >Template View</option>        \n            <option value=\"feature-description\"\n                v-if=\"attributeComponent == 'feature-description'\"\n            >Description View</option>        \n            <option value=\"feature-attributes\">Attributes View</option>        \n            <option value=\"feature-properties\">Properties View</option>        \n            <option value=\"feature-formatted\">Formatted View</option>        \n        </select>\n    </template>\n\n    <component class=\"smk-feature\"\n        v-if=\"layer\"\n        v-bind:key=\"layer.id\"\n        v-bind:is=\"attributeMode == 'default' ? attributeComponent : attributeMode\"\n        v-bind=\"{\n            layer:      layer,\n            feature:    feature,\n            attributes: attributes,\n        }\"\n    ></component>\n</tool-panel>" },
            { loader: "script", url: "smk/component/tool-panel-feature/component-tool-panel-feature.js", load: function () { console.debug( "[smk/component/tool-panel-feature/component-tool-panel-feature.js]" ); include.module("component-tool-panel-feature",["component","component-tool-panel","component-feature-attributes","component-feature-properties","component-feature-description","component-command-button","component-tool-panel-feature.component-tool-panel-feature-html"],function(e){"use strict";Vue.component("tool-panel-feature",{extends:SMK.COMPONENT.ToolPanelBase,template:e["component-tool-panel-feature.component-tool-panel-feature-html"],props:["feature","layer","attributeComponent","tool","resultPosition","resultCount","instance","command","attributeMode"],computed:{attributes:{get:function(){var t=this.feature;return this.layer.attributes?this.layer.attributes.filter(function(e){return!1!==e.visible}).map(function(e){return{id:e.name||e.title,name:e.name,title:e.title,value:e.name?t.properties[e.name]:e.value,format:e.format||"simple"}}):[]}}}})});} }
        ] }
    );
    include.tag( "default-config",
        { loader: "group", tags: [
            "tool-about-config",
            "tool-baseMaps-config",
            "tool-bespoke-config",
            "tool-coordinate-config",
            "tool-directions-config",
            "tool-dropdown-config",
            "tool-identify-config",
            "tool-layers-config",
            "tool-legend-config",
            "tool-list-menu-config",
            "tool-location-config",
            "tool-markup-config",
            "tool-measure-config",
            "tool-menu-config",
            "tool-minimap-config",
            "tool-pan-config",
            "tool-query-place-config",
            "tool-query-config",
            "tool-scale-config",
            "tool-search-config",
            "tool-select-config",
            "tool-shortcut-menu-config",
            "tool-toolbar-config",
            "tool-version-config",
            "tool-zoom-config",
            "tool-config"
        ] }
    );
    include.tag( "document-ready",
        { loader: "script", url: "smk/document-ready.js", load: function () { console.debug( "[smk/document-ready.js]" ); include.module("document-ready",[],function(){"use strict";return new Promise(function(n,t){if("loading"!=document.readyState)return n();document.addEventListener("DOMContentLoaded",function(e){clearTimeout(o),n()});var o=setTimeout(function(){var e=new Error("timeout waiting for document ready");console.error(e),t(e)},2e4)})});} }
    );
    include.tag( "esri3d",
        { loader: "sequence", tags: [
            "leaflet",
            { loader: "style", url: "https://js.arcgis.com/4.8/esri/css/main.css" },
            { loader: "script", url: "https://js.arcgis.com/4.8/" }
        ] }
    );
    include.tag( "event",
        { loader: "script", url: "smk/event.js", load: function () { console.debug( "[smk/event.js]" ); include.module("event",["vue","util"],function(){"use strict";function n(t){this.dispatcher=new Vue}(SMK.TYPE.Event=n).prototype.catchExceptions=!0,n.prototype.destroy=function(){this.dispatcher.$off()},n.define=function(t){var e=function(){n.prototype.constructor.call(this)};return $.extend(e.prototype,n.prototype),t.forEach(function(n){e.prototype[n]=function(t){if($.isFunction(t))return this.dispatcher.$on(n,t),this;var e=[].slice.call(arguments);e.unshift(n);try{this.dispatcher.$emit.apply(this.dispatcher,e)}catch(t){if(!this.catchExceptions)throw t.message="Exception caught in "+n+" event handler: "+t.message,t;console.warn("Exception caught in "+n+" event handler:",t)}return this}}),e}});} }
    );
    include.tag( "feature-list-esri3d",
        { loader: "script", url: "smk/viewer-esri3d/feature-list-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/feature-list-esri3d.js]" ); include.module("feature-list-esri3d",["esri3d","types-esri3d","util-esri3d","feature-list"],function(e){"use strict";var u=SMK.TYPE.Esri3d;return function(t){var r=this;this.featureListLayer=new u.layers.GraphicsLayer({visible:!1,elevationInfo:{mode:"on-the-ground"}}),t.$viewer.map.add(this.featureListLayer),this.highlight={},this.changedActive(function(){r.visible=r.active}),r.changedVisible(function(){r.featureListLayer.visible=r.visible}),this.changedActive(function(){r.active?r.featureListLayer.visible=!0:r.featureListLayer.visible=!1}),r.featureSet.clearedFeatures(function(e){r.featureListLayer.removeAll(),r.highlight={}}),r.featureSet.removedFeatures(function(e){e.features.forEach(function(e){r.featureSet.isPicked(e.id)&&r.featureSet.pick(null),r.featureListLayer.removeMany(r.highlight[e.id]),delete r.highlight[e.id]})});var i=SMK.UTIL.smkStyleToEsriSymbol(r.styleFeature({strokeWidth:4,strokeOpacity:.2,fillOpacity:.3})),a=function(e){return i[e]},s=SMK.UTIL.smkStyleToEsriSymbol(r.styleFeature());r.featureSet.addedFeatures(function(e){e.features.forEach(function(e){r.highlight[e.id]=SMK.UTIL.geoJsonToEsriGeometry(e,a).map(function(e){return new u.Graphic(e)}),r.featureListLayer.addMany(r.highlight[e.id])})}),r.featureSet.pickedFeature(function(e){if(r.picks&&r.featureListLayer.removeMany(r.picks),e.was&&r.featureListLayer.addMany(r.highlight[e.was.id]),e.feature){r.picks=r.highlight[e.feature.id].map(function(e){return e.visible=!1,new u.Graphic({geometry:e.geometry,symbol:(i=e.geometry.type,s[i])});var i}),r.featureListLayer.addMany(r.picks),r.featureListLayer.removeMany(r.highlight[e.feature.id]);var i=r.clickLocation?r.clickLocation.geometry:r.highlight[e.feature.id][0].geometry;t.$viewer.view.goTo(i)}}),r.featureSet.zoomToFeature(function(e){t.$viewer.view.goTo(r.highlight[e.feature.id])})}});} }
    );
    include.tag( "feature-set",
        { loader: "script", url: "smk/feature-set.js", load: function () { console.debug( "[smk/feature-set.js]" ); include.module("feature-set",["jquery","util","event","turf"],function(){"use strict";var e=SMK.TYPE.Event.define(["addedFeatures","removedFeatures","pickedFeature","zoomToFeature","highlightedFeatures","clearedFeatures"]);function o(e,t,r){return t in e.properties?include.hash([e.properties[t],r]):include.hash([e.properties,r])}function t(){e.prototype.constructor.call(this),this.featureSet={},this.pickedFeatureId=null,this.highlightedFeatureId={}}SMK.TYPE.FeatureSet=t,$.extend(t.prototype,e.prototype),t.prototype.add=function(i,e,n){var a=this,t=e.map(function(e){for(var t=0,r=o(e,n,t);r in a.featureSet;){var u=a.featureSet[r];if(SMK.UTIL.isDeepEqual(e.properties,u.properties)&&SMK.UTIL.isDeepEqual(e.geometry,u.geometry))return;r=o(e,n,t),t+=1}return e.id=r,e.layerId=i,a.featureSet[r]=e,r}).filter(function(e){return!!e});return 0<t.length&&this.addedFeatures({features:t.map(function(e){return a.featureSet[e]}),layerId:i}),t},t.prototype.remove=function(e){var r=this,t=e.map(function(e){if(e in r.featureSet){var t=r.featureSet[e];return delete r.featureSet[e],t}}).filter(function(e){return!!e});return 0<t.length&&this.removedFeatures({features:t}),t.map(function(e){return e.id})},t.prototype.pick=function(e,t){if(e&&!this.has(e))throw new Error("feature id "+e+" not present");if(this.pickedFeatureId!=e){var r=this.pickedFeatureId;return this.pickedFeatureId=e,this.pickedFeature(Object.assign({feature:e&&this.featureSet[e],was:r&&this.featureSet[r]},t)),r}},t.prototype.zoomTo=function(e){if(e&&!this.has(e))throw new Error("feature id "+e+" not present");this.zoomToFeature({feature:e&&this.featureSet[e]})},t.prototype.highlight=function(e){var t,r,u=this,i=Object.keys(this.highlightedFeatureId);return this.highlightedFeatureId={},e&&(t=e.map(function(e){if(!u.has(e))throw new Error("feature id "+e+" not present");return u.highlightedFeatureId[e]=!0,u.featureSet[e]})),i&&(r=i.map(function(e){return u.featureSet[e]})),this.highlightedFeatures({features:t,was:r}),i},t.prototype.isEmpty=function(){return 0==Object.keys(this.featureSet).length},t.prototype.clear=function(){this.featureSet={},this.pickedFeatureId=null,this.clearedFeatures()},t.prototype.has=function(e){return e in this.featureSet},t.prototype.get=function(e){return this.featureSet[e]},t.prototype.isPicked=function(e){return this.pickedFeatureId==e},t.prototype.isHighlighted=function(e){return!!this.highlightedFeatureId[e]},t.prototype.getPicked=function(){if(this.pickedFeatureId)return this.featureSet[this.pickedFeatureId]},t.prototype.getStats=function(){var e,t,r=this,u=Object.keys(this.featureSet);return{get featureCount(){return u.length},get vertexCount(){return e||(e=u.reduce(function(e,t){return e+turf.coordReduce(r.featureSet[t].geometry,function(e){return e+1},0)},0))},get layerCount(){return t||(t=Object.keys(u.reduce(function(e,t){return e[r.featureSet[t].layerId]=(e[r.featureSet[t].layerId]||0)+1,e},{})).length)}}}});} }
    );
    include.tag( "jquery",
        { loader: "script", url: "lib/jquery-3.3.1.min.js", load: function () { console.debug( "[lib/jquery-3.3.1.min.js]" ); /*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},ie=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||be(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=me(function(e){return e===t},s,!0),f=me(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[me(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var be=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(be,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(Ne,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",be.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var ze=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(We.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var dt,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!wt.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,wt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var Ct=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var St=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||St.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var qt=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=Ct.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:Pt.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||Ct.href)+"").replace(Rt,Ct.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(qt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Yt=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Yt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||be})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),We.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Jt=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=Jt),w},t||(e.jQuery=e.$=w),w});
} }
    );
    include.tag( "layer",
        { loader: "group", tags: [
            { loader: "script", url: "smk/layer/layer-esri-dynamic.js", load: function () { console.debug( "[smk/layer/layer-esri-dynamic.js]" ); include.module("layer.layer-esri-dynamic-js",["layer.layer-js","terraformer"],function(){"use strict";function e(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer["esri-dynamic"]=e).prototype.initLegends=function(){var t=this.config.serviceUrl+"/legend",n={f:"json",dynamicLayers:"["+this.config.dynamicLayers.join(",")+"]"};return SMK.UTIL.makePromise(function(e,r){$.ajax({url:t,type:"post",data:n,dataType:"json"}).then(e,r)}).then(function(e){return e.layers[0].legend.map(function(e){return{url:"data:image/png;base64,"+e.imageData,title:e.label}})})},e.prototype.getFeaturesInArea=function(e,r,t){var n=this.config.serviceUrl+"/identify",o="["+this.config.dynamicLayers.join(",")+"]",a=Terraformer.ArcGIS.convert(e),i={f:"json",dynamicLayers:o,sr:4326,tolerance:0,mapExtent:r.extent.join(","),imageDisplay:[r.screen.width,r.screen.height,96].join(","),returnGeometry:!0,returnZ:!1,returnM:!1,geometryType:"esriGeometryPolygon",geometry:JSON.stringify(a.geometry)};return SMK.UTIL.makePromise(function(e,r){$.ajax({url:n,type:"post",data:i,dataType:"json"}).then(e,r)}).then(function(e){if(!e)throw new Error("no features");if(!e.results||0==e.results.length)throw new Error("no features");return e.results.map(function(e,r){var t={};return e.displayFieldName&&(t.title=e.attributes[e.displayFieldName]),t.geometry=Terraformer.ArcGIS.parse(e.geometry),"MultiPoint"==t.geometry.type&&1==t.geometry.coordinates.length&&(t.geometry.type="Point",t.geometry.coordinates=t.geometry.coordinates[0]),t.properties=e.attributes,t})})}});} },
            { loader: "script", url: "smk/layer/layer-esri-feature.js", load: function () { console.debug( "[smk/layer/layer-esri-feature.js]" ); include.module("layer.layer-esri-feature-js",["layer.layer-js","terraformer"],function(){"use strict";function e(){var r=this;SMK.TYPE.Layer.prototype.constructor.apply(this,arguments),this.legendCache=SMK.UTIL.makePromise(function(e,t){r.legendCacheResolve=e})}$.extend(e.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer["esri-feature"]=e).prototype.initLegends=function(){return this.legendCache.then(function(e){if(e)return e.map(function(e){return{url:"data:image/png;base64,"+e.imageData,title:e.label,height:e.height,width:e.width}})})},e.prototype.getFeaturesInArea=function(e,t,r){var o=this.config.serviceUrl+"/query",n=Terraformer.ArcGIS.convert(e),i={f:"json",inSR:4326,outSR:4326,tolerance:0,mapExtent:t.extent.join(","),imageDisplay:[t.screen.width,t.screen.height,96].join(","),returnGeometry:!0,returnZ:!1,returnM:!1,geometryType:"esriGeometryPolygon",geometry:JSON.stringify(n.geometry),outFields:"*"};return this.config.where&&(i.where=this.config.where),SMK.UTIL.makePromise(function(e,t){$.ajax({url:o,type:"post",data:i,dataType:"json"}).then(e,t)}).then(function(e){if(!e)throw new Error("no features");if(!e.features||0==e.features.length)throw new Error("no features");return e.features.map(function(e,t){var r={};return e.displayFieldName&&(r.title=e.attributes[e.displayFieldName]),r.geometry=Terraformer.ArcGIS.parse(e.geometry),"MultiPoint"==r.geometry.type&&1==r.geometry.coordinates.length&&(r.geometry.type="Point",r.geometry.coordinates=r.geometry.coordinates[0]),r.properties=e.attributes,r})})}});} },
            { loader: "script", url: "smk/layer/layer-esri-tiled.js", load: function () { console.debug( "[smk/layer/layer-esri-tiled.js]" ); include.module("layer.layer-esri-tiled-js",["layer.layer-js","terraformer"],function(){"use strict";function e(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer["esri-tiled"]=e).prototype.initLegends=function(){var r=this.config.serviceUrl+"/legend",n={f:"json"};return SMK.UTIL.makePromise(function(e,t){$.ajax({url:r,type:"post",data:n,dataType:"json"}).then(e,t)}).then(function(e){return e.layers[0].legend.map(function(e){return{url:"data:image/png;base64,"+e.imageData,title:e.label}})})},e.prototype.getFeaturesInArea=function(e,t,r){var n=this.config.serviceUrl+"/identify",o=Terraformer.ArcGIS.convert(e),a={f:"json",sr:4326,tolerance:0,mapExtent:t.extent.join(","),imageDisplay:[t.screen.width,t.screen.height,96].join(","),returnGeometry:!0,returnZ:!1,returnM:!1,geometryType:"esriGeometryPolygon",geometry:JSON.stringify(o.geometry)};return SMK.UTIL.makePromise(function(e,t){$.ajax({url:n,type:"post",data:a,dataType:"json"}).then(e,t)}).then(function(e){if(!e)throw new Error("no features");if(!e.results||0==e.results.length)throw new Error("no features");return e.results.map(function(e,t){var r={};return e.displayFieldName&&(r.title=e.attributes[e.displayFieldName]),r.geometry=Terraformer.ArcGIS.parse(e.geometry),"MultiPoint"==r.geometry.type&&1==r.geometry.coordinates.length&&(r.geometry.type="Point",r.geometry.coordinates=r.geometry.coordinates[0]),r.properties=e.attributes,r})})}});} },
            { loader: "script", url: "smk/layer/layer-vector.js", load: function () { console.debug( "[smk/layer/layer-vector.js]" ); include.module("layer.layer-vector-js",["layer.layer-js"],function(){"use strict";function t(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(t.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer.vector=t).prototype.initLegends=function(o,n,a){var e=this;null==n&&(n=20),null==a&&(a=20);var t=!!this.config.legend.point+!!this.config.legend.line+!!this.config.legend.fill,i=$('<canvas width="'+n*t+'" height="'+a+'">').get(0),s=i.getContext("2d"),l=[].concat(e.config.style);return SMK.UTIL.resolved(0).then(function(r){return e.config.legend.point?SMK.UTIL.makePromise(function(e,t){if(l[0].markerUrl)var i=$("<img>").on("load",function(){var t=i.width/i.height;1<t&&(t=1/t),s.drawImage(i,r,0,a*t,a),e(r+n)}).on("error",e).attr("src",o.resolveAttachmentUrl(l[0].markerUrl,null,"png")).get(0);else s.beginPath(),s.arc(r+n/2,a/2,l[0].strokeWidth/2,0,2*Math.PI),s.lineWidth=2,s.strokeStyle=c(l[0].strokeColor,l[0].strokeOpacity),s.fillStyle=c(l[0].fillColor,l[0].fillOpacity),s.fill(),s.stroke(),e(r+n)}):r}).then(function(i){return e.config.legend.line?(l.forEach(function(t){s.lineWidth=t.strokeWidth,s.strokeStyle=c(t.strokeColor,t.strokeOpacity),s.lineCap=t.strokeCap,t.strokeDashes&&(s.setLineDash(t.strokeDashes.split(",")),parseFloat(t.strokeDashOffset)&&(s.lineDashOffset=parseFloat(t.strokeDashOffset)));var e=t.strokeWidth/2;s.moveTo(i,a/2),s.quadraticCurveTo(i+n-e,0,i+n-e,a),s.stroke()}),i+n):i}).then(function(t){return e.config.legend.fill?(l.forEach(function(t){s.fillStyle=c(t.fillColor,t.fillOpacity),s.fillRect(0,0,n,a)}),t+n):t}).then(function(){return[{url:i.toDataURL("image/png"),title:e.config.legend.title||e.config.title}]})},t.prototype.initialize=function(){this.hasChildren()&&(this.isContainer=!0),SMK.TYPE.Layer.prototype.initialize.apply(this,arguments),this.config.useHeatmap&&(this.config.isQueryable=!1)},t.prototype.hasChildren=function(){return 1<this.config.useRaw+this.config.useClustering+this.config.useHeatmap},t.prototype.childLayerConfigs=function(){var t=[];return this.config.useClustering&&t.push(Object.assign({},this.config,{id:this.id+"--clustered",dataUrl:"@"+this.config.id,title:"Clustered",useRaw:!1,useHeatmap:!1})),this.config.useHeatmap&&t.push(Object.assign({},this.config,{id:this.id+"--heatmap",dataUrl:"@"+this.config.id,title:"Heatmap",useRaw:!1,useClustering:!1})),this.config.useRaw&&t.push(Object.assign({},this.config,{id:this.id+"--raw",dataUrl:"@"+this.config.id,title:"Raw",useHeatmap:!1,useClustering:!1})),t},t.prototype.load=function(t){if(t)return this.loadLayer?this.loadLayer(t):void(this.loadCache=t)},t.prototype.clear=function(){if(this.clearLayer)return this.clearLayer()};var n={};function c(t,e){var i=n[t];if(!i){var r=$("<div>").appendTo("body").css("background-color",t);n[t]=i=window.getComputedStyle(r.get(0)).backgroundColor,r.remove()}var o=i.split(/\b/);if(8!=o.length)throw new Error("can't parse: "+i);return"rgba( "+o[2]+","+o[4]+","+o[6]+","+(e||1)+")"}});} },
            { loader: "script", url: "smk/layer/layer-wms.js", load: function () { console.debug( "[smk/layer/layer-wms.js]" ); include.module("layer.layer-wms-js",["layer.layer-js"],function(){"use strict";function e(){SMK.TYPE.Layer.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.prototype),(SMK.TYPE.Layer.wms=e).prototype.initLegends=function(){var r=this.config.serviceUrl+"?"+$.param({SERVICE:"WMS",VERSION:"1.1.1",REQUEST:"getlegendgraphic",FORMAT:"image/png",LAYER:this.config.layerName,STYLE:this.config.styleName});return SMK.UTIL.makePromise(function(e,t){try{$("<img>").on("load",function(){e([{url:r}])}).on("error",function(e){t(new Error("Unable to load: "+r))}).attr("src",r).get(0).complete&&e([{url:r}])}catch(e){t(e)}})},e.prototype.getFeaturesAtPoint=function(e,t,r){var n=this.config.serviceUrl,o=this.config.layerName,i=this.config.styleName,s="1.1.1",a={service:"WMS",version:s,request:"GetFeatureInfo",bbox:t.extent.join(","),feature_count:20,height:t.screen.height,width:t.screen.width,info_format:"application/json",layers:o,query_layers:o,styles:i,buffer:r.tolerance,srs:"EPSG:4326"};a.x=parseInt(e.screen.x),a.y=parseInt(e.screen.y);var u={method:"GET",url:n,data:a,xhrFields:{}};return SMK.UTIL.makePromise(function(e,t){$.ajax(u).then(e,t)}).then(function(t){if(!t||!t.features||0==t.features.length)throw new Error("no features");if(!t.crs)return t;if(t.crs.properties&&!t.crs.properties.name)throw new Error("unable to determine CRS from: "+JSON.stringify(t.crs));return SMK.UTIL.getProjection(t.crs.properties.name).then(function(e){return SMK.UTIL.reprojectGeoJSON(t,e)})}).then(function(e){return e.features})},e.prototype.getFeaturesInArea=function(e,t,r){var n=this,o='<Filter xmlns:gml="http://www.opengis.net/gml"><Intersects><PropertyName></PropertyName><gml:Polygon srsName="http://www.opengis.net/gml/srs/epsg.xml#4326" xmlns:gml="http://www.opengis.net/gml"><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates decimal="." cs="," ts=" ">'+e.geometry.coordinates[0].map(function(e){return e.join(",")}).join(" ")+"</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></Intersects></Filter>",i={service:"WFS",version:"1.0.0",request:"GetFeature",srsName:"EPSG:4326",typename:this.config.layerName,outputformat:"application/json",filter:o};return SMK.UTIL.makePromise(function(e,t){$.ajax({url:n.config.serviceUrl,method:"GET",data:i,dataType:"json"}).then(e,t)}).then(function(e){if(!e)throw new Error("no features");if(!e.features||0==e.features.length)throw new Error("no features");return e.features.map(function(e,t){return n.config.titleAttribute?e.title=e.properties[n.config.titleAttribute]:e.title="Feature #"+(t+1),e})})}});} },
            { loader: "script", url: "smk/layer/layer.js", load: function () { console.debug( "[smk/layer/layer.js]" ); include.module("layer.layer-js",["jquery","util","event"],function(){"use strict";var i=SMK.TYPE.Event.define(["startedLoading","finishedLoading","changedFeature"]);function e(e){var t=this;i.prototype.constructor.call(this),$.extend(this,{config:e});var n=!1;Object.defineProperty(this,"loading",{get:function(){return n},set:function(e){!!e!=n&&(n=!!e,e?t.startedLoading():t.finishedLoading())}}),Object.defineProperty(this,"id",{get:function(){return e.id}})}$.extend(e.prototype,i.prototype),(SMK.TYPE.Layer=e).prototype.initialize=function(e){},e.prototype.hasChildren=function(){return!1},e.prototype.initLegends=function(){return SMK.UTIL.resolved()},e.prototype.getLegends=function(n){var i=this;return this.legendPromise||(this.legendPromise=SMK.UTIL.makePromise(function(e,t){e(i.initLegends(n))})),this.legendPromise},e.prototype.getFeaturesAtPoint=function(e){},e.prototype.canMergeWith=function(e){return!1},e.prototype.inScaleRange=function(e){return!(this.config.maxScale&&e.scale<this.config.maxScale)&&!(this.config.minScale&&e.scale>this.config.minScale)},e.prototype.getConfig=function(){return this.config}});} }
        ] }
    );
    include.tag( "layer-display",
        { loader: "script", url: "smk/layer-display.js", load: function () { console.debug( "[smk/layer-display.js]" ); include.module("layer-display",["jquery","util","event"],function(){"use strict";function n(i,t){Object.assign(this,{id:SMK.UTIL.makeId(i.type,i.title),type:null,title:i.id,isVisible:!0,isActuallyVisible:null,isEnabled:!0,isInternal:!1,inFilter:!0,showLegend:!1,showItem:!0,legends:null,alwaysShowLegend:!1,class:null,metadataUrl:null},i),t&&(this.isVisible=!0)}function o(i,t,e){if(!i["#type"]){if(i.type||(i.type="layer"),i.type in n)return new n[i.type](i,t,e);throw new Error("invalid layer display type")}}(SMK.TYPE.LayerDisplay=n).prototype.getVisible=function(i){return this.isVisible},n.prototype.getConfig=function(){return{id:this.id,type:this.type,title:this.title,isVisible:this.isVisible,isEnabled:this.isEnabled,class:this.class}},n.layer=function(s,o,i){var r=this;if(!s["#id"]){if(!s.id)throw new Error("display layer needs id");n.prototype.constructor.call(this,s,i),s.title||t("title",s.id),"isVisible"in s||t("isVisible",!0),i&&(this.isVisible=!0),t("scaleMin"),t("scaleMax"),"class"in s||t("class"),t("legends"),t("metadataUrl")}function t(i,t){var e,n=!1;Object.defineProperty(r,i,{get:function(){return n?e:o[s.id]?(n=!0,null==(e=o[s.id].config[i])&&(e=t),e):(console.warn('layer id "'+s.id+"\" isn't defined"),r.isEnabled=!1,r.isVisible=!1,n=!0,t)},set:function(i){return n=!0,e=i}})}},$.extend(n.layer.prototype,n.prototype),n.layer.prototype.each=function(i,t){this.isEnabled&&i&&i(this,t)},n.layer.prototype.getLegends=function(i,t,e){var n=this;return this.isEnabled?i[this.id].getLegends(t).then(function(i){return i.map(function(i){return i.isVisible=function(){return e.isItemVisible(n.id)},i})}):SMK.UTIL.resolved()},n.layer.prototype.getVisible=function(i){return i&&this.isVisible?!!this.isEnabled&&(!(this.scaleMin&&this.scaleMin<i)&&!(this.scaleMax&&this.scaleMax>i)):this.isVisible},n.folder=function(i,t,e){i["#id"]||(i.id||(i.id=SMK.UTIL.makeId(i.type,i.title)),n.prototype.constructor.call(this,Object.assign({isExpanded:!1},i),e),this.items=i.items.map(function(i){return o(i,t,e)}))},$.extend(n.folder.prototype,n.prototype),n.folder.prototype.each=function(t,i){var e;i||(i=[]),t&&(e=t(this,i));var n=[this].concat(i);!1!==e&&this.items.forEach(function(i){i.each(t,n)})},n.folder.prototype.getLegends=function(i,t){return SMK.UTIL.resolved()},n.folder.prototype.getConfig=function(){var i=n.prototype.getConfig.call(this);return i.items=this.items.map(function(i){return i.getConfig()}),i},n.group=function(i,t,e){n.prototype.constructor.call(this,Object.assign(i,{isExpanded:!0}),e),this.items=i.items.map(function(i){return o(i,t,!0)})},$.extend(n.group.prototype,n.folder.prototype);var r=SMK.TYPE.Event.define(["changedVisibility"]);function i(i,t){var n=this;r.prototype.constructor.call(this),this.root=o({id:"root",type:"folder",isExpanded:!0,isVisible:!0,items:i},t),this.itemId={},this.layerIds=[];var e,s=(e=1e3,function(){return e+=1});this.root.each(function(i,t){if(i.id in n.itemId)if("layer"==i.type)console.warn('Layer "'+i.id+'" is duplicated in layer display'),i.isEnabled=!1;else{console.warn(i.type+' "'+i.id+'" is duplicated in layer display');for(var e=i.id;i.id=SMK.UTIL.makeId(e,s()),i.id in n.itemId;);}n.itemId[i.id]=[i].concat(t),"layer"==i.type&&i.isEnabled&&(i.index=n.layerIds.length,n.layerIds.push(i.id))}),this.changedVisibility(function(){n.root.each(function(i){i.isActuallyVisible=n.isItemVisible(i.id)})}),this.changedVisibility()}SMK.TYPE.LayerDisplayContext=i,$.extend(i.prototype,r.prototype),i.prototype.getItem=function(i){if(i in this.itemId)return this.itemId[i][0]},i.prototype.getLayerIds=function(){return this.layerIds},i.prototype.getLayerIndex=function(i){if(i in this.itemId)return"layer"==this.itemId[i][0].type?this.itemId[i][0].index:void 0},i.prototype.setItemEnabled=function(i,t){if(i in this.itemId){var e=this.itemId[i];"layer"==e[0].type&&(e[0].isEnabled=t)}},i.prototype.setFolderExpanded=function(i,t){i in this.itemId&&"folder"==this.itemId[i][0].type&&(this.itemId[i][0].isExpanded=t)},i.prototype.isItemVisible=function(i){var e=this.view&&this.view.scale;return i in this.itemId&&this.itemId[i].reduce(function(i,t){return i&&t.getVisible(e)},!0)},i.prototype.setItemVisible=function(i,t,e){if(i in this.itemId){var n=this.itemId[i];return!("layer"==n[0].type&&!n[0].isEnabled)&&(t?n.forEach(function(i){i.isVisible=!0}):n[0].isVisible=!1,e&&n[0].each(function(i){if(i.isVisible=t,"group"==i.type)return!1}),this.changedVisibility(),t)}},i.prototype.setLegendsVisible=function(i,e,n){var s=this;this.root.each(function(t){if(i){if(!1===t.legends)return;if("waiting"==t.showLegend)return;if(t.legends)return void(t.showLegend=!0);t.showLegend="waiting",t.getLegends(e,n,s).then(function(i){t.legends=i,"waiting"==t.showLegend&&(t.showLegend=!0)},function(){t.legends=!1,t.showLegend=!1})}else t.showLegend=!1})},i.prototype.setFilter=function(t){var e=this;this.root.each(function(i){if(i.inFilter=!1,t.test(i.title)&&e.itemId[i.id].forEach(function(i){i.inFilter=!0}),"group"==i.type)return!1})},i.prototype.setView=function(i){this.view=i,this.changedVisibility()},i.prototype.getConfig=function(){return this.root.items.map(function(i){return i.getConfig()})}});} }
    );
    include.tag( "layer-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/layer/layer-esri-dynamic-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/layer/layer-esri-dynamic-esri3d.js]" ); include.module("layer-esri3d.layer-esri-dynamic-esri3d-js",["layer.layer-esri-dynamic-js","types-esri3d"],function(){"use strict";var s=SMK.TYPE.Esri3d,o=s.layers.BaseDynamicLayer.createSubclass({properties:{serviceUrl:null,dynamicLayers:null},getImageUrl:function(e,r,i){var n=e.spatialReference.isWebMercator?3857:e.spatialReference.wkid,a={bbox:[e.xmin,e.ymin,e.xmax,e.ymax].join(","),size:r+","+i,dpi:96,format:"png24",transparent:!0,bboxSR:n,imageSR:n,dynamicLayers:JSON.stringify(this.dynamicLayers),f:"json"},t=this.serviceUrl+"/export?"+Object.keys(a).map(function(e){return e+"="+encodeURIComponent(a[e])}).join("&");return s.request(t).then(function(e){return e.data.href})}});function e(){SMK.TYPE.Layer["esri-dynamic"].prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer["esri-dynamic"].prototype),SMK.TYPE.Layer["esri-dynamic"].esri3d=e,SMK.TYPE.Layer["esri-dynamic"].esri3d.create=function(i,e){if(1!=i.length)throw new Error("only 1 config allowed");var r=i[0].config.serviceUrl,n=i[0].config.dynamicLayers.map(function(e){return JSON.parse(e)}),a=i[0].config.opacity,t=r.replace(/^(\w+:)?[/][/]/,"").replace(/[/].*$/,"");-1==s.config.request.corsEnabledServers.indexOf(t)&&s.config.request.corsEnabledServers.push(t);var c=o({serviceUrl:r,dynamicLayers:n,opacity:a});return c.on("layerview-create",function(e){s.core.watchUtils.watch(e.layerView,"updating",function(r){i.forEach(function(e){e.loading=r})})}),c}});} },
            { loader: "script", url: "smk/viewer-esri3d/layer/layer-vector-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/layer/layer-vector-esri3d.js]" ); include.module("layer-esri3d.layer-vector-esri3d-js",["layer.layer-vector-js","types-esri3d","util-esri3d","turf"],function(){"use strict";var s=SMK.TYPE.Esri3d;function e(){SMK.TYPE.Layer.vector.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.vector.prototype),(SMK.TYPE.Layer.vector.esri3d=e).prototype.getFeaturesInArea=function(o,e,r){if(r.layer){var n=[];return r.layer.graphics.forEach(function(e){var r=e.attributes._geojsonGeometry,t={type:"Feature",properties:Object.assign({},e.attributes),geometry:r};switch(delete t.properties._geojsonGeometry,r.type){case"Polygon":turf.intersect(t,o)&&n.push(t);break;case"MultiPolygon":r.coordinates.reduce(function(e,r){return e||!!turf.intersect(turf.polygon(r),o)},!1)&&n.push(t);break;case"LineString":turf.booleanCrosses(o,t)&&n.push(t);break;case"MultiLineString":turf.segmentReduce(t,function(e,r){return e||turf.booleanCrosses(o,r)},!1)&&n.push(t);break;case"Point":case"MultiPoint":turf.coordReduce(t,function(e,r){return e||turf.booleanPointInPolygon(r,o)},!1)&&n.push(t);break;default:console.warn("skip",r.type)}}),n}},SMK.TYPE.Layer.vector.esri3d.create=function(t,e){var o=this;if(1!=t.length)throw new Error("only 1 config allowed");var n=this.resolveAttachmentUrl(t[0].config.dataUrl,t[0].config.id,"json");return SMK.UTIL.makePromise(function(r,e){$.get(n,null,null,"json").then(function(e){r(e)},function(){e("request to "+n+" failed")})}).then(function(e){var r=SMK.UTIL.smkStyleToEsriSymbol(t[0].config.style,o);return new s.layers.GraphicsLayer({graphics:SMK.UTIL.geoJsonToEsriGeometry(e,function(e){return r[e]})})})}});} },
            { loader: "script", url: "smk/viewer-esri3d/layer/layer-wms-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/layer/layer-wms-esri3d.js]" ); include.module("layer-esri3d.layer-wms-esri3d-js",["layer.layer-wms-js","types-esri3d"],function(){"use strict";function e(){SMK.TYPE.Layer.wms.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.wms.prototype),SMK.TYPE.Layer.wms.esri3d=e;var n=SMK.TYPE.Esri3d,c=n.layers.BaseDynamicLayer.createSubclass({properties:{serviceUrl:null,layerNames:[],styleNames:[]},getImageUrl:function(e,r,a){var s=e.spatialReference.isWebMercator?3857:e.spatialReference.wkid,t={service:"WMS",request:"GetMap",version:"1.1.1",layers:this.layerNames.join(","),styles:this.styleNames.join(","),format:"image/png",transparent:"true",srs:"EPSG:"+s,width:r,height:a,bbox:[e.xmin,e.ymin,e.xmax,e.ymax].join(",")};return this.serviceUrl+"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}});SMK.TYPE.Layer.wms.esri3d.create=function(a,e){var r=a[0].config.serviceUrl,s=a[0].config.opacity,t=r.replace(/^(\w+:)?[/][/]/,"").replace(/[/].*$/,"");-1==n.config.request.corsEnabledServers.indexOf(t)&&n.config.request.corsEnabledServers.push(t);var i=c({serviceUrl:r,layerNames:a.map(function(e){return e.config.layerName}),styleNames:a.map(function(e){return e.config.styleName}),opacity:s});return i.on("layerview-create",function(e){n.core.watchUtils.watch(e.layerView,"updating",function(r){a.forEach(function(e){e.loading=r})})}),i}});} }
        ] }
    );
    include.tag( "layer-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/layer/layer-esri-dynamic-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/layer/layer-esri-dynamic-leaflet.js]" ); include.module("layer-leaflet.layer-esri-dynamic-leaflet-js",["layer.layer-esri-dynamic-js"],function(){"use strict";function e(){SMK.TYPE.Layer["esri-dynamic"].prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer["esri-dynamic"].prototype),SMK.TYPE.Layer["esri-dynamic"].leaflet=e,SMK.TYPE.Layer["esri-dynamic"].leaflet.create=function(a,r){if(1!=a.length)throw new Error("only 1 config allowed");var e,n=a[0].config.serviceUrl;a[0].config.dynamicLayers&&(e=a[0].config.dynamicLayers.map(function(e){return JSON.parse(e)}));var i,o,c,t=a[0].config.opacity;return a[0].config.minScale&&(i=this.getZoomBracketForScale(a[0].config.minScale)[1]),a[0].config.maxScale&&(o=this.getZoomBracketForScale(a[0].config.maxScale)[1]),(c=e?L.esri.dynamicMapLayer({url:n,opacity:t,dynamicLayers:e,maxZoom:o,minZoom:i}):L.esri.featureLayer({url:n,where:a[0].config.where})).on("load",function(e){c._currentImage&&c._currentImage.setZIndex(r),a[0].loading=!1}),c.on("loading",function(e){a[0].loading=!0}),c}});} },
            { loader: "script", url: "smk/viewer-leaflet/layer/layer-esri-feature-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/layer/layer-esri-feature-leaflet.js]" ); include.module("layer-leaflet.layer-esri-feature-leaflet-js",["layer.layer-esri-feature-js"],function(){"use strict";function e(){SMK.TYPE.Layer["esri-feature"].prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer["esri-feature"].prototype),SMK.TYPE.Layer["esri-feature"].leaflet=e,SMK.TYPE.Layer["esri-feature"].leaflet.create=function(n,r){if(1!=n.length)throw new Error("only 1 config allowed");var e={url:n[0].config.serviceUrl};n[0].config.scaleMin&&(e.minZoom=this.getZoomBracketForScale(n[0].config.scaleMin)[1]),n[0].config.scaleMax&&(e.maxZoom=this.getZoomBracketForScale(n[0].config.scaleMax)[1]),n[0].config.where&&(e.where=n[0].config.where),n[0].config.drawingInfo&&(e.drawingInfo=n[0].config.drawingInfo,e.drawingInfo.renderer&&e.drawingInfo.renderer.symbol&&e.drawingInfo.renderer.symbol.url&&(e.drawingInfo.renderer.symbol.url=new URL(e.drawingInfo.renderer.symbol.url,document.location).toString()));var o=L.esri.featureLayer(e);return n[0].legendCacheResolve&&o.legend(function(e,r){n[0].legendCacheResolve(e?null:r.layers[0].legend),n[0].legendCacheResolve=null}),o.on("load",function(e){o._currentImage&&o._currentImage.setZIndex(r),n[0].loading=!1}),o.on("loading",function(e){n[0].loading=!0}),o}});} },
            { loader: "script", url: "smk/viewer-leaflet/layer/layer-esri-tiled-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/layer/layer-esri-tiled-leaflet.js]" ); include.module("layer-leaflet.layer-esri-tiled-leaflet-js",["layer.layer-esri-tiled-js"],function(){"use strict";function e(){SMK.TYPE.Layer["esri-tiled"].prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer["esri-tiled"].prototype),SMK.TYPE.Layer["esri-tiled"].leaflet=e,SMK.TYPE.Layer["esri-tiled"].leaflet.create=function(r,t){if(1!=r.length)throw new Error("only 1 config allowed");var e=r[0].config.serviceUrl;r[0].config.opacity;r[0].config.minScale&&this.getZoomBracketForScale(r[0].config.minScale)[1],r[0].config.maxScale&&this.getZoomBracketForScale(r[0].config.maxScale)[1];var i=L.esri.tiledMapLayer({url:e});return i.on("load",function(e){i._currentImage&&i._currentImage.setZIndex(t),r[0].loading=!1}),i.on("loading",function(e){r[0].loading=!0}),i}});} },
            { loader: "script", url: "smk/viewer-leaflet/layer/layer-vector-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/layer/layer-vector-leaflet.js]" ); include.module("layer-leaflet.layer-vector-leaflet-js",["layer.layer-vector-js","turf"],function(){"use strict";function e(){SMK.TYPE.Layer.vector.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.vector.prototype),(SMK.TYPE.Layer.vector.leaflet=e).prototype.getFeaturesInArea=function(r,e,t){if(t.layer){var n=[];return t.layer.eachLayer(function(e){var t=e.toGeoJSON();switch(t.geometry.type){case"Polygon":turf.intersect(t,r)&&n.push(t);break;case"MultiPolygon":t.geometry.coordinates.reduce(function(e,t){return e||!!turf.intersect(turf.polygon(t),r)},!1)&&n.push(t);break;case"LineString":turf.booleanCrosses(r,t)&&n.push(t);break;case"MultiLineString":turf.segmentReduce(t,function(e,t){return e||turf.booleanCrosses(r,t)},!1)&&n.push(t);break;case"Point":case"MultiPoint":turf.coordReduce(t,function(e,t){return e||turf.booleanPointInPolygon(t,r)},!1)&&n.push(t);break;default:console.warn("skip",t.geometry.type)}}),n}},e.prototype.getFeaturesAtPoint=function(e,t,r){if(r.layer){var n=[],o=[e.map.longitude,e.map.latitude],a=r.tolerance*t.metersPerPixel/1e3;return r.layer.eachLayer(function(e){var t=e.toGeoJSON();switch(t.geometry.type){case"Polygon":case"MultiPolygon":turf.booleanPointInPolygon(o,t)&&n.push(t);break;case"LineString":case"MultiLineString":turf.segmentReduce(t,function(e,t){return e||turf.pointToLineDistance(o,t)<a},!1)&&n.push(t);break;case"Point":case"MultiPoint":turf.coordReduce(t,function(e,t){return e||turf.distance(t,o)<a},!1)&&n.push(t);break;default:console.warn("skip",t.geometry.type)}}),n}},e.prototype.getConfig=function(e){var t=JSON.parse(JSON.stringify(SMK.TYPE.Layer.vector.prototype.getConfig.call(this)));if(t.isInternal&&e){var r=e.toGeoJSON();r&&(t.dataUrl="data:application/json,"+JSON.stringify(r),t.isInternal=!1)}return t},SMK.TYPE.Layer.vector.leaflet.create=function(i,t){var l=this;if(1!=i.length)throw new Error("only 1 config allowed");if(1<i[0].useClustering+i[0].useHeatmap+i[0].useRaw)throw new Error("raw or heatmap or clustering");var c=[].concat(i[0].config.style);return SMK.UTIL.resolved().then(function(){return i[0].config.projection?SMK.UTIL.getProjection(i[0].config.projection).then(function(r){return function(e){var t=r(e);return L.latLng(t[1],t[0])}}):L.GeoJSON.coordsToLatLng}).then(function(e){var o=new L.geoJson(null,{coordsToLatLng:e,pointToLayer:function(r,e){return(t=l,n=e,o=c[0],a=i[0].config,o&&o.markerUrl?L.marker(n,{icon:L.icon({iconUrl:t.resolveAttachmentUrl(o.markerUrl,null,"png"),shadowUrl:t.resolveAttachmentUrl(o.shadowUrl,null,"png",!1),iconSize:o.markerSize,iconAnchor:o.markerOffset,popupAnchor:o.popupOffset,shadowSize:o.shadowSize}),interactive:!!a.isDraggable,draggable:!!a.isDraggable}):L.circleMarker(n,{interactive:!1})).on("moveend",function(e){var t=e.target.getLatLng();i[0].changedFeature({newPt:{latitude:t.lat,longitude:t.lng},geojson:r})});var t,n,o,a},onEachFeature:function(e,t){t.setStyle&&t.setStyle(function(e,t){if(!e)return{};return"Point"==t||"MultiPoint"==t?{radius:e.strokeWidth/2,color:e.strokeColor,weight:2,opacity:e.strokeOpacity,fillColor:e.fillColor,fillOpacity:e.fillOpacity,stroke:!1!==e.stroke,fill:e.fill}:{stroke:!1!==e.stroke,color:e.strokeColor,weight:e.strokeWidth||0,opacity:e.strokeOpacity,lineCap:e.strokeCap,lineJoin:e.strokeJoin,dashArray:e.strokeDashes,dashOffset:e.strokeDashOffset,fill:e.fill,fillColor:e.fillColor,fillOpacity:e.fillOpacity}}(e.style,e.geometry.type))},renderer:L.svg(),interactive:!1});if(i[0].config.tooltip&&o.bindTooltip(i[0].config.tooltip.title,Object.assign({permanent:!0},i[0].config.tooltip.option)),o.on({add:function(){o.options.renderer._container&&(o.options.renderer._container.style.zIndex=t)}}),i[0].config.CRS||(i[0].config.CRS="EPSG4326"),i[0].loadLayer=function(e){turf.featureEach(e,function(r){c.forEach(function(e,t){0<t&&(r=turf.clone(r)),r.style=e,o.addData(r)})})},i[0].loadCache&&(i[0].loadLayer(i[0].loadCache),i[0].loadCache=null),i[0].clearLayer=function(){o.clearLayers()},i[0].config.isInternal)return o;var a=l.resolveAttachmentUrl(i[0].config.dataUrl,i[0].config.id,"json");return SMK.UTIL.makePromise(function(e,n){$.get(a,null,null,"json").then(e,function(e,t,r){n("Failed requesting "+a+": "+e.status+","+r)})}).then(function(e){console.log("loaded",a);var n=[];return turf.featureEach(e,function(r){c.forEach(function(e,t){0<t&&(r=turf.clone(r)),r.style=e,n.push(r)})}),o.addData(turf.featureCollection(n)),o}).then(function(e){if(!i[0].config.useClustering)return e;var t=L.markerClusterGroup(function(r,n){if(!r.clusterStyle)return;var e={};return e.iconCreateFunction=function(e){var t=$("<div>").append($("<img>").attr("src",n.resolveAttachmentUrl(r.clusterStyle.markerUrl,null,"png"))).append($("<span>").text(e.getChildCount())).get(0).innerHTML;return L.divIcon({className:"smk-cluster-icon",html:t,iconSize:r.clusterStyle.markerSize,iconAnchor:r.clusterStyle.markerOffset})},e}(i[0].config,l));return t.addLayers([e]),t}).then(function(e){if(!i[0].config.useHeatmap)return e;var r=[];return e.eachLayer(function(e){var t=turf.centroid(e.feature.geometry);r.push([t.geometry.coordinates[1],t.geometry.coordinates[0],100])}),L.heatLayer(r,{radius:25})})})}});} },
            { loader: "script", url: "smk/viewer-leaflet/layer/layer-wms-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/layer/layer-wms-leaflet.js]" ); include.module("layer-leaflet.layer-wms-leaflet-js",["layer.layer-wms-js"],function(){"use strict";function e(){SMK.TYPE.Layer.wms.prototype.constructor.apply(this,arguments)}$.extend(e.prototype,SMK.TYPE.Layer.wms.prototype),SMK.TYPE.Layer.wms.leaflet=e,SMK.TYPE.Layer.wms.leaflet.create=function(t,r){var o=t[0].config.serviceUrl,i=t.map(function(e){return e.config.layerName}).join(","),a=t.map(function(e){return e.config.styleName}).join(","),s=t[0].config.version||"1.1.1",c=t[0].config.attribution,l=t[0].config.opacity,f=t.map(function(e){return e.config.where||"include"}).join(";");return function(e,n){if(!n)return Promise.resolve();if(n.startsWith("@")){var t=n.substr(1);return fetch(t).then(function(e){if(200!==e.status)throw Error("fetching "+t+": "+e.statusText);return e.text()}).then(function(e){return e.replace(/\s+/g," ").replace(/[>] [<]/g,"><")}).catch(function(e){console.warn(e)})}return Promise.resolve(n)}(0,t[0].config.sld).then(function(e){var n=L.nonTiledLayer.wms(o,{layers:i,styles:a,version:s,attribution:c,opacity:l,format:"image/png",transparent:!0,zIndex:r,cql_filter:f});return e&&(n.wmsParams.sld_body=e,delete n.wmsParams.styles),n.on("load",function(e){t.forEach(function(e){e.loading=!1})}),n.on("loading",function(e){t.forEach(function(e){e.loading=!0})}),n})}});} },
            { loader: "style", url: "lib/leaflet/marker-cluster-1.0.6.css", load: "/* [lib/leaflet/marker-cluster-1.0.6.css] */\n.leaflet-cluster-anim .leaflet-marker-icon,.leaflet-cluster-anim .leaflet-marker-shadow{-webkit-transition:-webkit-transform .3s ease-out,opacity .3s ease-in;-moz-transition:-moz-transform .3s ease-out,opacity .3s ease-in;-o-transition:-o-transform .3s ease-out,opacity .3s ease-in;transition:transform .3s ease-out,opacity .3s ease-in}.leaflet-cluster-spider-leg{-webkit-transition:-webkit-stroke-dashoffset .3s ease-out,-webkit-stroke-opacity .3s ease-in;-moz-transition:-moz-stroke-dashoffset .3s ease-out,-moz-stroke-opacity .3s ease-in;-o-transition:-o-stroke-dashoffset .3s ease-out,-o-stroke-opacity .3s ease-in;transition:stroke-dashoffset .3s ease-out,stroke-opacity .3s ease-in}" },
            { loader: "script", url: "lib/leaflet/marker-cluster-1.0.6.js", load: function () { console.debug( "[lib/leaflet/marker-cluster-1.0.6.js]" ); !function(e,t,g){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(r,s){if(!L.Util.isArray(r))return this.addLayer(r);var o,a=this._featureGroup,h=this._nonPointGroup,l=this.options.chunkedLoading,_=this.options.chunkInterval,u=this.options.chunkProgress,d=r.length,c=0,p=!0;if(this._map){var f=(new Date).getTime(),m=L.bind(function(){for(var e=(new Date).getTime();c<d;c++){if(l&&c%200==0){var t=(new Date).getTime()-e;if(_<t)break}if((o=r[c])instanceof L.LayerGroup)p&&(r=r.slice(),p=!1),this._extractNonGroupLayers(o,r),d=r.length;else if(o.getLatLng){if(!this.hasLayer(o)&&(this._addLayer(o,this._maxZoom),s||this.fire("layeradd",{layer:o}),o.__parent&&2===o.__parent.getChildCount())){var i=o.__parent.getAllChildMarkers(),n=i[0]===o?i[1]:i[0];a.removeLayer(n)}}else h.addLayer(o),s||this.fire("layeradd",{layer:o})}u&&u(c,d,(new Date).getTime()-f),c===d?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var e=this._needsClustering;c<d;c++)(o=r[c])instanceof L.LayerGroup?(p&&(r=r.slice(),p=!1),this._extractNonGroupLayers(o,r),d=r.length):o.getLatLng?this.hasLayer(o)||e.push(o):h.addLayer(o);return this},removeLayers:function(e){var t,i,n=e.length,r=this._featureGroup,s=this._nonPointGroup,o=!0;if(!this._map){for(t=0;t<n;t++)(i=e[t])instanceof L.LayerGroup?(o&&(e=e.slice(),o=!1),this._extractNonGroupLayers(i,e),n=e.length):(this._arraySplice(this._needsClustering,i),s.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var a=e.slice(),h=n;for(t=0;t<h;t++)(i=a[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,a),h=a.length):this._unspiderfyLayer(i)}for(t=0;t<n;t++)(i=e[t])instanceof L.LayerGroup?(o&&(e=e.slice(),o=!1),this._extractNonGroupLayers(i,e),n=e.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),r.hasLayer(i)&&(r.removeLayer(i),i.clusterShow&&i.clusterShow())):(s.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i,n,r,s=this._needsClustering.slice(),o=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(s),n=s.length-1;0<=n;n--){for(i=!0,r=o.length-1;0<=r;r--)if(o[r].layer===s[n]){i=!1;break}i&&e.call(t,s[n])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var i=null;return t=parseInt(t,10),this.eachLayer(function(e){L.stamp(e)===t&&(i=e)}),i},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;0<=t;t--)if(i[t]===e)return!0;for(t=(i=this._needsRemoving).length-1;0<=t;t--)if(i[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var i=function(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",i,this),this.off("animationend",i,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,i,n;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;t<i;t++)(n=this._needsRemoving[t]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(t=0,i=this._needsRemoving.length;t<i;t++)n=this._needsRemoving[t],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;0<=i;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());r<=t&&n[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){e.target.__dragStart&&this._moveChild(e.target,e.target.__dragStart,e.target._latlng),delete e.target.__dragStart},_removeLayer:function(e,t,i){var n=this._gridClusters,r=this._gridUnclustered,s=this._featureGroup,o=this._map,a=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var h,l=e.__parent,_=l._markers;for(this._arraySplice(_,e);l&&(l._childCount--,l._boundsNeedUpdate=!0,!(l._zoom<a));)t&&l._childCount<=1?(h=l._markers[0]===e?l._markers[1]:l._markers[0],n[l._zoom].removeObject(l,o.project(l._cLatLng,l._zoom)),r[l._zoom].addObject(h,o.project(h.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(h),h.__parent=l.__parent,l._icon&&(s.removeLayer(l),i||s.addLayer(h))):l._iconNeedsUpdate=!0,l=l.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return i+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(t||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,i=t;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(e||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;"function"!=typeof i&&(n=function(){return i}),null!==this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var r=e;t<=r;r--)this._gridClusters[r]=new L.DistanceGrid(n(r)),this._gridUnclustered[r]=new L.DistanceGrid(n(r));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i,n,r=this._gridClusters,s=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);o<=t;t--){i=this._map.project(e.getLatLng(),t);var a=r[t].getNearObject(i);if(a)return a._addChild(e),void(e.__parent=a);if(a=s[t].getNearObject(i)){var h=a.__parent;h&&this._removeLayer(a,!1);var l=new this._markerCluster(this,t,a,e);r[t].addObject(l,this._map.project(l._cLatLng,t)),a.__parent=l;var _=e.__parent=l;for(n=t-1;n>h._zoom;n--)_=new this._markerCluster(this,n,_),r[n].addObject(_,this._map.project(a.getLatLng(),n));return h._addChild(_),void this._removeFromGridUnclustered(a,t)}s[t].addObject(e,i)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==g&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i,n=e.getLayers(),r=0;for(t=t||[];r<n.length;r++)(i=n[r])instanceof L.LayerGroup?this._extractNonGroupLayers(i,t):t.push(i);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(r,s){var o,a=this._getExpandedVisibleBounds(),h=this._featureGroup,e=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(a,r,e,function(e){var t,i=e._latlng,n=e._markers;for(a.contains(i)||(i=null),e._isSingleParent()&&r+1===s?(h.removeLayer(e),e._recursivelyAddChildrenToMap(null,s,a)):(e.clusterHide(),e._recursivelyAddChildrenToMap(i,s,a)),o=n.length-1;0<=o;o--)t=n[o],a.contains(t._latlng)||h.removeLayer(t)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(a,s),h.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(a,r,s,function(e){e._recursivelyRestoreChildPositions(s)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(a,r,e,function(e){h.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,n=this._featureGroup;n.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){n.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,i,n){var r=this._getExpandedVisibleBounds(),s=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(r,s,i+1,n);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(r,n),this._enqueue(function(){if(1===t._childCount){var e=t._markers[0];this._ignoreMove=!0,e.setLatLng(e.getLatLng()),this._ignoreMove=!1,e.clusterShow&&e.clusterShow()}else t._recursively(r,n,s,function(e){e._recursivelyRemoveChildrenFromMap(r,s,i+1)});o._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;0<=t;t--)this._childClusters[t].getAllChildMarkers(e);for(var i=this._markers.length-1;0<=i;i--)e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,i=this._childClusters.slice(),n=this._group._map,r=n.getBoundsZoom(this._bounds),s=this._zoom+1,o=n.getZoom();0<i.length&&s<r;){s++;var a=[];for(t=0;t<i.length;t++)a=a.concat(i[t]._childClusters);i=a}s<r?this._group._map.setView(this._latlng,s):r<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,i,n,r=this._markers,s=this._childClusters,o=0,a=0,h=this._childCount;if(0!==h){for(this._resetBounds(),e=0;e<r.length;e++)i=r[e]._latlng,this._bounds.extend(i),o+=i.lat,a+=i.lng;for(e=0;e<s.length;e++)(t=s[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),i=t._wLatLng,n=t._childCount,o+=i.lat*n,a+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(o/h,a/h),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,r,t){this._recursively(e,this._group._map.getMinZoom(),t-1,function(e){var t,i,n=e._markers;for(t=n.length-1;0<=t;t--)(i=n[t])._icon&&(i._setPos(r),i.clusterHide())},function(e){var t,i,n=e._childClusters;for(t=n.length-1;0<=t;t--)(i=n[t])._icon&&(i._setPos(r),i.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,i,n,r){this._recursively(t,r,i,function(e){e._recursivelyAnimateChildrenIn(t,e._group._map.latLngToLayerPoint(e.getLatLng()).round(),n),e._isSingleParent()&&n-1===r?(e.clusterShow(),e._recursivelyRemoveChildrenFromMap(t,i,n)):e.clusterHide(),e._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(n,r,s){this._recursively(s,this._group._map.getMinZoom()-1,r,function(e){if(r!==e._zoom)for(var t=e._markers.length-1;0<=t;t--){var i=e._markers[t];s.contains(i._latlng)&&(n&&(i._backupLatlng=i.getLatLng(),i.setLatLng(n),i.clusterHide&&i.clusterHide()),e._group._featureGroup.addLayer(i))}},function(e){e._addToMap(n)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n]._restorePosition();else for(var r=this._childClusters.length-1;0<=r;r--)this._childClusters[r]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,n){var r,s;this._recursively(e,t-1,i-1,function(e){for(s=e._markers.length-1;0<=s;s--)r=e._markers[s],n&&n.contains(r._latlng)||(e._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(e){for(s=e._childClusters.length-1;0<=s;s--)r=e._childClusters[s],n&&n.contains(r._latlng)||(e._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(e,t,i,n,r){var s,o,a=this._childClusters,h=this._zoom;if(t<=h&&(n&&n(this),r&&h===i&&r(this)),h<t||h<i)for(s=a.length-1;0<=s;s--)o=a[s],e.intersects(o._bounds)&&o._recursively(e,t,i,n,r)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),n=this._getCoord(t.y),r=this._grid,s=r[n]=r[n]||{},o=s[i]=s[i]||[],a=L.Util.stamp(e);this._objectPoint[a]=t,o.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i,n,r=this._getCoord(t.x),s=this._getCoord(t.y),o=this._grid,a=o[s]=o[s]||{},h=a[r]=a[r]||[];for(delete this._objectPoint[L.Util.stamp(e)],i=0,n=h.length;i<n;i++)if(h[i]===e)return h.splice(i,1),1===n&&delete a[r],!0},eachObject:function(e,t){var i,n,r,s,o,a,h=this._grid;for(i in h)for(n in o=h[i])for(r=0,s=(a=o[n]).length;r<s;r++)e.call(t,a[r])&&(r--,s--)},getNearObject:function(e){var t,i,n,r,s,o,a,h,l=this._getCoord(e.x),_=this._getCoord(e.y),u=this._objectPoint,d=this._sqCellSize,c=null;for(t=_-1;t<=_+1;t++)if(r=this._grid[t])for(i=l-1;i<=l+1;i++)if(s=r[i])for(n=0,o=s.length;n<o;n++)a=s[n],(h=this._sqDist(u[L.Util.stamp(a)],e))<d&&(d=h,c=a);return c},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}},L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i,n,r,s=0,o=null,a=[];for(i=t.length-1;0<=i;i--)n=t[i],0<(r=this.getDistant(n,e))&&(a.push(n),s<r&&(s=r,o=n));return{maxPoint:o,newPoints:a}},buildConvexHull:function(e,t){var i=[],n=this.findMostDistantPointFromBaseLine(e,t);return n.maxPoint?i=(i=i.concat(this.buildConvexHull([e[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,e[1]],n.newPoints)):[e[0]]},getConvexHull:function(e){var t,i=!1,n=!1,r=!1,s=!1,o=null,a=null,h=null,l=null,_=null,u=null;for(t=e.length-1;0<=t;t--){var d=e[t];(!1===i||d.lat>i)&&(i=(o=d).lat),(!1===n||d.lat<n)&&(n=(a=d).lat),(!1===r||d.lng>r)&&(r=(h=d).lng),(!1===s||d.lng<s)&&(s=(l=d).lng)}return _=n!==i?(u=a,o):(u=l,h),[].concat(this.buildConvexHull([u,_],e),this.buildConvexHull([_,u],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),n=[];for(t=i.length-1;0<=t;t--)e=i[t].getLatLng(),n.push(e);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e=t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,i):(i.y+=10,this._generatePointsCircle(t.length,i)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i,n,r=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,s=this._2PI/e,o=[];for(i=(o.length=e)-1;0<=i;i--)n=this._circleStartAngle+i*s,o[i]=new L.Point(t.x+r*Math.cos(n),t.y+r*Math.sin(n))._round();return o},_generatePointsSpiral:function(e,t){var i,n=this._group.options.spiderfyDistanceMultiplier,r=n*this._spiralLengthStart,s=n*this._spiralFootSeparation,o=n*this._spiralLengthFactor*this._2PI,a=0,h=[];for(i=(h.length=e)-1;0<=i;i--)a+=s/r+5e-4*i,h[i]=new L.Point(t.x+r*Math.cos(a),t.y+r*Math.sin(a))._round(),r+=o/a;return h},_noanimationUnspiderfy:function(){var e,t,i=this._group,n=i._map,r=i._featureGroup,s=this.getAllChildMarkers();for(i._ignoreMove=!0,this.setOpacity(1),t=s.length-1;0<=t;t--)e=s[t],r.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(n.removeLayer(e._spiderLeg),delete e._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:s}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i,n,r,s,o=this._group,a=o._map,h=o._featureGroup,l=this._group.options.spiderLegPolylineOptions;for(o._ignoreMove=!0,i=0;i<e.length;i++)s=a.layerPointToLatLng(t[i]),n=e[i],r=new L.Polyline([this._latlng,s],l),a.addLayer(r),n._spiderLeg=r,n._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.setZIndexOffset&&n.setZIndexOffset(1e6),h.addLayer(n);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var i,n,r,s,o,a,h=this,l=this._group,_=l._map,u=l._featureGroup,d=this._latlng,c=_.latLngToLayerPoint(d),p=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),m=f.opacity;for(m===g&&(m=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),p?(f.opacity=0,f.className=(f.className||"")+" leaflet-cluster-spider-leg"):f.opacity=m,l._ignoreMove=!0,i=0;i<e.length;i++)n=e[i],a=_.layerPointToLatLng(t[i]),r=new L.Polyline([d,a],f),_.addLayer(r),n._spiderLeg=r,p&&(o=(s=r._path).getTotalLength()+.1,s.style.strokeDasharray=o,s.style.strokeDashoffset=o),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),u.addLayer(n),n._setPos&&n._setPos(c);for(l._forceLayout(),l._animationStart(),i=e.length-1;0<=i;i--)a=_.layerPointToLatLng(t[i]),(n=e[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(a),n.clusterShow&&n.clusterShow(),p&&((s=(r=n._spiderLeg)._path).style.strokeDashoffset=0,r.setStyle({opacity:m}));this.setOpacity(.3),l._ignoreMove=!1,setTimeout(function(){l._animationEnd(),l.fire("spiderfied",{cluster:h,markers:e})},200)},_animationUnspiderfy:function(e){var t,i,n,r,s,o,a=this,h=this._group,l=h._map,_=h._featureGroup,u=e?l._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):l.latLngToLayerPoint(this._latlng),d=this.getAllChildMarkers(),c=L.Path.SVG;for(h._ignoreMove=!0,h._animationStart(),this.setOpacity(1),i=d.length-1;0<=i;i--)(t=d[i])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,o=!0,t._setPos&&(t._setPos(u),o=!1),t.clusterHide&&(t.clusterHide(),o=!1),o&&_.removeLayer(t),c&&(s=(r=(n=t._spiderLeg)._path).getTotalLength()+.1,r.style.strokeDashoffset=s,n.setStyle({opacity:0})));h._ignoreMove=!1,setTimeout(function(){var e=0;for(i=d.length-1;0<=i;i--)(t=d[i])._spiderLeg&&e++;for(i=d.length-1;0<=i;i--)(t=d[i])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<e&&_.removeLayer(t),l.removeLayer(t._spiderLeg),delete t._spiderLeg);h._animationEnd(),h.fire("unspiderfied",{cluster:a,markers:d})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document);} },
            { loader: "style", url: "lib/leaflet/marker-cluster-default-1.0.6.css", load: "/* [lib/leaflet/marker-cluster-default-1.0.6.css] */\n.marker-cluster-small{background-color:rgba(181,226,140,.6)}.marker-cluster-small div{background-color:rgba(110,204,57,.6)}.marker-cluster-medium{background-color:rgba(241,211,87,.6)}.marker-cluster-medium div{background-color:rgba(240,194,12,.6)}.marker-cluster-large{background-color:rgba(253,156,115,.6)}.marker-cluster-large div{background-color:rgba(241,128,23,.6)}.leaflet-oldie .marker-cluster-small{background-color:#b5e28c}.leaflet-oldie .marker-cluster-small div{background-color:#6ecc39}.leaflet-oldie .marker-cluster-medium{background-color:#f1d357}.leaflet-oldie .marker-cluster-medium div{background-color:#f0c20c}.leaflet-oldie .marker-cluster-large{background-color:#fd9c73}.leaflet-oldie .marker-cluster-large div{background-color:#f18017}.marker-cluster{background-clip:padding-box;border-radius:20px}.marker-cluster div{width:30px;height:30px;margin-left:5px;margin-top:5px;text-align:center;border-radius:15px;font:12px \"Helvetica Neue\",Arial,Helvetica,sans-serif}.marker-cluster span{line-height:30px}" },
            { loader: "script", url: "lib/leaflet/NonTiledLayer-src.js", load: function () { console.debug( "[lib/leaflet/NonTiledLayer-src.js]" ); !function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).L||(e.L={})).NonTiledLayer=t()}}(function(){return function a(o,r,h){function d(i,t){if(!r[i]){if(!o[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(u)return u(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var n=r[i]={exports:{}};o[i][0].call(n.exports,function(t){var e=o[i][1][t];return d(e||t)},n,n.exports,a,o,r,h)}return r[i].exports}for(var u="function"==typeof require&&require,t=0;t<h.length;t++)d(h[t]);return d}({1:[function(t,e,i){(function(t){"use strict";var h="undefined"!=typeof window?window.L:void 0!==t?t.L:null;h.NonTiledLayer.WMS=h.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(t,e){this._wmsUrl=t;var i=h.extend({},this.defaultWmsParams);for(var s in e)h.NonTiledLayer.prototype.options.hasOwnProperty(s)||h.Layer&&h.Layer.prototype.options.hasOwnProperty(s)||(i[s]=e[s]);this.wmsParams=i,h.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,h.NonTiledLayer.prototype.onAdd.call(this,t)},getImageUrl:function(t,e,i){var s=this.wmsParams;s.width=e,s.height=i;var n=this._crs.project(t.getNorthWest()),a=this._crs.project(t.getSouthEast()),o=this._wmsUrl,r=r=(1.3<=this._wmsVersion&&this._crs===h.CRS.EPSG4326?[a.y,n.x,n.y,a.x]:[n.x,a.y,a.x,n.y]).join(",");return o+h.Util.getParamString(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return h.extend(this.wmsParams,t),e||this.redraw(),this}}),h.nonTiledLayer.wms=function(t,e){return new h.NonTiledLayer.WMS(t,e)},e.exports=h.NonTiledLayer.WMS}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){(function(t){"use strict";var m="undefined"!=typeof window?window.L:void 0!==t?t.L:null;m.NonTiledLayer=(m.Layer||m.Class).extend({includes:m.Evented||m.Mixin.Events,emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:m.latLngBounds([-85.05,-180],[85.05,180]),useCanvas:void 0},key:"",initialize:function(t){m.setOptions(this,t)},onAdd:function(t){this._map=t,void 0===this._zoomAnimated&&(this._zoomAnimated=m.DomUtil.TRANSITION&&m.Browser.any3d&&!m.Browser.mobileOpera&&this._map.options.zoomAnimation),m.version<"1.0"&&this._map.on(this.getEvents(),this),this._div||(this._div=m.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div);var e=!!window.HTMLCanvasElement;void 0===this.options.useCanvas?this._useCanvas=e:this._useCanvas=this.options.useCanvas,this._useCanvas?(this._bufferCanvas=this._initCanvas(),this._currentCanvas=this._initCanvas()):(this._bufferImage=this._initImage(),this._currentImage=this._initImage()),this._update()},getPane:function(){return m.Layer?m.Layer.prototype.getPane.call(this):(this.options.pane?this._pane=this.options.pane:this._pane=this._map.getPanes().overlayPane,this._pane)},onRemove:function(t){m.version<"1.0"&&this._map.off(this.getEvents(),this),this.getPane().removeChild(this._div),this._useCanvas?(this._div.removeChild(this._bufferCanvas),this._div.removeChild(this._currentCanvas)):(this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage))},addTo:function(t){return t.addLayer(this),this},_setZoom:function(){this._useCanvas?(this._currentCanvas._bounds&&this._resetImageScale(this._currentCanvas,!0),this._bufferCanvas._bounds&&this._resetImageScale(this._bufferCanvas)):(this._currentImage._bounds&&this._resetImageScale(this._currentImage,!0),this._bufferImage._bounds&&this._resetImageScale(this._bufferImage))},getEvents:function(){var t={moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),"1.0"<=m.version&&(t.zoom=this._setZoom),t},getElement:function(){return this._div},setOpacity:function(t){return this.options.opacity=t,this._div&&m.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(t){return t&&(this.options.zIndex=t,this._div&&(this._div.style.zIndex=t)),this},bringToFront:function(){return this._div&&this.getPane().appendChild(this._div),this},bringToBack:function(){return this._div&&this.getPane().insertBefore(this._div,this.getPane().firstChild),this},getAttribution:function(){return this.options.attribution},_initCanvas:function(){var t=m.DomUtil.create("canvas","leaflet-image-layer");return this._div.appendChild(t),t._image=new Image,this._ctx=t.getContext("2d"),this._map.options.zoomAnimation&&m.Browser.any3d?m.DomUtil.addClass(t,"leaflet-zoom-animated"):m.DomUtil.addClass(t,"leaflet-zoom-hide"),m.extend(t._image,{onload:m.bind(this._onImageLoad,this),onerror:m.bind(this._onImageError,this)}),t},_initImage:function(){var t=m.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(t),this._map.options.zoomAnimation&&m.Browser.any3d?m.DomUtil.addClass(t,"leaflet-zoom-animated"):m.DomUtil.addClass(t,"leaflet-zoom-hide"),m.extend(t,{galleryimg:"no",onselectstart:m.Util.falseFn,onmousemove:m.Util.falseFn,onload:m.bind(this._onImageLoad,this),onerror:m.bind(this._onImageError,this)}),t},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(t){this._useCanvas?(this._currentCanvas._bounds&&this._animateImage(this._currentCanvas,t),this._bufferCanvas._bounds&&this._animateImage(this._bufferCanvas,t)):(this._currentImage._bounds&&this._animateImage(this._currentImage,t),this._bufferImage._bounds&&this._animateImage(this._bufferImage,t))},_animateImage:function(t,e){if(void 0===m.DomUtil.setTransform){var i=this._map,s=t._scale*i.getZoomScale(e.zoom),n=t._bounds.getNorthWest(),a=t._bounds.getSouthEast(),o=i._latLngToNewLayerPoint(n,e.zoom,e.center),r=i._latLngToNewLayerPoint(a,e.zoom,e.center)._subtract(o),h=o._add(r._multiplyBy(.5*(1-1/s)));t.style[m.DomUtil.TRANSFORM]=m.DomUtil.getTranslateString(h)+" scale("+s+") "}else{i=this._map,s=t._scale*t._sscale*i.getZoomScale(e.zoom),n=t._bounds.getNorthWest(),a=t._bounds.getSouthEast(),o=i._latLngToNewLayerPoint(n,e.zoom,e.center);m.DomUtil.setTransform(t,o,s)}t._lastScale=s},_resetImageScale:function(t,e){var i=new m.Bounds(this._map.latLngToLayerPoint(t._bounds.getNorthWest()),this._map.latLngToLayerPoint(t._bounds.getSouthEast())),s=t._orgBounds.getSize().y,n=i.getSize().y/s;t._sscale=n,m.DomUtil.setTransform(t,i.min,n)},_resetImage:function(t){var e=new m.Bounds(this._map.latLngToLayerPoint(t._bounds.getNorthWest()),this._map.latLngToLayerPoint(t._bounds.getSouthEast())),i=e.getSize();m.DomUtil.setPosition(t,e.min),t._orgBounds=e,t._sscale=1,this._useCanvas?(t.width=i.x,t.height=i.y):(t.style.width=i.x+"px",t.style.height=i.y+"px")},_getClippedBounds:function(){var t=this._map.getBounds(),e=t.getSouth(),i=t.getNorth(),s=t.getWest(),n=t.getEast(),a=this.options.bounds.getSouth(),o=this.options.bounds.getNorth(),r=this.options.bounds.getWest(),h=this.options.bounds.getEast();e<a&&(e=a),o<i&&(i=o),s<r&&(s=r),h<n&&(n=h);var d=new m.LatLng(i,s),u=new m.LatLng(e,n);return new m.LatLngBounds(d,u)},_update:function(){var s,t=this._getClippedBounds(),e=this._map.latLngToContainerPoint(t.getNorthWest()),i=this._map.latLngToContainerPoint(t.getSouthEast()),n=i.x-e.x,a=i.y-e.y;if(s=this._useCanvas?(this._bufferCanvas._scale=this._bufferCanvas._lastScale,this._currentCanvas._scale=this._currentCanvas._lastScale=1,this._bufferCanvas._sscale=1,this._currentCanvas._bounds=t,this._resetImage(this._currentCanvas),this._currentCanvas._image):(this._bufferImage._scale=this._bufferImage._lastScale,this._currentImage._scale=this._currentImage._lastScale=1,this._bufferImage._sscale=1,this._currentImage._bounds=t,this._resetImage(this._currentImage),this._currentImage),m.DomUtil.setOpacity(s,0),this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom||n<32||a<32)return this._div.style.visibility="hidden",s.src=this.emptyImageUrl,this.key=s.key="<empty>",void(s.tag=null);this.fire("loading"),this.key=t.getNorthWest()+", "+t.getSouthEast()+", "+n+", "+a,this.getImageUrl?(s.src=this.getImageUrl(t,n,a),s.key=this.key):this.getImageUrlAsync(t,n,a,this.key,function(t,e,i){s.key=t,s.src=e,s.tag=i})},_onImageError:function(t){this.fire("error",t),m.DomUtil.addClass(t.target,"invalid"),t.target.src!==this.options.errorImageUrl&&(t.target.src=this.options.errorImageUrl)},_onImageLoad:function(t){(t.target.src===this.options.errorImageUrl||(m.DomUtil.removeClass(t.target,"invalid"),t.target.key&&t.target.key===this.key))&&(this._onImageDone(t),this.fire("load",t))},_onImageDone:function(t){if(this._useCanvas)this._renderCanvas(t);else{m.DomUtil.setOpacity(this._currentImage,1),m.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._currentImage.tag&&this._addInteraction(this._currentImage.tag);var e=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=e}"<empty>"!==t.target.key&&(this._div.style.visibility="visible")},_renderCanvas:function(t){this._currentCanvas.getContext("2d").drawImage(this._currentCanvas._image,0,0),m.DomUtil.setOpacity(this._currentCanvas,1),m.DomUtil.setOpacity(this._bufferCanvas,0),this._addInteraction&&this._currentCanvas._image.tag&&this._addInteraction(this._currentCanvas._image.tag);var e=this._bufferCanvas;this._bufferCanvas=this._currentCanvas,this._currentCanvas=e}}),m.nonTiledLayer=function(){return new m.NonTiledLayer},e.exports=m.NonTiledLayer}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2,1])(2)});} },
            { loader: "script", url: "lib/leaflet/leaflet-heat.js", load: function () { console.debug( "[lib/leaflet/leaflet-heat.js]" ); !function(){"use strict";function i(t){return this instanceof i?(this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,void this.clear()):new i(t)}i.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,i){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,i){i=i||15;var a=this._circle=document.createElement("canvas"),s=a.getContext("2d"),e=this._r=t+i;return a.width=a.height=2*e,s.shadowOffsetX=s.shadowOffsetY=200,s.shadowBlur=i,s.shadowColor="black",s.beginPath(),s.arc(e-200,e-200,t,0,2*Math.PI,!0),s.closePath(),s.fill(),this},gradient:function(t){var i=document.createElement("canvas"),a=i.getContext("2d"),s=a.createLinearGradient(0,0,0,256);for(var e in i.width=1,i.height=256,t)s.addColorStop(e,t[e]);return a.fillStyle=s,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var a,s=0,e=this._data.length;s<e;s++)a=this._data[s],i.globalAlpha=Math.max(a[2]/this._max,t||.05),i.drawImage(this._circle,a[0]-this._r,a[1]-this._r);var n=i.getImageData(0,0,this._width,this._height);return this._colorize(n.data,this._grad),i.putImageData(n,0,0),this},_colorize:function(t,i){for(var a,s=3,e=t.length;s<e;s+=4)(a=4*t[s])&&(t[s-3]=i[a],t[s-2]=i[a+1],t[s-1]=i[a+2])}},window.simpleheat=i}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){this._latlngs=t,L.setOptions(this,i)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),i=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[i]="50% 50%";var a=this._map.getSize();t.width=a.x,t.height=a.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(s?"animated":"hide")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var i=this._map.getSize();this._heat._width!==i.x&&(this._canvas.width=this._heat._width=i.x),this._heat._height!==i.y&&(this._canvas.height=this._heat._height=i.y),this._redraw()},_redraw:function(){var t,i,a,s,e,n,h,o,r,d=[],_=this._heat._r,l=this._map.getSize(),m=new L.Bounds(L.point([-_,-_]),l.add([_,_])),c=void 0===this.options.max?1:this.options.max,u=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,f=1/Math.pow(2,Math.max(0,Math.min(u-this._map.getZoom(),12))),g=_/2,p=[],v=this._map._getMapPanePos(),w=v.x%g,y=v.y%g;for(t=0,i=this._latlngs.length;t<i;t++)if(a=this._map.latLngToContainerPoint(this._latlngs[t]),m.contains(a)){e=Math.floor((a.x-w)/g)+2,n=Math.floor((a.y-y)/g)+2,r=(void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1)*f,p[n]=p[n]||[],(s=p[n][e])?(s[0]=(s[0]*s[2]+a.x*r)/(s[2]+r),s[1]=(s[1]*s[2]+a.y*r)/(s[2]+r),s[2]+=r):p[n][e]=[a.x,a.y,r]}for(t=0,i=p.length;t<i;t++)if(p[t])for(h=0,o=p[t].length;h<o;h++)(s=p[t][h])&&d.push([Math.round(s[0]),Math.round(s[1]),Math.min(s[2],c)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,a,i):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+" scale("+i+")"}}),L.heatLayer=function(t,i){return new L.HeatLayer(t,i)};} }
        ] }
    );
    include.tag( "leaflet",
        { loader: "sequence", tags: [
            { loader: "script", url: "lib/leaflet/leaflet-1.6.0.js", load: function () { console.debug( "[lib/leaflet/leaflet-1.6.0.js]" ); !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";var e=Object.freeze;function h(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}Object.freeze=function(t){return t};var s=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function p(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var i=0;function u(t){return t._leaflet_id=t._leaflet_id||++i,t._leaflet_id}function n(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}function o(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o}function a(){return!1}function r(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function l(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return l(t).split(/\s+/)}function _(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?s(t.options):{}),e)t.options[i]=e[i];return t.options}function d(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var m=/\{ *([\w_-]+) *\}/g;function f(t,n){return t.replace(m,function(t,e){var i=n[e];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(n)),i})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function P(t){var e=+new Date,i=Math.max(0,16-(e-w));return w=e+i,window.setTimeout(t,i)}var b=window.requestAnimationFrame||x("RequestAnimationFrame")||P,T=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function z(t,e,i){if(!i||b!==P)return b.call(window,p(t,e));t.call(e)}function M(t){t&&T.call(window,t)}var C=(Object.freeze||Object)({freeze:e,extend:h,create:s,bind:p,lastId:i,stamp:u,throttle:n,wrapNum:o,falseFn:a,formatNum:r,trim:l,splitWords:c,setOptions:_,getParamString:d,template:f,isArray:g,indexOf:v,emptyImageUrl:y,requestFn:b,cancelFn:T,requestAnimFrame:z,cancelAnimFrame:M});function E(){}E.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=s(i);for(var o in(n.constructor=e).prototype=n,this)this.hasOwnProperty(o)&&"prototype"!==o&&"__super__"!==o&&(e[o]=this[o]);return t.statics&&(h(e,t.statics),delete t.statics),t.includes&&(!function(t){if("undefined"==typeof L||!L||!L.Mixin)return;t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}(t.includes),h.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=h(s(n.options),t.options)),h(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},E.include=function(t){return h(this.prototype,t),this},E.mergeOptions=function(t){return h(this.prototype.options,t),this},E.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var S={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,s=(t=c(t)).length;o<s;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,s=(t=c(t)).length;o<s;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===e&&s[r].ctx===i)return;s.push(o)},_off:function(t,e,i){var n,o,s;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,s=n.length;o<s;o++){var r=n[o];if(r.ctx===i&&r.fn===e)return r.fn=a,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=a;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=h({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,r=o.length;s<r;s++){var a=o[s];a.fn.call(a.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=p(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[u(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[u(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};S.addEventListener=S.on,S.removeEventListener=S.clearAllEventListeners=S.off,S.addOneTimeEventListener=S.once,S.fireEvent=S.fire,S.hasEventListeners=S.listens;var Z=E.extend(S);function k(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var B=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function A(t,e,i){return t instanceof k?t:g(t)?new k(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new k(t.x,t.y):new k(t,e,i)}function I(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function O(t,e){return!t||t instanceof I?t:new I(t,e)}function R(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function N(t,e){return t instanceof R?t:new R(t,e)}function D(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function j(t,e,i){return t instanceof D?t:g(t)&&"object"!=typeof t[0]?3===t.length?new D(t[0],t[1],t[2]):2===t.length?new D(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new D(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new D(t,e,i)}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new k(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new k(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=B(this.x),this.y=B(this.y),this},distanceTo:function(t){var e=(t=A(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=A(t)).x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+r(this.x)+", "+r(this.y)+")"}},I.prototype={extend:function(t){return t=A(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new k(this.min.x,this.max.y)},getTopRight:function(){return new k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof k?A(t):O(t))instanceof I?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=O(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r},overlaps:function(t){t=O(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>e.x&&n.x<i.x,r=o.y>e.y&&n.y<i.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof D)i=e=t;else{if(!(t instanceof R))return t?this.extend(j(t)||N(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new D(e.lat,e.lng),this._northEast=new D(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new R(new D(e.lat-n,e.lng-o),new D(i.lat+n,i.lng+o))},getCenter:function(){return new D((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new D(this.getNorth(),this.getWest())},getSouthEast:function(){return new D(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof D||"lat"in t?j(t):N(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof R?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},overlaps:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&n.lat<i.lat,r=o.lng>e.lng&&n.lng<i.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=N(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var W,H={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new I(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!(D.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+r(this.lat,t)+", "+r(this.lng,t)+")"},distanceTo:function(t){return F.distance(this,j(t))},wrap:function(){return F.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return N([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new D(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng;return new D(this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast();return new R(new D(s.lat-n,s.lng-o),new D(r.lat-n,r.lng-o))}},F=h({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin((e.lat-t.lat)*i/2),r=Math.sin((e.lng-t.lng)*i/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,h=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*h}}),U=6378137,V={R:U,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new k(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new D((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(W=U*Math.PI,new I([-W,-W],[W,W]))};function q(t,e,i,n){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function G(t,e,i,n){return new q(t,e,i,n)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new k((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K,Y=h({},F,{code:"EPSG:3857",projection:V,transformation:(K=.5/(Math.PI*V.R),G(K,.5,-K,.5))}),X=h({},Y,{code:"EPSG:900913"});function J(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var i,n,o,s,r,a,h="";for(i=0,o=t.length;i<o;i++){for(n=0,s=(r=t[i]).length;n<s;n++)h+=(n?"L":"M")+(a=r[n]).x+" "+a.y;h+=e?St?"z":"x":""}return h||"M0 0"}var Q=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),nt=kt("webkit"),ot=kt("android"),st=kt("android 2")||kt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=ot&&kt("Google")&&rt<537&&!("AudioNode"in window),ht=!!window.opera,ut=kt("chrome"),lt=kt("gecko")&&!nt&&!ht&&!tt,ct=!ut&&kt("safari"),_t=kt("phantom"),dt="OTransition"in Q,pt=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in Q,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,gt="MozPerspective"in Q,vt=!window.L_DISABLE_3D&&(mt||ft||gt)&&!dt&&!_t,yt="undefined"!=typeof orientation||kt("mobile"),xt=yt&&nt,wt=yt&&ft,Pt=!window.PointerEvent&&window.MSPointerEvent,Lt=!(nt||!window.PointerEvent&&!Pt),bt=!window.L_NO_TOUCH&&(Lt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Tt=yt&&ht,zt=yt&&lt,Mt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Ct=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",a,e),window.removeEventListener("testPassiveEventSupport",a,e)}catch(t){}return t},Et=!!document.createElement("canvas").getContext,St=!(!document.createElementNS||!J("svg").createSVGRect),Zt=!St&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function kt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Bt=(Object.freeze||Object)({ie:tt,ielt9:et,edge:it,webkit:nt,android:ot,android23:st,androidStock:at,opera:ht,chrome:ut,gecko:lt,safari:ct,phantom:_t,opera12:dt,win:pt,ie3d:mt,webkit3d:ft,gecko3d:gt,any3d:vt,mobile:yt,mobileWebkit:xt,mobileWebkit3d:wt,msPointer:Pt,pointer:Lt,touch:bt,mobileOpera:Tt,mobileGecko:zt,retina:Mt,passiveEvents:Ct,canvas:Et,svg:St,vml:Zt}),At=Pt?"MSPointerDown":"pointerdown",It=Pt?"MSPointerMove":"pointermove",Ot=Pt?"MSPointerUp":"pointerup",Rt=Pt?"MSPointerCancel":"pointercancel",Nt=["INPUT","SELECT","OPTION"],Dt={},jt=!1,Wt=0;function Ht(t,e,i,n){var o,s,r,a,h,u,l,c,_,d;return"touchstart"===e?(l=t,c=i,_=n,d=p(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Nt.indexOf(t.target.tagName)<0))return;De(t)}qt(t,c)}),l["_leaflet_touchstart"+_]=d,l.addEventListener(At,d,!1),jt||(document.documentElement.addEventListener(At,Ft,!0),document.documentElement.addEventListener(It,Ut,!0),document.documentElement.addEventListener(Ot,Vt,!0),document.documentElement.addEventListener(Rt,Vt,!0),jt=!0)):"touchmove"===e?(h=i,u=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&qt(t,h)},(a=t)["_leaflet_touchmove"+n]=u,a.addEventListener(It,u,!1)):"touchend"===e&&(s=i,r=function(t){qt(t,s)},(o=t)["_leaflet_touchend"+n]=r,o.addEventListener(Ot,r,!1),o.addEventListener(Rt,r,!1)),this}function Ft(t){Dt[t.pointerId]=t,Wt++}function Ut(t){Dt[t.pointerId]&&(Dt[t.pointerId]=t)}function Vt(t){delete Dt[t.pointerId],Wt--}function qt(t,e){for(var i in t.touches=[],Dt)t.touches.push(Dt[i]);t.changedTouches=[t],e(t)}var Gt=Pt?"MSPointerDown":Lt?"pointerdown":"touchstart",Kt=Pt?"MSPointerUp":Lt?"pointerup":"touchend",Yt="_leaflet_";function Xt(t,o,e){var s,r,a=!1;function i(t){var e;if(Lt){if(!it||"mouse"===t.pointerType)return;e=Wt}else e=t.touches.length;if(!(1<e)){var i=Date.now(),n=i-(s||i);r=t.touches?t.touches[0]:t,a=0<n&&n<=250,s=i}}function n(t){if(a&&!r.cancelBubble){if(Lt){if(!it||"mouse"===t.pointerType)return;var e,i,n={};for(i in r)e=r[i],n[i]=e&&e.bind?e.bind(r):e;r=n}r.type="dblclick",r.button=0,o(r),s=null}}return t[Yt+Gt+e]=i,t[Yt+Kt+e]=n,t[Yt+"dblclick"+e]=o,t.addEventListener(Gt,i,!!Ct&&{passive:!1}),t.addEventListener(Kt,n,!!Ct&&{passive:!1}),t.addEventListener("dblclick",o,!1),this}function Jt(t,e){var i=t[Yt+Gt+e],n=t[Yt+Kt+e],o=t[Yt+"dblclick"+e];return t.removeEventListener(Gt,i,!!Ct&&{passive:!1}),t.removeEventListener(Kt,n,!!Ct&&{passive:!1}),it||t.removeEventListener("dblclick",o,!1),this}var $t,Qt,te,ee,ie,ne=ye(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oe=ye(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),se="webkitTransition"===oe||"OTransition"===oe?oe+"End":"transitionend";function re(t){return"string"==typeof t?document.getElementById(t):t}function ae(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function he(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ue(t){var e=t.parentNode;e&&e.removeChild(t)}function le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ce(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function _e(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function de(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ge(t);return 0<i.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function pe(t,e){if(void 0!==t.classList)for(var i=c(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!de(t,e)){var s=ge(t);fe(t,(s?s+" ":"")+e)}}function me(t,e){void 0!==t.classList?t.classList.remove(e):fe(t,l((" "+ge(t)+" ").replace(" "+e+" "," ")))}function fe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ge(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ve(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ye(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function xe(t,e,i){var n=e||new k(0,0);t.style[ne]=(mt?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function we(t,e){t._leaflet_pos=e,vt?xe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Pe(t){return t._leaflet_pos||new k(0,0)}if("onselectstart"in document)$t=function(){Ze(window,"selectstart",De)},Qt=function(){Be(window,"selectstart",De)};else{var Le=ye(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$t=function(){if(Le){var t=document.documentElement.style;te=t[Le],t[Le]="none"}},Qt=function(){Le&&(document.documentElement.style[Le]=te,te=void 0)}}function be(){Ze(window,"dragstart",De)}function Te(){Be(window,"dragstart",De)}function ze(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Me(),ie=(ee=t).style.outline,t.style.outline="none",Ze(window,"keydown",Me))}function Me(){ee&&(ee.style.outline=ie,ie=ee=void 0,Be(window,"keydown",Me))}function Ce(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Ee(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Se=(Object.freeze||Object)({TRANSFORM:ne,TRANSITION:oe,TRANSITION_END:se,get:re,getStyle:ae,create:he,remove:ue,empty:le,toFront:ce,toBack:_e,hasClass:de,addClass:pe,removeClass:me,setClass:fe,getClass:ge,setOpacity:ve,testProp:ye,setTransform:xe,setPosition:we,getPosition:Pe,disableTextSelection:$t,enableTextSelection:Qt,disableImageDrag:be,enableImageDrag:Te,preventOutline:ze,restoreOutline:Me,getSizedParentNode:Ce,getScale:Ee});function Ze(t,e,i,n){if("object"==typeof e)for(var o in e)Ae(t,o,e[o],i);else for(var s=0,r=(e=c(e)).length;s<r;s++)Ae(t,e[s],i,n);return this}var ke="_leaflet_events";function Be(t,e,i,n){if("object"==typeof e)for(var o in e)Ie(t,o,e[o],i);else if(e)for(var s=0,r=(e=c(e)).length;s<r;s++)Ie(t,e[s],i,n);else{for(var a in t[ke])Ie(t,a,t[ke][a]);delete t[ke]}return this}function Ae(e,t,i,n){var o=t+u(i)+(n?"_"+u(n):"");if(e[ke]&&e[ke][o])return this;var s=function(t){return i.call(n||e,t||window.event)},r=s;Lt&&0===t.indexOf("touch")?Ht(e,t,s,o):!bt||"dblclick"!==t||Lt&&ut?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",s,!!Ct&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,Ke(e,t)&&r(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",s,!1)):("click"===t&&ot&&(s=function(t){!function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=Ue&&i-Ue;if(n&&100<n&&n<500||t.target._simulatedClick&&!t._simulated)return je(t);Ue=i,e(t)}(t,r)}),e.addEventListener(t,s,!1)):"attachEvent"in e&&e.attachEvent("on"+t,s):Xt(e,s,o),e[ke]=e[ke]||{},e[ke][o]=s}function Ie(t,e,i,n){var o,s,r,a=e+u(i)+(n?"_"+u(n):""),h=t[ke]&&t[ke][a];if(!h)return this;Lt&&0===e.indexOf("touch")?(r=(o=t)["_leaflet_"+(s=e)+a],"touchstart"===s?o.removeEventListener(At,r,!1):"touchmove"===s?o.removeEventListener(It,r,!1):"touchend"===s&&(o.removeEventListener(Ot,r,!1),o.removeEventListener(Rt,r,!1))):!bt||"dblclick"!==e||Lt&&ut?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",h,!!Ct&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,h,!1):"detachEvent"in t&&t.detachEvent("on"+e,h):Jt(t,a),t[ke][a]=null}function Oe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ge(t),this}function Re(t){return Ae(t,"mousewheel",Oe),this}function Ne(t){return Ze(t,"mousedown touchstart dblclick",Oe),Ae(t,"click",qe),this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function je(t){return De(t),Oe(t),this}function We(t,e){if(!e)return new k(t.clientX,t.clientY);var i=Ee(e),n=i.boundingClientRect;return new k((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var He=pt&&ut?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function Fe(t){return it?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/He:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ue,Ve={};function qe(t){Ve[t.type]=!0}function Ge(t){var e=Ve[t.type];return Ve[t.type]=!1,e}function Ke(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var Ye=(Object.freeze||Object)({on:Ze,off:Be,stopPropagation:Oe,disableScrollPropagation:Re,disableClickPropagation:Ne,preventDefault:De,stop:je,getMousePosition:We,getWheelDelta:Fe,fakeStop:qe,skipped:Ge,isExternalTarget:Ke,addListener:Ze,removeListener:Be}),Xe=Z.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Pe(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),we(this._el,i),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Je=Z.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=_(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oe&&vt&&!Tt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ze(this._proxy,se,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if((e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(j(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i)&&(void 0!==i.animate&&(i.zoom=h({animate:i.animate},i.zoom),i.pan=h({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=(t instanceof k?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(s));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():N(t);var i=A(e.paddingTopLeft||e.padding||[0,0]),n=A(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var s=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(r.add(a).divideBy(2).add(s),o),zoom:o}},fitBounds:function(t,e){if(!(t=N(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=A(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){pe(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(s,r,t){if(!1===(t=t||{}).animate||!vt)return this.setView(s,r,t);this._stop();var a=this.project(this.getCenter()),h=this.project(s),e=this.getSize(),u=this._zoom;s=j(s),r=void 0===r?u:r;var l=Math.max(e.x,e.y),n=l*this.getZoomScale(u,r),c=h.distanceTo(a)||1,_=1.42,o=_*_;function i(t){var e=(n*n-l*l+(t?-1:1)*o*o*c*c)/(2*(t?n:l)*o*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=i(0);function f(t){return l*(p(m)*(d(e=m+_*t)/p(e))-d(m))/o;var e}var g=Date.now(),v=(i(1)-m)/_,y=t.duration?1e3*t.duration:1e3*v*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e,i,n=(Date.now()-g)/y,o=(e=n,(1-Math.pow(1-e,1.5))*v);n<=1?(this._flyToFrame=z(t,this),this._move(this.unproject(a.add(h.subtract(a).multiplyBy(f(o)/c)),u),this.getScaleZoom(l/(i=o,l*(p(m)/p(m+_*i))),u),{flyTo:!0})):this._move(s,r)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=N(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,N(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=A((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=A(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),h=a.getSize().divideBy(2),u=O([a.min.add(i),a.max.subtract(n)]);if(!u.contains(r)){this._enforcingBounds=!0;var l=s.subtract(r),c=A(r.x+l.x,r.y+l.y);(r.x<u.min.x||r.x>u.max.x)&&(c.x=s.x-l.x,0<l.x?c.x+=h.x-i.x:c.x-=h.x-n.x),(r.y<u.min.y||r.y>u.max.y)&&(c.y=s.y-l.y,0<l.y?c.y+=h.y-i.y:c.y-=h.y-n.y),this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),s=n.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=p(this._handleGeolocationResponse,this),i=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new D(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var s={latlng:e,bounds:i,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(s[r]=t.coords[r]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ue(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=he("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=N(t),i=A(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),h=this.getSize().subtract(i),u=O(this.project(a,n),this.project(r,n)).getSize(),l=vt?this.options.zoomSnap:1,c=h.x/u.x,_=h.y/u.y,d=e?Math.max(c,_):Math.min(c,_);return n=this.getScaleZoom(d,n),l&&(n=Math.round(n/(l/100))*(l/100),n=e?Math.ceil(n/l)*l:Math.floor(n/l)*l),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new I(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return We(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=re(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ze(e,"scroll",this._onScroll,this),this._containerId=u(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,pe(t,"leaflet-container"+(bt?" leaflet-touch":"")+(Mt?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ae(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),we(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(t.markerPane,"leaflet-zoom-hide"),pe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){we(this._mapPane,new k(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){we(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Be:Ze;e((this._targets[u(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,r=!1;s;){if((i=this._targets[u(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){r=!0;break}if(i&&i.listens(e,!0)){if(o&&!Ke(s,t))break;if(n.push(i),o)break}if(s===this._container)break;s=s.parentNode}return n.length||r||o||!Ke(s,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Ge(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||ze(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=h({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&De(t);var s={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var r=o.getLatLng&&(!o._radius||o._radius<=10);s.containerPoint=r?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=r?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var a=0;a<i.length;a++)if(i[a].fire(e,s,!0),s.originalEvent._stopped||!1===i[a].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Pe(this._mapPane)||new k(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return O([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new I(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,i,e);return r.round().equals([0,0])?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new I(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=O(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),s=n.max.subtract(t.max);return new k(this._rebound(o.x,-s.x),this._rebound(o.y,-s.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=vt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){me(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=he("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ne,i=this._proxy.style[e];xe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();xe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o))&&(z(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&me(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),z(function(){this._moveEnd(!0)},this))}});var $e=E.extend({options:{position:"topright"},initialize:function(t){_(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return pe(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Qe=function(t){return new $e(t)};Je.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var n=this._controlCorners={},o="leaflet-",s=this._controlContainer=he("div",o+"control-container",this._container);function t(t,e){var i=o+t+" "+o+e;n[t+e]=he("div",i,s)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ue(this._controlCorners[t]);ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ti=$e.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in _(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return $e.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(u(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):me(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return me(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=he("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),Re(e);var n=this._section=he("section",t+"-list");i&&(this._map.on("click",this.collapse,this),ot||Ze(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=he("a",t+"-toggle",e);o.href="#",o.title="Layers",bt?(Ze(o,"click",je),Ze(o,"click",this.expand,this)):Ze(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=he("div",t+"-base",n),this._separator=he("div",t+"-separator",n),this._overlaysList=he("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&u(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(p(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;le(this._baseLayersList),le(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<o,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(u(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+u(this),n),this._layerControlInputs.push(e),e.layerId=u(t.layer),Ze(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=i.length-1;0<=s;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;0<=o;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ei=$e.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=he("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var s=he("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),Ne(s),Ze(s,"click",je),Ze(s,"click",o,this),Ze(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";me(this._zoomInButton,e),me(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pe(this._zoomInButton,e)}});Je.mergeOptions({zoomControl:!0}),Je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var ii=$e.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=he("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=he("div",e,i)),t.imperial&&(this._iScale=he("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;5280<o?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=10<=i?10:5<=i?5:3<=i?3:2<=i?2:1)}}),ni=$e.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){_(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=he("div","leaflet-control-attribution"),Ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Je.mergeOptions({attributionControl:!0}),Je.addInitHook(function(){this.options.attributionControl&&(new ni).addTo(this)});$e.Layers=ti,$e.Zoom=ei,$e.Scale=ii,$e.Attribution=ni,Qe.layers=function(t,e,i){return new ti(t,e,i)},Qe.zoom=function(t){return new ei(t)},Qe.scale=function(t){return new ii(t)},Qe.attribution=function(t){return new ni(t)};var oi=E.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});oi.addTo=function(t,e){return t.addHandler(e,this),this};var si,ri={Events:S},ai=bt?"touchstart mousedown":"mousedown",hi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ui={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},li=Z.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){_(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Ze(this._dragStartTarget,ai,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(li._dragging===this&&this.finishDrag(),Be(this._dragStartTarget,ai,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!de(this._element,"leaflet-zoom-anim")&&!(li._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((li._dragging=this)._preventOutline&&ze(this._element),be(),$t(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ce(this._element);this._startPoint=new k(e.clientX,e.clientY),this._parentScale=Ee(i),Ze(document,ui[t.type],this._onMove,this),Ze(document,hi[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new k(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Pe(this._element).subtract(i),pe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,M(this._animRequest),this._lastEvent=t,this._animRequest=z(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),we(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in me(document.body,"leaflet-dragging"),this._lastTarget&&(me(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ui)Be(document,ui[t],this._onMove,this),Be(document,hi[t],this._onUp,this);Te(),Qt(),this._moved&&this._moving&&(M(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,li._dragging=!1}});function ci(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,o,s){var r,a,h,u=0;for(a=o+1;a<=s-1;a++)h=fi(e[a],e[o],e[s],!0),u<h&&(r=a,u=h);n<u&&(i[r]=1,t(e,i,n,o,r),t(e,i,n,r,s))}(t,n,e,0,i-1);var o,s=[];for(o=0;o<i;o++)n[o]&&s.push(t[o]);return s}(t=function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)r=t[n],a=t[o],void 0,h=a.x-r.x,u=a.y-r.y,e<h*h+u*u&&(i.push(t[n]),o=n);var r,a,h,u;o<s-1&&i.push(t[s-1]);return i}(t,i),i)}function _i(t,e,i){return Math.sqrt(fi(t,e,i,!0))}function di(t,e,i,n,o){var s,r,a,h=n?si:mi(t,i),u=mi(e,i);for(si=u;;){if(!(h|u))return[t,e];if(h&u)return!1;a=mi(r=pi(t,e,s=h||u,i,o),i),s===h?(t=r,h=a):(e=r,u=a)}}function pi(t,e,i,n,o){var s,r,a=e.x-t.x,h=e.y-t.y,u=n.min,l=n.max;return 8&i?(s=t.x+a*(l.y-t.y)/h,r=l.y):4&i?(s=t.x+a*(u.y-t.y)/h,r=u.y):2&i?(s=l.x,r=t.y+h*(l.x-t.x)/a):1&i&&(s=u.x,r=t.y+h*(u.x-t.x)/a),new k(s,r,o)}function mi(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function fi(t,e,i,n){var o,s=e.x,r=e.y,a=i.x-s,h=i.y-r,u=a*a+h*h;return 0<u&&(1<(o=((t.x-s)*a+(t.y-r)*h)/u)?(s=i.x,r=i.y):0<o&&(s+=a*o,r+=h*o)),a=t.x-s,h=t.y-r,n?a*a+h*h:new k(s,r)}function gi(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gi(t)}var yi=(Object.freeze||Object)({simplify:ci,pointToSegmentDistance:_i,closestPointOnSegment:function(t,e,i){return fi(t,e,i)},clipSegment:di,_getEdgeIntersection:pi,_getBitCode:mi,_sqClosestPointOnSegment:fi,isFlat:gi,_flat:vi});function xi(t,e,i){var n,o,s,r,a,h,u,l,c,_=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=mi(t[o],e);for(r=0;r<4;r++){for(l=_[r],n=[],o=0,s=(u=t.length)-1;o<u;s=o++)a=t[o],h=t[s],a._code&l?h._code&l||((c=pi(h,a,l,e,i))._code=mi(c,e),n.push(c)):(h._code&l&&((c=pi(h,a,l,e,i))._code=mi(c,e),n.push(c)),n.push(a));t=n}return t}var wi,Pi=(Object.freeze||Object)({clipPolygon:xi}),Li={project:function(t){return new k(t.lng,t.lat)},unproject:function(t){return new D(t.y,t.x)},bounds:new I([-180,-90],[180,90])},bi={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-i*Math.log(Math.max(a,1e-10)),new k(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),h=0,u=.1;h<15&&1e-7<Math.abs(u);h++)e=s*Math.sin(a),e=Math.pow((1-e)/(1+e),s/2),a+=u=Math.PI/2-2*Math.atan(r*e)-a;return new D(a*i,t.x*i/n)}},Ti=(Object.freeze||Object)({LonLat:Li,Mercator:bi,SphericalMercator:V}),zi=h({},F,{code:"EPSG:3395",projection:bi,transformation:(wi=.5/(Math.PI*bi.R),G(wi,.5,-wi,.5))}),Mi=h({},F,{code:"EPSG:4326",projection:Li,transformation:G(1/180,1,-1/180,.5)}),Ci=h({},H,{projection:Li,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});H.Earth=F,H.EPSG3395=zi,H.EPSG3857=Y,H.EPSG900913=X,H.EPSG4326=Mi,H.Simple=Ci;var Ei=Z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[u(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[u(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Je.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=u(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=u(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&u(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?g(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[u(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=u(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Si=Ei.extend({initialize:function(t,e){var i,n;if(_(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return u(t)}}),Zi=Si.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Si.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Si.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new R;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),ki=E.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){_(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=A(n),s=A("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Mt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});var Bi=ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Bi.imagePath||(Bi.imagePath=this._detectIconPath()),(this.options.imagePath||Bi.imagePath)+ki.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=he("div","leaflet-default-icon-path",document.body),e=ae(t,"background-image")||ae(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Ai=oi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new li(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&me(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=Pe(e._icon),r=i.getPixelBounds(),a=i.getPixelOrigin(),h=O(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!h.contains(s)){var u=A((Math.max(h.max.x,s.x)-h.max.x)/(r.max.x-h.max.x)-(Math.min(h.min.x,s.x)-h.min.x)/(r.min.x-h.min.x),(Math.max(h.max.y,s.y)-h.max.y)/(r.max.y-h.max.y)-(Math.min(h.min.y,s.y)-h.min.y)/(r.min.y-h.min.y)).multiplyBy(n);i.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),we(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=z(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Pe(e._icon),o=e._map.layerPointToLatLng(n);i&&we(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ii=Ei.extend({options:{icon:new Bi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){_(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),pe(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(pe(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ue(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&we(this._icon,t),this._shadow&&we(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ai)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ai(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ve(this._icon,t),this._shadow&&ve(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Oi=Ei.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return _(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Ri=Oi.extend({options:{fill:!0,radius:10},initialize:function(t,e){_(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Oi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new I(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ni=Ri.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=h({},i,{radius:e})),_(this,e),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Oi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===F.distance){var o=Math.PI/180,s=this._mRadius/F.R/o,r=i.project([e+s,t]),a=i.project([e-s,t]),h=r.add(a).divideBy(2),u=i.unproject(h).lat,l=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(l)||0===l)&&(l=s/Math.cos(Math.PI/180*e)),this._point=h.subtract(i.getPixelOrigin()),this._radius=isNaN(l)?0:h.x-i.project([u,t-l]).x,this._radiusY=h.y-r.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});var Di=Oi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){_(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,s=fi,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],u=1,l=h.length;u<l;u++){var c=s(t,e=h[u-1],i=h[u],!0);c<n&&(n=c,o=s(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(e=t=0;t<h-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(n=t=0;t<h-1;t++)if(o=a[t],s=a[t+1],e<(n+=i=o.distanceTo(s)))return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=gi(t),n=0,o=t.length;n<o;n++)i?(e[n]=j(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new k(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,o,s=t[0]instanceof D,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,s,r,a,h=this._parts;for(n=e=0,o=this._rings.length;e<o;e++)for(i=0,s=(a=this._rings[e]).length;i<s-1;i++)(r=di(a[i],a[i+1],t,i,!0))&&(h[n]=h[n]||[],h[n].push(r[0]),r[1]===a[i+1]&&i!==s-2||(h[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=ci(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,s,r,a,h=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(n=0,o=(r=(a=this._parts[i]).length)-1;n<r;o=n++)if((e||0!==n)&&_i(t,a[o],a[n])<=h)return!0;return!1}});Di._flat=vi;var ji=Di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,h,u=this._rings[0],l=u.length;if(!l)return null;for(s=r=a=0,t=0,e=l-1;t<l;e=t++)i=u[t],n=u[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return h=0===s?u[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var e=Di.prototype._convertLatLngs.call(this,t),i=e.length;return 2<=i&&e[0]instanceof D&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Di.prototype._setLatLngs.call(this,t),gi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new k(e,e);if(t=new I(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,s=this._rings.length;o<s;o++)(n=xi(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,s,r,a,h,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(h=(e=this._parts[o]).length)-1;s<h;r=s++)i=e[s],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||Di.prototype._containsPoint.call(this,t,!0)}});var Wi=Zi.extend({initialize:function(t,e){_(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=g(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=Hi(t,s);return r?(r.feature=Yi(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Hi(t,e){var i,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,h=[],u=e&&e.pointToLayer,l=e&&e.coordsToLatLng||Ui;if(!a&&!r)return null;switch(r.type){case"Point":return Fi(u,t,i=l(a),e);case"MultiPoint":for(o=0,s=a.length;o<s;o++)i=l(a[o]),h.push(Fi(u,t,i,e));return new Zi(h);case"LineString":case"MultiLineString":return n=Vi(a,"LineString"===r.type?0:1,l),new Di(n,e);case"Polygon":case"MultiPolygon":return n=Vi(a,"Polygon"===r.type?1:2,l),new ji(n,e);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var c=Hi({geometry:r.geometries[o],type:"Feature",properties:t.properties},e);c&&h.push(c)}return new Zi(h);default:throw new Error("Invalid GeoJSON object.")}}function Fi(t,e,i,n){return t?t(e,i):new Ii(i,n&&n.markersInheritOptions&&n)}function Ui(t){return new D(t[1],t[0],t[2])}function Vi(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?Vi(t[s],e-1,i):(i||Ui)(t[s]),o.push(n);return o}function qi(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[r(t.lng,e),r(t.lat,e),r(t.alt,e)]:[r(t.lng,e),r(t.lat,e)]}function Gi(t,e,i,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(e?Gi(t[s],e-1,i,n):qi(t[s],n));return!e&&i&&o.push(o[0]),o}function Ki(t,e){return t.feature?h({},t.feature,{geometry:e}):Yi(e)}function Yi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Xi={toGeoJSON:function(t){return Ki(this,{type:"Point",coordinates:qi(this.getLatLng(),t)})}};function Ji(t,e){return new Wi(t,e)}Ii.include(Xi),Ni.include(Xi),Ri.include(Xi),Di.include({toGeoJSON:function(t){var e=!gi(this._latlngs);return Ki(this,{type:(e?"Multi":"")+"LineString",coordinates:Gi(this._latlngs,e?1:0,!1,t)})}}),ji.include({toGeoJSON:function(t){var e=!gi(this._latlngs),i=e&&!gi(this._latlngs[0]),n=Gi(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),Ki(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Si.include({toMultiPoint:function(e){var i=[];return this.eachLayer(function(t){i.push(t.toGeoJSON(e).geometry.coordinates)}),Ki(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(n){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(n);var o="GeometryCollection"===t,s=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(n);if(o)s.push(e.geometry);else{var i=Yi(e);"FeatureCollection"===i.type?s.push.apply(s,i.features):s.push(i)}}}),o?Ki(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});var $i=Ji,Qi=Ei.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=N(e),_(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ce(this._image),this},bringToBack:function(){return this._map&&_e(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=N(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:he("img");pe(e,"leaflet-image-layer"),this._zoomAnimated&&pe(e,"leaflet-zoom-animated"),this.options.className&&pe(e,this.options.className),e.onselectstart=a,e.onmousemove=a,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;xe(this._image,i,e)},_reset:function(){var t=this._image,e=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();we(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){ve(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),tn=Qi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:he("video");if(pe(e,"leaflet-image-layer"),this._zoomAnimated&&pe(e,"leaflet-zoom-animated"),this.options.className&&pe(e,this.options.className),e.onselectstart=a,e.onmousemove=a,e.onloadeddata=p(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=0<i.length?n:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var s=0;s<this._url.length;s++){var r=he("source");r.src=this._url[s],e.appendChild(r)}}}});var en=Qi.extend({_initImage:function(){var t=this._image=this._url;pe(t,"leaflet-image-layer"),this._zoomAnimated&&pe(t,"leaflet-zoom-animated"),this.options.className&&pe(t,this.options.className),t.onselectstart=a,t.onmousemove=a}});var nn=Ei.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){_(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ve(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ve(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ve(this._container,0),this._removeTimeout=setTimeout(p(ue,void 0,this._container),200)):ue(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ce(this._container),this},bringToBack:function(){return this._map&&_e(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Ei||(i=e,e=t),e instanceof Zi)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),i=this._getAnchor();this._zoomAnimated?we(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),on=nn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){nn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Oi||this._source.on("preclick",Oe))},onRemove:function(t){nn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Oi||this._source.off("preclick",Oe))},getEvents:function(){var t=nn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=he("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=he("div",t+"-content-wrapper",e);if(this._contentNode=he("div",t+"-content",i),Ne(i),Re(this._contentNode),Ze(i,"contextmenu",Oe),this._tipContainer=he("div",t+"-tip-container",e),this._tip=he("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=he("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",Ze(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&o<n?(e.height=o+"px",pe(t,s)):me(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();we(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ae(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new k(this._containerLeft,-i-this._containerBottom);o._add(Pe(this._container));var s=t.layerPointToContainerPoint(o),r=A(this.options.autoPanPadding),a=A(this.options.autoPanPaddingTopLeft||r),h=A(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),l=0,c=0;s.x+n+h.x>u.x&&(l=s.x+n-u.x+h.x),s.x-l-a.x<0&&(l=s.x-a.x),s.y+i+h.y>u.y&&(c=s.y+i-u.y+h.y),s.y-c-a.y<0&&(c=s.y-a.y),(l||c)&&t.fire("autopanstart").panBy([l,c])}},_onCloseButtonClick:function(t){this._close(),je(t)},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Je.mergeOptions({closePopupOnClick:!0}),Je.include({openPopup:function(t,e,i){return t instanceof on||(t=new on(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ei.include({bindPopup:function(t,e){return t instanceof on?(_(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new on(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(je(t),e instanceof Oi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var sn=nn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){nn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){nn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=nn.prototype.getEvents.call(this);return bt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=he("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),s=this.options.direction,r=i.offsetWidth,a=i.offsetHeight,h=A(this.options.offset),u=this._getAnchor();t="top"===s?t.add(A(-r/2+h.x,-a+h.y+u.y,!0)):"bottom"===s?t.subtract(A(r/2-h.x,-h.y,!0)):"center"===s?t.subtract(A(r/2+h.x,a/2-u.y+h.y,!0)):"right"===s||"auto"===s&&o.x<n.x?(s="right",t.add(A(h.x+u.x,u.y-a/2+h.y,!0))):(s="left",t.subtract(A(r+u.x-h.x,a/2-u.y-h.y,!0))),me(i,"leaflet-tooltip-right"),me(i,"leaflet-tooltip-left"),me(i,"leaflet-tooltip-top"),me(i,"leaflet-tooltip-bottom"),pe(i,"leaflet-tooltip-"+s),we(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ve(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Je.include({openTooltip:function(t,e,i){return t instanceof sn||(t=new sn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ei.include({bindTooltip:function(t,e){return t instanceof sn?(_(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new sn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),bt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(me(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var rn=ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(le(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=A(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});ki.Default=Bi;var an=Ei.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){_(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ue(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_e(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof k?t:new k(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){ve(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);ve(o.el,s),s<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(M(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:a,_initContainer:function(){this._container||(this._container=he("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ue(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=he("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:a,_onRemoveLevel:a,_onCreateLevel:a,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ue(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),r=i-1,a=new k(+o,+s);a.z=+r;var h=this._tileCoordsToKey(a),u=this._tiles[h];return u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n<r&&this._retainParent(o,s,r,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*e;s<2*e+2;s++){var r=new k(o,s);r.z=i+1;var a=this._tileCoordsToKey(r),h=this._tiles[a];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),i+1<n&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();vt?xe(t.el,o,n):we(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new I(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,h=new I(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var l=this._tiles[u].coords;l.z===this._tileZoom&&h.contains(new k(l.x,l.y))||(this._tiles[u].current=!1)}if(1<Math.abs(i-this._tileZoom))this._setView(t,i);else{for(var c=o.min.y;c<=o.max.y;c++)for(var _=o.min.x;_<=o.max.x;_++){var d=new k(_,c);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:r.push(d)}}if(r.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(_=0;_<r.length;_++)this._addTile(r[_],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new R(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new k(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ue(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=a,t.onmousemove=a,et&&this.options.opacity<1&&ve(t,this.options.opacity),ot&&!st&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&z(p(this._tileReady,this,t,null,o)),we(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(ve(i.el,0),M(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(pe(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new k(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new I(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});var hn=an.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=_(this,e)).detectRetina&&Mt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),ot||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return Ze(i,"load",p(this._tileOnLoad,this,e,i)),Ze(i,"error",p(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Mt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return f(this._url,h(e,this.options))},_tileOnLoad:function(t,e){et?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=a,e.onerror=a,e.complete||(e.src=y,ue(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",y),an.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return an.prototype._tileReady.call(this,t,e,i)}});function un(t,e){return new hn(t,e)}var ln=hn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=h({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);var o=(e=_(this,e)).detectRetina&&Mt?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,hn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=O(i.project(e[0]),i.project(e[1])),o=n.min,s=n.max,r=(1.3<=this._wmsVersion&&this._crs===Mi?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=hn.prototype.getTileUrl.call(this,t);return a+d(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return h(this.wmsParams,t),e||this.redraw(),this}});hn.WMS=ln,un.wms=function(t,e){return new ln(t,e)};var cn=Ei.extend({options:{padding:.1,tolerance:0},initialize:function(t){_(this,t),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Pe(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),r=this._map.project(t,e).subtract(s),a=o.multiplyBy(-i).add(n).add(o).subtract(r);vt?xe(this._container,a,i):we(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new I(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_n=cn.extend({getEvents:function(){var t=cn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){cn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ze(t,"mousemove",this._onMouseMove,this),Ze(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ze(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,ue(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){cn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Mt?2:1;we(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Mt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){cn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[u(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[u(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(h.beginPath(),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],h[n?"lineTo":"moveTo"](s.x,s.y);e&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(qe(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(me(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(pe(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&((i.prev=n)?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&((n.next=i)?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function dn(t){return Et?new _n(t):null}var pn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),mn={_initContainer:function(){this._container=he("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(cn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=pn("shape");pe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=pn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[u(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ue(e),t.removeInteractiveTarget(e),delete this._layers[u(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=pn("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=g(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=pn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ce(t._container)},_bringToBack:function(t){_e(t._container)}},fn=Zt?pn:J,gn=cn.extend({getEvents:function(){var t=cn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=fn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ue(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){cn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),we(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fn("path");t.options.className&&pe(e,t.options.className),t.options.interactive&&pe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[u(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ue(t._path),t.removeInteractiveTarget(t._path),delete this._layers[u(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ce(t._path)},_bringToBack:function(t){_e(t._path)}});function vn(t){return St||Zt?new gn(t):null}Zt&&gn.include(mn),Je.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&dn(t)||vn(t)}});var yn=ji.extend({initialize:function(t,e){ji.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=N(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});gn.create=fn,gn.pointsToPath=$,Wi.geometryToLayer=Hi,Wi.coordsToLatLng=Ui,Wi.coordsToLatLngs=Vi,Wi.latLngToCoords=qi,Wi.latLngsToCoords=Gi,Wi.getFeature=Ki,Wi.asFeature=Yi,Je.mergeOptions({boxZoom:!0});var xn=oi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),$t(),be(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ze(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=he("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new I(this._point,this._startPoint),i=e.getSize();we(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ue(this._box),me(this._container,"leaflet-crosshair")),Qt(),Te(),Be(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var e=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Je.addInitHook("addHandler","boxZoom",xn),Je.mergeOptions({doubleClickZoom:!0});var wn=oi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Je.addInitHook("addHandler","doubleClickZoom",wn),Je.mergeOptions({dragging:!0,inertia:!st,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pn=oi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new li(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){me(this._map._container,"leaflet-grab"),me(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=N(this._map.options.maxBounds);this._offsetLimit=O(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=o.multiplyBy(r/s),h=a.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,h),l=a.multiplyBy(u/h),c=u/(i.inertiaDeceleration*r),_=l.multiplyBy(-c/2).round();_.x||_.y?(_=e._limitOffset(_,e.options.maxBounds),z(function(){e.panBy(_,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Je.addInitHook("addHandler","dragging",Pn),Je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ln=oi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ze(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=A(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}je(t)}}});Je.addInitHook("addHandler","keyboard",Ln),Je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bn=oi.extend({addHooks:function(){Ze(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Fe(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),n),je(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(0<this._delta?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}});Je.addInitHook("addHandler","scrollWheelZoom",bn),Je.mergeOptions({tap:!0,tapTolerance:15});var Tn=oi.extend({addHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(De(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new k(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&pe(i,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Ze(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Be(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&me(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new k(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});bt&&!Lt&&Je.addInitHook("addHandler","tap",Tn),Je.mergeOptions({touchZoom:bt&&!st,bounceAtZoomLimits:!0});var zn=oi.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){me(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend",this._onTouchEnd,this),De(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var r=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=z(r,this,!0),De(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,M(this._animRequest),Be(document,"touchmove",this._onTouchMove),Be(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Je.addInitHook("addHandler","touchZoom",zn),Je.BoxZoom=xn,Je.DoubleClickZoom=wn,Je.Drag=Pn,Je.Keyboard=Ln,Je.ScrollWheelZoom=bn,Je.Tap=Tn,Je.TouchZoom=zn,Object.freeze=e,t.version="1.6.0+HEAD.0c81bdf",t.Control=$e,t.control=Qe,t.Browser=Bt,t.Evented=Z,t.Mixin=ri,t.Util=C,t.Class=E,t.Handler=oi,t.extend=h,t.bind=p,t.stamp=u,t.setOptions=_,t.DomEvent=Ye,t.DomUtil=Se,t.PosAnimation=Xe,t.Draggable=li,t.LineUtil=yi,t.PolyUtil=Pi,t.Point=k,t.point=A,t.Bounds=I,t.bounds=O,t.Transformation=q,t.transformation=G,t.Projection=Ti,t.LatLng=D,t.latLng=j,t.LatLngBounds=R,t.latLngBounds=N,t.CRS=H,t.GeoJSON=Wi,t.geoJSON=Ji,t.geoJson=$i,t.Layer=Ei,t.LayerGroup=Si,t.layerGroup=function(t,e){return new Si(t,e)},t.FeatureGroup=Zi,t.featureGroup=function(t){return new Zi(t)},t.ImageOverlay=Qi,t.imageOverlay=function(t,e,i){return new Qi(t,e,i)},t.VideoOverlay=tn,t.videoOverlay=function(t,e,i){return new tn(t,e,i)},t.SVGOverlay=en,t.svgOverlay=function(t,e,i){return new en(t,e,i)},t.DivOverlay=nn,t.Popup=on,t.popup=function(t,e){return new on(t,e)},t.Tooltip=sn,t.tooltip=function(t,e){return new sn(t,e)},t.Icon=ki,t.icon=function(t){return new ki(t)},t.DivIcon=rn,t.divIcon=function(t){return new rn(t)},t.Marker=Ii,t.marker=function(t,e){return new Ii(t,e)},t.TileLayer=hn,t.tileLayer=un,t.GridLayer=an,t.gridLayer=function(t){return new an(t)},t.SVG=gn,t.svg=vn,t.Renderer=cn,t.Canvas=_n,t.canvas=dn,t.Path=Oi,t.CircleMarker=Ri,t.circleMarker=function(t,e){return new Ri(t,e)},t.Circle=Ni,t.circle=function(t,e,i){return new Ni(t,e,i)},t.Polyline=Di,t.polyline=function(t,e){return new Di(t,e)},t.Polygon=ji,t.polygon=function(t,e){return new ji(t,e)},t.Rectangle=yn,t.rectangle=function(t,e){return new yn(t,e)},t.Map=Je,t.map=function(t,e){return new Je(t,e)};var Mn=window.L;t.noConflict=function(){return window.L=Mn,this},window.L=t});} },
            { loader: "style", url: "lib/leaflet/leaflet-1.6.0.css" },
            { loader: "script", url: "lib/leaflet/esri-leaflet-2.3.2.js", load: function () { console.debug( "[lib/leaflet/esri-leaflet-2.3.2.js]" ); !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet"],e):e((t.L=t.L||{},t.L.esri={}),t.L)}(this,function(t,c){"use strict";var e=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,i=""===document.documentElement.style.pointerEvents,a={cors:e,pointerEvents:i},s={attributionWidthOffset:55},o=0;function u(t){var e="";for(var i in t.f=t.f||"json",t)if(t.hasOwnProperty(i)){var s,r=t[i],n=Object.prototype.toString.call(r);e.length&&(e+="&"),s="[object Array]"===n?"[object Object]"===Object.prototype.toString.call(r[0])?JSON.stringify(r):r.join(","):"[object Object]"===n?JSON.stringify(r):"[object Date]"===n?r.valueOf():r,e+=encodeURIComponent(i)+"="+encodeURIComponent(s)}return e}function l(s,r){var n=new window.XMLHttpRequest;return n.onerror=function(t){n.onreadystatechange=c.Util.falseFn,s.call(r,{error:{code:500,message:"XMLHttpRequest error"}},null)},n.onreadystatechange=function(){var e,i;if(4===n.readyState){try{e=JSON.parse(n.responseText)}catch(t){e=null,i={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!i&&e.error&&(i=e.error,e=null),n.onerror=c.Util.falseFn,s.call(r,i,e)}},n.ontimeout=function(){this.onerror()},n}function r(t,e,i,s){var r=l(i,s);return r.open("POST",t),null!=s&&void 0!==s.options&&(r.timeout=s.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(u(e)),r}function n(t,e,i,s){var r=l(i,s);return r.open("GET",t+"?"+u(e),!0),null!=s&&void 0!==s.options&&(r.timeout=s.options.timeout),r.send(null),r}function h(t,e,i,s){var r=u(e),n=l(i,s),o=(t+"?"+r).length;if(o<=2e3&&a.cors?n.open("GET",t+"?"+r):2e3<o&&a.cors&&(n.open("POST",t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=s&&void 0!==s.options&&(n.timeout=s.options.timeout),o<=2e3&&a.cors)n.send(null);else{if(!(2e3<o&&a.cors))return o<=2e3&&!a.cors?p(t,e,i,s):void M("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");n.send(r)}return n}function p(t,e,s,r){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var n="c"+o;e.callback="window._EsriLeafletCallbacks."+n,window._EsriLeafletCallbacks[n]=function(t){if(!0!==window._EsriLeafletCallbacks[n]){var e,i=Object.prototype.toString.call(t);"[object Object]"!==i&&"[object Array]"!==i&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),s.call(r,e,t),window._EsriLeafletCallbacks[n]=!0}};var i=c.DomUtil.create("script",null,document.body);return i.type="text/javascript",i.src=t+"?"+u(e),i.id=n,i.onerror=function(t){if(t&&!0!==window._EsriLeafletCallbacks[n]){s.call(r,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[n]=!0}},c.DomUtil.addClass(i,"esri-leaflet-jsonp"),o++,{id:n,url:i.src,abort:function(){window._EsriLeafletCallbacks._callback[n]({code:0,message:"Request aborted."})}}}var m=a.cors?n:p;m.CORS=n,m.JSONP=p;var d={request:h,get:m,post:r};function y(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t}function g(t){for(var e,i=0,s=0,r=t.length,n=t[s];s<r-1;s++)i+=((e=t[s+1])[0]-n[0])*(e[1]+n[1]),n=e;return 0<=i}function f(t,e,i,s){var r=(s[0]-i[0])*(t[1]-i[1])-(s[1]-i[1])*(t[0]-i[0]),n=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),o=(s[1]-i[1])*(e[0]-t[0])-(s[0]-i[0])*(e[1]-t[1]);if(0!==o){var a=r/o,u=n/o;if(0<=a&&a<=1&&0<=u&&u<=1)return!0}return!1}function _(t,e){for(var i=0;i<t.length-1;i++)for(var s=0;s<e.length-1;s++)if(f(t[i],t[i+1],e[s],e[s+1]))return!0;return!1}function v(t){var e=[],i=t.slice(0),s=y(i.shift().slice(0));if(4<=s.length){g(s)||s.reverse(),e.push(s);for(var r=0;r<i.length;r++){var n=y(i[r].slice(0));4<=n.length&&(g(n)&&n.reverse(),e.push(n))}}return e}function b(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function x(t,e){var i={};if(t.features){i.type="FeatureCollection",i.features=[];for(var s=0;s<t.features.length;s++)i.features.push(x(t.features[s],e))}if("number"==typeof t.x&&"number"==typeof t.y&&(i.type="Point",i.coordinates=[t.x,t.y],"number"==typeof t.z&&i.coordinates.push(t.z)),t.points&&(i.type="MultiPoint",i.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(i.type="LineString",i.coordinates=t.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=t.paths.slice(0))),t.rings&&(i=function(t){for(var e,i,s,r=[],n=[],o=0;o<t.length;o++){var a=y(t[o].slice(0));if(!(a.length<4))if(g(a)){var u=[a.slice().reverse()];r.push(u)}else n.push(a.slice().reverse())}for(var l,h,p,c,m=[];n.length;){s=n.pop();var d=!1;for(e=r.length-1;0<=e;e--)if(i=r[e][0],p=_(l=i,h=s),c=function(t,e){for(var i=!1,s=-1,r=t.length,n=r-1;++s<r;n=s)(t[s][1]<=e[1]&&e[1]<t[n][1]||t[n][1]<=e[1]&&e[1]<t[s][1])&&e[0]<(t[n][0]-t[s][0])*(e[1]-t[s][1])/(t[n][1]-t[s][1])+t[s][0]&&(i=!i);return i}(l,h[0]),!p&&c){r[e].push(s),d=!0;break}d||m.push(s)}for(;m.length;){s=m.pop();var f=!1;for(e=r.length-1;0<=e;e--)if(_(i=r[e][0],s)){r[e].push(s),f=!0;break}f||r.push([s.reverse()])}return 1===r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}(t.rings.slice(0))),"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax&&(i.type="Polygon",i.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(i.type="Feature",i.geometry=t.geometry?x(t.geometry):null,i.properties=t.attributes?b(t.attributes):null,t.attributes))try{i.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],s=0;s<i.length;s++){var r=i[s];if(r in t&&("string"==typeof t[r]||"number"==typeof t[r]))return t[r]}throw Error("No valid id attribute found")}(t.attributes,e)}catch(t){}return JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),t.spatialReference&&t.spatialReference.wkid&&4326!==t.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),i}function S(t,e){e=e||"OBJECTID";var i,s={wkid:4326},r={};switch(t.type){case"Point":r.x=t.coordinates[0],r.y=t.coordinates[1],r.spatialReference=s;break;case"MultiPoint":r.points=t.coordinates.slice(0),r.spatialReference=s;break;case"LineString":r.paths=[t.coordinates.slice(0)],r.spatialReference=s;break;case"MultiLineString":r.paths=t.coordinates.slice(0),r.spatialReference=s;break;case"Polygon":r.rings=v(t.coordinates.slice(0)),r.spatialReference=s;break;case"MultiPolygon":r.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var s=v(t[i]),r=s.length-1;0<=r;r--){var n=s[r].slice(0);e.push(n)}return e}(t.coordinates.slice(0)),r.spatialReference=s;break;case"Feature":t.geometry&&(r.geometry=S(t.geometry,e)),r.attributes=t.properties?b(t.properties):{},t.id&&(r.attributes[e]=t.id);break;case"FeatureCollection":for(r=[],i=0;i<t.features.length;i++)r.push(S(t.features[i],e));break;case"GeometryCollection":for(r=[],i=0;i<t.geometries.length;i++)r.push(S(t.geometries[i],e))}return r}function I(t,e){return S(t,e)}function A(t,e){return x(t,e)}function T(t){if("NaN"===t.xmin||"NaN"===t.ymin||"NaN"===t.xmax||"NaN"===t.ymax)return null;var e=c.latLng(t.ymin,t.xmin),i=c.latLng(t.ymax,t.xmax);return c.latLngBounds(e,i)}function w(t){return{xmin:(t=c.latLngBounds(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var R=/^(OBJECTID|FID|OID|ID)$/i;function O(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(R)){e=t.fields[i].name;break}}return e}function P(t){for(var e in t.attributes)if(e.match(R))return e}function C(t,e){var i,s=t.features||t.results,r=s.length;i=e||O(t);var n={type:"FeatureCollection",features:[]};if(r)for(var o=s.length-1;0<=o;o--){var a=A(s[o],i||P(s[o]));n.features.push(a)}return n}function F(t){return"/"!==(t=c.Util.trim(t))[t.length-1]&&(t+="/"),t}function U(t){if(-1!==t.url.indexOf("?")){t.requestParams=t.requestParams||{};var e=t.url.substring(t.url.indexOf("?")+1);t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return t.url=F(t.url.split("?")[0]),t}function k(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function G(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function M(){console&&console.warn&&console.warn.apply(console,arguments)}function q(t){return t.getSize().x-s.attributionWidthOffset+"px"}function D(e){if(e.attributionControl&&!e.attributionControl._esriAttributionAdded){e.attributionControl.setPrefix('<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Powered by <a href="https://www.esri.com">Esri</a>');var t=document.createElement("style");t.type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t),c.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover");var i=document.createElement("style");i.type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+q(e)+";}",document.getElementsByTagName("head")[0].appendChild(i),c.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution"),e.on("resize",function(t){e.attributionControl._container.style.maxWidth=q(t.target)}),e.attributionControl._esriAttributionAdded=!0}}function E(t){var e={geometry:null,geometryType:null};return t instanceof c.LatLngBounds?(e.geometry=w(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof c.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof c.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=I(t),e.geometryType=G(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=I(t),e.geometryType=G(t.type),e):void M("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function z(t,u){a.cors&&h(t,{},c.Util.bind(function(t,e){if(!t){u._esriAttributions=[];for(var i=0;i<e.contributors.length;i++)for(var s=e.contributors[i],r=0;r<s.coverageAreas.length;r++){var n=s.coverageAreas[r],o=c.latLng(n.bbox[0],n.bbox[1]),a=c.latLng(n.bbox[2],n.bbox[3]);u._esriAttributions.push({attribution:s.attribution,score:n.score,bounds:c.latLngBounds(o,a),minZoom:n.zoomMin,maxZoom:n.zoomMax})}u._esriAttributions.sort(function(t,e){return e.score-t.score}),B({target:u})}},this))}function B(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var s=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(s&&i){for(var r="",n=e.getBounds(),o=c.latLngBounds(n.getSouthWest().wrap(),n.getNorthEast().wrap()),a=e.getZoom(),u=0;u<i.length;u++){var l=i[u],h=l.attribution;!r.match(h)&&l.bounds.intersects(o)&&a>=l.minZoom&&a<=l.maxZoom&&(r+=", "+h)}r=r.substr(2),s.innerHTML=r,s.style.maxWidth=q(e),e.fire("attributionupdated",{attribution:r})}}}var N={warn:M,cleanUrl:F,getUrlParams:U,isArcgisOnline:k,geojsonTypeToArcGIS:G,responseToFeatureCollection:C,geojsonToArcGIS:I,arcgisToGeoJSON:A,boundsToExtent:w,extentToBounds:T,calcAttributionWidth:q,setEsriAttribution:D,_setGeometry:E,_getAttributionData:z,_updateMapAttribution:B,_findIdAttributeFromFeature:P,_findIdAttributeFromResponse:O},Z=c.Class.extend({options:{proxy:!1,useCors:e},generateSetter:function(e,t){return c.Util.bind(function(t){return this.params[e]=t,this},t)},initialize:function(t){if(t.request&&t.options?(this._service=t,c.Util.setOptions(this,t.options)):(c.Util.setOptions(this,t),this.options.url=F(t.url)),this.params=c.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&c.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,s,r){var n=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?d[t](n,i,s,r):d.get.JSONP(n,i,s,r)}});var j=Z.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=c.latLng(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSr=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(i,s){return this._cleanParams(),this.options.isModern||k(this.options.url)?(this.params.f="geojson",this.request(function(t,e){this._trapSQLerrors(t),i.call(s,t,e,e)},this)):this.request(function(t,e){this._trapSQLerrors(t),i.call(s,t,e&&C(e),e)},this)},count:function(i,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.count,e)},t)},ids:function(i,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(t,e){i.call(this,t,e&&e.objectIds,e)},t)},bounds:function(i,s){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(t,e){e&&e.extent&&T(e.extent)?i.call(s,t,T(e.extent),e):(t={message:"Invalid Bounds"},i.call(s,t,null,e))},s)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=c.point(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&M("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSr=4326;var e=E(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});function W(t){return new j(t)}var J=Z.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(i,s){return this.request(function(t,e){i.call(s,t,e&&C(e),e)},s)}});function Q(t){return new J(t)}var V=Z.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var H=V.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=w(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=c.latLng(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(r,n){return this.request(function(t,e){if(t)r.call(n,t,void 0,e);else{var i=C(e);e.results=e.results.reverse();for(var s=0;s<i.features.length;s++){i.features[s].layerId=e.results[s].layerId}r.call(n,void 0,i,e)}})},_setGeometryParams:function(t){var e=E(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});function K(t){return new H(t)}var X=V.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=c.latLng(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(i,s){return this.request(function(t,e){i.call(s,t,e&&this._responseToGeoJSON(e),e)},this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,s=t.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(r.pixel.properties.values=t.properties.Values),i&&i.features&&(r.catalogItems=C(i),s&&s.length===r.catalogItems.features.length))for(var n=s.length-1;0<=n;n--)r.catalogItems.features[n].properties.catalogItemVisibility=s[n];return r}});function Y(t){return new X(t)}var $=c.Evented.extend({options:{proxy:!1,useCors:e,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,c.Util.setOptions(this,t),this.options.url=F(this.options.url)},get:function(t,e,i,s){return this._request("get",t,e,i,s)},post:function(t,e,i,s){return this._request("post",t,e,i,s)},request:function(t,e,i,s){return this._request("request",t,e,i,s)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,s,r){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var n=this._createServiceCallback(t,e,i,s,r);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&c.Util.extend(i,this.options.requestParams),!this._authenticating){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?d[t](o,i,n,r):d.get.JSONP(o,i,n,r)}this._requestQueue.push([t,e,i,s,r])},_createServiceCallback:function(i,s,r,n,o){return c.Util.bind(function(t,e){!t||499!==t.code&&498!==t.code||(this._authenticating=!0,this._requestQueue.push([i,s,r,n,o]),this.fire("authenticationrequired",{authenticate:c.Util.bind(this.authenticate,this)},!0),t.authenticate=c.Util.bind(this.authenticate,this)),n.call(o,t,e),t?this.fire("requesterror",{url:this.options.url+s,params:r,message:t.message,code:t.code,method:i},!0):this.fire("requestsuccess",{url:this.options.url+s,params:r,response:e,method:i},!0),this.fire("requestend",{url:this.options.url+s,params:r,method:i},!0)},this)},_runQueue:function(){for(var t=this._requestQueue.length-1;0<=t;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var tt=$.extend({identify:function(){return K(this)},find:function(){return Q(this)},query:function(){return W(this)}});function et(t){return new tt(t)}var it=$.extend({query:function(){return W(this)},identify:function(){return Y(this)}});function st(t){return new it(t)}var rt=$.extend({options:{idAttribute:"OBJECTID"},query:function(){return W(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,s,r){for(var e=t.features?t.features:[t],i=e.length-1;0<=i;i--)delete e[i].id;return t=I(t),t=1<e.length?t:[t],this.post("addFeatures",{features:t},function(t,e){var i=e&&e.addResults?1<e.addResults.length?e.addResults:e.addResults[0]:void 0;s&&s.call(r,t||e.addResults[0].error,i)},r)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,s,r){var e=t.features?t.features:[t];return t=I(t,this.options.idAttribute),t=1<e.length?t:[t],this.post("updateFeatures",{features:t},function(t,e){var i=e&&e.updateResults?1<e.updateResults.length?e.updateResults:e.updateResults[0]:void 0;s&&s.call(r,t||e.updateResults[0].error,i)},r)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,s,r){return this.post("deleteFeatures",{objectIds:t},function(t,e){var i=e&&e.deleteResults?1<e.deleteResults.length?e.deleteResults:e.deleteResults[0]:void 0;s&&s.call(r,t||e.deleteResults[0].error,i)},r)}});function nt(t){return new rt(t)}var ot="https:"!==window.location.protocol?"http:":"https:",at=c.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:ot+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:ot+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:22,maxNativeZoom:22,downsampled:!1,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:i?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:ot+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:ot+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:ot+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:ot+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!at.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=at.TILES[t]}var s=c.Util.extend(i.options,e);c.Util.setOptions(this,s),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),c.TileLayer.prototype.initialize.call(this,i.urlTemplate,s)},onAdd:function(t){D(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&z((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",B),-1!==this._url.indexOf("World_Imagery")&&t.on("zoomanim",ut,this),c.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){t.off("moveend",B),c.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var t=this._map.createPane(this.options.pane);t.style.pointerEvents="none",t.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return t}});function ut(t){var e=t.target;if(e){var i=e.getZoom(),s=t.zoom,r=e.wrapLatLng(t.center);if(i<s&&13<s&&!this.options.downsampled){var n=e.project(r,s).divideBy(256).floor(),o=c.Util.template(this._url,c.Util.extend({s:this._getSubdomain(n),x:n.x,y:n.y,z:s},this.options)).replace(/tile/,"tilemap")+"/8/8";L.esri.request(o,{},function(t,e){if(!t)for(var i=0;i<e.data.length;i++){if(!e.data[i]){this.options.maxNativeZoom=s-1,this.options.downsampled=!0;break}this.options.maxNativeZoom=22}},this)}else s<13&&(this.options.downsampled=!1)}}var lt=c.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=U(t=c.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&0<Object.keys(t.requestParams).length?c.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=et(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),c.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return c.Util.template(this.tileUrl,c.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return c.DomEvent.on(i,"load",c.Util.bind(this._tileOnLoad,this,e,i)),c.DomEvent.on(i,"error",c.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",function(){i.src=this.getTileUrl(t)},this),i},onAdd:function(l){D(l),this._lodMap||this.metadata(function(t,e){if(!t&&e.spatialReference){var i=e.spatialReference.latestWkid||e.spatialReference.wkid;if(!this.options.attribution&&l.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,l.attributionControl.addAttribution(this.getAttribution())),l.options.crs!==c.CRS.EPSG3857||102100!==i&&3857!==i)l.options.crs&&l.options.crs.code&&-1<l.options.crs.code.indexOf(i)||M("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var s=e.tileInfo.lods,r=lt.MercatorZoomLevels,n=0;n<s.length;n++){var o=s[n];for(var a in r){var u=r[a];if(this._withinPercentage(o.resolution,u,this.options.zoomOffsetAllowance)){this._lodMap[a]=o.level;break}}}this.fire("lodmap")}}},this),c.TileLayer.prototype.onAdd.call(this,l)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var ht=c.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,c.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===c.CRS.EPSG3857?c.ImageOverlay.prototype._reset.call(this):c.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),pt=c.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:e,attribution:null,interactive:!1,alt:""},onAdd:function(i){D(i),this.options.zIndex&&(this.options.position=null),this._update=c.Util.throttle(this._update,this.options.updateInterval,this),i.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?i.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,e){!t&&!this.options.attribution&&i.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,i.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(t){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=c.popup(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,s=-t(-1/0,1/0),r=0,n=i.length;r<n;r++)e=i[r].style.zIndex,i[r]!==this._currentImage._image&&e&&(s=t(s,+e));isFinite(s)&&(this.options.zIndex=s+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,s,e){if(this._map){if(e&&(t="data:"+e+";base64,"+t),!t)return;var r=new ht(t,s,{opacity:0,crossOrigin:this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),n=function(t){if(r.off("error",n,this),this._map){var e=t.target,i=this._currentImage;e._bounds.equals(s)&&e._bounds.equals(this._map.getBounds())?(this._currentImage=e,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),i&&this._map&&this._map.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):this._map.removeLayer(e)}this.fire("load",{bounds:s})};r.once("error",function(){this._map.removeLayer(r),this.fire("error"),r.off("load",n,this)},this),r.once("load",n,this)}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(t>this.options.maxZoom||t<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var i=this._buildExportParams();c.Util.extend(i,this.options.requestParams),i?(this._requestExport(i,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(t,e,i,s){if(t=c.latLng(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var r=this._popupFunction(e,i,s);r&&this._popup.setLatLng(t).setContent(r).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),s=this._map.options.crs.project(i),r=this._map.options.crs.project(e),n=c.bounds(s,r);return[n.getBottomLeft().x,n.getBottomLeft().y,n.getTopRight().x,n.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),s=this._map.unproject(t.getTopRight()),r=this._map.latLngToLayerPoint(s).y,n=this._map.latLngToLayerPoint(i).y;return(0<r||n<e.y)&&(e.y=n-r),e.x+","+e.y}}),ct=pt.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=U(t),this.service=st(t),this.service.addEventParent(this),c.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return c.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return c.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(s){var t=c.Util.bind(function(t,e,i){t||setTimeout(c.Util.bind(function(){this._renderPopup(s.latlng,t,e,i)},this),300)},this),e=this.identify().at(s.latlng);this.options.mosaicRule&&e.setMosaicRule(this.options.mosaicRule),e.run(t),this._shouldRenderPopup=!0,this._lastClick=s.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,i){"json"===this.options.f?this.service.request("exportImage",t,function(t,e){t||(this.options.token&&(e.href+="?token="+this.options.token),this.options.proxy&&(e.href=this.options.proxy+"?"+e.href),this._renderImage(e.href,i))},this):(t.f="image",this._renderImage(this.options.url+"exportImage"+c.Util.getParamString(t),i))}});var mt=pt.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png24",transparent:!0,f:"json"},initialize:function(t){t=U(t),this.service=et(t),this.service.addEventParent(this),(t.proxy||t.token)&&"json"!==t.f&&(t.f="json"),c.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(s){var t,e=c.Util.bind(function(t,e,i){t||setTimeout(c.Util.bind(function(){this._renderPopup(s.latlng,t,e,i)},this),300)},this);if((t=this.options.popup?this.options.popup.on(this._map).at(s.latlng):this.identify().on(this._map).at(s.latlng)).params.maxAllowableOffset||t.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?t.layers("visible:"+this.options.layers.join(",")):t.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!t.params.layerDefs)for(var i in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(i)&&t.layerDef(i,this.options.layerDefs[i]);t.run(e),this._shouldRenderPopup=!0,this._lastClick=s.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,i){"json"===this.options.f?this.service.request("export",t,function(t,e){t||(this.options.token&&e.href&&(e.href+="?token="+this.options.token),this.options.proxy&&e.href&&(e.href=this.options.proxy+"?"+e.href),e.href?this._renderImage(e.href,i):this._renderImage(e.imageData,i,e.contentType))},this):(t.f="image",this._renderImage(this.options.url+"export"+c.Util.getParamString(t),i))}});var dt=c.Layer.extend({options:{cellSize:512,updateInterval:150},initialize:function(t){t=c.setOptions(this,t),this._zooming=!1},onAdd:function(t){this._map=t,this._update=c.Util.throttle(this._update,this.options.updateInterval,this),this._reset(),this._update()},onRemove:function(){this._map.removeEventListener(this.getEvents(),this),this._removeCells()},getEvents:function(){return{moveend:this._update,zoomstart:this._zoomstart,zoomend:this._reset}},addTo:function(t){return t.addLayer(this),this},removeFrom:function(t){return t.removeLayer(this),this},_zoomstart:function(){this._zooming=!0},_reset:function(){this._removeCells(),this._cells={},this._activeCells={},this._cellsToLoad=0,this._cellsTotal=0,this._cellNumBounds=this._getCellNumBounds(),this._resetWrap(),this._zooming=!1},_resetWrap:function(){var t=this._map,e=t.options.crs;if(!e.infinite){var i=this._getCellSize();e.wrapLng&&(this._wrapLng=[Math.floor(t.project([0,e.wrapLng[0]]).x/i),Math.ceil(t.project([0,e.wrapLng[1]]).x/i)]),e.wrapLat&&(this._wrapLat=[Math.floor(t.project([e.wrapLat[0],0]).y/i),Math.ceil(t.project([e.wrapLat[1],0]).y/i)])}},_getCellSize:function(){return this.options.cellSize},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._getCellSize(),i=c.bounds(t.min.divideBy(e).floor(),t.max.divideBy(e).floor());this._removeOtherCells(i),this._addCells(i),this.fire("cellsupdated")}},_addCells:function(t){var e,i,s,r=[],n=t.getCenter(),o=this._map.getZoom();for(e=t.min.y;e<=t.max.y;e++)for(i=t.min.x;i<=t.max.x;i++)(s=c.point(i,e)).z=o,this._isValidCell(s)&&r.push(s);var a=r.length;if(0!==a)for(this._cellsToLoad+=a,this._cellsTotal+=a,r.sort(function(t,e){return t.distanceTo(n)-e.distanceTo(n)}),i=0;i<a;i++)this._addCell(r[i])},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._cellNumBounds;if(!i)return!1;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var s=this._cellCoordsToBounds(t);return c.latLngBounds(this.options.bounds).intersects(s)},_cellCoordsToBounds:function(t){var e=this._map,i=this.options.cellSize,s=t.multiplyBy(i),r=s.add([i,i]),n=e.wrapLatLng(e.unproject(s,t.z)),o=e.wrapLatLng(e.unproject(r,t.z));return c.latLngBounds(n,o)},_cellCoordsToKey:function(t){return t.x+":"+t.y},_keyToCellCoords:function(t){var e=t.split(":"),i=parseInt(e[0],10),s=parseInt(e[1],10);return c.point(i,s)},_removeOtherCells:function(t){for(var e in this._cells)t.contains(this._keyToCellCoords(e))||this._removeCell(e)},_removeCell:function(t){var e=this._activeCells[t];e&&(delete this._activeCells[t],this.cellLeave&&this.cellLeave(e.bounds,e.coords),this.fire("cellleave",{bounds:e.bounds,coords:e.coords}))},_removeCells:function(){for(var t in this._cells){var e=this._cells[t].bounds,i=this._cells[t].coords;this.cellLeave&&this.cellLeave(e,i),this.fire("cellleave",{bounds:e,coords:i})}},_addCell:function(t){this._wrapCoords(t);var e=this._cellCoordsToKey(t),i=this._cells[e];i&&!this._activeCells[e]&&(this.cellEnter&&this.cellEnter(i.bounds,t),this.fire("cellenter",{bounds:i.bounds,coords:t}),this._activeCells[e]=i),i||(i={coords:t,bounds:this._cellCoordsToBounds(t)},this._cells[e]=i,this._activeCells[e]=i,this.createCell&&this.createCell(i.bounds,t),this.fire("cellcreate",{bounds:i.bounds,coords:t}))},_wrapCoords:function(t){t.x=this._wrapLng?c.Util.wrapNum(t.x,this._wrapLng):t.x,t.y=this._wrapLat?c.Util.wrapNum(t.y,this._wrapLat):t.y},_getCellNumBounds:function(){var t=this._map.getPixelWorldBounds(),e=this._getCellSize();return t?c.bounds(t.min.divideBy(e).floor(),t.max.divideBy(e).ceil().subtract([1,1])):null}});function ft(t){this.values=[].concat(t||[])}ft.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},ft.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,s=0,r=this.values.length-1;s<=r;)if(e=(s+r)/2|0,+(i=this.values[Math.round(e)]).value<+t)s=e+1;else{if(!(+i.value>+t))return e;r=e-1}return Math.abs(~r)},ft.prototype.between=function(t,e){var i=this.getIndex(t),s=this.getIndex(e);if(0===i&&0===s)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[s+1]&&this.values[s+1].value===e;)s++;return this.values[s]&&this.values[s].value===e&&this.values[s+1]&&s++,this.values.slice(i,s)},ft.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},ft.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},ft.prototype.sort=function(){return this.values.sort(function(t,e){return+e.value-+t.value}).reverse(),this.dirty=!1,this};var yt=dt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(t){if(dt.prototype.initialize.call(this,t),t=U(t),t=c.Util.setOptions(this,t),this.service=nt(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&M("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new ft,this._endTimeIndex=new ft):this.options.timeField&&(this._timeIndex=new ft),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(r){return D(r),this.service.metadata(function(t,e){if(!t){var i=e.supportedQueryFormats,s=!1;!1===this.service.options.isModern&&(s=!0),!s&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),e.objectIdField&&(this.service.options.idAttribute=e.objectIdField),!this.options.attribution&&r.attributionControl&&e.copyrightText&&(this.options.attribution=e.copyrightText,r.attributionControl.addAttribution(this.getAttribution()))}},this),r.on("zoomend",this._handleZoomChange,this),dt.prototype.onAdd.call(this,r)},onRemove:function(t){return t.off("zoomend",this._handleZoomChange,this),dt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(s,r,n){return this._activeRequests++,1===this._activeRequests&&this.fire("loading",{bounds:s},!0),this._buildQuery(s).run(function(t,e,i){i&&i.exceededTransferLimit&&this.fire("drawlimitexceeded"),!t&&e&&e.features.length&&c.Util.requestAnimFrame(c.Util.bind(function(){this._addFeatures(e.features,r),this._postProcessFeatures(s)},this)),t||!e||e.features.length||this._postProcessFeatures(s),t&&this._postProcessFeatures(s),n&&n.call(this,t,e)},this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){var i=this._cacheKey(e);this._cache[i]=this._cache[i]||[];for(var s=t.length-1;0<=s;s--){var r=t[s].id;-1===this._currentSnapshot.indexOf(r)&&this._currentSnapshot.push(r),-1===this._cache[i].indexOf(r)&&this._cache[i].push(r)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t){var e=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.requestParams&&c.Util.extend(e.params,this.options.requestParams),this.options.simplifyFactor&&e.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&e.between(this.options.from,this.options.to),e},setWhere:function(t,s,r){this.options.where=t&&t.length?t:"1=1";for(var n=[],o=[],a=0,u=null,e=c.Util.bind(function(t,e){if(t&&(u=t),e)for(var i=e.features.length-1;0<=i;i--)o.push(e.features[i].id);--a<=0&&this._visibleZoom()&&(this._currentSnapshot=o,c.Util.requestAnimFrame(c.Util.bind(function(){this.removeLayers(n),this.addLayers(o),s&&s.call(r,u)},this)))},this),i=this._currentSnapshot.length-1;0<=i;i--)n.push(this._currentSnapshot[i]);for(var l in this._activeCells){a++;var h=this._keyToCellCoords(l),p=this._cellCoordsToBounds(h);this._requestFeatures(p,l,e)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,i,s,r){var n=this.options.from,o=this.options.to,a=0,u=null,t=c.Util.bind(function(t){t&&(u=t),this._filterExistingFeatures(n,o,e,i),a--,s&&a<=0&&s.call(r,u)},this);if(this.options.from=e,this.options.to=i,this._filterExistingFeatures(n,o,e,i),"server"===this.options.timeFilterMode)for(var l in this._activeCells){a++;var h=this._keyToCellCoords(l),p=this._cellCoordsToBounds(h);this._requestFeatures(p,l,t)}return this},refresh:function(){for(var t in this._activeCells){var e=this._keyToCellCoords(t),i=this._cellCoordsToBounds(e);this._requestFeatures(i,t)}this.redraw&&this.once("load",function(){this.eachFeature(function(t){this._redraw(t.feature.id)},this)},this)},_filterExistingFeatures:function(t,e,i,s){var r=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,n=this._getFeaturesInTimeRange(i,s);if(n.indexOf)for(var o=0;o<n.length;o++){var a=r.indexOf(n[o]);0<=a&&r.splice(a,1)}c.Util.requestAnimFrame(c.Util.bind(function(){this.removeLayers(r),this.addLayers(n)},this))},_getFeaturesInTimeRange:function(t,e){var i,s=[];if(this.options.timeField.start&&this.options.timeField.end){var r=this._startTimeIndex.between(t,e),n=this._endTimeIndex.between(t,e);i=r.concat(n)}else{if(!this._timeIndex)return M("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];i=this._timeIndex.between(t,e)}for(var o=i.length-1;0<=o;o--)s.push(i[o].id);return s},_buildTimeIndexes:function(t){var e,i;if(this.options.timeField.start&&this.options.timeField.end){var s=[],r=[];for(e=t.length-1;0<=e;e--)i=t[e],s.push({id:i.id,value:new Date(i.properties[this.options.timeField.start])}),r.push({id:i.id,value:new Date(i.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(s),this._endTimeIndex.bulkAdd(r)}else{var n=[];for(e=t.length-1;0<=e;e--)i=t[e],n.push({id:i.id,value:new Date(i.properties[this.options.timeField])});this._timeIndex.bulkAdd(n)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var s=+t.properties[this.options.timeField];return e<=s&&s<=i}if(this.options.timeField.start&&this.options.timeField.end){var r=+t.properties[this.options.timeField.start],n=+t.properties[this.options.timeField.end];return e<=r&&r<=i||e<=n&&n<=i||r<=e&&i<=n}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._activeCells){var e=this._activeCells[t].coords,i=this._cacheKey(e);this._cache[i]&&this.addLayers(this._cache[i])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(i){this._metadata?i(void 0,this._metadata):this.metadata(c.Util.bind(function(t,e){this._metadata=e,i(t,this._metadata)},this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(e,n,o){this._getMetadata(c.Util.bind(function(t,s){if(t)n&&n.call(this,t,null);else{var r=e.features?e.features:[e];this.service.addFeatures(e,c.Util.bind(function(t,e){if(!t){for(var i=r.length-1;0<=i;i--)r[i].properties[s.objectIdField]=1<r.length?e[i].objectId:e.objectId,r[i].id=1<r.length?e[i].objectId:e.objectId;this.createLayers(r)}n&&n.call(o,t,e)},this))}},this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,s,r){var n=t.features?t.features:[t];this.service.updateFeatures(t,function(t,e){if(!t){for(var i=n.length-1;0<=i;i--)this.removeLayers([n[i].id],!0);this.createLayers(n)}s&&s.call(r,t,e)},this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,r,n){return this.service.deleteFeatures(t,function(t,e){var i=e.length?e:[e];if(!t&&0<i.length)for(var s=i.length-1;0<=s;s--)this.removeLayers([i[s].objectId],!0);r&&r.call(n,t,e)},this)}}),gt=yt.extend({options:{cacheLayers:!0},initialize:function(t){yt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return yt.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=c.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var i=[],s=this.options.coordsToLatLng||c.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=c.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=c.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,s),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=c.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,s),t.setLatLngs(i);break;case"MultiPolygon":i=c.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,s),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;0<=e;e--){var i,s=t[e],r=this._layers[s.id];!this._visibleZoom()||!r||this._map.hasLayer(r)||this.options.timeField&&!this._featureWithinTimeRange(s)||(this._map.addLayer(r),this.fire("addfeature",{feature:r.feature},!0)),r&&0<this.options.simplifyFactor&&(r.setLatLngs||r.setLatLng)&&this._updateLayer(r,s),r||((i=this.createNewLayer(s))?(i.feature=s,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(s))&&this._map.addLayer(i)):M("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;0<=e;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;0<=i;i--){var s=t[i],r=this._layers[s];r&&(this.fire("removefeature",{feature:r.feature,permanent:e},!0),this._map.removeLayer(r)),r&&e&&delete this._layers[s]}},cellEnter:function(t,s){this._visibleZoom()&&!this._zooming&&this._map&&c.Util.requestAnimFrame(c.Util.bind(function(){var t=this._cacheKey(s),e=this._cellCoordsToKey(s),i=this._cache[t];this._activeCells[e]&&i&&this.addLayers(i)},this))},cellLeave:function(t,a){this._zooming||c.Util.requestAnimFrame(c.Util.bind(function(){if(this._map){var t=this._cacheKey(a),e=this._cellCoordsToKey(a),i=this._cache[t],s=this._map.getBounds();if(!this._activeCells[e]&&i){for(var r=!0,n=0;n<i.length;n++){var o=this._layers[i[n]];o&&o.getBounds&&s.intersects(o.getBounds())&&(r=!1)}r&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[e],delete this._activeCells[e])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(t){this.resetFeatureStyle(t.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||c.Path.prototype.options;return e&&(c.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var i=this._layers[t];return"function"==typeof e&&(e=e(i.feature)),i.setStyle&&i.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i=this._map.getBounds();for(var s in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[s].feature.id)&&("function"==typeof this._layers[s].getLatLng&&i.contains(this._layers[s].getLatLng())?t.call(e,this._layers[s]):"function"==typeof this._layers[s].getBounds&&i.intersects(this._layers[s].getBounds())&&t.call(e,this._layers[s]))}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature(function(t){t.bringToBack&&t.bringToBack()})},bringToFront:function(){this.eachFeature(function(t){t.bringToFront&&t.bringToFront()})},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e=this._layers[t],i=e.feature;if(e&&e.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var s=this.options.pointToLayer(i,c.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0])).options.icon;e.setIcon(s)}if(e&&e.setStyle&&this.options.pointToLayer){var r=this.options.pointToLayer(i,c.latLng(i.geometry.coordinates[1],i.geometry.coordinates[0])).options;this.setFeatureStyle(i.id,r)}e&&e.setStyle&&this.options.style&&this.resetStyle(i.id)}});t.VERSION="2.3.2",t.Support=a,t.options=s,t.Util=N,t.get=m,t.post=r,t.request=h,t.Task=Z,t.task=function(t){return t=U(t),new Z(t)},t.Query=j,t.query=W,t.Find=J,t.find=Q,t.Identify=V,t.identify=function(t){return new V(t)},t.IdentifyFeatures=H,t.identifyFeatures=K,t.IdentifyImage=X,t.identifyImage=Y,t.Service=$,t.service=function(t){return t=U(t),new $(t)},t.MapService=tt,t.mapService=et,t.ImageService=it,t.imageService=st,t.FeatureLayerService=rt,t.featureLayerService=nt,t.BasemapLayer=at,t.basemapLayer=function(t,e){return new at(t,e)},t.TiledMapLayer=lt,t.tiledMapLayer=function(t,e){return new lt(t,e)},t.RasterLayer=pt,t.ImageMapLayer=ct,t.imageMapLayer=function(t,e){return new ct(t,e)},t.DynamicMapLayer=mt,t.dynamicMapLayer=function(t,e){return new mt(t,e)},t.FeatureManager=yt,t.FeatureLayer=gt,t.featureLayer=function(t){return new gt(t)},Object.defineProperty(t,"__esModule",{value:!0})});} },
            { loader: "script", url: "lib/leaflet/esri-leaflet-renderers-2.0.6.js", load: function () { console.debug( "[lib/leaflet/esri-leaflet-renderers-2.0.6.js]" ); !function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("leaflet"),require("esri-leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet","esri-leaflet"],i):i((t.L=t.L||{},t.L.esri=t.L.esri||{},t.L.esri.Renderers=t.L.esri.Renderers||{}),t.L,t.L.esri)}(this,function(t,v,i){"use strict";v="default"in v?v.default:v,i="default"in i?i.default:i;var o=v.Class.extend({initialize:function(t,i){this._symbolJson=t,this.val=null,this._styles={},this._isDefault=!1,this._layerTransparency=1,i&&i.layerTransparency&&(this._layerTransparency=1-i.layerTransparency/100)},pixelValue:function(t){return 1.333*t},colorValue:function(t){return"rgb("+t[0]+","+t[1]+","+t[2]+")"},alphaValue:function(t){return t[3]/255*this._layerTransparency},getSize:function(t,i){var e=t.properties,s=i.field,o=0,n=null;if(s){n=e[s];var r=i.minSize,l=i.maxSize,a=i.minDataValue,h=i.maxDataValue,y=i.normalizationField,u=e?parseFloat(e[y]):void 0;if(null===n||y&&(isNaN(u)||0===u))return null;isNaN(u)||(n/=u),null!==r&&null!==l&&null!==a&&null!==h&&(o=n<=a?r:h<=n?l:r+(n-a)/(h-a)*(l-r)),o=isNaN(o)?0:o}return o},getColor:function(t,i){if(!(t.properties&&i&&i.field&&i.stops))return null;var e,s,o,n,r=t.properties,l=r[i.field],a=i.normalizationField,h=r?parseFloat(r[a]):void 0;if(null===l||a&&(isNaN(h)||0===h))return null;if(isNaN(h)||(l/=h),l<=i.stops[0].value)return i.stops[0].color;var y=i.stops[i.stops.length-1];if(l>=y.value)return y.color;for(var u=0;u<i.stops.length;u++){var _=i.stops[u];if(_.value<=l)e=_.color,o=_.value;else if(_.value>l){s=_.color,n=_.value;break}}if(!isNaN(o)&&!isNaN(n)){var c=n-o;if(0<c){var f=(l-o)/c;if(f){var p=(n-l)/c;if(p){for(var d=[],S=0;S<4;S++)d[S]=Math.round(e[S]*p+s[S]*f);return d}return s}return e}}return null}}),s=v.Path.extend({initialize:function(t,i,e){v.setOptions(this,e),this._size=i,this._latlng=v.latLng(t),this._svgCanvasIncludes()},toGeoJSON:function(){return v.GeoJSON.getFeature(this,{type:"Point",coordinates:v.GeoJSON.latLngToCoords(this.getLatLng())})},_svgCanvasIncludes:function(){},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_update:function(){this._map&&this._updatePath()},_updatePath:function(){},setLatLng:function(t){return this._latlng=v.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setSize:function(t){return this._size=t,this.redraw()},getSize:function(){return this._size}}),g=s.extend({initialize:function(t,i,e){s.prototype.initialize.call(this,t,i,e)},_updatePath:function(){this._renderer._updateCrossMarker(this)},_svgCanvasIncludes:function(){v.Canvas.include({_updateCrossMarker:function(t){var i=t._point,e=t._size/2,s=this._ctx;s.beginPath(),s.moveTo(i.x,i.y+e),s.lineTo(i.x,i.y-e),this._fillStroke(s,t),s.moveTo(i.x-e,i.y),s.lineTo(i.x+e,i.y),this._fillStroke(s,t)}}),v.SVG.include({_updateCrossMarker:function(t){var i=t._point,e=t._size/2;v.Browser.vml&&(i._round(),e=Math.round(e));var s="M"+i.x+","+(i.y+e)+"L"+i.x+","+(i.y-e)+"M"+(i.x-e)+","+i.y+"L"+(i.x+e)+","+i.y;this._setPath(t,s)}})}}),L=s.extend({initialize:function(t,i,e){s.prototype.initialize.call(this,t,i,e)},_updatePath:function(){this._renderer._updateXMarker(this)},_svgCanvasIncludes:function(){v.Canvas.include({_updateXMarker:function(t){var i=t._point,e=t._size/2,s=this._ctx;s.beginPath(),s.moveTo(i.x+e,i.y+e),s.lineTo(i.x-e,i.y-e),this._fillStroke(s,t)}}),v.SVG.include({_updateXMarker:function(t){var i=t._point,e=t._size/2;v.Browser.vml&&(i._round(),e=Math.round(e));var s="M"+(i.x+e)+","+(i.y+e)+"L"+(i.x-e)+","+(i.y-e)+"M"+(i.x-e)+","+(i.y+e)+"L"+(i.x+e)+","+(i.y-e);this._setPath(t,s)}})}}),x=s.extend({options:{fill:!0},initialize:function(t,i,e){s.prototype.initialize.call(this,t,i,e)},_updatePath:function(){this._renderer._updateSquareMarker(this)},_svgCanvasIncludes:function(){v.Canvas.include({_updateSquareMarker:function(t){var i=t._point,e=t._size/2,s=this._ctx;s.beginPath(),s.moveTo(i.x+e,i.y+e),s.lineTo(i.x-e,i.y+e),s.lineTo(i.x-e,i.y-e),s.lineTo(i.x+e,i.y-e),s.closePath(),this._fillStroke(s,t)}}),v.SVG.include({_updateSquareMarker:function(t){var i=t._point,e=t._size/2;v.Browser.vml&&(i._round(),e=Math.round(e));var s="M"+(i.x+e)+","+(i.y+e)+"L"+(i.x-e)+","+(i.y+e)+"L"+(i.x-e)+","+(i.y-e)+"L"+(i.x+e)+","+(i.y-e);s+=v.Browser.svg?"z":"x",this._setPath(t,s)}})}}),z=s.extend({options:{fill:!0},initialize:function(t,i,e){s.prototype.initialize.call(this,t,i,e)},_updatePath:function(){this._renderer._updateDiamondMarker(this)},_svgCanvasIncludes:function(){v.Canvas.include({_updateDiamondMarker:function(t){var i=t._point,e=t._size/2,s=this._ctx;s.beginPath(),s.moveTo(i.x,i.y+e),s.lineTo(i.x-e,i.y),s.lineTo(i.x,i.y-e),s.lineTo(i.x+e,i.y),s.closePath(),this._fillStroke(s,t)}}),v.SVG.include({_updateDiamondMarker:function(t){var i=t._point,e=t._size/2;v.Browser.vml&&(i._round(),e=Math.round(e));var s="M"+i.x+","+(i.y+e)+"L"+(i.x-e)+","+i.y+"L"+i.x+","+(i.y-e)+"L"+(i.x+e)+","+i.y;s+=v.Browser.svg?"z":"x",this._setPath(t,s)}})}}),e=o.extend({statics:{MARKERTYPES:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSX","esriPMS"]},initialize:function(t,i){var e;if(o.prototype.initialize.call(this,t,i),i&&(this.serviceUrl=i.url),t)if("esriPMS"===t.type){var s=this._symbolJson.url;s&&"http://"===s.substr(0,7)||"https://"===s.substr(0,8)?(e=this.sanitize(s),this._iconUrl=e):(e=this.serviceUrl+"images/"+s,this._iconUrl=i&&i.token?e+"?token="+i.token:e),t.imageData&&(this._iconUrl="data:"+t.contentType+";base64,"+t.imageData),this._icons={},this.icon=this._createIcon(this._symbolJson)}else this._fillStyles()},sanitize:function(t){if(!t)return"";var i;try{i=(i=(i=(i=t.replace(/<br>/gi,"\n")).replace(/<p.*>/gi,"\n")).replace(/<a.*href='(.*?)'.*>(.*?)<\/a>/gi," $2 ($1) ")).replace(/<(?:.|\s)*?>/g,"")}catch(t){i=null}return i},_fillStyles:function(){this._symbolJson.outline&&0<this._symbolJson.size&&"esriSLSNull"!==this._symbolJson.outline.style?(this._styles.stroke=!0,this._styles.weight=this.pixelValue(this._symbolJson.outline.width),this._styles.color=this.colorValue(this._symbolJson.outline.color),this._styles.opacity=this.alphaValue(this._symbolJson.outline.color)):this._styles.stroke=!1,this._symbolJson.color?(this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):this._styles.fillOpacity=0,"esriSMSCircle"===this._symbolJson.style&&(this._styles.radius=this.pixelValue(this._symbolJson.size)/2)},_createIcon:function(t){var i=this.pixelValue(t.width),e=i;t.height&&(e=this.pixelValue(t.height));var s=i/2,o=e/2;t.xoffset&&(s+=this.pixelValue(t.xoffset)),t.yoffset&&(o+=this.pixelValue(t.yoffset));var n=v.icon({iconUrl:this._iconUrl,iconSize:[i,e],iconAnchor:[s,o]});return this._icons[t.width.toString()]=n},_getIcon:function(t){var i=this._icons[t.toString()];return i||(i=this._createIcon({width:t})),i},pointToLayer:function(t,i,e,s){var o,n,r,l,a,h,y,u,_,c,f,p,d=this._symbolJson.size||this._symbolJson.width;if(!this._isDefault){if(e.sizeInfo){var S=this.getSize(t,e.sizeInfo);S&&(d=S)}if(e.colorInfo){var m=this.getColor(t,e.colorInfo);m&&(this._styles.fillColor=this.colorValue(m),this._styles.fillOpacity=this.alphaValue(m))}}if("esriPMS"===this._symbolJson.type){var b=v.extend({},{icon:this._getIcon(d)},s);return v.marker(i,b)}switch(d=this.pixelValue(d),this._symbolJson.style){case"esriSMSSquare":return c=i,f=d,p=v.extend({},this._styles,s),new x(c,f,p);case"esriSMSDiamond":return y=i,u=d,_=v.extend({},this._styles,s),new z(y,u,_);case"esriSMSCross":return l=i,a=d,h=v.extend({},this._styles,s),new g(l,a,h);case"esriSMSX":return o=i,n=d,r=v.extend({},this._styles,s),new L(o,n,r)}return this._styles.radius=d/2,v.circleMarker(i,v.extend({},this._styles,s))}});function n(t,i){return new e(t,i)}var r=o.extend({statics:{LINETYPES:["esriSLSDash","esriSLSDot","esriSLSDashDotDot","esriSLSDashDot","esriSLSSolid"]},initialize:function(t,i){o.prototype.initialize.call(this,t,i),this._fillStyles()},_fillStyles:function(){if(this._styles.lineCap="butt",this._styles.lineJoin="miter",this._styles.fill=!1,this._styles.weight=0,!this._symbolJson)return this._styles;if(this._symbolJson.color&&(this._styles.color=this.colorValue(this._symbolJson.color),this._styles.opacity=this.alphaValue(this._symbolJson.color)),!isNaN(this._symbolJson.width)){this._styles.weight=this.pixelValue(this._symbolJson.width);var t=[];switch(this._symbolJson.style){case"esriSLSDash":t=[4,3];break;case"esriSLSDot":t=[1,3];break;case"esriSLSDashDot":t=[8,3,1,3];break;case"esriSLSDashDotDot":t=[8,3,1,3,1,3]}if(0<t.length){for(var i=0;i<t.length;i++)t[i]*=this._styles.weight;this._styles.dashArray=t.join(",")}}},style:function(t,i){if(!this._isDefault&&i){if(i.sizeInfo){var e=this.pixelValue(this.getSize(t,i.sizeInfo));e&&(this._styles.weight=e)}if(i.colorInfo){var s=this.getColor(t,i.colorInfo);s&&(this._styles.color=this.colorValue(s),this._styles.opacity=this.alphaValue(s))}}return this._styles}});function l(t,i){return new r(t,i)}var a=o.extend({statics:{POLYGONTYPES:["esriSFSSolid"]},initialize:function(t,i){o.prototype.initialize.call(this,t,i),t&&(t.outline&&"esriSLSNull"===t.outline.style?this._lineStyles={weight:0}:this._lineStyles=l(t.outline,i).style(),this._fillStyles())},_fillStyles:function(){if(this._lineStyles)if(0===this._lineStyles.weight)this._styles.stroke=!1;else for(var t in this._lineStyles)this._styles[t]=this._lineStyles[t];this._symbolJson&&(this._symbolJson.color&&a.POLYGONTYPES.indexOf(0<=this._symbolJson.style)?(this._styles.fill=!0,this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):(this._styles.fill=!1,this._styles.fillOpacity=0))},style:function(t,i){if(!this._isDefault&&i&&i.colorInfo){var e=this.getColor(t,i.colorInfo);e&&(this._styles.fillColor=this.colorValue(e),this._styles.fillOpacity=this.alphaValue(e))}return this._styles}});function h(t,i){return new a(t,i)}var y=v.Class.extend({options:{proportionalPolygon:!1,clickable:!0},initialize:function(t,i){this._rendererJson=t,this._pointSymbols=!1,this._symbols=[],this._visualVariables=this._parseVisualVariables(t.visualVariables),v.Util.setOptions(this,i)},_parseVisualVariables:function(t){var i={};if(t)for(var e=0;e<t.length;e++)i[t[e].type]=t[e];return i},_createDefaultSymbol:function(){this._rendererJson.defaultSymbol&&(this._defaultSymbol=this._newSymbol(this._rendererJson.defaultSymbol),this._defaultSymbol._isDefault=!0)},_newSymbol:function(t){return"esriSMS"===t.type||"esriPMS"===t.type?(this._pointSymbols=!0,n(t,this.options)):"esriSLS"===t.type?l(t,this.options):"esriSFS"===t.type?h(t,this.options):void 0},_getSymbol:function(){},attachStylesToLayer:function(t){this._pointSymbols?t.options.pointToLayer=v.Util.bind(this.pointToLayer,this):(t.options.style=v.Util.bind(this.style,this),t._originalStyle=t.options.style)},pointToLayer:function(t,i){var e=this._getSymbol(t);return e&&e.pointToLayer?e.pointToLayer(t,i,this._visualVariables,this.options):v.circleMarker(i,{radius:0,opacity:0})},style:function(t){var i;this.options.userDefinedStyle&&(i=this.options.userDefinedStyle(t));var e=this._getSymbol(t);return e?this.mergeStyles(e.style(t,this._visualVariables),i):this.mergeStyles({opacity:0,fillOpacity:0},i)},mergeStyles:function(t,i){var e,s={};for(e in t)t.hasOwnProperty(e)&&(s[e]=t[e]);if(i)for(e in i)i.hasOwnProperty(e)&&(s[e]=i[e]);return s}}),u=y.extend({initialize:function(t,i){y.prototype.initialize.call(this,t,i),this._createSymbol()},_createSymbol:function(){this._rendererJson.symbol&&this._symbols.push(this._newSymbol(this._rendererJson.symbol))},_getSymbol:function(){return this._symbols[0]}});function _(t,i){return new u(t,i)}var c=y.extend({initialize:function(t,i){y.prototype.initialize.call(this,t,i),this._field=this._rendererJson.field,this._rendererJson.normalizationType&&"esriNormalizeByField"===this._rendererJson.normalizationType&&(this._normalizationField=this._rendererJson.normalizationField),this._createSymbols()},_createSymbols:function(){var t,i=this._rendererJson.classBreakInfos;this._symbols=[];for(var e=i.length-1;0<=e;e--)(t=this.options.proportionalPolygon&&this._rendererJson.backgroundFillSymbol?this._newSymbol(this._rendererJson.backgroundFillSymbol):this._newSymbol(i[e].symbol)).val=i[e].classMaxValue,this._symbols.push(t);this._symbols.sort(function(t,i){return t.val>i.val?1:-1}),this._createDefaultSymbol(),this._maxValue=this._symbols[this._symbols.length-1].val},_getSymbol:function(t){var i=t.properties[this._field];if(this._normalizationField){var e=t.properties[this._normalizationField];if(isNaN(e)||0===e)return this._defaultSymbol;i/=e}if(i>this._maxValue)return this._defaultSymbol;for(var s=this._symbols[0],o=this._symbols.length-1;0<=o&&!(i>this._symbols[o].val);o--)s=this._symbols[o];return s}});function f(t,i){return new c(t,i)}var p=y.extend({initialize:function(t,i){y.prototype.initialize.call(this,t,i),this._field=this._rendererJson.field1,this._createSymbols()},_createSymbols:function(){for(var t,i=this._rendererJson.uniqueValueInfos,e=i.length-1;0<=e;e--)(t=this._newSymbol(i[e].symbol)).val=i[e].value,this._symbols.push(t);this._createDefaultSymbol()},_getSymbol:function(t){var i=t.properties[this._field];if(this._rendererJson.fieldDelimiter&&this._rendererJson.field2){var e=t.properties[this._rendererJson.field2];if(e){i+=this._rendererJson.fieldDelimiter+e;var s=t.properties[this._rendererJson.field3];s&&(i+=this._rendererJson.fieldDelimiter+s)}}for(var o=this._defaultSymbol,n=this._symbols.length-1;0<=n;n--)this._symbols[n].val==i&&(o=this._symbols[n]);return o}});function d(t,i){return new p(t,i)}i.FeatureLayer.addInitHook(function(){if(!this.options.ignoreRenderer){var s=v.Util.bind(this.onAdd,this),e=v.Util.bind(this.unbindPopup,this),o=v.Util.bind(this.onRemove,this);v.Util.bind(this.createNewLayer,this),this.onAdd=function(e){this.metadata(function(t,i){t?console.warn("failed to load metadata from the service."):i&&i.drawingInfo&&(this.options.drawingInfo&&(i.drawingInfo=this.options.drawingInfo),"overlayPane"===this.options.pane&&"esriGeometryPoint"===i.geometryType&&(this.options.pane="markerPane"),this._setRenderers(i),s(e),this._addPointLayer(e))},this)},this.onRemove=function(t){if(o(t),this._pointLayer){var i=this._pointLayer.getLayers();for(var e in i)t.removeLayer(i[e])}},this.unbindPopup=function(){if(e(),this._pointLayer){var t=this._pointLayer.getLayers();for(var i in t)t[i].unbindPopup()}},this._addPointLayer=function(t){this._pointLayer&&(this._pointLayer.addTo(t),this._pointLayer.bringToFront())},this._createPointLayer=function(){if(!this._pointLayer&&(this._pointLayer=v.geoJson(),this._pointLayerIds={},this._popup)){this._pointLayer.options.onEachFeature=v.Util.bind(function(t,i){i.bindPopup(this._popup(t,i),this._popupOptions)},this)}},this.createNewLayer=function(t){var i=v.GeoJSON.geometryToLayer(t,this.options);if(this._hasProportionalSymbols){var e=this.getPolygonCentroid(t.geometry.coordinates);if(!isNaN(e[0])&&!isNaN(e[0])){this._createPointLayer();var s=t.id.toString();if(!this._pointLayerIds[s]){var o=this.getPointJson(t,e);this._pointLayer.addData(o),this._pointLayerIds[s]=!0}this._pointLayer.bringToFront()}}return i},this.getPolygonCentroid=function(t){var i=t[0][0];2===i.length&&(i=t[0]);for(var e,s,o,n=0,r=0,l=0,a=i.length,h=0,y=a-1;h<a;y=h++)e=i[h],s=i[y],n+=e[0]*s[1],n-=e[1]*s[0],o=e[0]*s[1]-s[0]*e[1],r+=(e[0]+s[0])*o,l+=(e[1]+s[1])*o;return[r/(o=3*n),l/o]},this.getPointJson=function(t,i){return{type:"Feature",properties:t.properties,id:t.id,geometry:{type:"Point",coordinates:[i[0],i[1]]}}},this._checkForProportionalSymbols=function(t,i){if(this._hasProportionalSymbols=!1,"esriGeometryPolygon"===t&&(i.backgroundFillSymbol&&(this._hasProportionalSymbols=!0),i.classBreakInfos&&i.classBreakInfos.length)){var e=i.classBreakInfos[0].symbol;!e||"esriSMS"!==e.type&&"esriPMS"!==e.type||(this._hasProportionalSymbols=!0)}},this._setRenderers=function(t){var i,e=t.drawingInfo.renderer,s={url:this.options.url};switch(this.options.token&&(s.token=this.options.token),this.options.pane&&(s.pane=this.options.pane),t.drawingInfo.transparency&&(s.layerTransparency=t.drawingInfo.transparency),this.options.style&&(s.userDefinedStyle=this.options.style),e.type){case"classBreaks":if(this._checkForProportionalSymbols(t.geometryType,e),this._hasProportionalSymbols)this._createPointLayer(),f(e,s).attachStylesToLayer(this._pointLayer),s.proportionalPolygon=!0;i=f(e,s);break;case"uniqueValue":i=d(e,s);break;default:i=_(e,s)}i.attachStylesToLayer(this)}}}),t.VERSION="2.0.6",t.Renderer=y,t.SimpleRenderer=u,t.simpleRenderer=_,t.ClassBreaksRenderer=c,t.classBreaksRenderer=f,t.UniqueValueRenderer=p,t.uniqueValueRenderer=d,t.Symbol=o,t.PointSymbol=e,t.pointSymbol=n,t.LineSymbol=r,t.lineSymbol=l,t.PolygonSymbol=a,t.polygonSymbol=h});} },
            { loader: "script", url: "lib/leaflet/esri-leaflet-legend-compat-src-2.0.1.js", load: function () { console.debug( "[lib/leaflet/esri-leaflet-legend-compat-src-2.0.1.js]" ); !function(i){"function"==typeof define&&define.amd?define(["leaflet","esri-leaflet"],function(e,t){return i(e,t)}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=i(require("leaflet"),require("esri-leaflet"))),"undefined"!=typeof window&&window.L&&i(window.L,L.esri)}(function(h,l){return l.Util.reduce=function(t,e,l,o,s){var c=e;!function i(e){for(var n=!0,a=e;a<t.length;a++){var r=!1;if(l(c,t[a],function(e,t){if(e)return o.call(s,e,c);r=!0,c=t,n||i(a+1)}),!(n=r))return}o.call(s,null,c)}(0)},l.MapService.include({legend:function(e,t){return new l.Legend(this).run(e,t)}}),l.FeatureLayerService.include({legend:function(e,t){return new h.esri.Legend(this).run(e,t)}}),l.Legend=l.Task.extend({path:"legend",params:{f:"json"},run:function(e,t){return this._service?this._service.request(this.path,this.params,e,t):this._request("request",this.path,this.params,e,t)}}),l.legend=function(e){return new l.Legend(e)},l.Legend.include({initialize:function(e){this._renderer=new l.Legend.SymbolRenderer,l.Task.prototype.initialize.call(this,e)},run:function(i,n){function e(e,t){e&&400===e.code?this._collectLegendFromLayers(i,n):t&&t.drawingInfo?this._symbolsToLegends([t],function(e,t){i.call(n,e,{layers:t})}):i.call(n,e,t)}return this._service?this._service.request(this.path,this.params,e,this):this._request("request",this.path,this.params,e,this)},_collectLegendFromLayers:function(l,o){this._service.metadata(function(e,t){if(e)return l.call(o,e);for(var i=t.layers||[t],n=[],a=0,r=i.length;a<r;a++)i[a].subLayerIds||n.push(i[a]);this._getLayersLegends(n,function(e,t){e?l.call(o,e):this._symbolsToLegends(t,function(e,t){l.call(o,e,{layers:t})})},this)},this)},_getLayersLegends:function(e,i,n){var t=this;l.Util.reduce(e,[],function(i,e,n){t._getLayerLegend(e,function(e,t){if(e)return n(e,null);n(null,i.concat(t))},t)},function(e,t){i.call(n,e,t)})},_getLayerLegend:function(e,t,i){return this.options.drawingInfo?(e.drawingInfo=JSON.parse(JSON.stringify(this.options.drawingInfo)),t(null,e)):e.drawingInfo?t(null,e):void this._service.request(e.id,{f:"json"},t,i)},_symbolsToLegends:function(e,i,n){var t=this;l.Util.reduce(e,[],function(i,n,a){t._drawingInfoToLegend(n.drawingInfo,function(e,t){if(e)return a(e,null);a(null,i.concat([{layerId:n.id,layerType:n.type,layerName:n.name,maxScale:n.maxScale,minScale:n.minScale,legend:t}]))},t)},function(e,t){i.call(n,e,t)})},_getRendererSymbols:function(e){var t;return"uniqueValue"===e.type?t=e.uniqueValueInfos.slice():"classBreaks"===e.type?t=e.classBreakInfos.slice():"simple"===e.type&&(t=[{symbol:e.symbol,label:e.label,description:e.description,value:e.value}]),e.defaultSymbol&&t.push({symbol:e.defaultSymbol,label:e.defaultLabel,description:"",value:null}),t},_drawingInfoToLegend:function(e,i,n){var t=this;l.Util.reduce(this._getRendererSymbols(e.renderer),[],function(i,n,a){if(n.skipLegend)return a(null,i);t._renderSymbol(n,function(e,t){if(e)return a(e,i);a(null,i.concat([{label:n.label,height:t.height,url:n.symbol.url,imageData:t.imageData,contentType:t.contentType,width:t.width,values:[n.value||""]}]))},t)},function(e,t){i.call(n,e,t)})},_renderSymbol:function(e,t,i){return this._renderer.render(e.symbol,t,i)}}),l.Legend.SymbolRenderer=h.Class.extend({statics:{SYMBOL_TYPES:{MARKER:"esriSMS",LINE:"esriSLS",FILL:"esriSFS",PICTURE_MARKER:"esriPMS",PICTURE_FILL:"esriPFS",TEXT:"esriTS"},DEFAULT_SIZE:20},render:function(e,i,n){var a=document.createElement("canvas"),t=a.getContext("2d");e.imageData;function r(e,t){e?i.call(n,e):i.call(n,null,{width:a.width||l.Legend.SymbolRenderer.DEFAULT_SIZE,height:a.height||l.Legend.SymbolRenderer.DEFAULT_SIZE,imageData:t.replace("data:image/png;base64,",""),url:null,contentType:"image/png"})}if(this._setSize(a,e),e.imageData)return r(null,e.imageData);switch(e.type){case"esriSMS":this._renderMarker(t,e,r);break;case"esriSLS":this._renderLine(t,e,r);break;case"esriSFS":this._renderFill(t,e,r);break;case"esriPMS":this._renderImageMarker(t,e,r);break;case"esriPFS":this._renderImageFill(t,e,r);break;case"esriST":this._renderText(t,e,r)}},_renderText:function(e,t,i){i(null,e.canvas.toDataURL())},_renderFill:function(e,t,i){var n=l.Legend.SymbolRenderer.DEFAULT_SIZE,a=t.outline?t.outline.width:1,r=Math.max(5,3*a);switch(t.style){case"esriSFSVertical":this._hatchCanvas(e,n,t.color,a,r);break;case"esriSFSHorizontal":this._setRotation(e,90),this._hatchCanvas(e,n,t.color,a,r);break;case"esriSFSBackwardDiagonal":this._setRotation(e,-45),this._hatchCanvas(e,n,t.color,a,r);break;case"esriSFSForwardDiagonal":this._setRotation(e,45),this._hatchCanvas(e,n,t.color,a,r);break;case"esriSFSCross":this._hatchCanvas(e,n,t.color,a,r),this._setRotation(e,90),this._hatchCanvas(e,n,t.color,a,r);break;case"esriSFSDiagonalCross":this._setRotation(e,45),this._hatchCanvas(e,n,t.color,a,r),this._setRotation(e,45),this._hatchCanvas(e,n,t.color,a,r);break;case"esriSFSSolid":e.fillStyle=this._formatColor(t.color),e.fillRect(0,0,n,n);break;case"esriSFSNull":break;default:throw new Error("Unknown SFS style: "+t.style)}t.outline&&"esriSLSNull"!=t.outline.style&&(e.strokeStyle=this._formatColor(t.outline.color),e.lineWidth=t.outline.width,e.fillStyle=this._formatColor([0,0,0,0]),this._setDashArray(e,t.outline),e.rect(t.outline.width,t.outline.width,n-t.outline.width,n-t.outline.width),e.stroke()),i(null,e.canvas.toDataURL())},_renderLine:function(e,t,i){var n=l.Legend.SymbolRenderer.DEFAULT_SIZE;e.beginPath(),e.lineWidth=t.width,e.strokeStyle=this._formatColor(t.color),this._setDashArray(e,t),e.moveTo(0,n/2),e.lineTo(n,n/2),e.closePath(),e.stroke(),i(null,e.canvas.toDataURL())},_renderMarker:function(e,t,i){var n,a,r,l=0,o=0,s=t.size;switch(e.beginPath(),t.outline&&(e.strokeStyle=this._formatColor(t.outline.color),e.lineWidth=t.outline.width,l+=t.outline.width,o+=t.outline.width),this._setRotation(e,t.angle),t.style){case"esriSMSCircle":e.fillStyle=this._formatColor(t.color),n=(s-2*l)/2,e.arc(n+l,n+l,n,0,2*Math.PI,!1),e.fill();break;case"esriSMSX":e.moveTo(l,o),e.lineTo(s-l,s-o),e.moveTo(s-l,o),e.lineTo(l,s-o);break;case"esriSMSCross":e.moveTo(l,s/2),e.lineTo(s-l,s/2),e.moveTo(s/2,o),e.lineTo(s/2,s-o);break;case"esriSMSDiamond":e.fillStyle=this._formatColor(t.color),a=(s-2*l)/2,r=(s-2*o)/2,e.moveTo(l,o+r),e.lineTo(l+a,o),e.lineTo(l+2*a,o+r),e.lineTo(l+a,o+2*r),e.lineTo(l,o+r),e.fill();break;case"esriSMSSquare":e.rect(l,o,s-2*l,s-2*o);break;case"esriSMSTriangle":e.fillStyle=this._formatColor(t.color),a=(s-2*l)/2,r=(s-2*o)/2,e.moveTo(l,o+2*r),e.lineTo(l+a,o),e.lineTo(l+2*a,o+2*r),e.lineTo(l,o+2*r),e.fill();break;default:throw new Error("Unknown esriSMS style: "+t.style)}e.closePath(),t.outline&&e.stroke(),i(null,e.canvas.toDataURL())},_renderImageFill:function(i,n,a){this._setRotation(i,n.angle),n.imageData?(this._fillImage(i,n.imageData,n,n.contentType),a(null,i.toDataURL())):this._loadImage(n.url,function(e,t){this._fillImage(i,null,n,n.contentType,t),a(null,i.canvas.toDataURL())},this)},_renderImageMarker:function(i,n,a){this._setRotation(i,n.angle),n.imageData?(this._drawImage(i,n.imageData,n.contentType),a(null,i.toDataURL())):this._loadImage(n.url,function(e,t){i.drawImage(t,0,0,n.width,n.height),a(null,i.canvas.toDataURL())},this)},_setSize:function(e,t){t.size?e.width=e.height=t.size:"esriSLS"===t.type||"esriSFS"===t.type?e.width=e.height=l.Legend.SymbolRenderer.DEFAULT_SIZE:(e.width=Math.round(.5+t.width),e.height=Math.round(.5+t.height))},_setRotation:function(e,t){e.rotate(-parseFloat(t)*Math.PI/180)},_setDashArray:function(e,t){var i=this._formatDashArray(t);i.length&&e.setLineDash(i)},_drawCross:function(e,t,i,n){e.moveTo(t,i),e.lineTo(n-t,n-i),e.moveTo(n-t,i),e.lineTo(t,n-i)},_hatchCanvas:function(e,t,i,n,a){for(var r=2*t,l=2*t,o=-r;o<r;o+=a)e.moveTo(o,-l),e.lineTo(o,l);e.lineWidth=n,e.strokeStyle=this._formatColor(i),e.stroke()},_formatColor:function(e){return"rgba("+e.slice(0,3).join(",")+","+e[3]/255+")"},_formatDashArray:function(e){var t=[];switch(e.style){case"esriSLSDash":t=[4,3];break;case"esriSLSDot":t=[1,3];break;case"esriSLSDashDot":t=[8,3,1,3];break;case"esriSLSDashDotDot":t=[8,3,1,3,1,3]}if(0<t.length)for(var i=0,n=t.length;i<n;i++)t[i]*=e.width;return t},_getImageData:function(e,t){return e.toDImageData(0,0,t.width,t.height)},_fillImage:function(e,t,i,n,a){var r=h.esri.Legend.DEFAULT_SIZE,l=i.width||r,o=i.height||r;t&&((a=new Image).src="data:"+n+";base64,"+t);var s=e.createPattern(a,"repeat");e.rect(0,0,l,o),e.fillStyle=s,e.fill(),i.outline&&(e.strokeStyle=this._formatColor(i.outline.color),e.lineWidth=i.outline.width,e.fillStyle=this._formatColor([0,0,0,0]),this._setDashArray(e,i.outline),e.rect(i.outline.width,i.outline.width,l-i.outline.width,o-i.outline.width),e.stroke())},_drawImage:function(e,t,i){var n=new Image;n.src="data:"+i+";base64,"+t,e.drawImage(n,0,0)},_loadImage:function(e,t,i){var n=new Image;n.onload=function(){t.call(i,null,this)},n.onerror=function(e){t.call(i,{code:500})},n.src=e+(-1===e.indexOf("?")?"?":"&")+"nc="+(new Date).getTime()}}),l.DynamicMapLayer.include({legend:function(e,t){return this.service.legend(e,t)}}),l.FeatureLayer.include({legend:function(e,t){return this.service.legend(e,t)}}),l.LegendControl=h.Control.extend({options:{listTemplate:"<ul>{layers}</ul>",layerTemplate:"<li><strong>{layerName}</strong><ul>{legends}</ul></li>",listRowTemplate:'<li><img width="{width}" height="{height}" src="data:{contentType};base64,{imageData}"><span>{label}</span></li>',emptyLabel:"<all values>",container:null},initialize:function(e,t){this._layers=h.Util.isArray(e)?e:[e],h.Control.prototype.initialize.call(this,t)},onAdd:function(e){var t=this.options.container||h.DomUtil.create("div","leaflet-legend-control leaflet-bar");return h.DomEvent.disableScrollPropagation(t).disableClickPropagation(t),this._layers.length&&this._load(),t},_load:function(){h.esri.Util.reduce(this._layers,{layers:[]},function(i,e,n){e.legend(function(e,t){if(e)return n(e,i);i.layers=i.layers.concat(t.layers),n(null,i)})},this._onLoad,this)},_onLoad:function(e,t){if(!e){for(var i="",n=0,a=t.layers.length;n<a;n++){for(var r=t.layers[n],l="",o=0,s=r.legend.length;o<s;o++){var c=JSON.parse(JSON.stringify(r.legend[o]));this._validateLegendLabel(c),l+=h.Util.template(this.options.listRowTemplate,c)}i+=h.Util.template(this.options.layerTemplate,{layerName:r.layerName,legends:l})}this._container.innerHTML=h.Util.template(this.options.listTemplate,{layers:i})}},_validateLegendLabel:function(e){!e.label&&this.options.emptyLabel&&(e.label=this.options.emptyLabel),e.label=e.label.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}),l.legendControl=function(e,t){return new h.esri.LegendControl(e,t)},l});} },
            { loader: "asset", url: "lib/leaflet/images/layers-2x.png" },
            { loader: "asset", url: "lib/leaflet/images/layers.png" },
            { loader: "asset", url: "lib/leaflet/images/marker-icon-2x.png" },
            { loader: "asset", url: "lib/leaflet/images/marker-icon.png" },
            { loader: "asset", url: "lib/leaflet/images/marker-shadow.png" }
        ] }
    );
    include.tag( "libs",
        { loader: "script", url: "smk/libs.js", load: function () { console.debug( "[smk/libs.js]" ); include.module("libs",["document-ready"],function(){"use strict";return window.jQuery&&(include.tag("jquery").include=Promise.resolve(window.jQuery)),window.Vue&&(include.tag("vue").include=Promise.resolve(window.Vue)),window.turf&&(include.tag("turf").include=Promise.resolve(window.turf)),include("jquery","vue","vue-config","turf")});} }
    );
    include.tag( "material-icons",
        { loader: "group", tags: [
            { loader: "style", url: "../node_modules/material-design-icons-iconfont/dist/material-design-icons.css" },
            { loader: "asset", url: "../node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.ttf" },
            { loader: "asset", url: "../node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.woff" },
            { loader: "asset", url: "../node_modules/material-design-icons-iconfont/dist/fonts/MaterialIcons-Regular.woff2" }
        ] }
    );
    include.tag( "merge-config",
        { loader: "script", url: "smk/merge-config.js", load: function () { console.debug( "[smk/merge-config.js]" ); include.module("merge-config",["util"],function(){"use strict";var s=[];function e(e,n){s.push({regex:new RegExp("^"+e+"$"),path:e,strategy:n})}e("",r),e("/name",t),e("/viewer",r),e("/viewer/location",o),e("/layers",g("id")),e("/layers<.+?>/id",n),e("/layers<.+?>/attributes",o),e("/layers<.+?>/queries",g("id")),e("/layers<.+?>/queries<.+?>/parameters",g("id")),e("/tools",function(r,e,i){var s=a(r),n=a(e);f(s,"base",i),f(n,"source",i),n.forEach(function(n,e){if(n.instance)if("*"!=n.type){var o=s.find(function(e){return e.type==n.type&&e.instance==n.instance});if(!o){var t=s.find(function(e){return e.type==n.type&&!0===e.instance});t?((o=JSON.parse(JSON.stringify(t))).instance=n.instance,console.log("copied base instance",JSON.parse(JSON.stringify(o)))):(o={type:n.type,instance:n.instance},console.log("created base instance",JSON.parse(JSON.stringify(o)))),s.push(o)}c([[o],0],[[n],0],i+"<"+n.type+","+n.instance+">")}else console.warn("tool type is *, but instance not null, skipping",n);else g("type")(r,[[[n]],0],i)})}),e("/tools<.+?>/type",n),e("/tools<.+?>/instance",n),e("/tools<.+?>/position",o),e("/tools<layers,.+?>/display",g("id")),e("/tools<layers,.+?>/display<.+?>(/items<.+?>)*/items",g("id")),e("/tools<.+?>/internalLayers",g("id")),e("/tools<.+?>/internalLayers<.+?>/style",o);var l={object:r,array:function(e,n,o){var t=a(e),r=a(n);if(!t)return e[0][e[1]]=r,void console.log(o,"=",r);if(null===r)return delete e[0][e[1]],void console.log(o,"deleted");f(t,"base",o),f(r,"source",o),e[0][e[1]]=t.concat(r),console.log(o,"concat",r)},boolean:t,number:t,string:t};function a(e){var n=e[0],o=e[1];return null==o?n:n[o]}function c(e,n,o){var t=function(e){for(var n=0;n<s.length;n+=1){var o=s[n];if(o.regex.test(e))return e!=o.path&&console.debug(JSON.stringify(e),"~",JSON.stringify(o.path)),o.strategy}}(o);if(t)return t(e,n,o);var r=SMK.UTIL.type(a(e));if(t=l[r])return t(e,n,o);var i=SMK.UTIL.type(a(n));if(t=l[i])return t(e,n,o);if("null"!=i&&"undefined"!=i)throw console.warn(o,"no merge strategy",e,n),Error('no merge strategy for "'+o+'"')}function n(e,n,o){console.debug(o,"ignored")}function o(e,n,o){var t=a(e),r=a(n);return t&&null===r?(delete e[0][e[1]],void console.log(o,"deleted")):(e[0][e[1]]=r,void console.log(o,"=",JSON.parse(JSON.stringify(r))))}function u(e,n,o){if("object"!=SMK.UTIL.type(e))throw Error("Expected an Object in "+n+" at "+o)}function f(e,n,o){if("array"!=SMK.UTIL.type(e))throw Error("Expected an Array in "+n+" at "+o)}function t(e,n,o){var t=a(e),r=a(n);return t?null===r?(delete e[0][e[1]],void console.log(o,"deleted")):(function(e,n,o){var t=SMK.UTIL.type(e);if("number"!=t&&"string"!=t&&"boolean"!=t)throw Error("Expected a Value in "+n+" at "+o)}(r,"source",o),e[0][e[1]]=r,void console.log(o,"=",JSON.parse(JSON.stringify(r)))):(e[0][e[1]]=r,void console.log(o,"=",JSON.parse(JSON.stringify(r))))}function r(e,n,o){var t=a(e),r=a(n);return t?null===r?(delete e[0][e[1]],void console.log(o,"deleted")):(u(t,"base",o),u(r,"source",o),void Object.keys(r).forEach(function(e){c([t,e],[r,e],o+"/"+e)})):(e[0][e[1]]=r,void console.log(o,"=",r))}function g(l){return function(e,n,r){var i=a(e),s=a(n);return i?null===s?(delete e[0][e[1]],void console.log(r,"deleted")):(f(i,"base",r),f(s,"source",r),void s.forEach(function(e,n){u(e,"source",r+"["+n+"]");var o=new RegExp("^"+("*"==e[l]?".*":e[l])+"$"),t=i.map(function(e,n){if(o.test(e[l]))return n}).filter(function(e){return null!=e});0<t.length?t.forEach(function(e){c([i,e],[s,n],r+"<"+i[e][l]+">")}):(i.push(e),console.log(r,"concat",e))})):(e[0][e[1]]=s,void console.log(r,"=",JSON.parse(JSON.stringify(s))))}}return function(e){for(var n=JSON.parse(JSON.stringify(SMK.CONFIG)),o=0;0<e.length;){var t=e.shift(),r="config "+JSON.stringify(t.$source||"inline #"+(o+=1));delete t.$source,console.groupCollapsed(r),console.debug("merging:",JSON.parse(JSON.stringify({base:n,source:t}))),c([{$:n},"$"],[{$:t},"$"],""),console.groupEnd(r)}return console.log("merged config",JSON.parse(JSON.stringify(n))),n}});} }
    );
    include.tag( "proj4",
        { loader: "script", url: "lib/proj4-2.4.4.min.js", load: function () { console.debug( "[lib/proj4-2.4.4.min.js]" ); !function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.proj4=b()}(this,function(){"use strict";function a(a,b){if(a[b])return a[b];for(var c,d,e=Object.keys(a),f=b.toLowerCase().replace(Ub,""),g=-1;++g<e.length;)if(c=e[g],d=c.toLowerCase().replace(Ub,""),d===f)return a[c]}function b(a){if("string"!=typeof a)throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Wb}function c(a){var c=new b(a);return c.output()}function d(a,b,c){Array.isArray(b)&&(c.unshift(b),b=null);var d=b?{}:a,f=c.reduce(function(a,b){return e(b,a),a},d);b&&(a[b]=f)}function e(a,b){if(!Array.isArray(a))return void(b[a]=!0);var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(b[c]={},void e(a[0],b[c])):void(b[c]=a[0]);if(!a.length)return void(b[c]=!0);if("TOWGS84"===c)return void(b[c]=a);Array.isArray(c)||(b[c]={});var f;switch(c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return b[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&e(a[2],b[c]));case"SPHEROID":case"ELLIPSOID":return b[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&e(a[3],b[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void d(b,c,a);default:for(f=-1;++f<a.length;)if(!Array.isArray(a[f]))return e(a,b[c]);return d(b,c,a)}}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*fc}function h(a){function b(b){var c=a.to_meter||1;return b*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):(a.to_meter=a.UNIT.convert,10)));var c=a.GEOGCS;"GEOGCS"===a.type&&(c=a),c&&(c.DATUM?a.datumCode=c.DATUM.name.toLowerCase():a.datumCode=c.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(a.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=c.DATUM.SPHEROID.a,a.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36"),~a.datumCode.indexOf("osni_1952")&&(a.datumCode="osni52"),(~a.datumCode.indexOf("tm65")||~a.datumCode.indexOf("geodetic_datum_of_1965"))&&(a.datumCode="ire65")),a.b&&!isFinite(a.b)&&(a.b=a.a);var d=function(b){return f(a,b)},e=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];e.forEach(d),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}function i(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?i[a]=Vb(arguments[1]):i[a]=gc(arguments[1]):i[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?i.apply(b,a):i(a)});if("string"==typeof a){if(a in i)return i[a]}else"EPSG"in a?i["EPSG:"+a.EPSG]=a:"ESRI"in a?i["ESRI:"+a.ESRI]=a:"IAU2000"in a?i["IAU2000:"+a.IAU2000]=a:console.log(a);return}}function j(a){return"string"==typeof a}function k(a){return a in i}function l(a){return hc.some(function(b){return a.indexOf(b)>-1})}function m(a){return"+"===a[0]}function n(a){return j(a)?k(a)?i[a]:l(a)?gc(a):m(a)?Vb(a):void 0:a}function o(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=jc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function p(a){var b=a.x,c=a.y;if(c*Ob>90&&-90>c*Ob&&b*Ob>180&&-180>b*Ob)return null;var d,e;if(Math.abs(Math.abs(c)-Ib)<=Mb)return null;if(this.sphere)d=this.x0+this.a*this.k0*lc(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Pb+.5*c));else{var f=Math.sin(c),g=mc(this.e,c,f);d=this.x0+this.a*this.k0*lc(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a}function q(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Ib-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var f=Math.exp(-e/(this.a*this.k0));if(c=nc(this.e,f),-9999===c)return null}return b=lc(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}function r(){}function s(a){return a}function t(a,b){var c=uc.length;return a.names?(uc[c]=a,a.names.forEach(function(a){tc[a.toLowerCase()]=c}),this):(console.log(b),!0)}function u(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof tc[b]&&uc[tc[b]]?uc[tc[b]]:void 0}function v(){sc.forEach(t)}function w(a,b,c,d){var e=a*a,f=b*b,g=(e-f)/e,h=0;d?(a*=1-g*(Jb+g*(Kb+g*Lb)),e=a*a,g=0):h=Math.sqrt(g);var i=(e-f)/f;return{es:g,e:h,ep2:i}}function x(b,c,d,e,f){if(!b){var g=a(wc,e);g||(g=xc),b=g.a,c=g.b,d=g.rf}return d&&!c&&(c=(1-1/d)*b),(0===d||Math.abs(b-c)<Mb)&&(f=!0,c=b),{a:b,b:c,rf:d,sphere:f}}function y(a,b,c,d,e,f){var g={};return void 0===a||"none"===a?g.datum_type=Gb:g.datum_type=Fb,b&&(g.datum_params=b.map(parseFloat),0===g.datum_params[0]&&0===g.datum_params[1]&&0===g.datum_params[2]||(g.datum_type=Db),g.datum_params.length>3&&(0===g.datum_params[3]&&0===g.datum_params[4]&&0===g.datum_params[5]&&0===g.datum_params[6]||(g.datum_type=Eb,g.datum_params[3]*=Hb,g.datum_params[4]*=Hb,g.datum_params[5]*=Hb,g.datum_params[6]=g.datum_params[6]/1e6+1))),g.a=c,g.b=d,g.es=e,g.ep2=f,g}function z(b,c){if(!(this instanceof z))return new z(b);c=c||function(a){if(a)throw a};var d=n(b);if("object"!=typeof d)return void c(b);var e=z.projections.get(d.projName);if(!e)return void c(b);if(d.datumCode&&"none"!==d.datumCode){var f=a(yc,d.datumCode);f&&(d.datum_params=f.towgs84?f.towgs84.split(","):null,d.ellps=f.ellipse,d.datumName=f.datumName?f.datumName:d.datumCode)}d.k0=d.k0||1,d.axis=d.axis||"enu",d.ellps=d.ellps||"wgs84";var g=x(d.a,d.b,d.rf,d.ellps,d.sphere),h=w(g.a,g.b,g.rf,d.R_A),i=d.datum||y(d.datumCode,d.datum_params,g.a,g.b,h.es,h.ep2);ic(this,d),ic(this,e),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=i,this.init(),c(null,this)}function A(a,b){return a.datum_type!==b.datum_type?!1:a.a!==b.a||Math.abs(a.es-b.es)>5e-11?!1:a.datum_type===Db?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]:a.datum_type===Eb?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]&&a.datum_params[3]===b.datum_params[3]&&a.datum_params[4]===b.datum_params[4]&&a.datum_params[5]===b.datum_params[5]&&a.datum_params[6]===b.datum_params[6]:!0}function B(a,b,c){var d,e,f,g,h=a.x,i=a.y,j=a.z?a.z:0;if(-Ib>i&&i>-1.001*Ib)i=-Ib;else if(i>Ib&&1.001*Ib>i)i=Ib;else if(-Ib>i||i>Ib)return null;return h>Math.PI&&(h-=2*Math.PI),e=Math.sin(i),g=Math.cos(i),f=e*e,d=c/Math.sqrt(1-b*f),{x:(d+j)*g*Math.cos(h),y:(d+j)*g*Math.sin(h),z:(d*(1-b)+j)*e}}function C(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=1e-12,v=u*u,w=30,x=a.x,y=a.y,z=a.z?a.z:0;if(e=Math.sqrt(x*x+y*y),f=Math.sqrt(x*x+y*y+z*z),u>e/c){if(r=0,u>f/c)return s=Ib,t=-d,{x:a.x,y:a.y,z:a.z}}else r=Math.atan2(y,x);g=z/f,h=e/f,i=1/Math.sqrt(1-b*(2-b)*h*h),l=h*(1-b)*i,m=g*i,q=0;do q++,k=c/Math.sqrt(1-b*m*m),t=e*l+z*m-k*(1-b*m*m),j=b*k/(k+t),i=1/Math.sqrt(1-j*(2-j)*h*h),n=h*(1-j)*i,o=g*i,p=o*l-n*m,l=n,m=o;while(p*p>v&&w>q);return s=Math.atan(o/Math.abs(n)),{x:r,y:s,z:t}}function D(a,b,c){if(b===Db)return{x:a.x+c[0],y:a.y+c[1],z:a.z+c[2]};if(b===Eb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6];return{x:j*(a.x-i*a.y+h*a.z)+d,y:j*(i*a.x+a.y-g*a.z)+e,z:j*(-h*a.x+g*a.y+a.z)+f}}}function E(a,b,c){if(b===Db)return{x:a.x-c[0],y:a.y-c[1],z:a.z-c[2]};if(b===Eb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=(a.x-d)/j,l=(a.y-e)/j,m=(a.z-f)/j;return{x:k+i*l-h*m,y:-i*k+l+g*m,z:h*k-g*l+m}}}function F(a){return a===Db||a===Eb}function G(a){if("function"==typeof Number.isFinite){if(Number.isFinite(a))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof a||a!==a||!isFinite(a))throw new TypeError("coordinates must be finite numbers")}function H(a,b){return(a.datum.datum_type===Db||a.datum.datum_type===Eb)&&"WGS84"!==b.datumCode||(b.datum.datum_type===Db||b.datum.datum_type===Eb)&&"WGS84"!==a.datumCode}function I(a,b,c){var d;return Array.isArray(c)&&(c=Bc(c)),Cc(c),a.datum&&b.datum&&H(a,b)&&(d=new z("WGS84"),c=I(a,d,c),a=d),"enu"!==a.axis&&(c=Ac(a,!1,c)),"longlat"===a.projName?c={x:c.x*Nb,y:c.y*Nb}:(a.to_meter&&(c={x:c.x*a.to_meter,y:c.y*a.to_meter}),c=a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=zc(a.datum,b.datum,c),b.from_greenwich&&(c={x:c.x-b.from_greenwich,y:c.y}),"longlat"===b.projName?c={x:c.x*Ob,y:c.y*Ob}:(c=b.forward(c),b.to_meter&&(c={x:c.x/b.to_meter,y:c.y/b.to_meter})),"enu"!==b.axis?Ac(b,!0,c):c}function J(a,b,c){var d,e,f;return Array.isArray(c)?(d=I(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):(e=I(a,b,c),f=Object.keys(c),2===f.length?e:(f.forEach(function(a){"x"!==a&&"y"!==a&&(e[a]=c[a])}),e))}function K(a){return a instanceof z?a:a.oProj?a.oProj:z(a)}function L(a,b,c){a=K(a);var d,e=!1;return"undefined"==typeof b?(b=a,a=Dc,e=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=Dc,e=!0),b=K(b),c?J(a,b,c):(d={forward:function(c){return J(a,b,c)},inverse:function(c){return J(b,a,c)}},e&&(d.oProj=b),d)}function M(a,b){return b=b||5,U(R({lat:a[1],lon:a[0]}),b)}function N(a){var b=S(Y(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]}function O(a){var b=S(Y(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}function P(a){return a*(Math.PI/180)}function Q(a){return 180*(a/Math.PI)}function R(a){var b,c,d,e,f,g,h,i,j,k=a.lat,l=a.lon,m=6378137,n=.00669438,o=.9996,p=P(k),q=P(l);j=Math.floor((l+180)/6)+1,180===l&&(j=60),k>=56&&64>k&&l>=3&&12>l&&(j=32),k>=72&&84>k&&(l>=0&&9>l?j=31:l>=9&&21>l?j=33:l>=21&&33>l?j=35:l>=33&&42>l&&(j=37)),b=6*(j-1)-180+3,i=P(b),c=n/(1-n),d=m/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),e=Math.tan(p)*Math.tan(p),f=c*Math.cos(p)*Math.cos(p),g=Math.cos(p)*(q-i),h=m*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var r=o*d*(g+(1-e+f)*g*g*g/6+(5-18*e+e*e+72*f-58*c)*g*g*g*g*g/120)+5e5,s=o*(h+d*Math.tan(p)*(g*g/2+(5-e+9*f+4*f*f)*g*g*g*g/24+(61-58*e+e*e+600*f-330*c)*g*g*g*g*g*g/720));return 0>k&&(s+=1e7),{northing:Math.round(s),easting:Math.round(r),zoneNumber:j,zoneLetter:T(k)}}function S(a){var b=a.northing,c=a.easting,d=a.zoneLetter,e=a.zoneNumber;if(0>e||e>60)return null;var f,g,h,i,j,k,l,m,n,o,p=.9996,q=6378137,r=.00669438,s=(1-Math.sqrt(1-r))/(1+Math.sqrt(1-r)),t=c-5e5,u=b;"N">d&&(u-=1e7),m=6*(e-1)-180+3,f=r/(1-r),l=u/p,n=l/(q*(1-r/4-3*r*r/64-5*r*r*r/256)),o=n+(3*s/2-27*s*s*s/32)*Math.sin(2*n)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*n)+151*s*s*s/96*Math.sin(6*n),g=q/Math.sqrt(1-r*Math.sin(o)*Math.sin(o)),h=Math.tan(o)*Math.tan(o),i=f*Math.cos(o)*Math.cos(o),j=q*(1-r)/Math.pow(1-r*Math.sin(o)*Math.sin(o),1.5),k=t/(g*p);var v=o-g*Math.tan(o)/j*(k*k/2-(5+3*h+10*i-4*i*i-9*f)*k*k*k*k/24+(61+90*h+298*i+45*h*h-252*f-3*i*i)*k*k*k*k*k*k/720);v=Q(v);var w=(k-(1+2*h+i)*k*k*k/6+(5-2*i+28*h-3*i*i+8*f+24*h*h)*k*k*k*k*k/120)/Math.cos(o);w=m+Q(w);var x;if(a.accuracy){var y=S({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});x={top:y.lat,right:y.lon,bottom:v,left:w}}else x={lat:v,lon:w};return x}function T(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function U(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+V(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function V(a,b,c){var d=W(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return X(e,f,d)}function W(a){var b=a%Ec;return 0===b&&(b=Ec),b}function X(a,b,c){var d=c-1,e=Fc.charCodeAt(d),f=Gc.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>Lc&&(g=g-Lc+Hc-1,i=!0),(g===Ic||Ic>e&&g>Ic||(g>Ic||Ic>e)&&i)&&g++,(g===Jc||Jc>e&&g>Jc||(g>Jc||Jc>e)&&i)&&(g++,g===Ic&&g++),g>Lc&&(g=g-Lc+Hc-1),h>Kc?(h=h-Kc+Hc-1,i=!0):i=!1,(h===Ic||Ic>f&&h>Ic||(h>Ic||Ic>f)&&i)&&h++,(h===Jc||Jc>f&&h>Jc||(h>Jc||Jc>f)&&i)&&(h++,h===Ic&&h++),h>Kc&&(h=h-Kc+Hc-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function Y(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=W(g),j=Z(d.charAt(0),i),k=$(d.charAt(1),i);k<_(h);)k+=2e6;var l=c-f;if(l%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var m,n,o,p,q,r=l/2,s=0,t=0;return r>0&&(m=1e5/Math.pow(10,r),n=a.substring(f,f+r),s=parseFloat(n)*m,o=a.substring(f+r),t=parseFloat(o)*m),p=s+j,q=t+k,{easting:p,northing:q,zoneLetter:h,zoneNumber:g,accuracy:m}}function Z(a,b){for(var c=Fc.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===Ic&&c++,c===Jc&&c++,c>Lc){if(e)throw"Bad character: "+a;c=Hc,e=!0}d+=1e5}return d}function $(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=Gc.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===Ic&&c++,c===Jc&&c++,c>Kc){if(e)throw"Bad character: "+a;c=Hc,e=!0}d+=1e5}return d}function _(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function aa(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=$c(this.es),this.ml0=_c(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ba(a){var b,c,d,e=a.x,f=a.y,g=lc(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.es){var j=i*g,k=Math.pow(j,2),l=this.ep2*Math.pow(i,2),m=Math.pow(l,2),n=Math.abs(i)>Mb?Math.tan(f):0,o=Math.pow(n,2),p=Math.pow(o,2);b=1-this.es*Math.pow(h,2),j/=Math.sqrt(b);var q=_c(f,h,i,this.en);c=this.a*(this.k0*j*(1+k/6*(1-o+l+k/20*(5-18*o+p+14*l-58*o*l+k/42*(61+179*p-p*o-479*o)))))+this.x0,d=this.a*(this.k0*(q-this.ml0+h*g*j/2*(1+k/12*(5-o+9*l+4*m+k/30*(61+p-58*o+270*l-330*o*l+k/56*(1385+543*p-p*o-3111*o))))))+this.y0}else{var r=i*Math.sin(g);if(Math.abs(Math.abs(r)-1)<Mb)return 93;if(c=.5*this.a*this.k0*Math.log((1+r)/(1-r))+this.x0,d=i*Math.cos(g)/Math.sqrt(1-Math.pow(r,2)),r=Math.abs(d),r>=1){if(r-1>Mb)return 93;d=0}else d=Math.acos(d);0>f&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return a.x=c,a.y=d,a}function ca(a){var b,c,d,e,f=(a.x-this.x0)*(1/this.a),g=(a.y-this.y0)*(1/this.a);if(this.es)if(b=this.ml0+g/this.k0,c=bd(b,this.es,this.en),Math.abs(c)<Ib){var h=Math.sin(c),i=Math.cos(c),j=Math.abs(i)>Mb?Math.tan(c):0,k=this.ep2*Math.pow(i,2),l=Math.pow(k,2),m=Math.pow(j,2),n=Math.pow(m,2);b=1-this.es*Math.pow(h,2);var o=f*Math.sqrt(b)/this.k0,p=Math.pow(o,2);b*=j,d=c-b*p/(1-this.es)*.5*(1-p/12*(5+3*m-9*k*m+k-4*l-p/30*(61+90*m-252*k*m+45*n+46*k-p/56*(1385+3633*m+4095*n+1574*n*m)))),e=lc(this.long0+o*(1-p/6*(1+2*m+k-p/20*(5+28*m+24*n+8*k*m+6*k-p/42*(61+662*m+1320*n+720*n*m))))/i)}else d=Ib*kc(g),e=0;else{var q=Math.exp(f/this.k0),r=.5*(q-1/q),s=this.lat0+g/this.k0,t=Math.cos(s);b=Math.sqrt((1-Math.pow(t,2))/(1+Math.pow(r,2))),d=Math.asin(b),0>g&&(d=-d),e=0===r&&0===t?0:lc(Math.atan2(r,t)+this.long0)}return a.x=e,a.y=d,a}function da(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),b=a/(2-a),c=b;this.cgb[0]=b*(2+b*(-2/3+b*(-2+b*(116/45+b*(26/45+b*(-2854/675)))))),this.cbg[0]=b*(-2+b*(2/3+b*(4/3+b*(-82/45+b*(32/45+b*(4642/4725)))))),c*=b,this.cgb[1]=c*(7/3+b*(-1.6+b*(-227/45+b*(2704/315+b*(2323/945))))),this.cbg[1]=c*(5/3+b*(-16/15+b*(-13/9+b*(904/315+b*(-1522/945))))),c*=b,this.cgb[2]=c*(56/15+b*(-136/35+b*(-1262/105+b*(73814/2835)))),this.cbg[2]=c*(-26/15+b*(34/21+b*(1.6+b*(-12686/2835)))),c*=b,this.cgb[3]=c*(4279/630+b*(-332/35+b*(-399572/14175))),this.cbg[3]=c*(1237/630+b*(-2.4+b*(-24832/14175))),c*=b,this.cgb[4]=c*(4174/315+b*(-144838/6237)),this.cbg[4]=c*(-734/315+b*(109598/31185)),c*=b,this.cgb[5]=c*(601676/22275),this.cbg[5]=c*(444337/155925),c=Math.pow(b,2),this.Qn=this.k0/(1+b)*(1+c*(.25+c*(1/64+c/256))),this.utg[0]=b*(-.5+b*(2/3+b*(-37/96+b*(1/360+b*(81/512+b*(-96199/604800)))))),this.gtu[0]=b*(.5+b*(-2/3+b*(5/16+b*(41/180+b*(-127/288+b*(7891/37800)))))),this.utg[1]=c*(-1/48+b*(-1/15+b*(437/1440+b*(-46/105+b*(1118711/3870720))))),this.gtu[1]=c*(13/48+b*(-0.6+b*(557/1440+b*(281/630+b*(-1983433/1935360))))),c*=b,this.utg[2]=c*(-17/480+b*(37/840+b*(209/4480+b*(-5569/90720)))),this.gtu[2]=c*(61/240+b*(-103/140+b*(15061/26880+b*(167603/181440)))),c*=b,this.utg[3]=c*(-4397/161280+b*(11/504+b*(830251/7257600))),this.gtu[3]=c*(49561/161280+b*(-179/168+b*(6601661/7257600))),c*=b,this.utg[4]=c*(-4583/161280+b*(108847/3991680)),this.gtu[4]=c*(34729/80640+b*(-3418889/1995840)),c*=b,this.utg[5]=c*(-20648693/638668800),this.gtu[5]=.6650675310896665*c;var d=id(this.cbg,this.lat0);this.Zb=-this.Qn*(d+jd(this.gtu,2*d))}function ea(a){var b=lc(a.x-this.long0),c=a.y;c=id(this.cbg,c);var d=Math.sin(c),e=Math.cos(c),f=Math.sin(b),g=Math.cos(b);c=Math.atan2(d,g*e),b=Math.atan2(f*e,fd(d,e*g)),b=hd(Math.tan(b));var h=ld(this.gtu,2*c,2*b);c+=h[0],b+=h[1];var i,j;return Math.abs(b)<=2.623395162778?(i=this.a*(this.Qn*b)+this.x0,j=this.a*(this.Qn*c+this.Zb)+this.y0):(i=1/0,j=1/0),a.x=i,a.y=j,a}function fa(a){var b=(a.x-this.x0)*(1/this.a),c=(a.y-this.y0)*(1/this.a);c=(c-this.Zb)/this.Qn,b/=this.Qn;var d,e;if(Math.abs(b)<=2.623395162778){var f=ld(this.utg,2*c,2*b);c+=f[0],b+=f[1],b=Math.atan(ed(b));var g=Math.sin(c),h=Math.cos(c),i=Math.sin(b),j=Math.cos(b);c=Math.atan2(g*j,fd(i,j*h)),b=Math.atan2(i,j*h),d=lc(b+this.long0),e=id(this.cgb,c)}else d=1/0,e=1/0;return a.x=d,a.y=e,a}function ga(){var a=od(this.zone,this.long0);if(void 0===a)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*Nb,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,nd.init.apply(this),this.forward=nd.forward,this.inverse=nd.inverse}function ha(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Pb)/(Math.pow(Math.tan(.5*this.lat0+Pb),this.C)*sd(this.e*a,this.ratexp))}function ia(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Pb),this.C)*sd(this.e*Math.sin(c),this.ratexp))-Ib,a.x=this.C*b,a}function ja(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Pb)/this.K,1/this.C),f=td;f>0&&(d=2*Math.atan(e*sd(this.e*Math.sin(a.y),-.5*this.e))-Ib,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):null}function ka(){vd.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function la(a){var b,c,d,e;return a.x=lc(a.x-this.long0),vd.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function ma(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,vd.inverse.apply(this,[a]),a.x=lc(a.x+this.long0),a}function na(a,b,c){return b*=c,Math.tan(.5*(Ib+a))*Math.pow((1-b)/(1+b),.5*c)}function oa(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Mb&&(this.k0=.5*(1+kc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Mb&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Mb&&(this.k0=.5*this.cons*jc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/mc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=jc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ib,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function pa(a){var b,c,d,e,f,g,h=a.x,i=a.y,j=Math.sin(i),k=Math.cos(i),l=lc(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=Mb&&Math.abs(i+this.lat0)<=Mb?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*j+this.coslat0*k*Math.cos(l)),a.x=this.a*b*k*Math.sin(l)+this.x0,a.y=this.a*b*(this.coslat0*j-this.sinlat0*k*Math.cos(l))+this.y0,a):(c=2*Math.atan(this.ssfn_(i,j,this.e))-Ib,e=Math.cos(c),d=Math.sin(c),Math.abs(this.coslat0)<=Mb?(f=mc(this.e,i*this.con,this.con*j),g=2*this.a*this.k0*f/this.cons,a.x=this.x0+g*Math.sin(h-this.long0),a.y=this.y0-this.con*g*Math.cos(h-this.long0),a):(Math.abs(this.sinlat0)<Mb?(b=2*this.a*this.k0/(1+e*Math.cos(l)),a.y=b*d):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*e*Math.cos(l))),a.y=b*(this.cosX0*d-this.sinX0*e*Math.cos(l))+this.y0),a.x=b*e*Math.sin(l)+this.x0,a))}function qa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var h=2*Math.atan(g/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,Mb>=g?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(h)*this.sinlat0+a.y*Math.sin(h)*this.coslat0/g),b=lc(Math.abs(this.coslat0)<Mb?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(h),g*this.coslat0*Math.cos(h)-a.y*this.sinlat0*Math.sin(h))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=Mb){if(Mb>=g)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,d=g*this.cons/(2*this.a*this.k0),c=this.con*nc(this.e,d),b=this.con*lc(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else e=2*Math.atan(g*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,Mb>=g?f=this.X0:(f=Math.asin(Math.cos(e)*this.sinX0+a.y*Math.sin(e)*this.cosX0/g),b=lc(this.long0+Math.atan2(a.x*Math.sin(e),g*this.cosX0*Math.cos(e)-a.y*this.sinX0*Math.sin(e)))),c=-1*nc(this.e,Math.tan(.5*(Ib+f)));return a.x=b,a.y=c,a}function ra(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j}function sa(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a}function ta(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}function ua(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var d=mc(this.e,this.lat0,a),e=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>e*e&&(e=1);var f,g;if(isNaN(this.longc)){var h=mc(this.e,this.lat1,Math.sin(this.lat1)),i=mc(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(e+Math.sqrt(e*e-1))*Math.pow(d,this.bl):this.el=(e-Math.sqrt(e*e-1))*Math.pow(d,this.bl);var j=Math.pow(h,this.bl),k=Math.pow(i,this.bl);f=this.el/j,g=.5*(f-1/f);var l=(this.el*this.el-k*j)/(this.el*this.el+k*j),m=(k-j)/(k+j),n=lc(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*n)/m)/this.bl,this.long0=lc(this.long0);var o=lc(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*o)/g),this.alpha=Math.asin(e*Math.sin(this.gamma0))}else f=this.lat0>=0?e+Math.sqrt(e*e-1):e-Math.sqrt(e*e-1),this.el=f*Math.pow(d,this.bl),g=.5*(f-1/f),this.gamma0=Math.asin(Math.sin(this.alpha)/e),this.long0=this.longc-Math.asin(g*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha))}function va(a){var b,c,d,e=a.x,f=a.y,g=lc(e-this.long0);if(Math.abs(Math.abs(f)-Ib)<=Mb)d=f>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(Pb+d*this.gamma0*.5)),b=-1*d*Ib*this.al/this.bl;else{var h=mc(this.e,f,Math.sin(f)),i=this.el/Math.pow(h,this.bl),j=.5*(i-1/i),k=.5*(i+1/i),l=Math.sin(this.bl*g),m=(j*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/k;c=Math.abs(Math.abs(m)-1)<=Mb?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,b=Math.abs(Math.cos(this.bl*g))<=Mb?this.al*this.bl*g:this.al*Math.atan2(j*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*g))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a}function wa(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),e=.5*(d-1/d),f=.5*(d+1/d),g=Math.sin(this.bl*b/this.al),h=(g*Math.cos(this.gamma0)+e*Math.sin(this.gamma0))/f,i=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<Mb?(a.x=this.long0,a.y=Ib):Math.abs(h+1)<Mb?(a.x=this.long0,a.y=-1*Ib):(a.y=nc(this.e,i),a.x=lc(this.long0-Math.atan2(e*Math.cos(this.gamma0)-g*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a}function xa(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Mb)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=jc(this.e,b,c),e=mc(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=jc(this.e,f,g),i=mc(this.e,this.lat2,f),j=mc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Mb?this.ns=Math.log(d/h)/Math.log(e/i):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function ya(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=Mb&&(c=kc(c)*(Ib-2*Mb));var d,e,f=Math.abs(Math.abs(c)-Ib);if(f>Mb)d=mc(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if(f=c*this.ns,0>=f)return null;e=0}var g=this.ns*lc(b-this.long0);return a.x=this.k0*(e*Math.sin(g))+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a}function za(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!==b&&(i=Math.atan2(c*g,c*h)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=nc(this.e,d),-9999===e)return null}else e=-Ib;return f=lc(i/this.ns+this.long0),a.x=f,a.y=e,a}function Aa(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,
this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Ba(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=lc(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech||(a.y*=-1,a.x*=-1),a}function Ca(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a}function Da(){this.sphere||(this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.ml0=this.a*Id(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ea(a){var b,c,d=a.x,e=a.y;if(d=lc(d-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(e)*Math.sin(d)),c=this.a*(Math.atan2(Math.tan(e),Math.cos(d))-this.lat0);else{var f=Math.sin(e),g=Math.cos(e),h=Nd(this.a,this.e,f),i=Math.tan(e)*Math.tan(e),j=d*Math.cos(e),k=j*j,l=this.es*g*g/(1-this.es),m=this.a*Id(this.e0,this.e1,this.e2,this.e3,e);b=h*j*(1-k*i*(1/6-(8-i+8*l)*k/120)),c=m-this.ml0+h*f/g*k*(.5+(5-i+6*l)*k/24)}return a.x=b+this.x0,a.y=c+this.y0,a}function Fa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=Pd(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-Ib)<=Mb)return a.x=this.long0,a.y=Ib,0>e&&(a.y*=-1),a;var i=Nd(this.a,this.e,Math.sin(h)),j=i*i*i/this.a/this.a*(1-this.es),k=Math.pow(Math.tan(h),2),l=d*this.a/i,m=l*l;b=h-i*Math.tan(h)/j*l*l*(.5-(1+3*k)*l*l/24),c=l*(1-m*(k/3+(1+3*k)*k*m/15))/Math.cos(h)}return a.x=lc(c+this.long0),a.y=Od(b),a}function Ga(){var a=Math.abs(this.lat0);if(Math.abs(a-Ib)<Mb?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Mb?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=Sd(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ja(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Sd(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ha(a){var b,c,d,e,f,g,h,i,j,k,l=a.x,m=a.y;if(l=lc(l-this.long0),this.sphere){if(f=Math.sin(m),k=Math.cos(m),d=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+k*d:1+this.sinph0*f+this.cosph0*k*d,Mb>=c)return null;c=Math.sqrt(2/c),b=c*k*Math.sin(l),c*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*k*d}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),Math.abs(m+this.phi0)<Mb)return null;c=Pb-.5*m,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(l),c*=d}}else{switch(h=0,i=0,j=0,d=Math.cos(l),e=Math.sin(l),f=Math.sin(m),g=Sd(this.e,f),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=g/this.qp,i=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:j=1+this.sinb1*h+this.cosb1*i*d;break;case this.EQUIT:j=1+i*d;break;case this.N_POLE:j=Ib+m,g=this.qp-g;break;case this.S_POLE:j=m-Ib,g=this.qp+g}if(Math.abs(j)<Mb)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:j=Math.sqrt(2/j),c=this.mode===this.OBLIQ?this.ymf*j*(this.cosb1*h-this.sinb1*i*d):(j=Math.sqrt(2/(1+i*d)))*h*this.ymf,b=this.xmf*j*i*e;break;case this.N_POLE:case this.S_POLE:g>=0?(b=(j=Math.sqrt(g))*e,c=d*(this.mode===this.S_POLE?j:-j)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a}function Ia(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i=a.x/this.a,j=a.y/this.a;if(this.sphere){var k,l=0,m=0;if(k=Math.sqrt(i*i+j*j),c=.5*k,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(c),l=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(k)<=Mb?0:Math.asin(j*m/k),i*=m,j=l*k;break;case this.OBLIQ:c=Math.abs(k)<=Mb?this.phi0:Math.asin(l*this.sinph0+j*m*this.cosph0/k),i*=m*this.cosph0,j=(l-Math.sin(c)*this.sinph0)*k;break;case this.N_POLE:j=-j,c=Ib-c;break;case this.S_POLE:c-=Ib}b=0!==j||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(i,j):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,j*=this.dd,g=Math.sqrt(i*i+j*j),Mb>g)return a.x=0,a.y=this.phi0,a;e=2*Math.asin(.5*g/this.rq),d=Math.cos(e),i*=e=Math.sin(e),this.mode===this.OBLIQ?(h=d*this.sinb1+j*e*this.cosb1/g,f=this.qp*h,j=g*this.cosb1*d-j*this.sinb1*e):(h=j*e/g,f=this.qp*h,j=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(j=-j),f=i*i+j*j,!f)return a.x=0,a.y=this.phi0,a;h=1-f/this.qp,this.mode===this.S_POLE&&(h=-h)}b=Math.atan2(i,j),c=Ka(Math.asin(h),this.apa)}return a.x=lc(this.long0+b),a.y=c,a}function Ja(a){var b,c=[];return c[0]=a*Xd,b=a*a,c[0]+=b*Yd,c[1]=b*$d,b*=a,c[0]+=b*Zd,c[1]+=b*_d,c[2]=b*ae,c}function Ka(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}function La(){Math.abs(this.lat1+this.lat2)<Mb||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=jc(this.e3,this.sin_po,this.cos_po),this.qs1=Sd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=jc(this.e3,this.sin_po,this.cos_po),this.qs2=Sd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Sd(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Mb?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Ma(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Sd(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*lc(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a}function Na(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?g=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,g=this.phi1z(this.e3,c)),f=lc(e/this.ns0+this.long0),a.x=f,a.y=g,a}function Oa(a,b){var c,d,e,f,g,h=de(.5*b);if(Mb>a)return h;for(var i=a*a,j=1;25>=j;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return null}function Pa(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Qa(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=lc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Mb?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function Ra(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=de(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=lc(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}function Sa(){this.sphere||(this.k0=jc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Ta(a){var b,c,d=a.x,e=a.y,f=lc(d-this.long0);if(this.sphere)b=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var g=Sd(this.e,Math.sin(e));b=this.x0+this.a*this.k0*f,c=this.y0+this.a*g*.5/this.k0}return a.x=b,a.y=c,a}function Ua(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=lc(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=ie(this.e,2*a.y*this.k0/this.a),b=lc(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a}function Va(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Wa(a){var b=a.x,c=a.y,d=lc(b-this.long0),e=Od(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a}function Xa(a){var b=a.x,c=a.y;return a.x=lc(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Od(this.lat0+(c-this.y0)/this.a),a}function Ya(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.ml0=this.a*Id(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Za(a){var b,c,d,e=a.x,f=a.y,g=lc(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=Mb?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(Od(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=Mb)b=this.a*g,c=-1*this.ml0;else{var h=Nd(this.a,this.e,Math.sin(f))/Math.tan(f);b=h*Math.sin(d),c=this.a*Id(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+h*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a}function $a(a){var b,c,d,e,f,g,h,i,j;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=Mb)b=lc(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,h=d*d/this.a/this.a+g*g,i=g;var k;for(f=ne;f;--f)if(k=Math.tan(i),j=-1*(g*(i*k+1)-i-.5*(i*i+h)*k)/((i-g)/k-1),i+=j,Math.abs(j)<=Mb){c=i;break}b=lc(this.long0+Math.asin(d*Math.tan(i)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=Mb)c=0,b=lc(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,h=d*d/this.a/this.a+g*g,i=g;var l,m,n,o,p;for(f=ne;f;--f)if(p=this.e*Math.sin(i),l=Math.sqrt(1-p*p)*Math.tan(i),m=this.a*Id(this.e0,this.e1,this.e2,this.e3,i),n=this.e0-2*this.e1*Math.cos(2*i)+4*this.e2*Math.cos(4*i)-6*this.e3*Math.cos(6*i),o=m/this.a,j=(g*(l*o+1)-o-.5*l*(o*o+h))/(this.es*Math.sin(2*i)*(o*o+h-2*g*o)/(4*l)+(g-o)*(l*n-2/Math.sin(2*i))-n),i-=j,Math.abs(j)<=Mb){c=i;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=lc(this.long0+Math.asin(d*l/this.a)/Math.sin(c))}return a.x=b,a.y=c,a}function _a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function ab(a){var b,c=a.x,d=a.y,e=d-this.lat0,f=c-this.long0,g=e/Hb*1e-5,h=f,i=1,j=0;for(b=1;10>=b;b++)i*=g,j+=this.A[b]*i;var k,l,m=j,n=h,o=1,p=0,q=0,r=0;for(b=1;6>=b;b++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[b]*o-this.B_im[b]*p,r=r+this.B_im[b]*o+this.B_re[b]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a}function bb(a){var b,c,d,e=a.x,f=a.y,g=e-this.x0,h=f-this.y0,i=h/this.a,j=g/this.a,k=1,l=0,m=0,n=0;for(b=1;6>=b;b++)c=k*i-l*j,d=l*i+k*j,k=c,l=d,m=m+this.C_re[b]*k-this.C_im[b]*l,n=n+this.C_im[b]*k+this.C_re[b]*l;for(var o=0;o<this.iterations;o++){var p,q,r=m,s=n,t=i,u=j;for(b=2;6>=b;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,t+=(b-1)*(this.B_re[b]*r-this.B_im[b]*s),u+=(b-1)*(this.B_im[b]*r+this.B_re[b]*s);r=1,s=0;var v=this.B_re[1],w=this.B_im[1];for(b=2;6>=b;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,v+=b*(this.B_re[b]*r-this.B_im[b]*s),w+=b*(this.B_im[b]*r+this.B_re[b]*s);var x=v*v+w*w;m=(t*v+u*w)/x,n=(u*v-t*w)/x}var y=m,z=n,A=1,B=0;for(b=1;9>=b;b++)A*=y,B+=this.D[b]*A;var C=this.lat0+B*Hb*1e5,D=this.long0+z;return a.x=D,a.y=C,a}function cb(){}function db(a){var b=a.x,c=a.y,d=lc(b-this.long0),e=this.x0+this.a*d,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=e,a.y=f,a}function eb(a){a.x-=this.x0,a.y-=this.y0;var b=lc(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a}function fb(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=$c(this.es)}function gb(a){var b,c,d=a.x,e=a.y;if(d=lc(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=ue;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Mb)break}else e=1!==this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*_c(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a}function hb(a){var b,c,d,e;return a.x-=this.x0,d=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,d/=this.C_x*(this.m+Math.cos(b)),this.m?b=de((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=de(Math.sin(b)/this.n)),d=lc(d+this.long0),b=Od(b)):(b=bd(a.y/this.a,this.es,this.en),e=Math.abs(b),Ib>e?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=lc(c)):Ib>e-Mb&&(d=this.long0)),a.x=d,a.y=b,a}function ib(){}function jb(a){for(var b=a.x,c=a.y,d=lc(b-this.long0),e=c,f=Math.PI*Math.sin(c);;){var g=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=g,Math.abs(g)<Mb)break}e/=2,Math.PI/2-Math.abs(c)<Mb&&(d=0);var h=.900316316158*this.a*d*Math.cos(e)+this.x0,i=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=h,a.y=i,a}function kb(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var d=lc(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Math.PI&&(d=-Math.PI),d>Math.PI&&(d=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}function lb(){Math.abs(this.lat1+this.lat2)<Mb||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=jc(this.e,this.sinphi,this.cosphi),this.ml1=Id(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Mb?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=jc(this.e,this.sinphi,this.cosphi),this.ml2=Id(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Id(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function mb(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=Id(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*lc(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a}function nb(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=lc(this.long0+f/this.ns),d=Od(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=Pd(g,this.e0,this.e1,this.e2,this.e3),e=lc(this.long0+f/this.ns),a.x=e,a.y=d,a}function ob(){this.R=this.a}function pb(a){var b,c,d=a.x,e=a.y,f=lc(d-this.long0);Math.abs(e)<=Mb&&(b=this.x0+this.R*f,c=this.y0);var g=de(2*Math.abs(e/Math.PI));(Math.abs(f)<=Mb||Math.abs(Math.abs(e)-Ib)<=Mb)&&(b=this.x0,c=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*g):this.y0+Math.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Math.PI/f-f/Math.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Math.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);0>f&&(p=-p),b=this.x0+p;var q=i+l;return p=Math.PI*this.R*(n*q-h*Math.sqrt((o+i)*(i+1)-q*q))/(o+i),c=e>=0?this.y0+p:this.y0-p,a.x=b,a.y=c,a}function qb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Math.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI:-(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI,b=Math.abs(d)<Mb?this.long0:lc(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}function rb(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function sb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.x,z=a.y,A=Math.sin(a.y),B=Math.cos(a.y),C=lc(y-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Mb?(a.x=this.x0+this.a*(Ib-z)*Math.sin(C),a.y=this.y0-this.a*(Ib-z)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Mb?(a.x=this.x0+this.a*(Ib+z)*Math.sin(C),a.y=this.y0+this.a*(Ib+z)*Math.cos(C),a):(s=this.sin_p12*A+this.cos_p12*B*Math.cos(C),q=Math.acos(s),r=q/Math.sin(q),a.x=this.x0+this.a*r*B*Math.sin(C),a.y=this.y0+this.a*r*(this.cos_p12*A-this.sin_p12*B*Math.cos(C)),a):(b=Jd(this.es),c=Kd(this.es),d=Ld(this.es),e=Md(this.es),Math.abs(this.sin_p12-1)<=Mb?(f=this.a*Id(b,c,d,e,Ib),g=this.a*Id(b,c,d,e,z),a.x=this.x0+(f-g)*Math.sin(C),a.y=this.y0-(f-g)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Mb?(f=this.a*Id(b,c,d,e,Ib),g=this.a*Id(b,c,d,e,z),a.x=this.x0+(f+g)*Math.sin(C),a.y=this.y0+(f+g)*Math.cos(C),a):(h=A/B,i=Nd(this.a,this.e,this.sin_p12),j=Nd(this.a,this.e,A),k=Math.atan((1-this.es)*h+this.es*i*this.sin_p12/(j*B)),l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(k)-this.sin_p12*Math.cos(C)),t=0===l?Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.abs(Math.abs(l)-Math.PI)<=Mb?-Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.asin(Math.sin(C)*Math.cos(k)/Math.sin(l)),m=this.e*this.sin_p12/Math.sqrt(1-this.es),n=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es),o=m*n,p=n*n,u=t*t,v=u*t,w=v*t,x=w*t,q=i*t*(1-u*p*(1-p)/6+v/8*o*(1-2*p)+w/120*(p*(4-7*p)-3*m*m*(1-7*p))-x/48*o),a.x=this.x0+q*Math.sin(l),a.y=this.y0+q*Math.cos(l),a))}function tb(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*Ib*this.a)return;return c=b/this.a,d=Math.sin(c),e=Math.cos(c),f=this.long0,Math.abs(b)<=Mb?g=this.lat0:(g=de(e*this.sin_p12+a.y*d*this.cos_p12/b),h=Math.abs(this.lat0)-Ib,f=lc(Math.abs(h)<=Mb?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*d,b*this.cos_p12*e-a.y*this.sin_p12*d))),a.x=f,a.y=g,a}return i=Jd(this.es),j=Kd(this.es),k=Ld(this.es),l=Md(this.es),Math.abs(this.sin_p12-1)<=Mb?(m=this.a*Id(i,j,k,l,Ib),b=Math.sqrt(a.x*a.x+a.y*a.y),n=m-b,g=Pd(n/this.a,i,j,k,l),f=lc(this.long0+Math.atan2(a.x,-1*a.y)),a.x=f,a.y=g,a):Math.abs(this.sin_p12+1)<=Mb?(m=this.a*Id(i,j,k,l,Ib),b=Math.sqrt(a.x*a.x+a.y*a.y),n=b-m,g=Pd(n/this.a,i,j,k,l),f=lc(this.long0+Math.atan2(a.x,a.y)),a.x=f,a.y=g,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),q=Math.atan2(a.x,a.y),o=Nd(this.a,this.e,this.sin_p12),r=Math.cos(q),s=this.e*this.cos_p12*r,t=-s*s/(1-this.es),u=3*this.es*(1-t)*this.sin_p12*this.cos_p12*r/(1-this.es),v=b/o,w=v-t*(1+t)*Math.pow(v,3)/6-u*(1+3*t)*Math.pow(v,4)/24,x=1-t*w*w/2-v*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*r),f=lc(this.long0+Math.asin(Math.sin(q)*Math.sin(w)/Math.cos(p))),g=Math.atan((1-this.es*x*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),a.x=f,a.y=g,a)}function ub(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function vb(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=lc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,(g>0||Math.abs(g)<=Mb)&&(h=this.a*f*c*Math.sin(d),i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function wb(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),c=de(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Mb?(h=this.lat0,a.x=g,a.y=h,a):(h=de(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Ib,Math.abs(f)<=Mb?(g=lc(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=g,a.y=h,a):(g=lc(this.long0+Math.atan2(a.x*d,b*this.cos_p14*e-a.y*this.sin_p14*d)),a.x=g,a.y=h,a))}function xb(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ib-Pb/2?this.face=He.TOP:this.lat0<=-(Ib-Pb/2)?this.face=He.BOTTOM:Math.abs(this.long0)<=Pb?this.face=He.FRONT:Math.abs(this.long0)<=Ib+Pb?this.face=this.long0>0?He.RIGHT:He.LEFT:this.face=He.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function yb(a){var b,c,d,e,f,g,h={x:0,y:0},i={value:0};if(a.x-=this.long0,b=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(a.y)):a.y,c=a.x,this.face===He.TOP)e=Ib-b,c>=Pb&&Ib+Pb>=c?(i.value=Ie.AREA_0,d=c-Ib):c>Ib+Pb||-(Ib+Pb)>=c?(i.value=Ie.AREA_1,d=c>0?c-Rb:c+Rb):c>-(Ib+Pb)&&-Pb>=c?(i.value=Ie.AREA_2,d=c+Ib):(i.value=Ie.AREA_3,d=c);else if(this.face===He.BOTTOM)e=Ib+b,c>=Pb&&Ib+Pb>=c?(i.value=Ie.AREA_0,d=-c+Ib):Pb>c&&c>=-Pb?(i.value=Ie.AREA_1,d=-c):-Pb>c&&c>=-(Ib+Pb)?(i.value=Ie.AREA_2,d=-c-Ib):(i.value=Ie.AREA_3,d=c>0?-c+Rb:-c-Rb);else{var j,k,l,m,n,o,p;this.face===He.RIGHT?c=Bb(c,+Ib):this.face===He.BACK?c=Bb(c,+Rb):this.face===He.LEFT&&(c=Bb(c,-Ib)),m=Math.sin(b),n=Math.cos(b),o=Math.sin(c),p=Math.cos(c),j=n*p,k=n*o,l=m,this.face===He.FRONT?(e=Math.acos(j),d=Ab(e,l,k,i)):this.face===He.RIGHT?(e=Math.acos(k),d=Ab(e,l,-j,i)):this.face===He.BACK?(e=Math.acos(-j),d=Ab(e,l,-k,i)):this.face===He.LEFT?(e=Math.acos(-k),d=Ab(e,l,j,i)):(e=d=0,i.value=Ie.AREA_0)}return g=Math.atan(12/Rb*(d+Math.acos(Math.sin(d)*Math.cos(Pb))-Ib)),f=Math.sqrt((1-Math.cos(e))/(Math.cos(g)*Math.cos(g))/(1-Math.cos(Math.atan(1/Math.cos(d))))),i.value===Ie.AREA_1?g+=Ib:i.value===Ie.AREA_2?g+=Rb:i.value===Ie.AREA_3&&(g+=1.5*Rb),h.x=f*Math.cos(g),h.y=f*Math.sin(g),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,a.x=h.x,a.y=h.y,a}function zb(a){var b,c,d,e,f,g,h,i,j,k={lam:0,phi:0},l={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,c=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),b=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?l.value=Ie.AREA_0:a.y>=0&&a.y>=Math.abs(a.x)?(l.value=Ie.AREA_1,b-=Ib):a.x<0&&-a.x>=Math.abs(a.y)?(l.value=Ie.AREA_2,b=0>b?b+Rb:b-Rb):(l.value=Ie.AREA_3,b+=Ib),j=Rb/12*Math.tan(b),f=Math.sin(j)/(Math.cos(j)-1/Math.sqrt(2)),g=Math.atan(f),d=Math.cos(b),e=Math.tan(c),h=1-d*d*e*e*(1-Math.cos(Math.atan(1/Math.cos(g)))),-1>h?h=-1:h>1&&(h=1),this.face===He.TOP)i=Math.acos(h),k.phi=Ib-i,l.value===Ie.AREA_0?k.lam=g+Ib:l.value===Ie.AREA_1?k.lam=0>g?g+Rb:g-Rb:l.value===Ie.AREA_2?k.lam=g-Ib:k.lam=g;else if(this.face===He.BOTTOM)i=Math.acos(h),k.phi=i-Ib,l.value===Ie.AREA_0?k.lam=-g+Ib:l.value===Ie.AREA_1?k.lam=-g:l.value===Ie.AREA_2?k.lam=-g-Ib:k.lam=0>g?-g-Rb:-g+Rb;else{var m,n,o;m=h,j=m*m,o=j>=1?0:Math.sqrt(1-j)*Math.sin(g),j+=o*o,n=j>=1?0:Math.sqrt(1-j),l.value===Ie.AREA_1?(j=n,n=-o,o=j):l.value===Ie.AREA_2?(n=-n,o=-o):l.value===Ie.AREA_3&&(j=n,n=o,o=-j),this.face===He.RIGHT?(j=m,m=-n,n=j):this.face===He.BACK?(m=-m,n=-n):this.face===He.LEFT&&(j=m,m=n,n=-j),k.phi=Math.acos(-o)-Ib,k.lam=Math.atan2(n,m),this.face===He.RIGHT?k.lam=Bb(k.lam,-Ib):this.face===He.BACK?k.lam=Bb(k.lam,-Rb):this.face===He.LEFT&&(k.lam=Bb(k.lam,+Ib))}if(0!==this.es){var p,q,r;p=k.phi<0?1:0,q=Math.tan(k.phi),r=this.b/Math.sqrt(q*q+this.one_minus_f_squared),k.phi=Math.atan(Math.sqrt(this.a*this.a-r*r)/(this.one_minus_f*r)),p&&(k.phi=-k.phi)}return k.lam+=this.long0,a.x=k.lam,a.y=k.phi,a}function Ab(a,b,c,d){var e;return Mb>a?(d.value=Ie.AREA_0,e=0):(e=Math.atan2(b,c),Math.abs(e)<=Pb?d.value=Ie.AREA_0:e>Pb&&Ib+Pb>=e?(d.value=Ie.AREA_1,e-=Ib):e>Ib+Pb||-(Ib+Pb)>=e?(d.value=Ie.AREA_2,e=e>=0?e-Rb:e+Rb):(d.value=Ie.AREA_3,e+=Ib)),e}function Bb(a,b){var c=a+b;return-Rb>c?c+=Qb:c>+Rb&&(c-=Qb),c}var Cb=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]},Db=1,Eb=2,Fb=4,Gb=5,Hb=484813681109536e-20,Ib=Math.PI/2,Jb=.16666666666666666,Kb=.04722222222222222,Lb=.022156084656084655,Mb=1e-10,Nb=.017453292519943295,Ob=57.29577951308232,Pb=Math.PI/4,Qb=2*Math.PI,Rb=3.14159265359,Sb={};Sb.greenwich=0,Sb.lisbon=-9.131906111111,Sb.paris=2.337229166667,Sb.bogota=-74.080916666667,Sb.madrid=-3.687938888889,Sb.rome=12.452333333333,Sb.bern=7.439583333333,Sb.jakarta=106.807719444444,Sb.ferro=-17.666666666667,Sb.brussels=4.367975,Sb.stockholm=18.058277777778,Sb.athens=23.7163375,Sb.oslo=10.722916666667;var Tb={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ub=/[\s_\-\/\(\)]/g,Vb=function(b){var c,d,e,f={},g=b.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,b){var c=b.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),h={proj:"projName",datum:"datumCode",rf:function(a){f.rf=parseFloat(a)},lat_0:function(a){f.lat0=a*Nb},lat_1:function(a){f.lat1=a*Nb},lat_2:function(a){f.lat2=a*Nb},lat_ts:function(a){f.lat_ts=a*Nb},lon_0:function(a){f.long0=a*Nb},lon_1:function(a){f.long1=a*Nb},lon_2:function(a){f.long2=a*Nb},alpha:function(a){f.alpha=parseFloat(a)*Nb},lonc:function(a){f.longc=a*Nb},x_0:function(a){f.x0=parseFloat(a)},y_0:function(a){f.y0=parseFloat(a)},k_0:function(a){f.k0=parseFloat(a)},k:function(a){f.k0=parseFloat(a)},a:function(a){f.a=parseFloat(a)},b:function(a){f.b=parseFloat(a)},r_a:function(){f.R_A=!0},zone:function(a){f.zone=parseInt(a,10)},south:function(){f.utmSouth=!0},towgs84:function(a){f.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){f.to_meter=parseFloat(a)},units:function(b){f.units=b;var c=a(Tb,b);c&&(f.to_meter=c.to_meter)},from_greenwich:function(a){f.from_greenwich=a*Nb},pm:function(b){var c=a(Sb,b);f.from_greenwich=(c?c:parseFloat(b))*Nb},nadgrids:function(a){"@null"===a?f.datumCode="none":f.nadgrids=a},axis:function(a){var b="ewnsud";3===a.length&&-1!==b.indexOf(a.substr(0,1))&&-1!==b.indexOf(a.substr(1,1))&&-1!==b.indexOf(a.substr(2,1))&&(f.axis=a)}};for(c in g)d=g[c],c in h?(e=h[c],"function"==typeof e?e(d):f[e]=d):f[c]=d;return"string"==typeof f.datumCode&&"WGS84"!==f.datumCode&&(f.datumCode=f.datumCode.toLowerCase()),f},Wb=1,Xb=2,Yb=3,Zb=4,$b=5,_b=-1,ac=/\s/,bc=/[A-Za-z]/,cc=/[A-Za-z84]/,dc=/[,\]]/,ec=/[\d\.E\-\+]/;b.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==Zb)for(;ac.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case Wb:return this.neutral(a);case Xb:return this.keyword(a);case Zb:return this.quoted(a);case $b:return this.afterquote(a);case Yb:return this.number(a);case _b:return}},b.prototype.afterquote=function(a){if('"'===a)return this.word+='"',void(this.state=Zb);if(dc.test(a))return this.word=this.word.trim(),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in afterquote yet, index '+this.place)},b.prototype.afterItem=function(a){return","===a?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Wb)):"]"===a?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Wb,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=_b))):void 0},b.prototype.number=function(a){if(ec.test(a))return void(this.word+=a);if(dc.test(a))return this.word=parseFloat(this.word),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in number yet, index '+this.place)},b.prototype.quoted=function(a){return'"'===a?void(this.state=$b):void(this.word+=a)},b.prototype.keyword=function(a){if(cc.test(a))return void(this.word+=a);if("["===a){var b=[];return b.push(this.word),this.level++,null===this.root?this.root=b:this.currentObject.push(b),this.stack.push(this.currentObject),this.currentObject=b,void(this.state=Wb)}if(dc.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in keyword yet, index '+this.place)},b.prototype.neutral=function(a){if(bc.test(a))return this.word=a,void(this.state=Xb);if('"'===a)return this.word="",void(this.state=Zb);if(ec.test(a))return this.word=a,void(this.state=Yb);if(dc.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in neutral yet, index '+this.place)},b.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===_b)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var fc=.017453292519943295,gc=function(a){var b=c(a),d=b.shift(),f=b.shift();b.unshift(["name",f]),b.unshift(["type",d]);var g={};return e(b,g),h(g),g};Cb(i);var hc=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ic=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a},jc=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},kc=function(a){return 0>a?-1:1},lc=function(a){return Math.abs(a)<=Rb?a:a-kc(a)*Qb},mc=function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(Ib-b))/d},nc=function(a,b){for(var c,d,e=.5*a,f=Ib-2*Math.atan(b),g=0;15>=g;g++)if(c=a*Math.sin(f),d=Ib-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return-9999},oc=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],pc={init:o,forward:p,inverse:q,names:oc},qc=["longlat","identity"],rc={init:r,forward:s,inverse:s,names:qc},sc=[pc,rc],tc={},uc=[],vc={start:v,add:t,get:u},wc={};wc.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},wc.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},wc.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},wc.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},wc.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"
},wc.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},wc.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},wc.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},wc.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},wc.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},wc.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},wc.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},wc.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},wc.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},wc.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},wc.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},wc.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},wc.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},wc.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},wc.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},wc.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},wc.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},wc.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},wc.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},wc.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},wc.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},wc.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},wc.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},wc.hough={a:6378270,rf:297,ellipseName:"Hough"},wc.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},wc.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},wc.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},wc.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},wc.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},wc.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},wc.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},wc.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},wc.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},wc.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},wc.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},wc.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var xc=wc.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};wc.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var yc={};yc.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},yc.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},yc.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},yc.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},yc.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},yc.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},yc.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},yc.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},yc.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},yc.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},yc.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},yc.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},yc.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},yc.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},yc.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},yc.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},yc.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},z.projections=vc,z.projections.start();var zc=function(a,b,c){return A(a,b)?c:a.datum_type===Gb||b.datum_type===Gb?c:a.es!==b.es||a.a!==b.a||F(a.datum_type)||F(b.datum_type)?(c=B(c,a.es,a.a),F(a.datum_type)&&(c=D(c,a.datum_type,a.datum_params)),F(b.datum_type)&&(c=E(c,b.datum_type,b.datum_params)),C(c,b.es,b.a,b.b)):c},Ac=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0,j={};for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":j[e]=d;break;case"w":j[e]=-d;break;case"n":j[e]=d;break;case"s":j[e]=-d;break;case"u":void 0!==c[e]&&(j.z=d);break;case"d":void 0!==c[e]&&(j.z=-d);break;default:return null}return j},Bc=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b},Cc=function(a){G(a.x),G(a.y)},Dc=z("WGS84"),Ec=6,Fc="AJSAJS",Gc="AFAFAF",Hc=65,Ic=73,Jc=79,Kc=86,Lc=90,Mc={forward:M,inverse:N,toPoint:O};Point.fromMGRS=function(a){return new Point(O(a))},Point.prototype.toMGRS=function(a){return M([this.x,this.y],a)};var Nc="2.4.4",Oc=1,Pc=.25,Qc=.046875,Rc=.01953125,Sc=.01068115234375,Tc=.75,Uc=.46875,Vc=.013020833333333334,Wc=.007120768229166667,Xc=.3645833333333333,Yc=.005696614583333333,Zc=.3076171875,$c=function(a){var b=[];b[0]=Oc-a*(Pc+a*(Qc+a*(Rc+a*Sc))),b[1]=a*(Tc-a*(Qc+a*(Rc+a*Sc)));var c=a*a;return b[2]=c*(Uc-a*(Vc+a*Wc)),c*=a,b[3]=c*(Xc-a*Yc),b[4]=c*a*Zc,b},_c=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},ad=20,bd=function(a,b,c){for(var d=1/(1-b),e=a,f=ad;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(_c(e,g,Math.cos(e),c)-a)*(h*Math.sqrt(h))*d,e-=h,Math.abs(h)<Mb)return e}return e},cd=["Transverse_Mercator","Transverse Mercator","tmerc"],dd={init:aa,forward:ba,inverse:ca,names:cd},ed=function(a){var b=Math.exp(a);return b=(b-1/b)/2},fd=function(a,b){a=Math.abs(a),b=Math.abs(b);var c=Math.max(a,b),d=Math.min(a,b)/(c?c:1);return c*Math.sqrt(1+Math.pow(d,2))},gd=function(a){var b=1+a,c=b-1;return 0===c?a:a*Math.log(b)/c},hd=function(a){var b=Math.abs(a);return b=gd(b*(1+b/(fd(1,b)+1))),0>a?-b:b},id=function(a,b){for(var c,d=2*Math.cos(2*b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return b+c*Math.sin(2*b)},jd=function(a,b){for(var c,d=2*Math.cos(b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return Math.sin(b)*c},kd=function(a){var b=Math.exp(a);return b=(b+1/b)/2},ld=function(a,b,c){for(var d,e,f=Math.sin(b),g=Math.cos(b),h=ed(c),i=kd(c),j=2*g*i,k=-2*f*h,l=a.length-1,m=a[l],n=0,o=0,p=0;--l>=0;)d=o,e=n,o=m,n=p,m=-d+j*o-k*n+a[l],p=-e+k*o+j*n;return j=f*i,k=g*h,[j*m-k*p,j*p+k*m]},md=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],nd={init:da,forward:ea,inverse:fa,names:md},od=function(a,b){if(void 0===a){if(a=Math.floor(30*(lc(b)+Math.PI)/Math.PI)+1,0>a)return 0;if(a>60)return 60}return a},pd="etmerc",qd=["Universal Transverse Mercator System","utm"],rd={init:ga,names:qd,dependsOn:pd},sd=function(a,b){return Math.pow((1-a)/(1+a),b)},td=20,ud=["gauss"],vd={init:ha,forward:ia,inverse:ja,names:ud},wd=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],xd={init:ka,forward:la,inverse:ma,names:wd},yd=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],zd={init:oa,forward:pa,inverse:qa,names:yd,ssfn_:na},Ad=["somerc"],Bd={init:ra,forward:sa,inverse:ta,names:Ad},Cd=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],Dd={init:ua,forward:va,inverse:wa,names:Cd},Ed=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],Fd={init:xa,forward:ya,inverse:za,names:Ed},Gd=["Krovak","krovak"],Hd={init:Aa,forward:Ba,inverse:Ca,names:Gd},Id=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},Jd=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},Kd=function(a){return.375*a*(1+.25*a*(1+.46875*a))},Ld=function(a){return.05859375*a*a*(1+.75*a)},Md=function(a){return a*a*a*(35/3072)},Nd=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},Od=function(a){return Math.abs(a)<Ib?a:a-kc(a)*Math.PI},Pd=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},Qd=["Cassini","Cassini_Soldner","cass"],Rd={init:Da,forward:Ea,inverse:Fa,names:Qd},Sd=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},Td=1,Ud=2,Vd=3,Wd=4,Xd=.3333333333333333,Yd=.17222222222222222,Zd=.10257936507936508,$d=.06388888888888888,_d=.0664021164021164,ae=.016415012942191543,be=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],ce={init:Ga,forward:Ha,inverse:Ia,names:be,S_POLE:Td,N_POLE:Ud,EQUIT:Vd,OBLIQ:Wd},de=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},ee=["Albers_Conic_Equal_Area","Albers","aea"],fe={init:La,forward:Ma,inverse:Na,names:ee,phi1z:Oa},ge=["gnom"],he={init:Pa,forward:Qa,inverse:Ra,names:ge},ie=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return 0>b?-1*Ib:Ib;for(var d,e,f,g,h=Math.asin(.5*b),i=0;30>i;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return NaN},je=["cea"],ke={init:Sa,forward:Ta,inverse:Ua,names:je},le=["Equirectangular","Equidistant_Cylindrical","eqc"],me={init:Va,forward:Wa,inverse:Xa,names:le},ne=20,oe=["Polyconic","poly"],pe={init:Ya,forward:Za,inverse:$a,names:oe},qe=["New_Zealand_Map_Grid","nzmg"],re={init:_a,forward:ab,inverse:bb,names:qe},se=["Miller_Cylindrical","mill"],te={init:cb,forward:db,inverse:eb,names:se},ue=20,ve=["Sinusoidal","sinu"],we={init:fb,forward:gb,inverse:hb,names:ve},xe=["Mollweide","moll"],ye={init:ib,forward:jb,inverse:kb,names:xe},ze=["Equidistant_Conic","eqdc"],Ae={init:lb,forward:mb,inverse:nb,names:ze},Be=["Van_der_Grinten_I","VanDerGrinten","vandg"],Ce={init:ob,forward:pb,inverse:qb,names:Be},De=["Azimuthal_Equidistant","aeqd"],Ee={init:rb,forward:sb,inverse:tb,names:De},Fe=["ortho"],Ge={init:ub,forward:vb,inverse:wb,names:Fe},He={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ie={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Je=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],Ke={init:xb,forward:yb,inverse:zb,names:Je},Le=function(proj4){proj4.Proj.projections.add(dd),proj4.Proj.projections.add(nd),proj4.Proj.projections.add(rd),proj4.Proj.projections.add(xd),proj4.Proj.projections.add(zd),proj4.Proj.projections.add(Bd),proj4.Proj.projections.add(Dd),proj4.Proj.projections.add(Fd),proj4.Proj.projections.add(Hd),proj4.Proj.projections.add(Rd),proj4.Proj.projections.add(ce),proj4.Proj.projections.add(fe),proj4.Proj.projections.add(he),proj4.Proj.projections.add(ke),proj4.Proj.projections.add(me),proj4.Proj.projections.add(pe),proj4.Proj.projections.add(re),proj4.Proj.projections.add(te),proj4.Proj.projections.add(we),proj4.Proj.projections.add(ye),proj4.Proj.projections.add(Ae),proj4.Proj.projections.add(Ce),proj4.Proj.projections.add(Ee),proj4.Proj.projections.add(Ge),proj4.Proj.projections.add(Ke)};return L.defaultDatum="WGS84",L.Proj=z,L.WGS84=new L.Proj("WGS84"),L.Point=Point,L.toPoint=Bc,L.defs=i,L.transform=I,L.mgrs=Mc,L.version=Nc,Le(L),L});} }
    );
    include.tag( "projections",
        { loader: "script", url: "smk/projections.js", load: function () { console.debug( "[smk/projections.js]" ); include.module("projections",["proj4"],function(){"use strict";SMK.PROJECTIONS.forEach(function(e){if(e.name)if(e.def)proj4.defs(e.name,e.def);else if(e.alias){var f=proj4.defs(e.alias);if(!f)return;proj4.defs(e.name,f)}})});} }
    );
    include.tag( "query",
        { loader: "group", tags: [
            { loader: "script", url: "smk/query/query-esri-dynamic.js", load: function () { console.debug( "[smk/query/query-esri-dynamic.js]" ); include.module("query.query-esri-dynamic-js",["query.query-js"],function(){"use strict";function e(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function s(e,r){if(!(e.operator in n))throw new Error("unknown operator: "+JSON.stringify(e));return n[e.operator](e.arguments,r)}$.extend(e.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query["esri-dynamic"]=e).prototype.fetchUniqueValues=function(e,r){var i=this,n=r.layerId[this.layerId].config,o=JSON.parse(n.dynamicLayers[0]),a=n.serviceUrl+"/dynamicLayer/query";return delete o.drawingInfo,SMK.UTIL.asyncReduce(function(n,t){return function(e,n,r,i){var t=e.filter(function(e){return null!=e}),o="(1=1)";e.length!=t.length&&(o="( "+i+" IS NOT NULL )");0<t.length&&(o+=" AND "+i+" NOT IN ( "+t.map(function(e){return"'"+e+"'"}).join(", ")+" )");var a={f:"geojson",layer:JSON.stringify(r).replace(/^"|"$/g,""),where:o,outFields:i,inSR:4326,outSR:4326,returnGeometry:!1,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!0};return SMK.UTIL.makePromise(function(e,r){$.ajax({url:n,method:"POST",data:a,dataType:"json"}).then(e,r)}).then(function(e){if(console.log(e),e&&e.features&&0!=e.features.length){var n={},t=!1;return e.features.forEach(function(e,r){null==e.properties[i]?t=!0:n[e.properties[i]]=!0}),Object.keys(n).concat(t?[null]:[])}})}(n,a,o,e).then(function(e){if(!e||0==e.length)return t(n);var r=n.concat(e);return r.length>=i.maxUniqueValues&&t(),r})},[])},e.prototype.queryLayer=function(e,r,n){var t=n.layerId[this.layerId].config;if(1!=t.dynamicLayers.length)throw new Error("more than one dynamic layer def");var i=t.serviceUrl+"/dynamicLayer/query",o=JSON.parse(t.dynamicLayers[0]);delete o.drawingInfo;var a=s(this.predicate,e);if(!a)throw new Error("filter is empty");var u={f:"geojson",layer:JSON.stringify(o).replace(/^"|"$/g,""),where:a,outFields:"*",inSR:4326,outSR:4326,returnGeometry:!0,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!1};return r.within&&(u.geometry=n.getView().extent.join(","),u.geometryType="esriGeometryEnvelope",u.spatialRel="esriSpatialRelIntersects"),SMK.UTIL.makePromise(function(e,r){$.ajax({url:i,method:"POST",data:u,dataType:"json"}).then(e,r)}).then(function(e){if(console.log(e),!e)throw new Error("no features");if(!e.features||0==e.features.length)throw new Error("no features");return e.features.map(function(e,r){return t.titleAttribute?e.title=e.properties[t.titleAttribute]:e.title="Feature #"+(r+1),e})})};var n={and:function(e,n){if(0==e.length)throw new Error("AND needs at least 1 argument");return e.map(function(e){var r=s(e,n);if(r)return"( "+r+" )"}).filter(function(e){return!!e}).join(" AND ")},or:function(e,n){if(0==e.length)throw new Error("OR needs at least 1 argument");return e.map(function(e){var r=s(e,n);if(r)return"( "+r+" )"}).filter(function(e){return!!e}).join(" OR ")},equals:function(e,r){if(2!=e.length)throw new Error("EQUALS needs exactly 2 arguments");var n=i(e[0],r),t=i(e[1],r);if(n&&t)return n+" = "+t},"less-than":function(e,r){if(2!=e.length)throw new Error("LESS-THAN needs exactly 2 arguments");var n=i(e[0],r),t=i(e[1],r);if(n&&t)return n+" < "+t},"greater-than":function(e,r){if(2!=e.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var n=i(e[0],r),t=i(e[1],r);if(n&&t)return n+" > "+t},contains:function(e,r){if(2!=e.length)throw new Error("CONTAINS needs exactly 2 arguments");var n=i(e[0],r),t=i(e[1],r,!1);if(n&&t)return n+" LIKE '%"+t+"%'"},"starts-with":function(e,r){if(2!=e.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var n=i(e[0],r),t=i(e[1],r,!1);if(n&&t)return n+" LIKE '"+t+"%'"},"ends-with":function(e,r){if(2!=e.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var n=i(e[0],r),t=i(e[1],r,!1);if(n&&t)return n+" LIKE '%"+t+"'"},not:function(e,r){if(1!=e.length)throw new Error("NOT needs exactly 1 argument");var n=s(e[0],r);if(n)return"NOT "+n}};function i(e,r,n){if(!(e.operand in t))throw new Error("unknown operand: "+JSON.stringify(e));return t[e.operand](e,r,n)}var t={attribute:function(e,r,n){return!1===n?"' || "+e.name+" || '":e.name},parameter:function(e,r,n){var t=r[e.id].value;if(null!=t&&""!==t)return(!1===n?"":"'")+t+(!1===n?"":"'")}}});} },
            { loader: "script", url: "smk/query/query-esri-feature.js", load: function () { console.debug( "[smk/query/query-esri-feature.js]" ); include.module("query.query-esri-feature-js",["query.query-js"],function(){"use strict";function e(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function a(e,r){if(!(e.operator in t))throw new Error("unknown operator: "+JSON.stringify(e));return t[e.operator](e.arguments,r)}$.extend(e.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query["esri-feature"]=e).prototype.fetchUniqueValues=function(e,r){var u=this,t=r.layerId[this.layerId].config,n=JSON.parse(t.dynamicLayers[0]),o=t.serviceUrl+"/query";return delete n.drawingInfo,SMK.UTIL.asyncReduce(function(t,n){return function(e,t,r,u){var n=e.filter(function(e){return null!=e}),o="(1=1)";e.length!=n.length&&(o="( "+u+" IS NOT NULL )");0<n.length&&(o+=" AND "+u+" NOT IN ( "+n.map(function(e){return"'"+e+"'"}).join(", ")+" )");var i={f:"geojson",where:o,outFields:u,inSR:4326,outSR:4326,returnGeometry:!1,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!0};return SMK.UTIL.makePromise(function(e,r){$.ajax({url:t,method:"POST",data:i,dataType:"json"}).then(e,r)}).then(function(e){if(console.log(e),e&&e.features&&0!=e.features.length){var t={},n=!1;return e.features.forEach(function(e,r){null==e.properties[u]?n=!0:t[e.properties[u]]=!0}),Object.keys(t).concat(n?[null]:[])}})}(t,o,0,e).then(function(e){if(!e||0==e.length)return n(t);var r=t.concat(e);return r.length>=u.maxUniqueValues&&n(),r})},[])},e.prototype.queryLayer=function(e,r,t){var n=t.layerId[this.layerId].config,u=n.serviceUrl+"/query",o=a(this.predicate,e);if(!o)throw new Error("filter is empty");var i={f:"geojson",where:o,outFields:"*",inSR:4326,outSR:4326,returnGeometry:!0,returnZ:!1,returnM:!1,returnIdsOnly:!1,returnCountOnly:!1,returnDistinctValues:!1};return r.within&&(i.geometry=t.getView().extent.join(","),i.geometryType="esriGeometryEnvelope",i.spatialRel="esriSpatialRelIntersects"),SMK.UTIL.makePromise(function(e,r){$.ajax({url:u,method:"POST",data:i,dataType:"json"}).then(e,r)}).then(function(e){if(console.log(e),!e)throw new Error("no features");if(!e.features||0==e.features.length)throw new Error("no features");return e.features.map(function(e,r){return n.titleAttribute?e.title=e.properties[n.titleAttribute]:e.title="Feature #"+(r+1),e})})};var t={and:function(e,t){if(0==e.length)throw new Error("AND needs at least 1 argument");return e.map(function(e){var r=a(e,t);if(r)return"( "+r+" )"}).filter(function(e){return!!e}).join(" AND ")},or:function(e,t){if(0==e.length)throw new Error("OR needs at least 1 argument");return e.map(function(e){var r=a(e,t);if(r)return"( "+r+" )"}).filter(function(e){return!!e}).join(" OR ")},equals:function(e,r){if(2!=e.length)throw new Error("EQUALS needs exactly 2 arguments");var t=u(e[0],r),n=u(e[1],r);if(t&&n)return t+" = "+n},"less-than":function(e,r){if(2!=e.length)throw new Error("LESS-THAN needs exactly 2 arguments");var t=u(e[0],r),n=u(e[1],r);if(t&&n)return t+" < "+n},"greater-than":function(e,r){if(2!=e.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var t=u(e[0],r),n=u(e[1],r);if(t&&n)return t+" > "+n},contains:function(e,r){if(2!=e.length)throw new Error("CONTAINS needs exactly 2 arguments");var t=u(e[0],r),n=u(e[1],r,!1);if(t&&n)return t+" LIKE '%"+n+"%'"},"starts-with":function(e,r){if(2!=e.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var t=u(e[0],r),n=u(e[1],r,!1);if(t&&n)return t+" LIKE '"+n+"%'"},"ends-with":function(e,r){if(2!=e.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var t=u(e[0],r),n=u(e[1],r,!1);if(t&&n)return t+" LIKE '%"+n+"'"},not:function(e,r){if(1!=e.length)throw new Error("NOT needs exactly 1 argument");var t=a(e[0],r);if(t)return"NOT "+t}};function u(e,r,t){if(!(e.operand in n))throw new Error("unknown operand: "+JSON.stringify(e));return n[e.operand](e,r,t)}var n={attribute:function(e,r,t){return!1===t?"' || "+e.name+" || '":e.name},parameter:function(e,r,t){var n=r[e.id].value;if(null!=n&&""!==n)return(!1===t?"":"'")+n+(!1===t?"":"'")}}});} },
            { loader: "script", url: "smk/query/query-place.js", load: function () { console.debug( "[smk/query/query-place.js]" ); include.module("query.query-place-js",["query.query-js"],function(){"use strict";function e(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments),this.title="Location",this.parameters=[{id:"param1",type:"input",title:"Place or road name"}]}$.extend(e.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query.place=e).prototype.canUseWithExtent=function(e){return!1},e.prototype.queryLayer=function(e,t,r){var o=this,s={ver:1.2,maxResults:20,outputSRS:4326,addressString:e.param1.value,autoComplete:!0};return SMK.UTIL.makePromise(function(e,t){$.ajax({timeout:1e4,dataType:"jsonp",url:"https://apps.gov.bc.ca/pub/geocoder/addresses.geojsonp",data:s}).then(e,t)}).then(function(e){if(!e)throw new Error("no features");if(!e.features||0==e.features.length)throw new Error("no features");var t=e.features.map(function(e){if(e.geometry.coordinates&&"BC"!=e.properties.fullAddress)return e.radius=o.getAddressRadius(e.properties),e.title=e.properties.fullAddress,e}).filter(function(e){return e});if(0==t.length)throw new Error("no features");return t})},e.prototype.getAddressRadius=function(e){switch(e.matchPrecision){case"STREET":return 500;case"INTERSECTION":case"BLOCK":case"CIVIC_NUMBER":return 100;default:return 1e3}}});} },
            { loader: "script", url: "smk/query/query-vector.js", load: function () { console.debug( "[smk/query/query-vector.js]" ); include.module("query.query-vector-js",["query.query-js"],function(){"use strict";function r(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function a(r,t){if(!(r.operator in e))throw new Error("unknown operator: "+JSON.stringify(r));return e[r.operator](r.arguments,t)}$.extend(r.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query.vector=r).prototype.canUseWithExtent=function(r){return!1},r.prototype.fetchUniqueValues=function(t,r){var e={},n=!1;return r.visibleLayer[this.layerId].eachLayer(function(r){null==r.feature.properties[t]?n=!0:e[r.feature.properties[t]]=!0}),SMK.UTIL.resolved(Object.keys(e).concat(n?[null]:[]))},r.prototype.queryLayer=function(r,t,e){var n=e.layerId[this.layerId].config,o=a(this.predicate,r);if(!o)throw new Error("test is empty");var u=t.within?function(r){return function(r,t){var e=turf.bboxPolygon(r);switch(t.type){case"Polygon":case"MultiPolygon":return turf.booleanOverlap(t,e)||turf.booleanCrosses(e,t)||turf.booleanContains(e,t)||turf.booleanContains(t,e);case"LineString":case"MultiLineString":return turf.booleanCrosses(e,t)||turf.booleanContains(e,t);case"Point":case"MultiPoint":return turf.coordReduce(t,function(r,t){return r||turf.booleanPointInPolygon(t,e)},!1);default:return console.warn("skip",t.type),!1}}(e.getView().extent,r)}:function(){return!0},i=[];return e.visibleLayer[this.layerId].eachLayer(function(r){o(r.feature.properties)&&u(r.feature.geometry)&&i.push(r.feature)}),SMK.UTIL.resolved(i).then(function(r){if(!r||0==r.length)throw new Error("no results");return r.map(function(r,t){return n.titleAttribute?r.title=r.properties[n.titleAttribute]:r.title="Feature #"+(t+1),r})})};var e={and:function(r,t){if(0==r.length)throw new Error("AND needs 1 or more arguments");var e=r.map(function(r){return a(r,t)}).filter(function(r){return!!r});if(0!=e.length)return function(t){return e.every(function(r){return r(t)})}},or:function(r,t){if(0==r.length)throw new Error("OR needs 1 or more arguments");var e=r.map(function(r){return a(r,t)}).filter(function(r){return!!r});if(0!=e.length)return function(t){return e.some(function(r){return r(t)})}},equals:function(r,t){if(2!=r.length)throw new Error("EQUALS needs exactly 2 arguments");var e=o(r[0],t),n=o(r[1],t);if(e&&n)return function(r){return e(r)==n(r)}},"less-than":function(r,t){if(2!=r.length)throw new Error("LESS-THAN needs exactly 2 arguments");var e=o(r[0],t),n=o(r[1],t);if(e&&n)return function(r){return e(r)<n(r)}},"greater-than":function(r,t){if(2!=r.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var e=o(r[0],t),n=o(r[1],t);if(e&&n)return function(r){return e(r)>n(r)}},contains:function(r,t){if(2!=r.length)throw new Error("CONTAINS needs exactly 2 arguments");var e=o(r[0],t),n=o(r[1],t);if(e&&n)return function(r){return new RegExp(n(r),"i").test(e(r))}},"starts-with":function(r,t){if(2!=r.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var e=o(r[0],t),n=o(r[1],t);if(e&&n)return function(r){return new RegExp("^"+n(r),"i").test(e(r))}},"ends-with":function(r,t){if(2!=r.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var e=o(r[0],t),n=o(r[1],t);if(e&&n)return function(r){return new RegExp(n(r)+"$","i").test(e(r))}},not:function(r,t){if(1!=r.length)throw new Error("NOT needs exactly 1 argument");var e=a(r[0],t);if(e)return function(r){return!e(r)}}};function o(r,t){if(!(r.operand in n))throw new Error("unknown operand: "+JSON.stringify(r));return n[r.operand](r,t)}var n={attribute:function(t,r,e){return function(r){if(!(t.name in r))throw new Error('"'+t.name+'" is not a valid attribute');return r[t.name]}},parameter:function(r,t,e){if(!(r.id in t))throw new Error('"'+r.id+'" is not a valid parameter');var n=t[r.id].value;if(null!=n&&""!==n)return function(){return n}}}});} },
            { loader: "script", url: "smk/query/query-wms.js", load: function () { console.debug( "[smk/query/query-wms.js]" ); include.module("query.query-wms-js",["query.query-js"],function(){"use strict";function e(){SMK.TYPE.Query.prototype.constructor.apply(this,arguments)}function u(e,r){if(!(e.operator in t))throw new Error("unknown operator: "+JSON.stringify(e));return t[e.operator](e.arguments,r)}$.extend(e.prototype,SMK.TYPE.Query.prototype),(SMK.TYPE.Query.wms=e).prototype.canUseWithExtent=function(e){return!!e.layerId[this.layerId].config.geometryAttribute},e.prototype.fetchUniqueValues=function(e,r){var o=this,t=r.layerId[this.layerId].config,i=t.layerName,u=t.serviceUrl;return SMK.UTIL.asyncReduce(function(t,n){return function(e,t,r,o){var n=e.filter(function(e){return null!=e}),i="(1=1)";e.length!=n.length&&(i="( "+o+" IS NOT NULL )");0<n.length&&(i+=" AND "+o+" NOT IN ( "+n.map(function(e){return"'"+e+"'"}).join(", ")+" )");var u={service:"WFS",version:"1.1.0",request:"GetFeature",srsName:"EPSG:4326",typename:r,outputformat:"application/json",cql_filter:i,propertyName:o,maxFeatures:10};return SMK.UTIL.makePromise(function(e,r){$.ajax({url:t,method:"GET",data:u,dataType:"json"}).then(e,r)}).then(function(e){if(!e)return[];if(!e.features||0==e.features.length)return[];var t={},n=!1;return e.features.forEach(function(e,r){null==e.properties[o]?n=!0:t[e.properties[o]]=!0}),Object.keys(t).concat(n?[null]:[])}).catch(function(e){if(e.responseText)throw new Error("Request failed: "+e.responseText);throw e})}(t,u,i,e).then(function(e){if(!e||0==e.length)return n(t);var r=t.concat(e);return r.length>=o.maxUniqueValues&&n(),r})},[])},e.prototype.queryLayer=function(e,r,t){var n=t.layerId[this.layerId].config,o=u(this.predicate,e);if(!o)throw new Error("filter is empty");var i=$.extend({service:"WFS",version:"1.1.0",request:"GetFeature",srsName:"EPSG:4326",typename:n.layerName,outputformat:"application/json",cql_filter:o},e.option);return r.within&&n.geometryAttribute&&(i.cql_filter="( "+i.cql_filter+" ) AND BBOX( "+n.geometryAttribute+", "+t.getView().extent.join(", ")+", 'EPSG:4326' )"),SMK.UTIL.makePromise(function(e,r){$.ajax({url:n.serviceUrl,method:"GET",data:i,dataType:"json"}).then(e,r)}).then(function(e){if(console.log(e),!e)throw new Error("no features");if(!e.features||0==e.features.length)throw new Error("no features");return e.features.map(function(e,r){return n.titleAttribute?e.title=e.properties[n.titleAttribute]:e.title="Feature #"+(r+1),e})})};var t={and:function(e,t){if(0==e.length)throw new Error("AND needs at least 1 argument");return e.map(function(e){var r=u(e,t);if(r)return"( "+r+" )"}).filter(function(e){return!!e}).join(" AND ")},or:function(e,t){if(0==e.length)throw new Error("OR needs at least 1 argument");return e.map(function(e){var r=u(e,t);if(r)return"( "+r+" )"}).filter(function(e){return!!e}).join(" OR ")},equals:function(e,r){if(2!=e.length)throw new Error("EQUALS needs exactly 2 arguments");var t=o(e[0],r),n=o(e[1],r);if(t&&n)return t+" = "+n},"less-than":function(e,r){if(2!=e.length)throw new Error("LESS-THAN needs exactly 2 arguments");var t=o(e[0],r),n=o(e[1],r);if(t&&n)return t+" < "+n},"greater-than":function(e,r){if(2!=e.length)throw new Error("GREATER-THAN needs exactly 2 arguments");var t=o(e[0],r),n=o(e[1],r);if(t&&n)return t+" > "+n},contains:function(e,r){if(2!=e.length)throw new Error("CONTAINS needs exactly 2 arguments");var t=o(e[0],r),n=o(e[1],r,!1);if(t&&n)return t+" ILIKE '%"+n+"%'"},"starts-with":function(e,r){if(2!=e.length)throw new Error("STARTS-WITH needs exactly 2 arguments");var t=o(e[0],r),n=o(e[1],r,!1);if(t&&n)return t+" ILIKE '"+n+"%'"},"ends-with":function(e,r){if(2!=e.length)throw new Error("ENDS-WITH needs exactly 2 arguments");var t=o(e[0],r),n=o(e[1],r,!1);if(t&&n)return t+" ILIKE '%"+n+"'"},not:function(e,r){if(1!=e.length)throw new Error("NOT needs exactly 1 argument");var t=u(e[0],r);if(t)return"NOT "+t}};function o(e,r,t){if(!(e.operand in n))throw new Error("unknown operand: "+JSON.stringify(e));return n[e.operand](e,r,t)}var n={attribute:function(e,r,t){return!1===t?"' || "+e.name+" || '":e.name},parameter:function(e,r,t){var n=r[e.id].value;if(null!=n&&""!==n)return(!1===t?"":"'")+n+(!1===t?"":"'")}}});} },
            { loader: "script", url: "smk/query/query.js", load: function () { console.debug( "[smk/query/query.js]" ); include.module("query.query-js",["jquery","util","event"],function(){"use strict";var o=SMK.TYPE.Event.define([]);function t(t,e){o.prototype.constructor.call(this),Object.assign(this,e),this.layerId=t,this.id=this.layerId+"--"+this.id}function u(t,e){this.id=t.id+"--"+e.id,this.layerId=t.layerId,this.component="parameter-"+e.type,this.prop=$.extend(!0,{value:null,focus:0},e),this.initial=e.value}$.extend(t.prototype,o.prototype),t.prototype.maxUniqueValues=100,(SMK.TYPE.Query=t).prototype.getParameters=function(e){var o=this;return this.parameters.map(function(t){return new u[t.type](o,t,e)})},t.prototype.queryLayer=function(t){console.log("not implemented",t)},t.prototype.fetchUniqueValues=function(t,e){console.log("not implemented",t)},t.prototype.canUseWithExtent=function(t){return!0},u.prototype.mounted=function(){},u.prototype.focus=function(){},u.constant=function(){u.prototype.constructor.apply(this,arguments)},Object.assign(u.constant.prototype,u.prototype),u.input=function(){u.prototype.constructor.apply(this,arguments)},Object.assign(u.input.prototype,u.prototype),u.input.prototype.focus=function(){this.prop.focus+=1},u.select=function(){u.prototype.constructor.apply(this,arguments)},Object.assign(u.select.prototype,u.prototype),u["select-unique"]=function(t,e,o){var n=this;e.type="select";var i=e.uniqueAttribute;delete e.uniqueAttribute,u.prototype.constructor.call(this,t,e),this.mounted=function(){n.fetchUnique||(n.fetchUnique=t.fetchUniqueValues(i,o).then(function(t){Vue.set(n.prop,"choices",t.map(function(t){return{value:t}}).sort(function(t,e){return t.value>e.value?1:-1}))}).catch(function(t){console.warn(t),n.prop.useFallback=!0}))}},Object.assign(u["select-unique"].prototype,u.prototype)});} }
        ] }
    );
    include.tag( "sidepanel",
        { loader: "group", tags: [
            { loader: "style", url: "smk/sidepanel/sidepanel.css", load: "/* [smk/sidepanel/sidepanel.css] */\n.smk-map-frame .smk-viewer{cursor:default}.smk-map-frame .smk-viewer.leaflet-drag-target{cursor:move}.smk-sidepanel{position:absolute;top:calc(var(--toolbar-height) + 10px);left:0;width:var(--panel-width);bottom:var(--panel-bottom);z-index:10}.smk-sidepanel .smk-elastic-panel{display:flex;flex-direction:column;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;max-height:100%}.smk-sidepanel .smk-panel{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:100%;min-height:0}.smk-panel .smk-header{display:flex;justify-content:space-between;align-items:center;align-content:flex-start;position:relative;border-bottom:1px solid gray;margin-left:1px;margin-right:1px;margin-bottom:5px;flex-shrink:0}.smk-panel .smk-commands{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;align-content:flex-start;margin-bottom:5px}.smk-panel .smk-commands>*{margin:0 4px}.smk-panel .smk-panel-go-back{order:10}.smk-panel .smk-panel-title{order:20;flex-grow:1;min-height:26px;display:flex;justify-content:center;align-items:center;text-align:center;padding:3px 0}.smk-panel .smk-panel-close{order:30}.smk-panel .smk-separator{order:50;flex-basis:100%;border-bottom:1px solid gray}.smk-device-mobile .smk-panel .smk-header .smk-swipe-handle{position:absolute;top:2px;left:50%;right:50%;margin-left:-15px;margin-right:-15px;width:30px;height:4px;background-color:#ccc;border-radius:3px}.smk-panel .smk-body{position:relative;padding-left:5px;padding-right:5px;padding-bottom:5px;overflow-x:hidden;overflow-y:auto;height:100%}.smk-sidepanel .smk-panel .smk-above-body{position:relative}.smk-sidepanel .smk-panel .smk-can-scroll-up{display:none;position:absolute;top:0;right:0}.smk-device-mobile .smk-sidepanel .smk-panel .smk-can-scroll-up{display:block}.smk-sidepanel .smk-panel .smk-below-body{position:relative}.smk-sidepanel .smk-panel .smk-can-scroll-down{display:none;position:absolute;right:0;bottom:0}.smk-device-mobile .smk-sidepanel .smk-panel .smk-can-scroll-down{display:block}" },
            { loader: "template", url: "smk/sidepanel/sidepanel.html", load:"<transition name=\"sidepanel-slide\"\n    v-on:before-enter=\"beforeShow\"\n    v-on:after-enter=\"afterShow\"\n    v-on:before-leave=\"beforeHide\"\n    v-on:after-leave=\"afterHide\"\n>\n    <div class=\"smk-sidepanel\" \n        v-show=\"visible\"\n        v-bind:class=\"[ 'smk-expand-' + expand ]\"\n    >\n        <component class=\"smk-elastic-panel\"\n            v-for=\"panel in panels\"\n            v-if=\"panel.prop.active && panel.prop.showPanel !== false\"\n            v-bind:key=\"panel.prop.id\"\n            v-bind:is=\"panel.component\"\n            v-bind=\"panel.prop\"\n        >\n            <i class=\"smk-panel-go-back smk-command smk-icon material-icons\" title=\"Go Back\"\n                v-on:click=\"previousPanel( panel.prop.id )\"\n                v-bind:style=\"{ visibility: panel.prop.hasPrevious ? 'visible': 'hidden' }\"\n            >arrow_back</i>\n\n            <component class=\"smk-panel-title\"\n                v-if=\"panel.titleComponent\"\n                v-bind:is=\"panel.titleComponent()\"\n            ></component>\n            <span class=\"smk-panel-title\"\n                v-else\n                v-html=\"panel.prop.title\"\n            ></span>\n\n            <i class=\"smk-panel-close smk-command smk-icon material-icons\" title=\"Close Panel\"\n                v-on:click=\"closePanel( panel.prop.id )\"\n            >close</i>\n        </component>\n    </div>\n</transition>\n" },
            { loader: "script", url: "smk/sidepanel/sidepanel.js", load: function () { console.debug( "[smk/sidepanel/sidepanel.js]" ); include.module("sidepanel",["vue","tool","sidepanel.sidepanel-html"],function(e){"use strict";var n=SMK.TYPE.Event.define(["changedVisible","changedTool","changedSize"]);function i(o){var i=this;function t(n){return i.model.panels.find(function(e){return e.prop.id==n})}n.prototype.constructor.call(this),this.model={visible:!1,expand:0,panels:[]},this.vm=new Vue({el:o.addToOverlay(e["sidepanel.sidepanel-html"]),data:this.model,methods:{trigger:function(e,n,i,t){o.emit(e,n,i,t)},previousPanel:function(e){var n=t(e);if(n){var i=t(n.prop.parentId);i&&(o.getToolById(i.prop.id).active=!0,o.getToolById(n.prop.id).active=!1)}o.emit(e,"previous-panel")},closePanel:function(e){i.setExpand(0)},beforeShow:function(){},afterShow:function(){i.changedVisible()},beforeHide:function(){},afterHide:function(){i.changedVisible()}}}),this.changedVisible(function(){i.isPanelVisible()?i.setExpand(1):(i.changedSize(),i.model.panels.forEach(function(e){o.getToolById(e.prop.id).active=!1}))})}return i.prototype.getExpand=function(){return this.model.expand},i.prototype.setExpand=function(e){e?(this.model.expand=e,this.changedSize()):(this.model.visible=!1,this.model.expand=0)},i.prototype.incrExpand=function(e){return this.setExpand(Math.max(0,this.getExpand()+(e||1)))},i.prototype.isPanelVisible=function(){return this.model.visible},i.prototype.addTool=function(n,e){var i=this;if(n.makePanelComponent)return this.model.panels.push(n.makePanelComponent()),n.changedActive(function(){var e=i.model.visible;i.model.visible=i.model.panels.some(function(e){return e.prop.active}),e==i.model.visible&&n.active&&i.changedSize()}),!0},$.extend(i.prototype,n.prototype),SMK.TYPE.Sidepanel=i});} }
        ] }
    );
    include.tag( "smk-map",
        { loader: "script", url: "smk/smk-map.js", load: function () { console.debug( "[smk/smk-map.js]" ); include.module("smk-map",["libs","util","theme-base","sidepanel","status-message","vue-config.spinner-gif","merge-config","default-config"],function(o){"use strict";function e(e){this.$option=e,this.$dispatcher=new Vue,this.$group={}}function r(e,t,i,o){if(!(t in e))throw new Error(t+" is not in obj");if(!Array.isArray(e[t]))throw new Error(t+" is not an array");e[t].forEach(function(e){if(i in e){var t=o(e[i]);void 0!==t&&(e[i]=t)}})}(SMK.TYPE.SmkMap=e).prototype.resolveAssetUrl=function(e){return new URL(e,this.$option.baseUrl+"assets/src/").toString()},e.prototype.initialize=function(){var n=this,t=$(this.$option.containerSel);if(1!=t.length)throw new Error('smk-container-sel "'+this.$option.containerSel+"\" doesn't match a unique element");t.empty(),t.addClass("smk-map-frame smk-hidden");var e=t.position(),i=$("<img>").attr("src",o["vue-config.spinner-gif"]).insertAfter(t).css({zIndex:99999,visibility:"visible",position:"absolute",width:64,height:64,left:e.left+t.outerWidth()/2-32,top:e.top+t.outerHeight()/2-32});return t.empty(),this.$container=t.get(0),SMK.UTIL.resolved().then(function(){return SMK.UTIL.waitAll(n.$option.parsedConfig.map(function(i){if(i.obj)return i.obj.$source=i.$source,SMK.UTIL.resolved(i.obj);var e=i.url.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^[-]|[-]$/g,""),o="config-"+e;try{include.tag(o,{loader:"template",url:i.url})}catch(e){console.warn(e)}return include(o).then(function(e){var t=JSON.parse(e[o]);return t.$source=i.$source,t}).catch(function(e){throw console.warn('failed to load tag "'+o+'" for '+i.$source),e.parseSource=i.$source,e})}))}).then(function(e){Object.assign(n,o["merge-config"](e))}).then(function(){$(n.$container).addClass("smk-viewer-"+n.viewer.type);var e=["base"].concat(n.viewer.themes).map(function(e){return"theme-"+e});$(n.$container).addClass(e.map(function(e){return"smk-"+e}).join(" ")),n.detectDevice(),n.viewer.panelWidth&&n.setVar("panel-width",n.viewer.panelWidth+"px");return include(e)}).then(function(){r(n,"tools","enabled",function(e){if("string"==typeof e)return e==n.$device}),r(n,"tools","showTitle",function(e){if("string"==typeof e)return e==n.$device}),r(n,"tools","control",function(e){if("string"==typeof e)return e==n.$device})}).then(function(){return include("viewer-"+n.viewer.type).catch(function(e){throw e.message+=", viewer type "+(n.viewer.type?'"'+n.viewer.type+'" ':"")+"is not defined",e})}).then(function(){if(n.$tool={},n.$toolType={},!n.tools)return;var e=n.tools.filter(function(e){return!1!==e.enabled&&!0!==e.instance});if(0==e.length)return;return SMK.UTIL.waitAll(e.map(function(i){var o="tool-"+i.type;return include(o).then(function(e){return include(o+"-"+n.viewer.type).catch(function(){console.debug(o+" has no "+n.viewer.type+" subclass")}).then(function(){return e})}).then(function(e){var t=e[o](i);t.forEach(function(e){if(!e.id)throw Error("tool with no id");if(e.id in n.$tool)throw Error('tool "'+e.id+'" is defined more than once');n.$toolType[e.type]||(n.$toolType[e.type]=[]),n.$toolType[e.type].push(e),n.$tool[e.id]=e})}).catch(function(e){console.warn("Failed to create tool:",e,i)})}))}).then(function(){if(!(n.viewer.type in SMK.TYPE.Viewer))throw new Error('viewer type "'+n.viewer.type+'" not defined');return n.$viewer=new SMK.TYPE.Viewer[n.viewer.type],SMK.UTIL.resolved().then(function(){return n.$viewer.initialize(n)}).then(function(){return n.$viewer.initializeLayers(n)})}).then(function(){var e=Object.values(n.$tool).sort(function(e,t){return e.order-t.order});return SMK.UTIL.waitAll(e.map(function(t){return SMK.UTIL.resolved().then(function(){return t.initialize(n)}).catch(function(e){console.error('tool "'+t.id+'" failed to initialize:',e)}).then(function(e){console.log('tool "'+t.id+'" initialized')})}))}).then(function(){n.$viewer.isDisplayContext("layers")||n.$viewer.setDisplayContextItems("layers",n.$viewer.defaultLayerDisplay);return SMK.UTIL.resolved().then(function(){return n.$viewer.updateLayersVisible()}).then(function(){return n.$viewer.waitFinishedLoading()}).then(function(){return n.viewer.activeTool&&n.withTool(n.viewer.activeTool,function(e){console.log("activating tool:",e.id),e.active=!0}),n})}).finally(function(){return new Promise(function(e){t.hide().removeClass("smk-hidden").fadeIn(1e3,e),i.fadeOut(1e3)}).then(function(){i.remove()})})},e.prototype.destroy=function(){this.$viewer&&this.$viewer.destroy(),delete SMK.MAP[this.$option.id]},e.prototype.addToContainer=function(e,t,i){return $(e)[i?"prependTo":"appendTo"](this.$container).attr(t||{}).get(0)},e.prototype.addToOverlay=function(e){return this.$overlay||(this.$overlay=this.addToContainer('<div class="smk-overlay">')),$(e).appendTo(this.$overlay).get(0)},e.prototype.addToStatus=function(e){return this.$status||(this.$status=this.addToOverlay('<div class="smk-status smk-elastic-container">')),$(e).appendTo(this.$status).get(0)},e.prototype.getSidepanel=function(){var e=this;return this.$sidepanel||(this.$sidepanel=new SMK.TYPE.Sidepanel(this),this.$sidepanel.changedVisible(function(){$(e.$container).toggleClass("smk-sidepanel-active",e.$sidepanel.isPanelVisible())}),this.$sidepanel.changedSize(function(){})),this.$sidepanel},e.prototype.getSidepanelPosition=function(){if(!this.$sidepanel||!this.$sidepanel.isPanelVisible())return{left:0,width:0,top:0,height:0};var e=this.$overlay,t=this.$sidepanel.vm.$el;return{left:e.offsetLeft+t.offsetLeft,top:e.offsetTop+t.offsetTop,width:t.clientWidth,height:t.clientHeight}},e.prototype.setEditFocus=function(e){$(this.$container).toggleClass("smk-edit-focus",e)},e.prototype.debugMessage=function(t){this.debugVm||(this.debugVm=new Vue({el:this.addToOverlay('<div class="smk-debug"><div v-for="k in keys">{{ k }} : {{ status[ k ] }}</div></div>'),data:{status:{}},computed:{keys:{get:function(){return Object.keys(this.status)}}}})),t.ts=(new Date).toLocaleTimeString();var i=this.debugVm.$data;Object.keys(t||{}).forEach(function(e){Vue.set(i.status,e,t[e])})},e.prototype.getVar=function(e){return $(this.$container).css("--"+e)},e.prototype.setVar=function(e,t){return $(this.$container).css("--"+e,t)},e.prototype.emit=function(e,t,i,o){return this.$dispatcher.$emit(e+"."+t,i,o),this},e.prototype.on=function(t,i){var o=this;return Object.keys(i).forEach(function(e){o.$dispatcher.$on(t+"."+e,i[e])}),this},e.prototype.detectDevice=function(){var e=this.viewer.device;"auto"==e&&(e=$(window).width()>=this.viewer.deviceAutoBreakpoint?"desktop":"mobile");if(e!=this.$device)return this.$device&&$(this.$container).removeClass("smk-device-"+this.$device),this.$device=e,$(this.$container).addClass("smk-device-"+this.$device),this.$device},e.prototype.showFeature=function(e,t,i){this.$viewer.temporaryFeature&&this.$viewer.temporaryFeature(e,t,i)},e.prototype.getToolGroup=function(e){return this.$group[e]},e.prototype.setToolGroup=function(e,t){this.$group[e]=t},e.prototype.getToolRootIds=function(){return Object.keys(this.$group)},e.prototype.getConfig=function(){var i=this,e=["name","viewer","tools"].reduce(function(e,t){return e[t]=JSON.parse(JSON.stringify(i[t])),e},{});return e.layers=this.$viewer.getLayerConfig(),e.viewer.location=SMK.UTIL.projection("center","zoom","extent")(this.$viewer.getView()),e.viewer.location.center=[e.viewer.location.center.longitude,e.viewer.location.center.latitude],e.viewer.displayContext=this.$viewer.getDisplayContextConfig(),e.layers.forEach(function(e){var t=i.$viewer.getDisplayContextItem(e.id);t?(e.isVisible=i.$viewer.isDisplayContextItemVisible(e.id),e.class=t.class):e.isVisible=!1}),e},e.prototype.updateMapSize=function(){this.$viewer.mapResized&&this.$viewer.mapResized()},e.prototype.getStatusMessage=function(){return this.$statusMessage||(this.$statusMessage=new SMK.TYPE.StatusMessage(this)),this.$statusMessage},e.prototype.getToolById=function(e){if(e)return this.$tool[e]},e.prototype.getToolsByType=function(e){return e&&this.$toolType[e]||[]},e.prototype.hasToolType=function(e){return!!e&&(!!this.$toolType[e]&&0<this.$toolType[e].length)},e.prototype.getToolTypesAvailable=function(e){var i=this;return e&&Array.isArray(e)&&0!=e.length||(e=Object.keys(this.$toolType)),e.reduce(function(e,t){return e[t]=i.hasToolType(t),e},{})},e.prototype.forEachTool=function(e){return Object.values(this.$tool).forEach(e)},e.prototype.withTool=function(e,t,i){if(!e)throw Error("no tool id or type");var o=this.getToolById(e);if(o)t.call(i||o,o);else{var n=this.getToolsByType(e);if(0==n.length)throw Error("tool type not defined");if(1!=n.length){var r=n.reduce(function(e,t){return void 0===e?t.rootId:e==t.rootId?e:null},void 0);if(!r)throw Error("tool type is ambiguous");o=this.getToolById(r),t.call(i||o,o)}else t.call(i||n[0],n[0])}}});} }
    );
    include.tag( "status-message",
        { loader: "group", tags: [
            { loader: "style", url: "smk/status-message/status-message.css", load: "/* [smk/status-message/status-message.css] */\n.smk-overlay .smk-status-message-container{position:absolute;top:0;left:0;right:0;z-index:99999;display:flex;justify-content:center}.smk-status-message-container .smk-status-message{display:flex;align-items:center;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);padding:5px}.smk-status-message .smk-spinner{margin-right:5px}.smk-status-message .smk-message{text-align:center;font-size:12px}.smk-status-message.smk-error .smk-message{color:red}.smk-status-message.smk-progress .smk-message{color:#00f}.smk-status-message.smk-warning .smk-message{color:#ff8c00}" },
            { loader: "template", url: "smk/status-message/status-message.html", load:"<div class=\"smk-status-message-container\">\n    <transition name=\"status-message\">\n        <div class=\"smk-status-message\"\n            v-bind:class=\"'smk-' + ( status || 'summary' )\" \n            v-bind:class=\"{ 'smk-busy': busy }\"\n            v-show=\"message\"\n        >\n            <busy-spinner v-bind:size=\"16\" v-bind:busy=\"busy\"></busy-spinner>\n\n            <span class=\"smk-message\" \n                v-html=\"message\"\n            ></span>\n        </div>\n    </transition>\n</div>\n" },
            { loader: "script", url: "smk/status-message/status-message.js", load: function () { console.debug( "[smk/status-message/status-message.js]" ); include.module("status-message",["vue","status-message.status-message-html"],function(t){"use strict";var s=SMK.TYPE.Event.define([]);function e(e){s.prototype.constructor.call(this),this.model={status:null,message:null,busy:!1},this.vm=new Vue({el:e.addToOverlay(t["status-message.status-message-html"]),data:this.model}),this._promise=SMK.UTIL.resolved()}return e.prototype.clear=function(){this._whenCleared&&this._whenCleared()},e.prototype.cancel=function(e){this._whenCancelled&&this._whenCancelled(e)},e.prototype.show=function(e,t,l,n){var a=this;return e?(this.cancel("replaced"),this._promise.finally(function(){var s;return a.model.status=t,a.model.message=e,a.model.busy=n,a._promise=SMK.UTIL.makePromise(function(e,t){s=a._whenCleared=e,a._whenCancelled=t}).catch(function(e){}),null!==l&&SMK.UTIL.makeDelayedCall(function(){s()},{delay:l||2e3})(),a._promise.finally(function(){a.model.status=null,a.model.message=null,a.model.bust=null,a._whenCleared=null,a._whenCancelled=null})})):this.clear()},$.extend(e.prototype,s.prototype),SMK.TYPE.StatusMessage=e});} }
        ] }
    );
    include.tag( "terraformer",
        { loader: "sequence", tags: [
            { loader: "script", url: "lib/terraformer/terraformer-1.0.7.js", load: function () { console.debug( "[lib/terraformer/terraformer-1.0.7.js]" ); !function(t,e){"object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=e()),"object"==typeof window&&(t.Terraformer=e())}(this,function(){var t={},o=6378137,e=57.29577951308232,r=.017453292519943,i={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}};function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function a(t){if(t.type)switch(t.type){case"Point":return[t.coordinates[0],t.coordinates[1],t.coordinates[0],t.coordinates[1]];case"MultiPoint":case"LineString":return u(t.coordinates);case"MultiLineString":case"Polygon":return c(t.coordinates);case"MultiPolygon":return function(t){for(var e=null,r=null,o=null,n=null,i=0;i<t.length;i++)for(var s=t[i],a=0;a<s.length;a++)for(var c=s[a],u=0;u<c.length;u++){var l=c[u],h=l[0],p=l[1];null===e?e=h:h<e&&(e=h),null===r?r=h:r<h&&(r=h),null===o?o=p:p<o&&(o=p),null===n?n=p:n<p&&(n=p)}return[e,o,r,n]}(t.coordinates);case"Feature":return t.geometry?a(t.geometry):null;case"FeatureCollection":return function(t){for(var e,r=[],o=t.features.length-1;0<=o;o--)e=a(t.features[o].geometry),r.push([e[0],e[1]]),r.push([e[2],e[3]]);return u(r)}(t);case"GeometryCollection":return function(t){for(var e,r=[],o=t.geometries.length-1;0<=o;o--)e=a(t.geometries[o]),r.push([e[0],e[1]]),r.push([e[2],e[3]]);return u(r)}(t);default:throw new Error("Unknown type: "+t.type)}return null}function c(t){for(var e=null,r=null,o=null,n=null,i=0;i<t.length;i++)for(var s=t[i],a=0;a<s.length;a++){var c=s[a],u=c[0],l=c[1];null===e?e=u:u<e&&(e=u),null===r?r=u:r<u&&(r=u),null===o?o=l:l<o&&(o=l),null===n?n=l:n<l&&(n=l)}return[e,o,r,n]}function u(t){for(var e=null,r=null,o=null,n=null,i=0;i<t.length;i++){var s=t[i],a=s[0],c=s[1];null===e?e=a:a<e&&(e=a),null===r?r=a:r<a&&(r=a),null===o?o=c:c<o&&(o=c),null===n?n=c:n<c&&(n=c)}return[e,o,r,n]}function l(t){var e=a(t);return{x:e[0],y:e[1],w:Math.abs(e[0]-e[2]),h:Math.abs(e[1]-e[3])}}function h(t){return t*e}function p(t){return t*r}function f(t){var e=t[0],r=t[1];return[h(e/o)-360*Math.floor((h(e/o)+180)/360),h(Math.PI/2-2*Math.atan(Math.exp(-1*r/o)))]}function y(t){var e=t[0],r=Math.max(Math.min(t[1],89.99999),-89.99999);return[p(e)*o,o/2*Math.log((1+Math.sin(p(r)))/(1-Math.sin(p(r))))]}function d(t,e,r){if("Point"===t.type)t.coordinates=e(t.coordinates);else if("Feature"===t.type)t.geometry=d(t.geometry,e,!0);else if("FeatureCollection"===t.type)for(var o=0;o<t.features.length;o++)t.features[o]=d(t.features[o],e,!0);else if("GeometryCollection"===t.type)for(var n=0;n<t.geometries.length;n++)t.geometries[n]=d(t.geometries[n],e,!0);else t.coordinates=function t(e,r){for(var o=0;o<e.length;o++)"number"==typeof e[o][0]&&(e[o]=r(e[o])),"object"==typeof e[o]&&(e[o]=t(e[o],r));return e}(t.coordinates,e);return r||e===y&&(t.crs=i),e===f&&delete t.crs,t}function g(t){return d(t,y)}function v(t){return d(t,f)}function w(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0}function m(t,e){var r=e[0]-t[0],o=e[1]-t[1];return r*r+o*o}function P(t,e){var r,o,n,i,s,a=e;for(var c in t){var u=(r=e,o=a,n=t[c],s=i=void 0,(i=(o[0]-r[0])*(n[1]-r[1])-(n[0]-r[0])*(o[1]-r[1]))<(s=0)?-1:s<i?1:0);(-1===u||0===u&&m(e,t[c])>m(e,a))&&(a=t[c])}return a}function M(t){if(0===t.length)return[];if(1===t.length)return t;for(var e=[t.sort(w)[0]],r=0;r<e.length;r++){var o=P(t,e[r]);o!==e[0]&&e.push(o)}return e}function T(t,e){for(var r=!1,o=-1,n=t.length,i=n-1;++o<n;i=o)(t[o][1]<=e[1]&&e[1]<t[i][1]||t[i][1]<=e[1]&&e[1]<t[o][1])&&e[0]<(t[i][0]-t[o][0])*(e[1]-t[o][1])/(t[i][1]-t[o][1])+t[o][0]&&(r=!r);return r}function S(t,e){if(t&&t.length){if(1===t.length)return T(t[0],e);if(T(t[0],e)){for(var r=1;r<t.length;r++)if(T(t[r],e))return!1;return!0}return!1}return!1}function C(t,e,r,o){var n=(o[0]-r[0])*(t[1]-r[1])-(o[1]-r[1])*(t[0]-r[0]),i=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),s=(o[1]-r[1])*(e[0]-t[0])-(o[0]-r[0])*(e[1]-t[1]);if(0!==s){var a=n/s,c=i/s;if(0<=a&&a<=1&&0<=c&&c<=1)return!0}return!1}function x(t){return!isNaN(parseFloat(t))&&isFinite(t)}function F(t,e){if(x(t[0][0])){if(x(e[0][0])){for(var r=0;r<t.length-1;r++)for(var o=0;o<e.length-1;o++)if(C(t[r],t[r+1],e[o],e[o+1]))return!0}else for(var n=0;n<e.length;n++)if(F(t,e[n]))return!0}else for(var i=0;i<t.length;i++)if(F(t[i],e))return!0;return!1}function L(t){for(var e=[],r=0;r<t.length;r++){var o=t[r].slice();!1===b(o[0],o[o.length-1])&&o.push(o[0]),e.push(o)}return e}function b(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function G(t,e){if(t.length!==e.length)return!1;for(var r=t.slice().sort(w),o=e.slice().sort(w),n=0;n<r.length;n++){if(r[n].length!==o[n].length)return!1;for(var i=0;i<r.length;i++)if(r[n][i]!==o[n][i])return!1}return!0}var E=["length"];function k(t){if(t)switch(t.type){case"Point":return new O(t);case"MultiPoint":return new V(t);case"LineString":return new H(t);case"MultiLineString":return new N(t);case"Polygon":return new A(t);case"MultiPolygon":return new I(t);case"Feature":return new J(t);case"FeatureCollection":return new R(t);case"GeometryCollection":return new U(t);default:throw new Error("Unknown type: "+t.type)}}function O(t){var e=Array.prototype.slice.call(arguments);if(t&&"Point"===t.type&&t.coordinates)s(this,t);else if(t&&n(t))this.coordinates=t;else{if(!(2<=e.length))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=e}this.type="Point"}function V(t){if(t&&"MultiPoint"===t.type&&t.coordinates)s(this,t);else{if(!n(t))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=t}this.type="MultiPoint"}function H(t){if(t&&"LineString"===t.type&&t.coordinates)s(this,t);else{if(!n(t))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=t}this.type="LineString"}function N(t){if(t&&"MultiLineString"===t.type&&t.coordinates)s(this,t);else{if(!n(t))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=t}this.type="MultiLineString"}function A(t){if(t&&"Polygon"===t.type&&t.coordinates)s(this,t);else{if(!n(t))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=t}this.type="Polygon"}function I(t){if(t&&"MultiPolygon"===t.type&&t.coordinates)s(this,t);else{if(!n(t))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=t}this.type="MultiPolygon"}function J(t){if(t&&"Feature"===t.type)s(this,t);else{if(!(t&&t.type&&t.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=t}this.type="Feature"}function R(t){if(t&&"FeatureCollection"===t.type&&t.features)s(this,t);else{if(!n(t))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=t}this.type="FeatureCollection"}function U(t){if(t&&"GeometryCollection"===t.type&&t.geometries)s(this,t);else if(n(t))this.geometries=t;else{if(!t.coordinates||!t.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[t]}this.type="GeometryCollection"}function q(t,e,r){for(var o=y(t),n=r||64,i={type:"Polygon",coordinates:[[]]},s=1;s<=n;s++){var a=s*(360/n)*Math.PI/180;i.coordinates[0].push([o[0]+e*Math.cos(a),o[1]+e*Math.sin(a)])}return i.coordinates=L(i.coordinates),v(i)}function B(t,e,r){var o=r||64,n=e||250;if(!t||t.length<2||!n||!o)throw new Error("Terraformer: missing parameter for Terraformer.Circle");s(this,new J({type:"Feature",geometry:q(t,n,o),properties:{radius:n,center:t,steps:o}}))}return k.prototype.toMercator=function(){return g(this)},k.prototype.toGeographic=function(){return v(this)},k.prototype.envelope=function(){return l(this)},k.prototype.bbox=function(){return a(this)},k.prototype.convexHull=function(){var t,e,r=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&3<=this.coordinates.length))return null;r=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&0<this.coordinates.length))return null;for(t=0;t<this.coordinates.length;t++)r=r.concat(this.coordinates[t]);if(r.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&0<this.coordinates.length))return null;for(t=0;t<this.coordinates.length;t++)for(e=0;e<this.coordinates[t].length;e++)r=r.concat(this.coordinates[t][e]);if(r.length<3)return null}else if("Feature"===this.type){return new k(this.geometry).convexHull()}return new A({type:"Polygon",coordinates:L([M(r)])})},k.prototype.toJSON=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&-1===E.indexOf(e)&&(t[e]=this[e]);return t.bbox=a(this),t},k.prototype.contains=function(t){return new k(t).within(this)},k.prototype.within=function(t){var e,r;if("Feature"===t.type&&(t=t.geometry),"Point"===t.type&&"Point"===this.type)return b(this.coordinates,t.coordinates);if("MultiLineString"===t.type&&"Point"===this.type)for(e=0;e<t.coordinates.length;e++){var o={type:"LineString",coordinates:t.coordinates[e]};if(this.within(o))return!0}if(("LineString"===t.type||"MultiPoint"===t.type)&&"Point"===this.type)for(e=0;e<t.coordinates.length;e++){if(this.coordinates.length!==t.coordinates[e].length)return!1;if(b(this.coordinates,t.coordinates[e]))return!0}if("Polygon"===t.type){if("Polygon"===this.type){if(t.coordinates.length===this.coordinates.length)for(e=0;e<this.coordinates.length;e++)if(G(this.coordinates[e],t.coordinates[e]))return!0;return!(!this.coordinates.length||!S(t.coordinates,this.coordinates[0][0]))&&!F(L(this.coordinates),L(t.coordinates))}if("Point"===this.type)return S(t.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(e=0;e<this.coordinates.length;e++)if(!1===S(t.coordinates,this.coordinates[e]))return!1;return!0}if("MultiLineString"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new H(this.coordinates[e]).within(t))return r++,!1}return!0}if("MultiPolygon"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new k({type:"Polygon",coordinates:this.coordinates[e]}).within(t))return!1}return!0}}if("MultiPolygon"===t.type){if("Point"===this.type){if(t.coordinates.length)for(e=0;e<t.coordinates.length;e++)if(S(t.coordinates[e],this.coordinates)&&!1===F([this.coordinates],t.coordinates))return!0;return!1}if("Polygon"===this.type){for(e=0;e<this.coordinates.length;e++)if(t.coordinates[e].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(G(this.coordinates[j],t.coordinates[e][j]))return!0;if(!1===F(this.coordinates,t.coordinates)&&t.coordinates.length){for(e=0;e<t.coordinates.length;e++)r=!1!==S(t.coordinates[e],this.coordinates[0][0]);return r}}else if("LineString"===this.type||"MultiPoint"===this.type)for(e=0;e<t.coordinates.length;e++){var n={type:"Polygon",coordinates:t.coordinates[e]};return!!this.within(n)}else{if("MultiLineString"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new H(this.coordinates[e]).within(t))return!1}return!0}if("MultiPolygon"===this.type){for(e=0;e<t.coordinates.length;e++){var i={type:"Polygon",coordinates:t.coordinates[e]};if(!1===this.within(i))return!1}return!0}}}return!1},k.prototype.intersects=function(t){"Feature"===t.type&&(t=t.geometry);var e=new k(t);return!(!this.within(t)&&!e.within(this))||("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==t.type&&"MultiPoint"!==t.type?F(this.coordinates,t.coordinates):"Feature"===this.type?new k(this.geometry).intersects(t):(function(){var t=Array.prototype.slice.apply(arguments);void 0!==typeof console&&console.warn&&console.warn.apply(console,t)}("Type "+this.type+" to "+t.type+" intersection is not supported by intersects"),!1))},(O.prototype=new k).constructor=O,((V.prototype=new k).constructor=V).prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates]);return this},V.prototype.addPoint=function(t){return this.coordinates.push(t),this},V.prototype.insertPoint=function(t,e){return this.coordinates.splice(e,0,t),this},V.prototype.removePoint=function(t){return"number"==typeof t?this.coordinates.splice(t,1):this.coordinates.splice(this.coordinates.indexOf(t),1),this},V.prototype.get=function(t){return new O(this.coordinates[t])},((H.prototype=new k).constructor=H).prototype.addVertex=function(t){return this.coordinates.push(t),this},H.prototype.insertVertex=function(t,e){return this.coordinates.splice(e,0,t),this},H.prototype.removeVertex=function(t){return this.coordinates.splice(t,1),this},((N.prototype=new k).constructor=N).prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},N.prototype.get=function(t){return new H(this.coordinates[t])},((A.prototype=new k).constructor=A).prototype.addVertex=function(t){return this.insertVertex(t,this.coordinates[0].length-1),this},A.prototype.insertVertex=function(t,e){return this.coordinates[0].splice(e,0,t),this},A.prototype.removeVertex=function(t){return this.coordinates[0].splice(t,1),this},A.prototype.close=function(){this.coordinates=L(this.coordinates)},A.prototype.hasHoles=function(){return 1<this.coordinates.length},A.prototype.holes=function(){if(holes=[],this.hasHoles())for(var t=1;t<this.coordinates.length;t++)holes.push(new A([this.coordinates[t]]));return holes},((I.prototype=new k).constructor=I).prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},I.prototype.get=function(t){return new A(this.coordinates[t])},I.prototype.close=function(){var e=[];return this.forEach(function(t){e.push(L(t))}),this.coordinates=e,this},(J.prototype=new k).constructor=J,((R.prototype=new k).constructor=R).prototype.forEach=function(t){for(var e=0;e<this.features.length;e++)t.apply(this,[this.features[e],e,this.features])},R.prototype.get=function(e){var r;return this.forEach(function(t){t.id===e&&(r=t)}),new J(r)},((U.prototype=new k).constructor=U).prototype.forEach=function(t){for(var e=0;e<this.geometries.length;e++)t.apply(this,[this.geometries[e],e,this.geometries])},U.prototype.get=function(t){return new k(this.geometries[t])},((B.prototype=new k).constructor=B).prototype.recalculate=function(){return this.geometry=q(this.properties.center,this.properties.radius,this.properties.steps),this},B.prototype.center=function(t){return t&&(this.properties.center=t,this.recalculate()),this.properties.center},B.prototype.radius=function(t){return t&&(this.properties.radius=t,this.recalculate()),this.properties.radius},B.prototype.steps=function(t){return t&&(this.properties.steps=t,this.recalculate()),this.properties.steps},B.prototype.toJSON=function(){return k.prototype.toJSON.call(this)},t.Primitive=k,t.Point=O,t.MultiPoint=V,t.LineString=H,t.MultiLineString=N,t.Polygon=A,t.MultiPolygon=I,t.Feature=J,t.FeatureCollection=R,t.GeometryCollection=U,t.Circle=B,t.toMercator=g,t.toGeographic=v,t.Tools={},t.Tools.positionToMercator=y,t.Tools.positionToGeographic=f,t.Tools.applyConverter=d,t.Tools.toMercator=g,t.Tools.toGeographic=v,t.Tools.createCircle=q,t.Tools.calculateBounds=a,t.Tools.calculateEnvelope=l,t.Tools.coordinatesContainPoint=T,t.Tools.polygonContainsPoint=S,t.Tools.arraysIntersectArrays=F,t.Tools.coordinatesContainPoint=T,t.Tools.coordinatesEqual=G,t.Tools.convexHull=M,t.Tools.isConvex=function(t){for(var e,r=0;r<t.length-3;r++){var o=t[r],n=t[r+1],i=t[r+2],s=[n[0]-o[0],n[1]-o[1]],a=i[0]*s[1]-i[1]*s[0]+s[0]*o[1]-s[1]*o[0];if(0===r)e=a<0;else if(e&&0<a||!e&&a<0)return!1}return!0},t.MercatorCRS=i,t.GeographicCRS={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},t});} },
            { loader: "script", url: "lib/terraformer/terraformer-arcgis-parser-1.0.5.js", load: function () { console.debug( "[lib/terraformer/terraformer-arcgis-parser-1.0.5.js]" ); !function(e,r){if("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=r(require("terraformer"))),"object"==typeof e.navigator){if(!e.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");e.Terraformer.ArcGIS=r(e.Terraformer)}}(this,function(y){var e={};function i(e){var r,t,o,i,s=0,n=0,a=[];o=e.match(/((\+|\-)[^\+\-]+)/g),i=parseInt(o[0],32);for(var c=1;c<o.length;c+=2)s=r=parseInt(o[c],32)+s,n=t=parseInt(o[c+1],32)+n,a.push([r/i,t/i]);return a}function d(e){return function(e,r){for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}(e[0],e[e.length-1])||e.push(e[0]),e}function n(e){var r={};for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function b(e){for(var r,t=0,o=0,i=e.length,s=e[o];o<i-1;o++)t+=((r=e[o+1])[0]-s[0])*(r[1]+s[1]),s=r;return 0<=t}function a(e){var r=[],t=e.slice(0),o=d(t.shift().slice(0));if(4<=o.length){b(o)||o.reverse(),r.push(o);for(var i=0;i<t.length;i++){var s=d(t[i].slice(0));4<=s.length&&(b(s)&&s.reverse(),r.push(s))}}return r}function s(e,r){var t={};(r=r||{}).idAttribute=r.idAttribute||void 0,"number"==typeof e.x&&"number"==typeof e.y&&(t.type="Point",t.coordinates=[e.x,e.y],(e.z||e.m)&&t.coordinates.push(e.z),e.m&&t.coordinates.push(e.m)),e.points&&(t.type="MultiPoint",t.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(t.type="LineString",t.coordinates=e.paths[0].slice(0)):(t.type="MultiLineString",t.coordinates=e.paths.slice(0))),e.rings&&(t=function(e){for(var r,t,o,i=[],s=[],n=0;n<e.length;n++){var a=d(e[n].slice(0));if(!(a.length<4))if(b(a)){var c=[a];i.push(c)}else s.push(a)}for(var u,p,l,f,h=[];s.length;){o=s.pop();var g=!1;for(r=i.length-1;0<=r;r--)if(t=i[r][0],u=t,p=o,l=y.Tools.arraysIntersectArrays(u,p),f=y.Tools.coordinatesContainPoint(u,p[0]),!l&&f){i[r].push(o),g=!0;break}g||h.push(o)}for(;h.length;){o=h.pop();var m=!1;for(r=i.length-1;0<=r;r--)if(t=i[r][0],y.Tools.arraysIntersectArrays(t,o)){i[r].push(o),m=!0;break}m||i.push([o.reverse()])}return 1===i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}(e.rings.slice(0))),(e.compressedGeometry||e.geometry||e.attributes)&&(t.type="Feature",e.compressedGeometry&&(e.geometry={paths:[i(e.compressedGeometry)]}),t.geometry=e.geometry?s(e.geometry):null,t.properties=e.attributes?n(e.attributes):null,e.attributes&&(t.id=e.attributes[r.idAttribute]||e.attributes.OBJECTID||e.attributes.FID));var o=e.geometry?e.geometry.spatialReference:e.spatialReference;return o&&102100===o.wkid&&(t=y.toGeographic(t)),new y.Primitive(t)}function c(e,r){var t,o=(r=r||{}).idAttribute||"OBJECTID";t=r.sr?{wkid:r.sr}:e&&e.crs===y.MercatorCRS?{wkid:102100}:{wkid:4326};var i,s={};switch(e.type){case"Point":s.x=e.coordinates[0],s.y=e.coordinates[1],e.coordinates[2]&&(s.z=e.coordinates[2]),e.coordinates[3]&&(s.m=e.coordinates[3]),s.spatialReference=t;break;case"MultiPoint":s.points=e.coordinates.slice(0),s.spatialReference=t;break;case"LineString":s.paths=[e.coordinates.slice(0)],s.spatialReference=t;break;case"MultiLineString":s.paths=e.coordinates.slice(0),s.spatialReference=t;break;case"Polygon":s.rings=a(e.coordinates.slice(0)),s.spatialReference=t;break;case"MultiPolygon":s.rings=function(e){for(var r=[],t=0;t<e.length;t++)for(var o=a(e[t]),i=o.length-1;0<=i;i--){var s=o[i].slice(0);r.push(s)}return r}(e.coordinates.slice(0)),s.spatialReference=t;break;case"Feature":e.geometry&&(s.geometry=c(e.geometry,r)),s.attributes=e.properties?n(e.properties):{},e.id&&(s.attributes[o]=e.id);break;case"FeatureCollection":for(s=[],i=0;i<e.features.length;i++)s.push(c(e.features[i],r));break;case"GeometryCollection":for(s=[],i=0;i<e.geometries.length;i++)s.push(c(e.geometries[i],r))}return s}return e.parse=s,e.convert=c,e.toGeoJSON=s,e.fromGeoJSON=c,e.parseCompressedGeometry=function(e){return new y.LineString(i(e))},e});} }
        ] }
    );
    include.tag( "theme-alpha",
        { loader: "group", tags: [
            { loader: "style", url: "theme/alpha/alpha.css", load: "/* [theme/alpha/alpha.css] */\n.smk-theme-alpha .smk-toolbar{background-color:transparent;box-shadow:none}.smk-theme-alpha .smk-tool{border:1px solid transparent;box-shadow:0 1px 5px rgba(0,0,0,.65);background-color:#fff}.smk-theme-alpha .smk-tool.smk-tool-active{background-color:#ff0}.smk-theme-alpha .smk-sidepanel{top:30px}.smk-theme-alpha .smk-elastic-panel{display:flex;flex-direction:column;background-color:transparent;box-shadow:none}.smk-theme-alpha .smk-sidepanel .smk-panel .smk-header{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:1;margin-bottom:0}.smk-theme-alpha .smk-sidepanel .smk-panel .smk-body{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:2;margin-left:1px;margin-right:1px;padding:5px}.smk-theme-alpha .smk-sidepanel .smk-panel.smk-menu-panel{border:0;background-color:transparent}.smk-theme-alpha .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{background-color:transparent;box-shadow:none}.smk-theme-alpha .smk-sidepanel .smk-panel.smk-menu-panel>.smk-body{background-color:transparent;box-shadow:none;padding-top:1px;padding-bottom:2px}" }
        ] }
    );
    include.tag( "theme-base",
        { loader: "group", tags: [
            { loader: "style", url: "theme/_base/command.css", load: "/* [theme/_base/command.css] */\n.smk-map-frame .smk-command{cursor:pointer;color:#00f;padding:2px;border:1px solid transparent;border-radius:5px;font-size:12px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-map-frame .smk-command.smk-icon{color:#000;padding:0;width:26px;height:26px;font-size:24px}.smk-map-frame .smk-command.smk-disabled{color:#d3d3d3;font-style:italic}.smk-map-frame .smk-command.smk-icon.smk-disabled{font-style:normal}.smk-map-frame .smk-command:hover{border:1px solid #000}.smk-map-frame .smk-command.smk-disabled:hover{border:1px solid transparent}.smk-map-frame select.smk-command{background-color:#fff}.smk-map-frame select.smk-command:focus{outline:0}.smk-map-frame .smk-commands{margin-bottom:1px}.smk-map-frame .smk-active,.smk-tool-active{background-color:#d2d9e6}.smk-map-frame .smk-item{border-radius:5px;margin-bottom:1px;cursor:default}.smk-map-frame .smk-item:hover{background-color:#d2d9e6}.smk-map-frame .smk-item.smk-disabled:hover{background-color:transparent}.smk-map-frame .smk-command-row{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;align-content:flex-end}.smk-map-frame .smk-command-row .smk-command-spacer{flex-grow:1}" },
            { loader: "style", url: "theme/_base/elastic.css", load: "/* [theme/_base/elastic.css] */\n.smk-elastic-container{position:absolute}.smk-elastic-container .smk-elastic-frame{display:flex;flex-direction:column;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;max-height:100%;min-height:0}.smk-elastic-container .smk-elastic-frame .smk-elastic-content{display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:100%;min-height:0}.smk-elastic-container .smk-elastic-frame .smk-elastic-content .smk-elastic-body{overflow-x:hidden;overflow-y:auto;height:100%}" },
            { loader: "style", url: "theme/_base/map-frame.css", load: "/* [theme/_base/map-frame.css] */\n.smk-map-frame{font-family:Helvetica,Arial,sans-serif;position:relative}.smk-map-frame .smk-hidden,.smk-map-frame.smk-hidden{visibility:hidden}.smk-map-frame .smk-viewer{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1}.smk-map-frame .smk-overlay{position:absolute;top:var(--overlay-padding);left:var(--overlay-padding);right:var(--overlay-padding);bottom:var(--overlay-padding);z-index:2;border-radius:5px;pointer-events:none}.smk-map-frame .smk-overlay .smk-status{position:absolute;right:0;bottom:10px;top:0;display:flex;flex-direction:column-reverse;align-items:flex-end}.smk-map-frame .smk-coordinate{color:#000;font-size:12px;background-color:transparent;cursor:default}.smk-map-frame .smk-coordinate .smk-ordinate label{display:inline-block;font-size:10px;margin-right:10px;text-align:left}.smk-map-frame .smk-coordinate .smk-ordinate div{font-size:14px}.smk-map-frame .smk-address .smk-street{font-size:15px}.smk-map-frame .smk-address .smk-locality{font-size:12px}.smk-map-frame .smk-address .smk-precision-locality .smk-locality,.smk-map-frame .smk-address.smk-precision-locality .smk-locality{font-size:15px}.smk-map-frame .smk-address .smk-locality-type{font-size:10px}.smk-map-frame .smk-address .smk-precision-site .smk-site,.smk-map-frame .smk-address.smk-precision-site .smk-site{font-size:15px}.smk-map-frame .smk-address .smk-precision-site .smk-locality,.smk-map-frame .smk-address .smk-precision-site .smk-street,.smk-map-frame .smk-address.smk-precision-site .smk-locality,.smk-map-frame .smk-address.smk-precision-site .smk-street{display:inline-block;font-size:12px}.smk-map-frame .smk-address .smk-precision-site .smk-street::after,.smk-map-frame .smk-address.smk-precision-site .smk-street::after{content:\", \"}.smk-map-frame .smk-overlay .smk-debug{display:none;position:absolute;bottom:50px;left:0;background-color:#fff;border:1px solid #000;font-size:10px;padding:2px;margin:1px;white-space:pre;z-index:99999}" },
            { loader: "style", url: "theme/_base/resets.css", load: "/* [theme/_base/resets.css] */\n.smk-map-frame select{background:#fff;border:1px solid #eee;border-radius:3px;padding:3px 22px 3px 3px;background-image:url(\"data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M7.406 7.828l4.594 4.594 4.594-4.594 1.406 1.406-6 6-6-6z'%3E%3C/path%3E%3C/svg%3E\");background-position:calc(100% - 3px) 50%;background-repeat:no-repeat;background-size:16px;-webkit-appearance:none;-moz-appearance:none}.smk-map-frame select::-ms-expand{display:none}" },
            { loader: "style", url: "theme/_base/variables.css", load: "/* [theme/_base/variables.css] */\n.smk-map-frame{--overlay-padding:7px;--panel-width:300px;--panel-bottom:0;--toolbar-height:30px}@media screen and (orientation:portrait){.smk-map-frame.smk-device-mobile{--panel-bottom:200px}}" },
            "material-icons"
        ] }
    );
    include.tag( "theme-beta",
        { loader: "group", tags: [
            { loader: "style", url: "theme/beta/beta.css", load: "/* [theme/beta/beta.css] */\n.smk-theme-beta .smk-command{display:inline-block;color:#000;border:1px outset gray;background-color:#d3d3d3;border-radius:2px;font-size:13px;padding-right:3px;margin-bottom:3px}.smk-theme-beta select.smk-command{color:#000;border:1px outset gray;background-color:#d3d3d3;border-radius:2px;font-size:13px;padding-right:3px;margin-bottom:3px}.smk-theme-beta .smk-command:hover{outline:1px solid #000}.smk-theme-beta .smk-command.smk-disabled:hover{outline:0}.smk-theme-beta .smk-command.smk-disabled{color:gray;font-style:italic;border:1px outset transparent}.smk-theme-beta .leaflet-popup-content{max-width:500px;width:500px;min-width:250px}.smk-theme-beta .smk-tool{color:#000;border:1px outset gray;background-color:#d3d3d3;border-radius:2px}.smk-theme-beta .smk-tool.smk-tool-active{border:1px inset gray;background-color:#a9a9a9}.smk-theme-beta .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{box-shadow:none}.smk-theme-beta .smk-directions-panel .smk-command-col{display:inline-flex;flex-direction:column;align-items:flex-start}.smk-theme-beta .smk-directions-panel .smk-command-col label{padding-right:3px;margin-bottom:3px}.smk-theme-beta .smk-directions-panel .smk-command-col label input[type=checkbox]{height:13px}.smk-theme-beta .smk-directions-panel .smk-waypoint{margin:0 -1px}.smk-theme-beta .smk-directions-panel .smk-waypoint div,.smk-theme-beta .smk-directions-panel .smk-waypoint i{margin:0 1px}.smk-theme-beta .smk-feature-list-panel .smk-layer .smk-feature{margin:0 -1px;justify-content:flex-start}.smk-theme-beta .smk-feature-list-panel .smk-layer .smk-feature i,.smk-theme-beta .smk-feature-list-panel .smk-layer .smk-feature span{margin:0 1px}" }
        ] }
    );
    include.tag( "theme-delta",
        { loader: "group", tags: [
            { loader: "style", url: "theme/delta/delta.css", load: "/* [theme/delta/delta.css] */\n.smk-theme-delta .smk-toolbar{background-color:transparent;box-shadow:none}.smk-theme-delta .smk-tool{border:1px solid transparent;box-shadow:0 1px 5px rgba(0,0,0,.65);background-color:#fff}.smk-theme-delta .smk-tool.smk-tool-active{background-color:#ff0}.smk-theme-delta .smk-sidepanel{top:30px}.smk-theme-delta .smk-elastic-panel{display:flex;flex-direction:column;background-color:transparent;box-shadow:none}.smk-theme-delta .smk-sidepanel .smk-panel .smk-header{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:1;margin-bottom:0}.smk-theme-delta .smk-sidepanel .smk-panel .smk-body{background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);z-index:2;margin-left:1px;margin-right:1px;padding:5px}.smk-theme-delta .smk-sidepanel .smk-panel.smk-menu-panel{border:0;background-color:transparent;flex-direction:row}.smk-theme-delta .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{background-color:transparent;box-shadow:none;flex-direction:column;margin-right:0}.smk-theme-delta .smk-sidepanel .smk-panel.smk-menu-panel>.smk-body{background-color:transparent;box-shadow:none;padding-top:1px;padding-bottom:2px;flex-grow:1;margin-left:0;margin-right:0}.smk-theme-delta .smk-base-maps-panel .smk-base-map-sample{width:100px!important;height:100px!important}" }
        ] }
    );
    include.tag( "theme-gamma",
        { loader: "group", tags: [
            { loader: "style", url: "theme/gamma/gamma.css", load: "/* [theme/gamma/gamma.css] */\n.smk-theme-gamma .smk-command{display:inline-block;color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;border-radius:6px;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-gamma select.smk-command{color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-gamma .smk-command:hover{border:2px solid #fff;outline:1px solid #7e7e7e}.smk-theme-gamma .smk-command.smk-disabled{color:#d3d3d3;background-color:gray;font-style:italic;cursor:default}.smk-theme-gamma .smk-command.smk-disabled:hover{outline:0;border:2px solid #fff}.smk-theme-gamma .smk-command.smk-icon{background-color:transparent;cursor:pointer;border:1px solid transparent;border-radius:5px;margin-left:-2px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;color:#000;padding:0;width:26px;height:26px;font-size:24px;font-weight:400}.smk-theme-gamma .smk-command.smk-icon:hover{border:1px solid #000;outline:0}.smk-theme-gamma .smk-command.smk-icon.smk-disabled{font-style:normal}.smk-theme-gamma label.smk-command{padding:2px 5px}.smk-theme-gamma label.smk-command input{padding:0;margin:0;margin-right:4px}.smk-theme-gamma label.smk-command input[type=checkbox]{height:13px}.smk-theme-gamma .leaflet-popup-content{max-width:500px;width:500px;min-width:250px}.smk-theme-gamma .smk-directions-panel .smk-command-col{display:inline-flex;flex-direction:column;align-items:flex-start}.smk-theme-gamma .smk-directions-panel .smk-command-col label{padding:2px 5px}.smk-theme-gamma .smk-directions-panel .smk-command-col label input{padding:0;margin:0;margin-right:4px}.smk-theme-gamma .smk-directions-panel .smk-command-col label input[type=checkbox]{height:13px}.smk-theme-gamma .smk-directions-panel .smk-waypoint{margin:0 -1px}.smk-theme-gamma .smk-directions-panel .smk-waypoint div,.smk-theme-gamma .smk-directions-panel .smk-waypoint i{margin:0 1px}.smk-theme-gamma .smk-feature-list-panel .smk-layer .smk-feature{margin:0 -1px;justify-content:flex-start}.smk-theme-gamma .smk-feature-list-panel .smk-layer .smk-feature i,.smk-theme-gamma .smk-feature-list-panel .smk-layer .smk-feature span{margin:0 1px}" }
        ] }
    );
    include.tag( "theme-wf",
        { loader: "group", tags: [
            { loader: "style", url: "theme/wf/wf.css", load: "/* [theme/wf/wf.css] */\n.smk-theme-wf.smk-map-frame{--panel-width:300px;--toolbar-height:40px}.smk-device-mobile.smk-theme-wf.smk-map-frame .smk-overlay{display:flex;flex-direction:column;justify-content:flex-end}.smk-device-mobile.smk-theme-wf.smk-map-frame .smk-overlay .smk-status{position:static}.smk-theme-wf .smk-command{display:inline-block;color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;border-radius:6px;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-wf select.smk-command{color:#fff;font-weight:700;background-color:#000;border:2px solid #fff;font-size:13px;padding:2px 5px;margin-bottom:1px}.smk-theme-wf .smk-command:hover{border:2px solid #fff;outline:1px solid #7e7e7e}.smk-theme-wf .smk-command.smk-disabled{color:#d3d3d3;background-color:gray;font-style:italic;cursor:default}.smk-theme-wf .smk-command.smk-disabled:hover{outline:0;border:2px solid #fff}.smk-theme-wf .smk-command.smk-icon{background-color:transparent;cursor:pointer;border:1px solid transparent;border-radius:5px;margin-left:-2px;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;color:#000;padding:0;width:26px;height:26px;font-size:24px;font-weight:400}.smk-device-mobile.smk-theme-wf .smk-command.smk-icon.smk-panel-close,.smk-device-mobile.smk-theme-wf .smk-command.smk-icon.smk-panel-go-back{padding:4px}.smk-theme-wf .smk-command.smk-icon:hover{border:1px solid #000;outline:0}.smk-theme-wf .smk-command.smk-icon.smk-disabled{font-style:normal}.smk-theme-wf label.smk-command{padding:2px 5px}.smk-theme-wf label.smk-command input{padding:0;margin:0;margin-right:4px}.smk-theme-wf label.smk-command input[type=checkbox]{height:13px}.smk-theme-wf .smk-toggle-button .smk-command{color:#000;background-color:#fff;white-space:nowrap}.smk-theme-wf .smk-toolbar{padding:0 4px}.smk-device-mobile.smk-theme-wf .smk-toolbar{right:0}.smk-device-mobile.smk-theme-wf .smk-toolbar .smk-tool{background-color:#fff;flex-grow:1;display:flex;justify-content:center}.smk-device-mobile.smk-theme-wf .smk-toolbar .smk-tool.smk-tool-title{flex-direction:column}.smk-device-mobile.smk-theme-wf .smk-toolbar .smk-tool.smk-tool-title span{display:block;font-size:10px;margin:0}.smk-theme-wf .smk-sidepanel{width:calc(var(--panel-width) + 8px)}.smk-device-mobile.smk-theme-wf .smk-sidepanel{left:0;right:0;bottom:0;width:initial;border-bottom:1px solid #888;background-color:#fff;opacity:1;top:initial;order:1;position:static;margin-top:5px}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter-active,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-active{transition:all 1s ease-in-out}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-to{opacity:0}.smk-device-mobile.smk-theme-wf .smk-sidepanel.smk-expand-2{top:0;right:0;transition:top 1s ease-in-out}.smk-device-mobile.smk-theme-wf .smk-sidepanel.smk-expand-2 .smk-elastic-panel{max-height:unset;height:100%;transition:max-height 1s ease-in-out}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-elastic-panel{height:calc(50vh - var(--toolbar-height))}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter .smk-elastic-panel,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-to .smk-elastic-panel{height:0}.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-enter-active .smk-elastic-panel,.smk-device-mobile.smk-theme-wf .smk-sidepanel.sidepanel-slide-leave-active .smk-elastic-panel{transition:all 1s ease-in-out}.smk-theme-wf .smk-sidepanel .smk-panel .smk-panel-title{font-weight:700}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel .smk-panel-title{padding-top:2px;padding-left:4px}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel .smk-header{margin-left:0;margin-right:0}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel .smk-body{z-index:2}.smk-theme-wf .smk-sidepanel .smk-message{order:0;z-index:99999;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:6px;border-radius:6px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}.smk-theme-wf .smk-sidepanel .smk-message .smk-spinner{position:static}.smk-theme-wf .smk-sidepanel .smk-message div{display:inline-block}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel{border:0;background-color:transparent}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header{background-color:transparent;box-shadow:none;justify-content:space-between}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header .smk-tool-title{flex-grow:1;justify-content:center}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-header .smk-tool-title.smk-tool-active{background-color:#036;color:#fff}.smk-device-mobile.smk-theme-wf .smk-sidepanel .smk-panel.smk-menu-panel>.smk-body{background-color:transparent;box-shadow:none;padding-top:1px;padding-bottom:2px}.smk-device-mobile.smk-theme-wf .smk-feature-panel .smk-commands{flex-direction:row-reverse;justify-content:flex-start}.smk-theme-wf .smk-feature-panel .smk-commands .smk-navigator{flex-grow:0;justify-content:flex-end}.smk-theme-wf .smk-feature-panel .smk-commands .smk-zoom{order:70}.smk-theme-wf .smk-layers-panel .smk-item{padding:2px 0}.smk-theme-wf .smk-layers-panel .smk-legend-item{display:flex;align-items:center;margin-bottom:5px}.smk-theme-wf .smk-layers-panel .smk-legend-title{font-size:12px;margin-left:5px}.smk-theme-wf .smk-sidepanel .smk-query-panel.smk-panel{flex-direction:row;justify-content:space-between;align-items:flex-end}.smk-theme-wf .smk-query-panel .smk-commands{order:1;flex-direction:row-reverse;justify-content:flex-start;order:3;flex-basis:1%;align-content:flex-end}.smk-theme-wf .smk-query-panel .smk-commands .smk-toggle-button{order:1}.smk-theme-wf .smk-query-panel .smk-commands .smk-search{flex-basis:100%;text-align:center;align-self:flex-end}.smk-theme-wf .smk-query-panel .smk-body{order:2;flex-basis:99%}.smk-theme-wf .smk-overlay .smk-shortcut-menu{display:flex;flex-direction:column;align-items:center}.smk-theme-wf .smk-overlay .smk-shortcut-menu .smk-tool{margin:4px 0}.smk-theme-wf .smk-overlay .smk-shortcut-menu .smk-bespoke-tool{width:40px;height:40px;border-radius:40px;background-color:#1a5a96;color:#fff}.smk-theme-wf .smk-overlay .smk-shortcut-menu .smk-bespoke-tool i{margin-top:7px}.smk-theme-wf .smk-tool.smk-search-tool .smk-search-dropdown{top:calc(var(--toolbar-height) - 8px)}.smk-theme-wf .smk-tool.smk-baseMaps-tool.smk-basemap-Topographic{background-color:#fff;color:#000}.smk-theme-wf .smk-tool.smk-baseMaps-tool.smk-basemap-Imagery{background-color:#1a5a96;color:#fff}" }
        ] }
    );
    include.tag( "tool",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/tool-base.js", load: function () { console.debug( "[smk/tool/tool-base.js]" ); include.module("tool.tool-base-js",["tool.tool-js"],function(o){"use strict";SMK.TYPE.ToolBase=function(){this.defineProp("id"),this.defineProp("type"),this.defineProp("title"),this.defineProp("status"),this.defineProp("visible",{onSet:function(){this.changedVisible()}}),this.defineProp("enabled",{onSet:function(){this.changedEnabled()}}),this.defineProp("active",{onSet:function(){this.changedActive()}}),this.defineProp("group",{onSet:function(){this.changedGroup()}}),this.defineProp("parentId"),this.defineProp("showTitle"),this.defineProp("icon"),this.defineProp("order"),this.defineProp("busy"),this.visible=!1,this.enabled=!1,this.active=!1,this.group=!1,this.busy=!1,this.$propFilter.baseClasses=!1,this.$initializers.push(function(e){var i=this;function n(o,t){o.parentId=t,o.hasPrevious=!!t,o.parentId||(o.rootId=o.id);var i={};e.forEachTool(function(o){var t=o.rootId=function(o){var t=e.getToolById(o);for(;;){var i=e.getToolById(t.parentId);if(!i)return t.id;t=i}}(o.id);i[t]||(i[t]=[]),i[t].push(o.id)}),e.$group=i}n(this,this.parentId);var o=[].concat(this.position||[]);o.length&&(o.push("toolbar"),o.some(function(o){if(o==i.id||o==i.type)return!1;if(!e.hasToolType(o)&&!e.getToolById(o))return console.warn("position "+o+" not available for tool "+i.id),!1;if(e.hasToolType(o)){var t=e.getToolsByType(o);return 1<t.length?(console.warn("position "+o+" is ambiguous for tool "+i.id),!1):t[0].addTool(i,e,n)}return e.getToolById(o).addTool(i,e,n)})||console.warn("no position found for tool "+i.id));this.changedActive(function(){var o=e.getToolGroup(i.rootId),t=o.some(function(o){return e.getToolById(o).active});o.forEach(function(o){e.getToolById(o).group=t}),i.active&&o.forEach(function(o){e.getToolById(o).active=i.isToolInGroupActive(o)})}),this.id==this.rootId&&this.changedGroup(function(){i.group&&e.getToolRootIds().forEach(function(o){o!=i.id&&e.getToolGroup(o).forEach(function(o){e.getToolById(o).active=!1})})}),this.showStatusMessage=function(o,t,i){return e.getStatusMessage().show(o,t,i,this.busy)}}),this.isToolInGroupActive=function(o){return o==this.id},this.addTool=function(o,t){return!1}}});} },
            { loader: "script", url: "smk/tool/tool-feature-list.js", load: function () { console.debug( "[smk/tool/tool-feature-list.js]" ); include.module("tool.tool-feature-list-js",[],function(e){"use strict";SMK.TYPE.ToolFeatureList=function(e){this.defineProp("layers"),this.defineProp("highlightId"),this.layers=[],this.$initializers.push(function(a){var n=this;this.featureSet=e.call(this,a),a.on(this.id,{active:function(e){n.featureSet.pick(e.featureId)},hover:function(e){n.featureSet.highlight(e.features&&e.features.map(function(e){return e.id}))},clear:function(e){n.featureSet.clear()},remove:function(e){n.featureSet.remove([e.featureId])},"swipe-up":function(e){a.$sidepanel.setExpand(2)},"swipe-down":function(e){a.$sidepanel.incrExpand(-1)}}),n.featureSet.addedFeatures(function(t){n.active=!0;var r=a.$viewer.layerId[t.layerId],i=a.$viewer.displayContext.layers.getLayerIndex(t.layerId)||0;n.modifyComponentProp("layers",function(e){e[i]||Vue.set(e,i,{id:r.id,title:r.config.title,features:[]}),Vue.set(e[i],"features",e[i].features.concat(t.features.map(function(e){return n.firstId||(n.firstId=e.id),{id:e.id,title:e.title}})))})}),n.featureSet.clearedFeatures(function(e){n.layers=[],n.firstId=null}),n.featureSet.removedFeatures(function(t){a.$viewer.layerId[t.features[0].layerId];var e=a.$viewer.displayContext.layers.getLayerIndex(t.features[0].layerId)||0;n.layers[e].features=n.layers[e].features.filter(function(e){return e.id!=t.features[0].id})})})}});} },
            { loader: "script", url: "smk/tool/tool-internal-layers.js", load: function () { console.debug( "[smk/tool/tool-internal-layers.js]" ); include.module("tool.tool-internal-layers-js",["tool.tool-base-js"],function(e){"use strict";SMK.TYPE.ToolInternalLayers=function(){this.internalLayers=[],this.internalLayer={},this.$initializers.push(function(t){var s=this,n=[];this.internalLayers.forEach(function(e){e.type="vector",e.isVisible=!0,e.isQueryable=!1,e.isInternal=!0;var i=t.$viewer.addLayer(e);i.class="smk-inline-legend",n.push({id:i.id}),s.internalLayer[e.id]=t.$viewer.layerId[e.id]}),t.$viewer.setDisplayContextItems(this.type,[{id:this.id,type:"group",title:this.title,isVisible:!1,isInternal:!0,items:n,showItem:!1}]),this.setInternalLayerVisible=function(e){t.$viewer.displayContext[s.type].setItemVisible(s.id,e)}})}});} },
            { loader: "script", url: "smk/tool/tool-panel-feature.js", load: function () { console.debug( "[smk/tool/tool-panel-feature.js]" ); include.module("tool.tool-panel-feature-js",["tool.tool-panel-js","component-tool-panel-feature"],function(t){"use strict";SMK.TYPE.ToolPanelFeature=function(t){this.defineProp("feature"),this.defineProp("layer"),this.defineProp("attributeComponent"),this.defineProp("tool"),this.defineProp("resultPosition"),this.defineProp("resultCount"),this.defineProp("instance"),this.defineProp("attributeMode"),this.defineProp("command"),this.defineProp("attributes"),this.tool={},this.$propFilter.attributes=!1,this.$initializers.push(function(e){this.featureSet=t.call(this,e),this.tool=e.getToolTypesAvailable(),delete this.tool[this.type],e.on(this.id,{"swipe-up":function(t){e.$sidepanel.setExpand(2)},"swipe-down":function(t){e.$sidepanel.incrExpand(-1)}}),this.attributeView&&(this.attributeMode=this.attributeView)}),this.setAttributeComponent=function(e,t){if(e.config.popupTemplate){var i;if(e.config.popupTemplate.startsWith("@")?this.attributeComponent=e.config.popupTemplate.substr(1):(this.attributeComponent="feature-template-"+e.config.id,i=e.config.popupTemplate),!Vue.component(this.attributeComponent))if(i)try{Vue.component(this.attributeComponent,{template:i,extends:SMK.COMPONENT.FeatureBase})}catch(t){console.warn("failed compiling template:",this.attributeComponent,t),e.config.popupTemplate=null}else console.warn("component not found:",this.attributeComponent),e.config.popupTemplate=null;if(Vue.component(this.attributeComponent))return}t.properties.description?this.attributeComponent="feature-description":e.config.attributes?this.attributeComponent="feature-attributes":this.attributeComponent="feature-properties"}}});} },
            { loader: "script", url: "smk/tool/tool-panel.js", load: function () { console.debug( "[smk/tool/tool-panel.js]" ); include.module("tool.tool-panel-js",["tool.tool-base-js"],function(e){"use strict";SMK.TYPE.ToolPanel=function(e){var o=this;this.defineProp("showPanel"),this.defineProp("showHeader"),this.defineProp("showSwipe"),this.defineProp("expand"),this.defineProp("hasPrevious"),this.showPanel=!0,this.showHeader=!0,this.showSwipe=!1,this.expand=0,this.hasPrevious=!1,this.$propFilter.classes=!1,this.makePanelComponent=function(){return{component:e,prop:o.getComponentProps(e)}}}});} },
            { loader: "script", url: "smk/tool/tool-widget.js", load: function () { console.debug( "[smk/tool/tool-widget.js]" ); include.module("tool.tool-widget-js",["tool.tool-base-js"],function(t){"use strict";SMK.TYPE.ToolWidget=function(t){var i=this;this.defineProp("showWidget"),this.showWidget=!0,this.makeWidgetComponent=function(){return{component:t,prop:i.getComponentProps(t)}},this.$propFilter.classes=!1,this.$initializers.push(function(t){var i=this;t.on(this.id,{activate:function(){i.enabled&&(i.active=!i.active)}})})}});} },
            { loader: "script", url: "smk/tool/tool.js", load: function () { console.debug( "[smk/tool/tool.js]" ); include.module("tool.tool-js",["event"],function(t){"use strict";var o=SMK.TYPE.Event.define(["changedVisible","changedEnabled","changedActive","changedGroup"]);function n(){o.prototype.constructor.call(this),this.$prop={},this.$propFilter={constructor:!1},this.$componentProp={},this.$initializers=[]}SMK.TYPE.Tool=n,Object.assign(n.prototype,o.prototype),n.prototype.configure=function(t,o){return Object.assign(this,o),this.instance?(this.id=t+"--"+this.instance,this.parentId&&(this.parentId=this.parentId+"--"+this.instance)):this.id=t,this},n.prototype.initialize=function(n){var i=this;return this.$initializers.concat(this.$moreInitializers).forEach(function(t,o){try{t.call(i,n)}catch(t){throw console.warn(i.id+" initializer #"+o+" failed"),t}})},n.prototype.defineProp=function(i,t){var e=this;if(i in this.$prop)throw new Error('prop "'+i+'" is already defined');var r=this.$prop[i]=Object.assign({onSet:[],validate:function(t,o,n){return t}},t);r.onSet=[].concat(r.onSet),Object.defineProperty(this,i,{get:function(){return r.val},set:function(t){var o=r.val,n=r.validate(t,o,i);n!==o&&(r.val=n,r.onSet.forEach(function(t){t.call(e,i,n)}))}})},n.prototype.getComponentProps=function(i){var o=this;if(this.$componentProp[i])return this.$componentProp[i];var t=Vue.component(i);if(!t)throw new Error('component "'+i+'" not defined');var n=Object.keys(t.prototype).filter(function(t){return t in o.$propFilter?o.$propFilter[t]:t in o.$prop||(console.warn('prop "'+t+'" is defined in "'+i+'", but is not in tool',o),!1)}),e=this.$componentProp[i]={};return n.forEach(function(n){e[n]=o[n],o.$prop[n].onSet.unshift(function(t,o){console.debug("set",i,t,o),e[n]=o})}),this.$componentProp[i]},n.prototype.modifyComponentProp=function(o,n){var i=this;Object.keys(this.$componentProp).forEach(function(t){o in i.$componentProp[t]&&n.call(this,i.$componentProp[t][o],t)})},SMK.TYPE.Tool.define=function(o,t,n,i){var e={construct:t,initialize:n,methods:i};"object"==SMK.UTIL.type(t)&&Object.assign(e,t);var r,c=[];return e.events&&(r=SMK.TYPE.Event.define(e.events)),SMK.TYPE[o]=function(){SMK.TYPE.Tool.prototype.constructor.call(this),r&&r.prototype.constructor.call(this),SMK.TYPE.ToolBase.call(this),e.construct&&e.construct.call(this),e.initialize&&this.$initializers.push(e.initialize),this.$moreInitializers=c,Object.assign(this,e.methods)},Object.assign(SMK.TYPE[o].prototype,SMK.TYPE.Tool.prototype),r&&Object.assign(SMK.TYPE[o].prototype,r.prototype),SMK.TYPE[o].addInitializer=function(t){c.push(t)},function(t){return[(new SMK.TYPE[o]).configure(o,t)]}},SMK.TYPE.Tool.defineComposite=function(t){return function(o){return t.map(function(t){return t(o)[0]})}}});} }
        ] }
    );
    include.tag( "tool-about",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/about/panel-about.html", load:"<tool-panel class=\"smk-about-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <div class=\"smk-about-description\" v-html=\"content\"></div>\n</tool-panel>\n" },
            { loader: "style", url: "smk/tool/about/tool-about.css", load: "/* [smk/tool/about/tool-about.css] */\n" },
            { loader: "script", url: "smk/tool/about/tool-about.js", load: function () { console.debug( "[smk/tool/about/tool-about.js]" ); include.module("tool-about",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-about.panel-about-html"],function(o){"use strict";return Vue.component("about-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("about-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:o["tool-about.panel-about-html"],props:["content"]}),SMK.TYPE.Tool.define("AboutTool",function(){SMK.TYPE.ToolWidget.call(this,"about-widget"),SMK.TYPE.ToolPanel.call(this,"about-panel"),this.defineProp("content")})});} }
        ] }
    );
    include.tag( "tool-about-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/about/config/tool-about-config.js", load: function () { console.debug( "[smk/tool/about/config/tool-about-config.js]" ); include.module("tool-about-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"about",enabled:!1,order:1,icon:"help",position:"list-menu",title:"About SMK",content:"Welcome to SMK"}))))});} }
        ] }
    );
    include.tag( "tool-baseMaps",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/baseMaps/panel-base-maps.html", load:"<tool-panel class=\"smk-base-maps-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <div class=\"smk-base-map\"  \n        v-for=\"basemap in basemaps\" \n        v-on:click=\"$$emit( 'set-base-map', basemap )\" \n        v-bind:class=\"{ 'smk-active': basemap.id == current }\"\n    >\n        <div class=\"smk-base-map-sample\" \n            v-bind:title=\"basemap.title\"\n            v-bind:style=\"mapStyle\"\n            v-content=\"basemap\"\n        ></div>\n    </div>\n</tool-panel>" },
            { loader: "style", url: "smk/tool/baseMaps/tool-base-maps.css", load: "/* [smk/tool/baseMaps/tool-base-maps.css] */\n.smk-base-maps-panel .smk-body{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start;justify-content:space-evenly;flex-wrap:wrap;height:100%}.smk-base-map-sample{border-radius:5px;margin:5px;padding:4px}.smk-base-map{border-radius:5px;border:1px solid transparent}.smk-base-map:hover{border:1px solid #000}" },
            { loader: "script", url: "smk/tool/baseMaps/tool-baseMaps.js", load: function () { console.debug( "[smk/tool/baseMaps/tool-baseMaps.js]" ); include.module("tool-baseMaps",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","viewer","leaflet","tool-baseMaps.panel-base-maps-html"],function(e){"use strict";return Vue.component("baseMaps-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("baseMaps-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-baseMaps.panel-base-maps-html"],props:["current","basemaps","mapStyle"]}),SMK.TYPE.Tool.define("BaseMapsTool",function(){SMK.TYPE.ToolWidget.call(this,"baseMaps-widget"),SMK.TYPE.ToolPanel.call(this,"baseMaps-panel"),this.defineProp("current"),this.defineProp("basemaps"),this.defineProp("mapStyle")},function(i){var t=this;function a(e){i.$viewer.setBasemap(e.id)}this.basemaps=Object.keys(i.$viewer.basemap).map(function(e){return Object.assign({id:e},i.$viewer.basemap[e])}).filter(function(e){return!t.choices||0==t.choices.length||(-1<t.choices.indexOf(e.id)||i.viewer.baseMap==e.id)}).sort(function(e,a){return e.order-a.order}).map(function(t){var n;return t.create=function(e){n=L.map(e,{attributionControl:!1,zoomControl:!1,dragging:!1,keyboard:!1,scrollWheelZoom:!1,zoom:10,zoomSnap:0});var a=i.$viewer.createBasemapLayer(t.id);n.addLayer(a[0])},t.update=function(){var e=i.$viewer.getView();n.setView([e.center.latitude,e.center.longitude],e.zoom)},t}),this.current=i.viewer.baseMap,this.changedActive(function(){t.active?!1===t.showPanel?SMK.HANDLER.get(t.id,"triggered")(i,t):(SMK.HANDLER.get(t.id,"activated")(i,t),Vue.nextTick(function(){t.basemaps.forEach(function(e){e.update()})})):SMK.HANDLER.get(t.id,"deactivated")(i,t)}),i.on(this.id,{activate:function(){if(t.enabled&&!1===t.showPanel){t.active=!1;var e=t.basemaps.findIndex(function(e){return e.id==t.current});a(t.basemaps[(e+1)%t.basemaps.length])}},"set-base-map":function(e){a(e)}}),i.$viewer.changedBaseMap(function(e){t.current=e.baseMap;var a=t.basemaps.find(function(e){return e.id==t.current});t.status="basemap-"+a.id,t.title="Base Map: "+a.title}),i.$viewer.changedView(function(e){t.active&&t.basemaps.forEach(function(e){e.update()})}),i.$viewer.setBasemap(i.viewer.baseMap)})});} }
        ] }
    );
    include.tag( "tool-baseMaps-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/baseMaps/config/tool-baseMaps-config.js", load: function () { console.debug( "[smk/tool/baseMaps/config/tool-baseMaps-config.js]" ); include.module("tool-baseMaps-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"baseMaps",enabled:!1,order:3,position:["shortcut-menu","list-menu"],icon:"map",title:"Base Maps",mapStyle:{width:"110px",height:"110px"}}))))});} }
        ] }
    );
    include.tag( "tool-bespoke",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/bespoke/panel-bespoke.html", load:"<tool-panel class=\"smk-bespoke-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <div class=\"smk-bespoke-content\" \n        v-if=\"content\"\n        v-content=\"content\"\n    ></div>\n\n    <div class=\"smk-bespoke-content\" \n        v-if=\"component\"\n        v-bind:is=\"component\"\n    ></div>\n</tool-panel>\n" },
            { loader: "style", url: "smk/tool/bespoke/tool-bespoke.css", load: "/* [smk/tool/bespoke/tool-bespoke.css] */\n" },
            { loader: "script", url: "smk/tool/bespoke/tool-bespoke.js", load: function () { console.debug( "[smk/tool/bespoke/tool-bespoke.js]" ); include.module("tool-bespoke",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-bespoke.panel-bespoke-html","vue-config"],function(e){"use strict";return Vue.component("bespoke-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("bespoke-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-bespoke.panel-bespoke-html"],props:["content","component"]}),SMK.TYPE.Tool.define("BespokeTool",function(){SMK.TYPE.ToolWidget.call(this,"bespoke-widget"),SMK.TYPE.ToolPanel.call(this,"bespoke-panel"),this.defineProp("content"),this.defineProp("component")},function(t){var o=this;t.on(this.id,{activate:function(){o.enabled&&SMK.HANDLER.has(o.id,"triggered")&&(o.active=!1,SMK.HANDLER.get(o.id,"triggered")(t,o))},"swipe-up":function(e){t.$sidepanel.setExpand(2)},"swipe-down":function(e){t.$sidepanel.incrExpand(-1)}}),this.component||(this.content={create:function(e){SMK.HANDLER.get(o.id,"activated")(t,o,e)}}),this.changedActive(function(){o.active?o.component&&SMK.HANDLER.get(o.id,"activated")(t,o):SMK.HANDLER.get(o.id,"deactivated")(t,o)}),SMK.HANDLER.get(o.id,"initialized")(t,o)})});} }
        ] }
    );
    include.tag( "tool-bespoke-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/bespoke/config/tool-bespoke-config.js", load: function () { console.debug( "[smk/tool/bespoke/config/tool-bespoke-config.js]" ); include.module("tool-bespoke-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"bespoke"}))))});} }
        ] }
    );
    include.tag( "tool-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/tool-base-config.js", load: function () { console.debug( "[smk/tool/tool-base-config.js]" ); include.module("tool-config.tool-base-config-js",[],function(n){"use strict";return function(n){return Object.assign({type:null,instance:null,order:1,enabled:!1,title:null,icon:"widgets",showTitle:!1},n)}});} },
            { loader: "script", url: "smk/tool/tool-panel-config.js", load: function () { console.debug( "[smk/tool/tool-panel-config.js]" ); include.module("tool-config.tool-panel-config-js",[],function(n){"use strict";return function(n){return Object.assign({showPanel:!0,showHeader:!0,showSwipe:!1,expand:0},n)}});} },
            { loader: "script", url: "smk/tool/tool-panel-feature-config.js", load: function () { console.debug( "[smk/tool/tool-panel-feature-config.js]" ); include.module("tool-config.tool-panel-feature-config-js",[],function(t){"use strict";return function(t){return t.command=Object.assign({navigator:!0,zoom:!0,select:!0,attributeMode:!1},t.command),Object.assign({attributeMode:"default"},t)}});} },
            { loader: "script", url: "smk/tool/tool-widget-config.js", load: function () { console.debug( "[smk/tool/tool-widget-config.js]" ); include.module("tool-config.tool-widget-config-js",[],function(t){"use strict";return function(t){return Object.assign({showWidget:!0},t)}});} }
        ] }
    );
    include.tag( "tool-coordinate",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/coordinate/coordinate.html", load:"<div class=\"smk-coordinate\"\n    v-if=\"latitude && longitude\"\n>\n    <span class=\"smk-ordinate\">\n        <label>latitude<div>{{ latitude | formatNumber( 6, 3 ) }}</div></label>\n    </span>\n    <span class=\"smk-ordinate\">\n        <label>longitude<div>{{ longitude | formatNumber( 6, 3 ) }}</div></label>\n    </span>\n\n</div>" },
            { loader: "style", url: "smk/tool/coordinate/tool-coordinate.css", load: "/* [smk/tool/coordinate/tool-coordinate.css] */\n.smk-status .smk-coordinate{font-weight:700;text-shadow:1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,-1px 0 0 #fff;text-align:right;background-color:transparent;cursor:default;margin-top:5px}.smk-status .smk-coordinate .smk-ordinate label{margin-left:10px;margin-right:0}" },
            { loader: "script", url: "smk/tool/coordinate/tool-coordinate.js", load: function () { console.debug( "[smk/tool/coordinate/tool-coordinate.js]" ); include.module("tool-coordinate",["tool.tool-js","tool-coordinate.coordinate-html"],function(l){"use strict";return SMK.TYPE.Tool.define("CoordinateTool",null,function(o){var t=this;"mobile"!=o.$device&&(this.model={latitude:null,longitude:null},this.vm=new Vue({el:o.addToStatus(l["tool-coordinate.coordinate-html"]),data:this.model}),o.$viewer.changedLocation(function(o){o.map&&o.map.latitude?(t.model.latitude=o.map.latitude,t.model.longitude=o.map.longitude):(t.model.latitude=null,t.model.longitude=null)}))})});} }
        ] }
    );
    include.tag( "tool-coordinate-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/coordinate/config/tool-coordinate-config.js", load: function () { console.debug( "[smk/tool/coordinate/config/tool-coordinate-config.js]" ); include.module("tool-coordinate-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"coordinate"}))});} }
        ] }
    );
    include.tag( "tool-coordinate-esri3d",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-coordinate-leaflet",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-directions",
        { loader: "group", tags: [
            "tool-directions-libs",
            { loader: "asset", url: "smk/tool/directions/marker-icon-hole.png" },
            { loader: "template", url: "smk/tool/directions/panel-directions-options.html", load:"<tool-panel class=\"smk-directions-options-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n    </template>\n\n    <select-option class=\"smk-directions-optimal\"\n        v-if=\"command.optimal !== false\"\n        v-bind:value=\"optimal\"\n        v-on:change=\"!busy && $$emit( 'change', { optimal: $event } )\"\n        v-bind:options=\"[\n            { value: false, label: 'No, leave as is' },\n            { value: true, label: 'Yes, optimize route' }\n        ]\"\n    >Should route be optimized?</select-option>\n\n    <select-option class=\"smk-directions-round-trip\"\n        v-if=\"command.roundTrip !== false\"\n        v-bind:value=\"roundTrip\"\n        v-on:change=\"!busy && $$emit( 'change', { roundTrip: $event } )\"\n        v-bind:options=\"[\n            { value: false, label: 'No, one-way' },\n            { value: true, label: 'Yes, a round-trip' }\n        ]\"\n    >Is this route a round-trip?</select-option>\n\n    <select-option class=\"smk-directions-criteria\"\n        v-if=\"command.criteria !== false\"\n        v-bind:value=\"criteria\"\n        v-on:change=\"!busy && $$emit( 'change', { criteria: $event } )\"\n        v-bind:options=\"[\n            { value: 'shortest', label: 'Shortest route' },\n            { value: 'fastest', label: 'Fastest route' }\n        ]\"\n    >Which is more important?</select-option>\n\n    <select-option class=\"smk-directions-truck\"\n        v-if=\"command.vehicleType !== false\"\n        v-bind:value=\"truck\"\n        v-on:change=\"!busy && $$emit( 'change', { truck: $event } )\"\n        v-bind:options=\"[\n            { value: false, label: 'Car' },\n            { value: true, label: 'Truck' }\n        ]\"\n    >Type of vehicle</select-option>\n\n    <div class=\"smk-truck-parameters\"\n        v-if=\"truck\"\n    >\n        <select-option class=\"smk-directions-truck-route\"\n            v-if=\"command.truckRoute !== false\"\n            v-bind:value=\"truckRoute\"\n            v-on:change=\"!busy && $$emit( 'change', { truckRoute: $event } )\"\n            v-bind:options=\"[\n                { value: 1, label: 'Loose' },\n                { value: 10, label: 'Normal' },\n                { value: 100, label: 'Tight' }\n            ]\"\n        >Adherence to designated truck route</select-option>\n\n        <div class=\"smk-directions-bespoke\"\n            v-if=\"command.bespoke !== false\"\n            v-content=\"bespoke\"\n        ></div>\n\n        <enter-number class=\"smk-directions-truck-height\"\n            v-if=\"command.truckHeight !== false\"\n            v-bind:value=\"formatNumber( toUnit( truckHeight, truckHeightUnit ), 2 )\"\n            v-bind:option=\"{ min: 0, step: 1 }\"\n            v-on:change=\"!busy && $$emit( 'change', { truckHeight: fromUnit( $event, truckHeightUnit ) } )\"\n        >Height OAH\n            <template slot=\"after-input\">\n                <div class=\"smk-input\">\n                    <select\n                        v-bind:value=\"truckHeightUnit\"\n                        v-on:change=\"$$emit( 'change', { truckHeightUnit: parseFloat( $event.target.value ) } )\"\n                    >\n                        <option value=\"0.3048006096012192\">ft</option>\n                        <option value=\"1\">m</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n\n        <enter-number class=\"smk-directions-truck-width\"\n            v-if=\"command.truckWidth !== false\"\n            v-bind:value=\"formatNumber( toUnit( truckWidth, truckWidthUnit ), 2 )\"\n            v-bind:option=\"{ min: 0, step: 0.01 }\"\n            v-on:change=\"!busy && $$emit( 'change', { truckWidth: fromUnit( $event, truckWidthUnit ) } )\"\n        >Width OAW\n            <template slot=\"after-input\">\n                <div class=\"smk-input\">\n                    <select\n                        v-bind:value=\"truckWidthUnit\"\n                        v-on:change=\"$$emit( 'change', { truckWidthUnit: parseFloat( $event.target.value ) } )\"\n                    >\n                        <option value=\"0.3048006096012192\">ft</option>\n                        <option value=\"1\">m</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n\n        <enter-number class=\"smk-directions-truck-length\"\n            v-if=\"command.truckLength !== false\"\n            v-bind:value=\"formatNumber( toUnit( truckLength, truckLengthUnit ), 2 )\"\n            v-bind:option=\"{ min: 0, step: 0.01 }\"\n            v-on:change=\"!busy && $$emit( 'change', { truckLength: fromUnit( $event, truckLengthUnit ) } )\"\n        >Length OAL\n            <template slot=\"after-input\">\n                <div class=\"smk-input\">\n                    <select\n                        v-bind:value=\"truckLengthUnit\"\n                        v-on:change=\"$$emit( 'change', { truckLengthUnit: parseFloat( $event.target.value ) } )\"\n                    >\n                        <option value=\"0.3048006096012192\">ft</option>\n                        <option value=\"1\">m</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n\n        <enter-number class=\"smk-directions-truck-weight\"\n            v-if=\"command.truckWeight !== false\"\n            v-bind:value=\"formatNumber( toUnit( truckWeight, truckWeightUnit ), 0 )\"\n            v-bind:option=\"{ min: 0, step: 1 }\"\n            v-on:change=\"!busy && $$emit( 'change', { truckWeight: fromUnit( $event, truckWeightUnit ) } )\"\n        >Weight GVW\n            <template slot=\"after-input\">\n                <div class=\"smk-input\">\n                    <select\n                        v-bind:value=\"truckWeightUnit\"\n                        v-on:change=\"$$emit( 'change', { truckWeightUnit: parseFloat( $event.target.value ) } )\"\n                    >\n                        <option value=\"2.20462262185\">lb</option>\n                        <option value=\"1\">kg</option>\n                    </select>\n                </div>\n            </template>            \n        </enter-number>\n    </div>\n\n</tool-panel>" },
            { loader: "template", url: "smk/tool/directions/panel-directions-route.html", load:"<tool-panel class=\"smk-directions-route-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-print-route\"\n            v-bind:disabled=\"busy\"\n            v-on:click=\"$$emit( 'print', { debug: $event.shiftKey } )\"\n        >Print</command-button>\n    </template>\n\n    <div class=\"smk-directions\">\n        <div class=\"smk-direction\"\n            v-for=\"( direction, i ) in directions\"\n            v-if=\"direction.name\"\n            v-on:mouseenter=\"$$emit( 'hover-direction', { highlight: i } )\"\n            v-on:mouseleave=\"$$emit( 'hover-direction', { highlight: null } )\"\n            v-on:click=\"$$emit( 'pick-direction', { pick: i } )\"\n            v-bind:class=\"{ 'smk-highlight': i == directionHighlight, 'smk-pick': i == directionPick }\"\n        >\n            <i class=\"smk-instruction-type material-icons\"\n                v-bind:class=\"[ instructionTypeClass( direction.type ) ]\"\n                v-bind:title=\"direction.type\"\n            >{{ instructionTypeIcon( direction.type ) }}</i>\n            <span class=\"smk-instruction\">{{ instructionTypePrefix( direction.type, direction.heading ) }} {{ direction.name }}</span>\n            <!-- <span class=\"smk-instruction\" v-else>{{ direction.instruction }}</span> TODO remove -->\n            <span class=\"smk-metric\"\n                v-if=\"direction.distance\"\n            >for {{ direction.distanceUnit.value | dimensionalNumber( 1, direction.distanceUnit.unit, 3 ) }} ({{ direction.time | formatTime }})</span>\n            <i class=\"material-icons smk-instruction-notification\"\n                v-if=\"direction.notifications && direction.notifications.length > 0\"\n                v-bind:title=\"direction.notifications[0].message\"\n            >warning</i>\n        </div>\n    </div>\n\n</tool-panel>" },
            { loader: "template", url: "smk/tool/directions/panel-directions.html", load:"<tool-panel class=\"smk-directions-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-route\"\n            v-bind:disabled=\"busy || !hasRoute\"\n            v-on:click=\"$$emit( 'route' )\"\n        >See Route Details</command-button>\n\n        <command-button class=\"smk-reverse\"\n            title=\"Reverse route\"\n            v-bind:disabled=\"busy || waypoints.length < 2\"\n            v-on:click=\"$$emit( 'reverse' )\"\n            icon=\"autorenew\"\n        ></command-button>\n\n        <command-button class=\"smk-reset\"\n            title=\"Clear route\"\n            v-bind:disabled=\"busy || waypoints.length == 0\"\n            v-on:click=\"$$emit( 'clear' )\"\n            icon=\"highlight_off\"\n        ></command-button>\n\n        <command-button class=\"smk-options\"\n            title=\"Route and Vehicle Options\"\n            v-bind:disabled=\"busy\"\n            v-on:click=\"$$emit( 'options' )\"\n            icon=\"settings_applications\"\n        ></command-button>\n\n        <address-search class=\"smk-address\"\n            ref=\"address\"\n            placeholder=\"Enter address here, or click on map\"\n            v-bind:geocoderService=\"geocoderService\"\n            v-on:update=\"$$emit( 'new-waypoint', $event ); $refs.address.clear()\"\n        ></address-search>\n\n        <command-button class=\"smk-current\"\n            title=\"Add current location\"\n            v-bind:disabled=\"busy\"\n            v-on:click=\"$$emit( 'current-location' )\"\n            icon=\"add_location\"\n        ></command-button>\n    </template>\n\n    <draggable class=\"smk-waypoints\"\n        v-bind:list=\"waypoints\"\n        v-bind:options=\"{ handle: '.smk-handle', disabled: optimal }\"\n        v-on:end=\"$$emit( 'changed-waypoints' )\"\n    >\n        <div class=\"smk-waypoint smk-item\"\n            v-for=\"( site, i ) in waypoints\"\n        >\n            <command-button class=\"smk-handle\"\n                v-bind:disabled=\"optimal || busy\"\n                v-bind:title=\"optimal ? 'In optimal order' : 'Drag to reorder'\"\n                icon=\"drag_handle\"\n            ></command-button>\n\n            <div class=\"smk-description\">\n                <div class=\"smk-address\"\n                    v-if=\"site.fullAddress\"\n                    v-bind:class=\"'smk-precision-' + ( site.matchPrecision || 'unknown' ).toLowerCase()\"\n                >\n                    <div class=\"smk-site\"\n                        v-if=\"site.siteName\"\n                    >\n                        <span class=\"smk-site-name\">{{ site.siteName }}</span>\n                    </div>\n                    <div class=\"smk-street\"\n                        v-if=\"site.streetName\"\n                    >\n                        <span class=\"smk-civic-number\">{{ site.civicNumber }}{{ site.civicNumberSuffix || '' }}</span>\n                        <span class=\"smk-street-name\">{{ site.streetName }}</span>\n                        <span class=\"smk-street-type\">{{ site.streetType }}</span>\n                    </div>\n                    <div class=\"smk-locality\"\n                        v-if=\"site.localityName\"\n                    >\n                        <span class=\"smk-locality-name\">{{ site.localityName || '&nbsp;' }}</span>\n                        <!-- <span class=\"smk-locality-type\" v-if=\"site.localityType && site.localityType != 'Unknown'\">({{ site.localityType }})</span> -->\n                    </div>\n                </div>\n\n                <div class=\"smk-coordinate\"\n                    v-else\n                >\n                    <span class=\"smk-ordinate\">\n                        <label>latitude<div>{{ site.latitude | formatNumber( 6, 3 ) }}</div></label>\n                    </span>\n                    <span class=\"smk-ordinate\">\n                        <label>longitude<div>{{ site.longitude | formatNumber( 6, 3 ) }}</div></label>\n                    </span>\n                </div>\n            </div>\n\n            <command-button class=\"smk-zoomto\"\n                v-bind:class=\"{\n                    'smk-first':    i == 0,\n                    'smk-middle':   i != 0 && i != waypoints.length - 1,\n                    'smk-last':     i != 0 && i == waypoints.length - 1\n                }\"\n                v-bind:disabled=\"busy\"\n                v-on:click=\"$$emit( 'zoom-waypoint', { waypoint: site, index: i } )\"\n                icon=\"location_on\"\n                title=\"Zoom to this waypoint\"\n            ></command-button>\n\n            <command-button class=\"smk-remove\"\n                v-bind:disabled=\"waypoints.length == 0 || busy\"\n                v-on:click=\"waypoints.length > 0 && $$emit( 'remove-waypoint', { index: i } )\"\n                icon=\"delete\"\n                title=\"Remove this waypoint\"\n            ></command-button>\n        </div>\n    </draggable>\n\n</tool-panel>" },
            { loader: "style", url: "smk/tool/directions/tool-directions-options.css", load: "/* [smk/tool/directions/tool-directions-options.css] */\n.smk-directions-options-panel .smk-enter-input,.smk-directions-options-panel .smk-select-option{padding:3px}.smk-directions-options-panel .smk-truck-parameters{display:flex;flex-direction:row;flex-wrap:wrap}.smk-directions-options-panel .smk-truck-parameters .smk-select-option{flex-grow:1;flex-basis:100%}.smk-directions-options-panel .smk-truck-parameters .smk-enter-input{flex-basis:calc(50% - 6px)}.smk-directions-options-panel .smk-truck-parameters .smk-enter-input .smk-input .smk-input{padding:0}.smk-directions-options-panel .smk-truck-parameters .smk-enter-input .smk-input .smk-input select{border:none;border-radius:6px}" },
            { loader: "script", url: "smk/tool/directions/tool-directions-options.js", load: function () { console.debug( "[smk/tool/directions/tool-directions-options.js]" ); include.module("tool-directions.tool-directions-options-js",["tool.tool-base-js","tool.tool-panel-js","component-select-option","tool-directions.panel-directions-options-html"],function(t){"use strict";return Vue.component("directions-options-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:t["tool-directions.panel-directions-options-html"],props:{truck:Boolean,optimal:Boolean,roundTrip:Boolean,criteria:String,truckRoute:Number,truckHeight:Number,truckWidth:Number,truckLength:Number,truckWeight:Number,truckHeightUnit:Number,truckWidthUnit:Number,truckLengthUnit:Number,truckWeightUnit:Number,oversize:Boolean,command:Object,bespoke:Object},methods:{fromUnit:function(t,i){return t*i},toUnit:function(t,i){return t/i},formatNumber:function(t,i){var e=Math.floor(t),o=t-e;return e.toString()+o.toFixed(i).substr(1)}}}),SMK.TYPE.Tool.define("DirectionsOptionsTool",function(){function t(t,i,e){var o=parseFloat(t);return t&&o?o<0?i:o:null}SMK.TYPE.ToolPanel.call(this,"directions-options-panel"),this.defineProp("truck"),this.defineProp("optimal"),this.defineProp("roundTrip"),this.defineProp("criteria"),this.defineProp("truckRoute"),this.defineProp("truckHeight",{validate:t}),this.defineProp("truckWidth",{validate:t}),this.defineProp("truckLength",{validate:t}),this.defineProp("truckWeight",{validate:t}),this.defineProp("truckHeightUnit"),this.defineProp("truckWidthUnit"),this.defineProp("truckLengthUnit"),this.defineProp("truckWeightUnit"),this.defineProp("oversize"),this.defineProp("command"),this.defineProp("bespoke"),this.truck=!1,this.optimal=!1,this.roundTrip=!1,this.criteria="shortest",this.truckRoute=null,this.truckHeight=null,this.truckWidth=null,this.truckLength=null,this.truckWeight=null,this.truckHeightUnit=1,this.truckWidthUnit=1,this.truckLengthUnit=1,this.truckWeightUnit=1,this.oversize=!1,this.command={},this.bespoke={},this.parentId="DirectionsWaypointsTool"},function(i){var e=this,o=i.getToolById(this.parentId),n=SMK.UTIL.makeDelayedCall(function(){o.findRoute()});i.on(this.id,{change:function(t,i){Object.assign(e,t),i.$forceUpdate(),n()}}),i.$viewer.handlePick(3,function(t){if(e.active)return!(o.active=!0)}),this.bespoke.create=function(t){SMK.HANDLER.get(e.id,"activated")(i,e,t)}})});} },
            { loader: "style", url: "smk/tool/directions/tool-directions-route.css", load: "/* [smk/tool/directions/tool-directions-route.css] */\n.smk-directions-route-panel .smk-direction{display:flex;flex-direction:row;justify-content:start;align-items:center;border:1px solid transparent}.smk-directions-route-panel .smk-direction .smk-instruction{vertical-align:top;font-size:11px;font-weight:700;font-size:13px;flex-basis:66%}.smk-directions-route-panel .smk-direction .smk-metric{text-align:right;white-space:nowrap;font-size:11px;flex:1 0 33%}.smk-directions-route-panel .smk-direction .smk-instruction-notification{color:red}.smk-directions-route-panel .smk-direction.smk-highlight{background-color:#add8e6}.smk-directions-route-panel .smk-direction.smk-pick{border:1px solid #00f;border-radius:3px}.smk-directions-route-panel .smk-directions{overflow-y:auto}.smk-directions-route-panel .smk-reverse{transform:scaleX(-1)}" },
            { loader: "script", url: "smk/tool/directions/tool-directions-route.js", load: function () { console.debug( "[smk/tool/directions/tool-directions-route.js]" ); include.module("tool-directions.tool-directions-route-js",["tool.tool-base-js","tool.tool-panel-js","tool-directions.panel-directions-route-html","component-command-button","turf"],function(i){"use strict";var n={START:["trip_origin",null,"Go on"],START_NORTH:["trip_origin",null,"Head north on"],START_SOUTH:["trip_origin",null,"Head south on"],START_EAST:["trip_origin",null,"Head east on"],START_WEST:["trip_origin",null,"Head west on"],CONTINUE:["expand_more",null,"Continue onto"],TURN_LEFT:["arrow_back",null,"Turn left onto"],TURN_SLIGHT_LEFT:["undo",null,"Slight turn left onto"],TURN_SHARP_LEFT:["directions",!0,"Sharp turn left onto"],TURN_RIGHT:["arrow_forward",null,"Turn right onto"],TURN_SLIGHT_RIGHT:["undo",!0,"Slight turn right onto"],TURN_SHARP_RIGHT:["directions",null,"Sharp turn right onto"],FERRY:["directions_boat",null,"Board"],STOPOVER:["pause",null,""],FINISH:["stop",null,""]};return Vue.component("route-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:i["tool-directions.panel-directions-route-html"],props:["directions","directionHighlight","directionPick"],methods:{instructionTypeIcon:function(i){return n[i]?n[i][0]:"report"},instructionTypeClass:function(i){return n[i]?n[i][1]?"smk-reverse":"":"smk-hidden"},instructionTypePrefix:function(i,t){return t&&(i=i+"_"+t),n[i]&&n[i][2]||""}}}),SMK.TYPE.Tool.define("DirectionsRouteTool",function(){SMK.TYPE.ToolPanel.call(this,"route-panel"),this.defineProp("directions"),this.defineProp("directionHighlight"),this.defineProp("directionPick"),this.directions=[],this.parentId="DirectionsWaypointsTool"},function(o){var e=this,r=o.getToolById(this.parentId);this.changedActive(function(){e.active&&(e.directions=r.directions,e.directionHighlight=r.directionHighlight,e.directionPick=r.directionPick)}),o.on(this.id,{"hover-direction":function(i){e.directionHighlight=i.highlight},"pick-direction":function(i){e.directionPick=i.pick},print:function(i){var t=o.getConfig();t.etc={directions:r.directionsRaw};var n=SMK.UTIL.makeUUID();window.sessionStorage.setItem(n,JSON.stringify(t)),e.showStatusMessage("Preparing print...","progress",null),e.busy=!0,SMK.HANDLER.get(e.id,"print")(o,e,n,i).then(function(){return e.busy=!1,e.showStatusMessage("Printing...","progress",2e3)}).catch(function(){return e.busy=!1,e.showStatusMessage("Print failed","error",2e3)})}}),o.$viewer.handlePick(3,function(i){if(e.active)return!(r.active=!0)})})});} },
            { loader: "script", url: "smk/tool/directions/tool-directions-waypoints.js", load: function () { console.debug( "[smk/tool/directions/tool-directions-waypoints.js]" ); include.module("tool-directions.tool-directions-waypoints-js",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-directions.panel-directions-html","component-address-search","component-command-button","api"],function(t){"use strict";return Vue.component("directions-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("directions-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:t["tool-directions.panel-directions-html"],props:["waypoints","hasRoute","optimal","geocoderService"]}),SMK.TYPE.Tool.define("DirectionsWaypointsTool",function(){SMK.TYPE.ToolWidget.call(this,"directions-widget"),SMK.TYPE.ToolPanel.call(this,"directions-panel"),this.defineProp("waypoints"),this.defineProp("hasRoute"),this.defineProp("optimal"),this.defineProp("geocoderService"),this.defineProp("routePlannerService"),this.defineProp("activating"),this.defineProp("directions"),this.defineProp("segmentLayers"),this.defineProp("waypointLayers"),this.waypoints=[],this.hasRoute=!1,this.activating=SMK.UTIL.resolved(),this.directions=[]},function(i){var n=this;this.routePanel=i.getToolById("DirectionsRouteTool"),this.routeOptions=i.getToolById("DirectionsOptionsTool"),this.routePlanner=new SMK.TYPE.RoutePlanner(this.routePlannerService),this.geocoder=new SMK.TYPE.Geocoder(this.geocoderService),this.changedActive(function(){n.active&&(n.optimal=n.routeOptions.optimal)}),this.getCurrentLocation=function(){n.showStatusMessage("Finding current location...","progress",null),n.busy=!0,i.$viewer.getCurrentLocation().finally(function(){n.busy=!1,n.showStatusMessage()})},i.$viewer.handlePick(2,function(t){if(n.active)return n.geocoder.fetchNearestSite(t.map).then(function(t){return n.active=!0,n.activating.then(function(){return n.addWaypoint(t)})}).catch(function(t){console.debug(t)}).then(function(){return!0})}),i.on(this.id,{"current-location":function(t){n.addCurrentLocation().then(function(){n.findRoute()})},reverse:function(t){n.waypoints.reverse(),n.findRoute()},clear:function(t){n.resetWaypoints()},"hover-direction":function(t){n.directionHighlight=t.highlight},"pick-direction":function(t){n.directionPick=t.pick},"changed-waypoints":function(t){n.findRoute()},"remove-waypoint":function(t){n.waypoints.splice(t.index,1),n.hasRoute=1<n.waypoints.length,n.findRoute()},"new-waypoint":function(t){t.latitude&&n.addWaypoint(t)},route:function(t){n.routePanel.active=!0},options:function(t){n.routeOptions.active=!0}}),this.layer={};var o=[];this.segmentLayers.concat(this.waypointLayers).forEach(function(t){t.type="vector",t.isVisible=!0,t.isInternal=!0;var e=i.$viewer.addLayer(t);e.class="smk-inline-legend",o.push({id:e.id}),n.layer[t.id]=i.$viewer.layerId[t.id],t.isDraggable&&n.layer[t.id].changedFeature(function(t){n.updateWaypoint(t.geojson.properties.index,t.newPt)})}),i.$viewer.setDisplayContextItems(this.type,[{id:this.id,type:"group",title:this.title,isVisible:!1,isInternal:!0,items:o}]),this.setInternalLayerVisible=function(t){i.$viewer.displayContext[n.type].setItemVisible(n.id,t)},this.handleRouteData=function(t){SMK.HANDLER.has(n.id,"route")&&SMK.HANDLER.get(n.id,"route")(i,t)}},{addWaypoint:function(t){if(!t)return this.showStatusMessage("Unable to get location","error",1e3);var e,i,n=this.waypoints[this.waypoints.length-1];return!n||(e=n,i=t,1e-5<Math.abs(e.latitude-i.latitude)||1e-5<Math.abs(e.longitude-i.longitude))?(t.fullAddress||this.showStatusMessage("Unable to find address for location","error",1e3),this.waypoints.push(t),this.findRoute()):this.showStatusMessage("Location too close to previous one","error",1e3)},addCurrentLocation:function(){var e=this;return e.getCurrentLocation().then(function(t){return e.addWaypoint(t)}).catch(function(){return e.showStatusMessage("Unable to get current location","error",1e3)})},updateWaypoint:function(e,t){var i=this;return this.active=!0,this.geocoder.fetchNearestSite(t).then(function(t){return i.waypoints[e]=t,i.findRoute()})},resetWaypoints:function(){return this.waypoints=[],this.hasRoute=!1,this.findRoute()},findRoute:function(){var e=this;this.directions=[],this.directionHighlight=null,this.directionPick=null,this.showStatusMessage(),this.clearLayers();var i=this.waypoints.map(function(t,e){return{index:e,latitude:t.latitude,longitude:t.longitude}});if(i.length<2)return e.handleRouteData(),e.displayWaypoints(),this.showStatusMessage("Add a waypoint"),SMK.UTIL.resolved();this.showStatusMessage("Constructing route...","progress",null),this.busy=!0,this.hasRoute=!1;var t={criteria:this.routeOptions.criteria,roundTrip:this.routeOptions.roundTrip,optimal:this.routeOptions.optimal,truck:this.routeOptions.truck,followTruckRoute:!!this.routeOptions.truck,truckRouteMultiplier:this.routeOptions.truck&&this.routeOptions.truckRoute,height:this.routeOptions.truck&&this.routeOptions.truckHeight,weight:this.routeOptions.truck&&this.routeOptions.truckWeight,oversize:this.routeOptions.oversize};return this.routePlanner.fetchDirections(i,t).then(function(t){e.handleRouteData(t),e.displaySegments(t.segments),t.visitOrder&&-1!=t.visitOrder.findIndex(function(t,e){return i[t].index!=e})&&(e.waypoints=t.visitOrder.map(function(t){return e.waypoints[i[t].index]})),e.displayWaypoints(),e.showStatusMessage("Route travels "+t.distance+" km in "+t.timeText,"summary"),e.hasRoute=!0,e.directions=t.directions,e.directionsRaw=t,e.directionsRaw.waypoints=JSON.parse(JSON.stringify(e.waypoints))}).catch(function(t){console.debug(t),e.showStatusMessage("Unable to find route","error"),e.displayWaypoints()}).finally(function(){e.busy=!1})},clearLayers:function(){var e=this;this.setInternalLayerVisible(!1),Object.keys(this.layer).forEach(function(t){e.layer[t].clear()})},displaySegments:function(t){var i=this;this.setInternalLayerVisible(!0);var n={};t.features.forEach(function(t){var e=t.properties["@layer"]||"@segments";n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).forEach(function(e){i.layer[e]?(i.layer[e].load(turf.featureCollection(n[e])),n[e].forEach(function(t){t.style=i.layer[e].config.style})):console.warn("no layer defined for "+e)})},displayWaypoints:function(){var t=this.waypoints.length;function i(t,e){return turf.point([t.longitude,t.latitude],{index:e})}0<t&&this.layer["@waypoint-start"].load(i(this.waypoints[0],0)),1<t&&this.layer["@waypoint-end"].load(i(this.waypoints[t-1],t-1)),2<t&&this.layer["@waypoint-middle"].load(turf.featureCollection(this.waypoints.slice(1,t-1).map(function(t,e){return i(t,1+e)}))),this.setInternalLayerVisible(0<t)}})});} },
            { loader: "style", url: "smk/tool/directions/tool-directions.css", load: "/* [smk/tool/directions/tool-directions.css] */\n.smk-directions-panel .smk-commands .smk-route .smk-command{font-size:14px;font-weight:700}.smk-directions-panel .smk-commands .smk-options{flex-grow:1;justify-content:flex-end}.smk-directions-panel .smk-waypoint{display:flex;align-items:center;border-radius:0;border-top:1px solid #999}.smk-directions-panel .smk-description{align-self:center;flex-basis:100%;margin:2px 0;background-color:transparent;margin-right:5px;font-size:11px}.smk-directions-panel .smk-waypoint .smk-zoomto.smk-first .smk-command{color:green}.smk-directions-panel .smk-waypoint .smk-zoomto.smk-middle .smk-command{color:#00f}.smk-directions-panel .smk-waypoint .smk-zoomto.smk-last .smk-command{color:red}.smk-directions-panel .smk-options{width:40px}.smk-directions-panel .smk-address-search{margin:4px;width:calc(100% - 46px)}" },
            { loader: "script", url: "smk/tool/directions/tool-directions.js", load: function () { console.debug( "[smk/tool/directions/tool-directions.js]" ); include.module("tool-directions",["tool-directions.tool-directions-waypoints-js","tool-directions.tool-directions-options-js","tool-directions.tool-directions-route-js"],function(o){"use strict";return SMK.TYPE.Tool.defineComposite([o["tool-directions.tool-directions-waypoints-js"],o["tool-directions.tool-directions-options-js"],o["tool-directions.tool-directions-route-js"]])});} }
        ] }
    );
    include.tag( "tool-directions-config",
        { loader: "group", tags: [
            { loader: "asset", url: "smk/tool/directions/config/marker-icon-blue.png" },
            { loader: "asset", url: "smk/tool/directions/config/marker-icon-green.png" },
            { loader: "asset", url: "smk/tool/directions/config/marker-icon-red.png" },
            { loader: "asset", url: "smk/tool/directions/config/marker-shadow.png" },
            { loader: "script", url: "smk/tool/directions/config/tool-directions-config.js", load: function () { console.debug( "[smk/tool/directions/config/tool-directions-config.js]" ); include.module("tool-directions-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js","tool-directions-config.marker-icon-blue-png","tool-directions-config.marker-icon-green-png","tool-directions-config.marker-icon-red-png","tool-directions-config.marker-shadow-png"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"directions",enabled:!1,order:4,position:["shortcut-menu","list-menu"],icon:"directions_car",title:"Route Planner",optimal:!1,geocoderService:{},routePlannerService:{},segmentLayers:[{id:"@segments",title:"Segments",style:{strokeColor:"blue",strokeWidth:8,strokeOpacity:.8},legend:{line:!0}}],waypointLayers:[{id:"@waypoint-start",title:"Starting Route Location",style:{markerUrl:o["tool-directions-config.marker-icon-green-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:o["tool-directions-config.marker-shadow-png"],shadowSize:[41,41],popupOffset:[1,-34]},legend:{title:"Starting Route Location",point:!0},isDraggable:!0,isQueryable:!1},{id:"@waypoint-end",title:"Ending Route Location",style:{markerUrl:o["tool-directions-config.marker-icon-red-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:o["tool-directions-config.marker-shadow-png"],shadowSize:[41,41],popupOffset:[1,-34]},legend:{title:"Ending Route Location",point:!0},isDraggable:!0,isQueryable:!1},{id:"@waypoint-middle",title:"Waypoint on Route",style:{markerUrl:o["tool-directions-config.marker-icon-blue-png"],markerSize:[25,41],markerOffset:[12,41],shadowUrl:o["tool-directions-config.marker-shadow-png"],shadowSize:[41,41],popupOffset:[1,-34]},legend:{title:"Waypoint on Route",point:!0},isDraggable:!0,isQueryable:!1}]}))))});} }
        ] }
    );
    include.tag( "tool-directions-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/directions/tool-directions-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/directions/tool-directions-esri3d.js]" ); include.module("tool-directions-esri3d",["esri3d","types-esri3d","util-esri3d","tool-directions"],function(e){"use strict";var c=SMK.TYPE.Esri3d,i=include.option("baseUrl")+"images/tool/directions",a={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:i+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:i+"/marker-icon-red.png"}}]},s={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:i+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:i+"/marker-icon-green.png"}}]},p={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:i+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:i+"/marker-icon-hole.png"}}]};SMK.TYPE.DirectionsTool.prototype.afterInitialize.push(function(o){var n=this;n.directionsLayer=new c.layers.GraphicsLayer({visible:!1}),o.$viewer.map.add(n.directionsLayer),this.changedActive(function(){n.visible=n.active}),this.changedVisible(function(){n.directionsLayer.visible=n.visible}),o.$viewer.handlePick(3,function(e){if(n.active)return o.$viewer.view.hitTest(e.screen).then(function(e){if(0!=e.results.length&&e.results[0].graphic)return!0})});var i=SMK.UTIL.smkStyleToEsriSymbol({strokeColor:"#0000FF",strokeOpacity:.5,strokeWidth:7}),r=function(e){return i[e]};function t(){n.directionsLayer.removeAll()}this.displayRoute=function(e){if(t(),e){var i={type:"Feature",geometry:{type:"LineString",coordinates:e}};n.routeGraphic=new c.Graphic(SMK.UTIL.geoJsonToEsriGeometry(i,r)[0]),n.directionsLayer.add(n.routeGraphic),o.$viewer.view.goTo(n.routeGraphic)}},this.displayWaypoints=function(){var t=n.waypoints.length-1;n.waypointGraphics=n.waypoints.map(function(e,i){var r,o=Object.assign({index:i},e);switch(i){case 0:r=s,o.first=!0;break;case t:r=a,o.last=!0;break;default:r=p}return new c.Graphic({geometry:{type:"point",latitude:e.latitude,longitude:e.longitude},symbol:r,attributes:o})}),n.directionsLayer.addMany(n.waypointGraphics)},o.on("directions-route",{"hover-direction":function(e){if(n.directionsLayer.remove(n.highlightGraphic),null!=e.highlight){var i=n.directions[e.highlight].point,r={type:"point",latitude:i[1],longitude:i[0]};n.highlightGraphic=new c.Graphic({geometry:r,symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:"20px",anchor:"center",material:{color:[0,0,0,0]},resource:{primitive:"circle"},outline:{color:"blue",size:"2px"}}]}}),n.directionsLayer.add(n.highlightGraphic)}},"pick-direction":function(e){if(n.directionsLayer.remove(n.pickGraphic),null!=e.pick){var i=n.directions[e.pick].point,r={type:"point",latitude:i[1],longitude:i[0]};n.pickGraphic=new c.Graphic({geometry:r,symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:"30px",anchor:"center",material:{color:[0,0,0,0]},resource:{primitive:"circle"},outline:{color:"blue",size:"2px"}}]}}),n.directionsLayer.add(n.pickGraphic),o.$viewer.view.goTo({center:i,zoom:12})}}}),o.on(this.id,{clear:function(e){t()},"zoom-waypoint":function(e){n.waypointGraphics[e.index];var i=e.waypoint;o.$viewer.view.goTo({center:[i.longitude,i.latitude],zoom:12})}})})});} }
        ] }
    );
    include.tag( "tool-directions-leaflet",
        { loader: "group", tags: [
            { loader: "style", url: "smk/viewer-leaflet/tool/directions/tool-directions-leaflet.css", load: "/* [smk/viewer-leaflet/tool/directions/tool-directions-leaflet.css] */\n.leaflet-marker-icon .number{position:relative;top:-42px;font-size:11px;font-family:\"Arial Narrow\",Arial,sans-serif;font-weight:700;width:25px;text-align:center}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/directions/tool-directions-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/directions/tool-directions-leaflet.js]" ); include.module("tool-directions-leaflet",["leaflet","tool-directions"],function(i){"use strict";SMK.TYPE.DirectionsWaypointsTool.addInitializer(function(n){var r=this;function t(i,e){var r=L.latLng(i[1],i[0]),t=L.latLngBounds([r,r]),o=n.$viewer.getPanelPadding(!0);n.$viewer.map.fitBounds(t,{paddingTopLeft:o.topLeft,paddingBottomRight:o.bottomRight,maxZoom:e||15,animate:!0})}this.changedGroup(function(){r.visible=r.group}),this.changedVisible(function(){r.visible?(r.directionHighlightLayer&&n.$viewer.map.addLayer(r.directionHighlightLayer),r.directionPickLayer&&n.$viewer.map.addLayer(r.directionPickLayer)):(r.directionHighlightLayer&&n.$viewer.map.removeLayer(r.directionHighlightLayer),r.directionPickLayer&&n.$viewer.map.removeLayer(r.directionPickLayer))}),n.on("directions-route",{"hover-direction":function(i){if(r.directionHighlightLayer&&(n.$viewer.map.removeLayer(r.directionHighlightLayer),r.directionHighlightLayer=null),null!=i.highlight){var e=r.directions[i.highlight].point;r.directionHighlightLayer=L.circleMarker([e[1],e[0]]).addTo(n.$viewer.map)}},"pick-direction":function(i){if(r.directionPickLayer&&(n.$viewer.map.removeLayer(r.directionPickLayer),r.directionPickLayer=null),null!=i.pick){var e=r.directions[i.pick].point;r.directionPickLayer=L.circleMarker([e[1],e[0]],{radius:15}).addTo(n.$viewer.map),t(e)}}}),n.on(this.id,{clear:function(i){r.directionHighlightLayer&&n.$viewer.map.removeLayer(r.directionHighlightLayer),r.directionHighlightLayer=null,r.directionPickLayer&&n.$viewer.map.removeLayer(r.directionPickLayer),r.directionPickLayer=null},"zoom-waypoint":function(i){t([i.waypoint.longitude,i.waypoint.latitude])}})})});} }
        ] }
    );
    include.tag( "tool-directions-libs",
        { loader: "sequence", tags: [
            { loader: "script", url: "smk/tool/directions/lib/sortable-1.7.0.min.js", load: function () { console.debug( "[smk/tool/directions/lib/sortable-1.7.0.min.js]" ); /*! Sortable 1.7.0 - MIT | git://github.com/rubaxa/Sortable.git */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():window.Sortable=a()}(function(){"use strict";function a(b,c){if(!b||!b.nodeType||1!==b.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(b);this.el=b,this.options=c=t({},c),b[V]=this;var d={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(b.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:a.supportPointer!==!1};for(var e in d)!(e in c)&&(c[e]=d[e]);ka(c);for(var g in this)"_"===g.charAt(0)&&"function"==typeof this[g]&&(this[g]=this[g].bind(this));this.nativeDraggable=!c.forceFallback&&ca,f(b,"mousedown",this._onTapStart),f(b,"touchstart",this._onTapStart),c.supportPointer&&f(b,"pointerdown",this._onTapStart),this.nativeDraggable&&(f(b,"dragover",this),f(b,"dragenter",this)),ia.push(this._onDragOver),c.store&&this.sort(c.store.get(this))}function b(a,b){"clone"!==a.lastPullMode&&(b=!0),B&&B.state!==b&&(i(B,"display",b?"none":""),b||B.state&&(a.options.group.revertClone?(C.insertBefore(B,D),a._animate(y,B)):C.insertBefore(B,y)),B.state=b)}function c(a,b,c){if(a){c=c||X;do if(">*"===b&&a.parentNode===c||r(a,b))return a;while(a=d(a))}return null}function d(a){var b=a.host;return b&&b.nodeType?b:a.parentNode}function e(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,aa)}function g(a,b,c){a.removeEventListener(b,c,aa)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(T," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(T," ")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return X.defaultView&&X.defaultView.getComputedStyle?c=X.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;e<f;e++)c(d[e],e);return d}return[]}function k(a,b,c,d,e,f,g,h){a=a||b[V];var i=X.createEvent("Event"),j=a.options,k="on"+c.charAt(0).toUpperCase()+c.substr(1);i.initEvent(c,!0,!0),i.to=e||b,i.from=f||b,i.item=d||b,i.clone=B,i.oldIndex=g,i.newIndex=h,b.dispatchEvent(i),j[k]&&j[k].call(a,i)}function l(a,b,c,d,e,f,g,h){var i,j,k=a[V],l=k.options.onMove;return i=X.createEvent("Event"),i.initEvent("move",!0,!0),i.to=b,i.from=a,i.dragged=c,i.draggedRect=d,i.related=e||b,i.relatedRect=f||b.getBoundingClientRect(),i.willInsertAfter=h,a.dispatchEvent(i),l&&(j=l.call(k,i,g)),j}function m(a){a.draggable=!1}function n(){ea=!1}function o(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5||b.clientX-(d.left+d.width)>5}function p(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function q(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"===a.nodeName.toUpperCase()||">*"!==b&&!r(a,b)||c++;return c}function r(a,b){if(a){b=b.split(".");var c=b.shift().toUpperCase(),d=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");return!(""!==c&&a.nodeName.toUpperCase()!=c||b.length&&((" "+a.className+" ").match(d)||[]).length!=b.length)}return!1}function s(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,Z(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function t(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function u(a){return _&&_.dom?_.dom(a).cloneNode(!0):$?$(a).clone(!0)[0]:a.cloneNode(!0)}function v(a){for(var b=a.getElementsByTagName("input"),c=b.length;c--;){var d=b[c];d.checked&&ha.push(d)}}function w(a){return Z(a,0)}function x(a){return clearTimeout(a)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S={},T=/\s+/g,U=/left|right|inline/,V="Sortable"+(new Date).getTime(),W=window,X=W.document,Y=W.parseInt,Z=W.setTimeout,$=W.jQuery||W.Zepto,_=W.Polymer,aa=!1,ba=!1,ca="draggable"in X.createElement("div"),da=function(a){return!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&(a=X.createElement("x"),a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents)}(),ea=!1,fa=Math.abs,ga=Math.min,ha=[],ia=[],ja=s(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h,i,j=c[V],k=b.scrollSensitivity,l=b.scrollSpeed,m=a.clientX,n=a.clientY,o=window.innerWidth,p=window.innerHeight;if(G!==c&&(F=b.scroll,G=c,H=b.scrollFn,F===!0)){F=c;do if(F.offsetWidth<F.scrollWidth||F.offsetHeight<F.scrollHeight)break;while(F=F.parentNode)}F&&(d=F,e=F.getBoundingClientRect(),f=(fa(e.right-m)<=k)-(fa(e.left-m)<=k),g=(fa(e.bottom-n)<=k)-(fa(e.top-n)<=k)),f||g||(f=(o-m<=k)-(m<=k),g=(p-n<=k)-(n<=k),(f||g)&&(d=W)),S.vx===f&&S.vy===g&&S.el===d||(S.el=d,S.vx=f,S.vy=g,clearInterval(S.pid),d&&(S.pid=setInterval(function(){return i=g?g*l:0,h=f?f*l:0,"function"==typeof H?H.call(j,h,i,a):void(d===W?W.scrollTo(W.pageXOffset+h,W.pageYOffset+i):(d.scrollTop+=i,d.scrollLeft+=h))},24)))}},30),ka=function(a){function b(a,b){return void 0!==a&&a!==!0||(a=c.name),"function"==typeof a?a:function(c,d){var e=d.options.group.name;return b?a:a&&(a.join?a.indexOf(e)>-1:e==a)}}var c={},d=a.group;d&&"object"==typeof d||(d={name:d}),c.name=d.name,c.checkPull=b(d.pull,!0),c.checkPut=b(d.put),c.revertClone=d.revertClone,a.group=c};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){ba=!1,aa={capture:!1,passive:ba}}}))}catch(a){}return a.prototype={constructor:a,_onTapStart:function(a){var b,d=this,e=this.el,f=this.options,g=f.preventOnFilter,h=a.type,i=a.touches&&a.touches[0],j=(i||a).target,l=a.target.shadowRoot&&a.path&&a.path[0]||j,m=f.filter;if(v(e),!y&&!(/mousedown|pointerdown/.test(h)&&0!==a.button||f.disabled)&&!l.isContentEditable&&(j=c(j,f.draggable,e),j&&E!==j)){if(b=q(j,f.draggable),"function"==typeof m){if(m.call(this,a,j,this))return k(d,l,"filter",j,e,e,b),void(g&&a.preventDefault())}else if(m&&(m=m.split(",").some(function(a){if(a=c(l,a.trim(),e))return k(d,a,"filter",j,e,e,b),!0})))return void(g&&a.preventDefault());f.handle&&!c(l,f.handle,e)||this._prepareDragStart(a,i,j,b)}},_prepareDragStart:function(a,b,c,d){var e,g=this,i=g.el,l=g.options,n=i.ownerDocument;c&&!y&&c.parentNode===i&&(P=a,C=i,y=c,z=y.parentNode,D=y.nextSibling,E=c,N=l.group,L=d,this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,y.style["will-change"]="all",e=function(){g._disableDelayedDrag(),y.draggable=g.nativeDraggable,h(y,l.chosenClass,!0),g._triggerDragStart(a,b),k(g,C,"choose",y,C,C,L)},l.ignore.split(",").forEach(function(a){j(y,a.trim(),m)}),f(n,"mouseup",g._onDrop),f(n,"touchend",g._onDrop),f(n,"touchcancel",g._onDrop),f(n,"selectstart",g),l.supportPointer&&f(n,"pointercancel",g._onDrop),l.delay?(f(n,"mouseup",g._disableDelayedDrag),f(n,"touchend",g._disableDelayedDrag),f(n,"touchcancel",g._disableDelayedDrag),f(n,"mousemove",g._disableDelayedDrag),f(n,"touchmove",g._disableDelayedDrag),l.supportPointer&&f(n,"pointermove",g._disableDelayedDrag),g._dragStartTimer=Z(e,l.delay)):e())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),g(a,"mouseup",this._disableDelayedDrag),g(a,"touchend",this._disableDelayedDrag),g(a,"touchcancel",this._disableDelayedDrag),g(a,"mousemove",this._disableDelayedDrag),g(a,"touchmove",this._disableDelayedDrag),g(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(a,b){b=b||("touch"==a.pointerType?a:null),b?(P={target:y,clientX:b.clientX,clientY:b.clientY},this._onDragStart(P,"touch")):this.nativeDraggable?(f(y,"dragend",this),f(C,"dragstart",this._onDragStart)):this._onDragStart(P,!0);try{X.selection?w(function(){X.selection.empty()}):window.getSelection().removeAllRanges()}catch(a){}},_dragStarted:function(){if(C&&y){var b=this.options;h(y,b.ghostClass,!0),h(y,b.dragClass,!1),a.active=this,k(this,C,"start",y,C,C,L)}else this._nulling()},_emulateDragOver:function(){if(Q){if(this._lastX===Q.clientX&&this._lastY===Q.clientY)return;this._lastX=Q.clientX,this._lastY=Q.clientY,da||i(A,"display","none");var a=X.elementFromPoint(Q.clientX,Q.clientY),b=a,c=ia.length;if(a&&a.shadowRoot&&(a=a.shadowRoot.elementFromPoint(Q.clientX,Q.clientY),b=a),b)do{if(b[V]){for(;c--;)ia[c]({clientX:Q.clientX,clientY:Q.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);da||i(A,"display","")}},_onTouchMove:function(b){if(P){var c=this.options,d=c.fallbackTolerance,e=c.fallbackOffset,f=b.touches?b.touches[0]:b,g=f.clientX-P.clientX+e.x,h=f.clientY-P.clientY+e.y,j=b.touches?"translate3d("+g+"px,"+h+"px,0)":"translate("+g+"px,"+h+"px)";if(!a.active){if(d&&ga(fa(f.clientX-this._lastX),fa(f.clientY-this._lastY))<d)return;this._dragStarted()}this._appendGhost(),R=!0,Q=f,i(A,"webkitTransform",j),i(A,"mozTransform",j),i(A,"msTransform",j),i(A,"transform",j),b.preventDefault()}},_appendGhost:function(){if(!A){var a,b=y.getBoundingClientRect(),c=i(y),d=this.options;A=y.cloneNode(!0),h(A,d.ghostClass,!1),h(A,d.fallbackClass,!0),h(A,d.dragClass,!0),i(A,"top",b.top-Y(c.marginTop,10)),i(A,"left",b.left-Y(c.marginLeft,10)),i(A,"width",b.width),i(A,"height",b.height),i(A,"opacity","0.8"),i(A,"position","fixed"),i(A,"zIndex","100000"),i(A,"pointerEvents","none"),d.fallbackOnBody&&X.body.appendChild(A)||C.appendChild(A),a=A.getBoundingClientRect(),i(A,"width",2*b.width-a.width),i(A,"height",2*b.height-a.height)}},_onDragStart:function(a,b){var c=this,d=a.dataTransfer,e=c.options;c._offUpEvents(),N.checkPull(c,c,y,a)&&(B=u(y),B.draggable=!1,B.style["will-change"]="",i(B,"display","none"),h(B,c.options.chosenClass,!1),c._cloneId=w(function(){C.insertBefore(B,y),k(c,C,"clone",y)})),h(y,e.dragClass,!0),b?("touch"===b?(f(X,"touchmove",c._onTouchMove),f(X,"touchend",c._onDrop),f(X,"touchcancel",c._onDrop),e.supportPointer&&(f(X,"pointermove",c._onTouchMove),f(X,"pointerup",c._onDrop))):(f(X,"mousemove",c._onTouchMove),f(X,"mouseup",c._onDrop)),c._loopId=setInterval(c._emulateDragOver,50)):(d&&(d.effectAllowed="move",e.setData&&e.setData.call(c,d,y)),f(X,"drop",c),c._dragStartId=w(c._dragStarted))},_onDragOver:function(d){var e,f,g,h,j=this.el,k=this.options,m=k.group,p=a.active,q=N===m,r=!1,s=k.sort;if(void 0!==d.preventDefault&&(d.preventDefault(),!k.dragoverBubble&&d.stopPropagation()),!y.animated&&(R=!0,p&&!k.disabled&&(q?s||(h=!C.contains(y)):O===this||(p.lastPullMode=N.checkPull(this,p,y,d))&&m.checkPut(this,p,y,d))&&(void 0===d.rootEl||d.rootEl===this.el))){if(ja(d,k,this.el),ea)return;if(e=c(d.target,k.draggable,j),f=y.getBoundingClientRect(),O!==this&&(O=this,r=!0),h)return b(p,!0),z=C,void(B||D?C.insertBefore(y,B||D):s||C.appendChild(y));if(0===j.children.length||j.children[0]===A||j===d.target&&o(j,d)){if(0!==j.children.length&&j.children[0]!==A&&j===d.target&&(e=j.lastElementChild),e){if(e.animated)return;g=e.getBoundingClientRect()}b(p,q),l(C,j,y,f,e,g,d)!==!1&&(y.contains(j)||(j.appendChild(y),z=j),this._animate(f,y),e&&this._animate(g,e))}else if(e&&!e.animated&&e!==y&&void 0!==e.parentNode[V]){I!==e&&(I=e,J=i(e),K=i(e.parentNode)),g=e.getBoundingClientRect();var t=g.right-g.left,u=g.bottom-g.top,v=U.test(J.cssFloat+J.display)||"flex"==K.display&&0===K["flex-direction"].indexOf("row"),w=e.offsetWidth>y.offsetWidth,x=e.offsetHeight>y.offsetHeight,E=(v?(d.clientX-g.left)/t:(d.clientY-g.top)/u)>.5,F=e.nextElementSibling,G=!1;if(v){var H=y.offsetTop,L=e.offsetTop;G=H===L?e.previousElementSibling===y&&!w||E&&w:e.previousElementSibling===y||y.previousElementSibling===e?(d.clientY-g.top)/u>.5:L>H}else r||(G=F!==y&&!x||E&&x);var M=l(C,j,y,f,e,g,d,G);M!==!1&&(1!==M&&M!==-1||(G=1===M),ea=!0,Z(n,30),b(p,q),y.contains(j)||(G&&!F?j.appendChild(y):e.parentNode.insertBefore(y,G?F:e)),z=y.parentNode,this._animate(f,y),this._animate(g,e))}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();1===a.nodeType&&(a=a.getBoundingClientRect()),i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=Z(function(){i(b,"transition",""),i(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;g(X,"touchmove",this._onTouchMove),g(X,"pointermove",this._onTouchMove),g(a,"mouseup",this._onDrop),g(a,"touchend",this._onDrop),g(a,"pointerup",this._onDrop),g(a,"touchcancel",this._onDrop),g(a,"pointercancel",this._onDrop),g(a,"selectstart",this)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(S.pid),clearTimeout(this._dragStartTimer),x(this._cloneId),x(this._dragStartId),g(X,"mouseover",this),g(X,"mousemove",this._onTouchMove),this.nativeDraggable&&(g(X,"drop",this),g(c,"dragstart",this._onDragStart)),this._offUpEvents(),b&&(R&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation()),A&&A.parentNode&&A.parentNode.removeChild(A),C!==z&&"clone"===a.active.lastPullMode||B&&B.parentNode&&B.parentNode.removeChild(B),y&&(this.nativeDraggable&&g(y,"dragend",this),m(y),y.style["will-change"]="",h(y,this.options.ghostClass,!1),h(y,this.options.chosenClass,!1),k(this,C,"unchoose",y,z,C,L),C!==z?(M=q(y,d.draggable),M>=0&&(k(null,z,"add",y,z,C,L,M),k(this,C,"remove",y,z,C,L,M),k(null,z,"sort",y,z,C,L,M),k(this,C,"sort",y,z,C,L,M))):y.nextSibling!==D&&(M=q(y,d.draggable),M>=0&&(k(this,C,"update",y,z,C,L,M),k(this,C,"sort",y,z,C,L,M))),a.active&&(null!=M&&M!==-1||(M=L),k(this,C,"end",y,z,C,L,M),this.save()))),this._nulling()},_nulling:function(){C=y=z=A=D=B=E=F=G=P=Q=R=M=I=J=O=N=a.active=null,ha.forEach(function(a){a.checked=!0}),ha.length=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragover":case"dragenter":y&&(this._onDragOver(a),e(a));break;case"mouseover":this._onDrop(a);break;case"selectstart":a.preventDefault()}},toArray:function(){for(var a,b=[],d=this.el.children,e=0,f=d.length,g=this.options;e<f;e++)a=d[e],c(a,g.draggable,this.el)&&b.push(a.getAttribute(g.dataIdAttr)||p(a));return b},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,e){var f=d.children[e];c(f,this.options.draggable,d)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return c(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:(c[a]=b,void("group"===a&&ka(c)))},destroy:function(){var a=this.el;a[V]=null,g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),ia.splice(ia.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},f(X,"touchmove",function(b){a.active&&b.preventDefault()}),a.utils={on:f,off:g,css:i,find:j,is:function(a,b){return!!c(a,b,a)},extend:t,throttle:s,closest:c,toggleClass:h,clone:u,index:q,nextTick:w,cancelNextTick:x},a.create=function(b,c){return new a(b,c)},a.version="1.7.0",a});} },
            { loader: "script", url: "smk/tool/directions/lib/vuedraggable-2.16.0.min.js", load: function () { console.debug( "[smk/tool/directions/lib/vuedraggable-2.16.0.min.js]" ); "use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var _extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};!function(){function t(t,n,e){return void 0==e?t:(t=null==t?{}:t,t[n]=e,t)}function n(n){function e(t){t.parentElement.removeChild(t)}function o(t,n,e){var o=0===e?t.children[0]:t.children[e-1].nextSibling;t.insertBefore(n,o)}function i(t,n){return t.map(function(t){return t.elm}).indexOf(n)}function r(t,n,e){if(!t)return[];var o=t.map(function(t){return t.elm}),i=[].concat(_toConsumableArray(n)).map(function(t){return o.indexOf(t)});return e?i.filter(function(t){return t!==-1}):i}function s(t,n){var e=this;this.$nextTick(function(){return e.$emit(t.toLowerCase(),n)})}function a(t){var n=this;return function(e){null!==n.realList&&n["onDrag"+t](e),s.call(n,t,e)}}var l=["Start","Add","Remove","Update","End"],u=["Choose","Sort","Filter","Clone"],c=["Move"].concat(l,u).map(function(t){return"on"+t}),d=null,f={options:Object,list:{type:Array,required:!1,"default":null},value:{type:Array,required:!1,"default":null},noTransitionOnDrag:{type:Boolean,"default":!1},clone:{type:Function,"default":function(t){return t}},element:{type:String,"default":"div"},move:{type:Function,"default":null},componentData:{type:Object,required:!1,"default":null}},h={name:"draggable",props:f,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(n){var e=this.$slots["default"];if(e&&1===e.length){var o=e[0];o.componentOptions&&"transition-group"===o.componentOptions.tag&&(this.transitionMode=!0)}var i=e,r=this.$slots.footer;r&&(i=e?[].concat(_toConsumableArray(e),_toConsumableArray(r)):[].concat(_toConsumableArray(r)));var s=null,a=function(n,e){s=t(s,n,e)};if(a("attrs",this.$attrs),this.componentData){var l=this.componentData,u=l.on,c=l.props;a("on",u),a("props",c)}return n(this.element,s,i)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var e={};l.forEach(function(n){e["on"+n]=a.call(t,n)}),u.forEach(function(n){e["on"+n]=s.bind(t,n)});var o=_extends({},this.options,e,{onMove:function(n,e){return t.onDragMove(n,e)}});!("draggable"in o)&&(o.draggable=">*"),this._sortable=new n(this.rootContainer,o),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var n in t)c.indexOf(n)==-1&&this._sortable.option(n,t[n])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots["default"];var t=this.$slots["default"];return this.transitionMode?t[0].child.$slots["default"]:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=r(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var n=i(this.getChildrenNodes()||[],t);if(n===-1)return null;var e=this.realList[n];return{index:n,element:e}},getUnderlyingPotencialDraggableComponent:function(t){var n=t.__vue__;return n&&n.$options&&"transition-group"===n.$options._componentTag?n.$parent:n},emitChanges:function(t){var n=this;this.$nextTick(function(){n.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var n=[].concat(_toConsumableArray(this.value));t(n),this.$emit("input",n)}},spliceList:function m(){var t=arguments,m=function(n){return n.splice.apply(n,t)};this.alterList(m)},updatePosition:function p(t,n){var p=function(e){return e.splice(n,0,e.splice(t,1)[0])};this.alterList(p)},getRelatedContextFromMoveEvent:function(t){var n=t.to,e=t.related,o=this.getUnderlyingPotencialDraggableComponent(n);if(!o)return{component:o};var i=o.realList,r={list:i,component:o};if(n!==e&&i&&o.getUnderlyingVm){var s=o.getUnderlyingVm(e);if(s)return _extends(s,r)}return r},getVmIndex:function(t){var n=this.visibleIndexes,e=n.length;return t>e-1?e:n[t]},getComponent:function(){return this.$slots["default"][0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var n=this.getChildrenNodes();n[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),d=t.item},onDragAdd:function(t){var n=t.item._underlying_vm_;if(void 0!==n){e(t.item);var o=this.getVmIndex(t.newIndex);this.spliceList(o,0,n),this.computeIndexes();var i={element:n,newIndex:o};this.emitChanges({added:i})}},onDragRemove:function(t){if(o(this.rootContainer,t.item,t.oldIndex),this.isCloning)return void e(t.clone);var n=this.context.index;this.spliceList(n,1);var i={element:this.context.element,oldIndex:n};this.resetTransitionData(n),this.emitChanges({removed:i})},onDragUpdate:function(t){e(t.item),o(t.from,t.item,t.oldIndex);var n=this.context.index,i=this.getVmIndex(t.newIndex);this.updatePosition(n,i);var r={element:this.context.element,oldIndex:n,newIndex:i};this.emitChanges({moved:r})},computeFutureIndex:function(t,n){if(!t.element)return 0;var e=[].concat(_toConsumableArray(n.to.children)).filter(function(t){return"none"!==t.style.display}),o=e.indexOf(n.related),i=t.component.getVmIndex(o),r=e.indexOf(d)!=-1;return r||!n.willInsertAfter?i:i+1},onDragMove:function(t,n){var e=this.move;if(!e||!this.realList)return!0;var o=this.getRelatedContextFromMoveEvent(t),i=this.context,r=this.computeFutureIndex(o,t);return _extends(i,{futureIndex:r}),_extends(t,{relatedContext:o,draggedContext:i}),e(t,n)},onDragEnd:function(t){this.computeIndexes(),d=null}}};return h}if(Array.from||(Array.from=function(t){return[].slice.call(t)}),(typeof exports == "object")){var e=require("sortablejs");module.exports=n(e)}else if("function"==typeof define&&define.amd)define(["sortablejs"],function(t){return n(t)});else if(window&&window.Vue&&window.Sortable){var o=n(window.Sortable);Vue.component("draggable",o)}}();} }
        ] }
    );
    include.tag( "tool-dropdown-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/dropdown/config/tool-dropdown-config.js", load: function () { console.debug( "[smk/tool/dropdown/config/tool-dropdown-config.js]" ); include.module("tool-dropdown-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"dropdown",enabled:!1}))))});} }
        ] }
    );
    include.tag( "tool-identify",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/identify/panel-identify.html", load:"<tool-panel class=\"smk-identify-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-select\"\n            v-bind:disabled=\"busy\"\n            v-if=\"tool.select && layers.length > 1 && command.select\"\n            v-on:click=\"$$emit( 'add-all' )\"\n        >Add all to selection</command-button>\n\n        <enter-number class=\"smk-radius\"\n            v-bind:disabled=\"busy\"\n            v-if=\"command.radius\"\n            v-bind:value=\"formatNumber( radius, 3 )\"\n            v-on:change=\"!busy && $$emit( 'change', { radius: $event } )\"\n        >Maximum distance\n            <template slot=\"after-input\">\n                <select\n                    v-bind:value=\"radiusUnit\"\n                    v-on:change=\"$$emit( 'changeUnit', { radiusUnit: $event.target.value } )\"\n                    v-bind:disabled=\"busy || !command.radiusUnit\"\n                >\n                    <option value=\"px\">pixels</option>\n                    <option value=\"m\">meters</option>\n                    <option value=\"km\">kilometers</option>\n                </select>\n            </template>\n        </enter-number>\n\n        <command-button class=\"smk-current\"\n            title=\"Identify features near current location\"\n            v-bind:disabled=\"busy\"\n            v-if=\"command.nearBy\"\n            v-on:click=\"$$emit( 'current-location' )\"\n            icon=\"gps_fixed\"\n        ></command-button>\n    </template>\n\n    <feature-list\n        v-bind:layers=\"layers\"\n        v-bind:highlightId=\"highlightId\"\n        v-on:active=\"$$emit( 'active', $event )\"\n        v-on:hover=\"$$emit( 'hover', $event )\"\n    ></feature-list>\n\n    <div v-if=\"layers.length == 0\">\n        Click on the map to identify features under the clicked point.\n    </div>\n</tool-panel>" },
            { loader: "script", url: "smk/tool/identify/tool-identify-feature.js", load: function () { console.debug( "[smk/tool/identify/tool-identify-feature.js]" ); include.module("tool-identify.tool-identify-feature-js",["component-tool-panel-feature","tool.tool-panel-feature-js"],function(e){"use strict";return SMK.TYPE.Tool.define("IdentifyFeatureTool",function(){SMK.TYPE.ToolPanel.call(this,"tool-panel-feature"),SMK.TYPE.ToolPanelFeature.call(this,function(e){return e.$viewer.identified}),this.parentId="IdentifyListTool"},function(i){var o,r=this;r.changedActive(function(){r.active?(r.featureSet.highlight(),Vue.nextTick(function(){i.getToolById(r.parentId).visible=!0})):r.featureSet.pick()}),i.getToolById("IdentifyListTool").startedIdentify(function(){i.getToolById(r.parentId).active=!0}),i.on(this.id,{zoom:function(){r.featureSet.zoomTo(o[r.resultPosition])},select:function(){var e=r.featureSet.get(o[r.resultPosition]);i.$viewer.selected.add(e.layerId,[e])},directions:console.log,"move-previous":function(){r.featureSet.pick(o[(r.resultPosition+r.resultCount-1)%r.resultCount])},"move-next":function(){r.featureSet.pick(o[(r.resultPosition+1)%r.resultCount])}}),r.featureSet.addedFeatures(function(e){r.resultCount=r.featureSet.getStats().featureCount,o=Object.keys(r.featureSet.featureSet)}),r.featureSet.clearedFeatures(function(e){r.resultCount=0}),r.featureSet.pickedFeature(function(e){if(!e.feature)return r.feature=null,void(r.layer=null);r.active=!0;var t=i.$viewer.layerId[e.feature.layerId];r.layer={id:e.feature.layerId,title:t.config.title,attributes:t.config.attributes&&t.config.attributes.map(function(e){return{visible:e.visible,title:e.title,name:e.name,format:e.format,value:e.value}})},r.feature={id:e.feature.id,title:e.feature.title,properties:Object.assign({},e.feature.properties)},r.setAttributeComponent(t,e.feature),r.resultPosition=o.indexOf(e.feature.id),i.$viewer.panToFeature(e.feature)})})});} },
            { loader: "script", url: "smk/tool/identify/tool-identify-list.js", load: function () { console.debug( "[smk/tool/identify/tool-identify-list.js]" ); include.module("tool-identify.tool-identify-list-js",["tool.tool-base-js","tool.tool-widget-js","tool.tool-feature-list-js","tool.tool-internal-layers-js","component-feature-list","component-command-button","component-enter-input","tool-identify.panel-identify-html"],function(e){"use strict";return Vue.component("identify-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("identify-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-identify.panel-identify-html"],props:["tool","layers","highlightId","command","radius","radiusUnit"],methods:{formatNumber:function(e,t){var i=Math.floor(e),n=e-i;return i.toString()+n.toFixed(t).substr(1)}}}),SMK.TYPE.Tool.define("IdentifyListTool",{construct:function(){SMK.TYPE.ToolWidget.call(this,"identify-widget"),SMK.TYPE.ToolPanel.call(this,"identify-panel"),SMK.TYPE.ToolFeatureList.call(this,function(e){return e.$viewer.identified}),SMK.TYPE.ToolInternalLayers.call(this),this.defineProp("tool"),this.defineProp("command"),this.defineProp("radius"),this.defineProp("radiusUnit"),this.tool={}},initialize:function(i){var n=this;this.tool=i.getToolTypesAvailable(),this.changedGroup(function(){n.group?n.displaySearchArea():(n.busy=!1,n.searchArea=null,n.searchLocation=null,n.trackMouse=!1,n.clearMarker(),n.setInternalLayerVisible(!1),i.$viewer.identifyFeatures(),i.$viewer.identified.clear(),i.$viewer.identified.pick())}),n.changedActive(function(){if(n.active){if(SMK.HANDLER.get(n.id,"activated")(i,n),n.onActivate)switch(n.onActivate){case"current-location":i.emit(n.id,"current-location")}}else SMK.HANDLER.get(n.id,"deactivated")(i,n)}),i.$viewer.handlePick(0,function(e){return n.startIdentify(e).then(function(){return!0},function(){return!0})}),i.$viewer.handlePick(2,function(e){if(n.active)return n.startIdentify(e).then(function(){return!0},function(){return!0})}),this.getRadiusMeters=function(){return i.$viewer.distanceToMeters(n.radius,n.radiusUnit)},this.setRadiusMeters=function(e){n.radius=i.$viewer.distanceFromMeters(e,n.radiusUnit)},this.identifyStarts=0,this.startIdentify=function(e){if(this.getRadiusMeters()<.1)return n.showStatusMessage("Identify radius must be > 0","warning"),this.busy=!1,this.searchArea=null,this.searchLocation=null,this.trackMouse=!1,this.clearMarker(),this.setInternalLayerVisible(!1),i.$viewer.identifyFeatures(),i.$viewer.identified.clear(),i.$viewer.identified.pick(),Promise.resolve();n.busy=!0,this.searchLocation=e,n.showStatusMessage("Fetching features","progress",null),this.displaySearchArea(),this.identifyStarts+=1,this.startedIdentify();var t=this.makeSearchLocationCircle(null,16);return i.$viewer.identifyFeatures(e,t).then(function(){if(n.busy=!1,i.$viewer.identified.isEmpty())i.$sidepanel.setExpand(0),n.setInternalLayerVisible(!1),n.showStatusMessage("No features found","warning");else{n.active=!0;var e=i.$viewer.identified.getStats(),t=SMK.UTIL.grammaticalNumber(e.layerCount,null,null,"on {} layers");""!=t&&(t="<div>"+t+"</div>"),n.showStatusMessage("<div>Identified "+SMK.UTIL.grammaticalNumber(e.featureCount,null,"a feature","{} features")+"</div>"+t),1==e.featureCount&&i.$viewer.identified.pick(n.firstId)}n.finishedIdentify()}).catch(function(e){console.warn("identify failed",e),e.discarded?1==n.identifyStarts&&n.showStatusMessage():(n.setInternalLayerVisible(!1),n.showStatusMessage(e.toString(),"error"))}).finally(function(){n.identifyStarts-=1})},this.restartIdentify=function(){n.searchLocation&&this.startIdentify(n.searchLocation)},i.on(this.id,{"add-all":function(e){n.layers.map(function(e){return[e.id,e.features.map(function(e){return i.$viewer.identified.get(e.id)})]}).forEach(function(e){i.$viewer.selected.add.apply(i.$viewer.selected,e)})},clear:function(e){n.showStatusMessage("Click on map to identify features.")},"swipe-up":function(e){i.$sidepanel.setExpand(2)},"swipe-down":function(e){i.$sidepanel.incrExpand(-1)},change:function(e,t){Object.assign(n,e),n.restartIdentify()},changeUnit:function(e,t){var i=n.getRadiusMeters();Object.assign(n,e),n.setRadiusMeters(i)},"current-location":function(){return n.busy=!0,n.showStatusMessage("Finding current location...","progress",null),i.$viewer.getCurrentLocation().then(function(e){return n.busy=!1,n.showStatusMessage(),n.startIdentify({map:e}).then(function(){i.$viewer.panToFeature(n.searchArea,!0)})}).catch(function(){n.busy=!1,n.showStatusMessage("Unable to get current location","error")})}}),this.bufferDistance=function(){return i.$viewer.distanceToMeters(20,"px")},this.trackMouse=!1},events:["startedIdentify","finishedIdentify"],methods:{makeSearchLocationCircle:function(e,t){return turf.circle([this.searchLocation.map.longitude,this.searchLocation.map.latitude],(e||this.getRadiusMeters())/1e3,{steps:t||64})},closestPointOnBoundary:function(e){if(this.searchArea){var t=turf.polygonToLine(this.searchArea),i=turf.nearestPointOnLine(t,[e.lng,e.lat]);return[i.geometry.coordinates[1],i.geometry.coordinates[0]]}},displaySearchArea:function(){this.trackMouse=!1,this.searchLocation&&(this.searchArea=this.makeSearchLocationCircle(),this.setInternalLayerVisible(!0),this.displayEditSearchArea(),this.internalLayer["@identify-search-area"].clear(),this.internalLayer["@identify-search-area"].load(this.searchArea),this.internalLayer["@identify-location"].clear(),this.internalLayer["@identify-location"].load(turf.point([this.searchLocation.map.longitude,this.searchLocation.map.latitude])),this.trackMouse=!0)},displayEditSearchArea:function(e){this.internalLayer["@identify-edit-search-area"].clear(),e&&this.internalLayer["@identify-edit-search-area"].load(e)}}})});} },
            { loader: "style", url: "smk/tool/identify/tool-identify.css", load: "/* [smk/tool/identify/tool-identify.css] */\n.smk-identify-panel .smk-radius .smk-input input{min-width:5em}.smk-identify-panel .smk-radius .smk-input select{background-color:transparent;border:none}" },
            { loader: "script", url: "smk/tool/identify/tool-identify.js", load: function () { console.debug( "[smk/tool/identify/tool-identify.js]" ); include.module("tool-identify",["tool-identify.tool-identify-list-js","tool-identify.tool-identify-feature-js"],function(t){"use strict";return SMK.TYPE.Tool.defineComposite([t["tool-identify.tool-identify-list-js"],t["tool-identify.tool-identify-feature-js"]])});} }
        ] }
    );
    include.tag( "tool-identify-config",
        { loader: "group", tags: [
            { loader: "asset", url: "smk/tool/identify/config/crosshair.png" },
            { loader: "script", url: "smk/tool/identify/config/tool-identify-config.js", load: function () { console.debug( "[smk/tool/identify/config/tool-identify-config.js]" ); include.module("tool-identify-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js","tool-config.tool-panel-feature-config-js","tool-identify-config.crosshair-png"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"](o["tool-config.tool-panel-feature-config-js"]({type:"identify",enabled:!1,order:5,position:"list-menu",icon:"info_outline",title:"Identify Features",command:{select:!0,radius:!1,radiusUnit:!1,nearBy:!0},radius:5,radiusUnit:"px",internalLayers:[{id:"@identify-search-area",title:"Identify Search Area",style:[{stroke:!1,fill:!0,fillColor:"white",fillOpacity:.5},{strokeWidth:6,strokeColor:"black",strokeOpacity:1,strokeCap:"butt",strokeDashes:"6,6",strokeDashOffset:6},{strokeWidth:6,strokeColor:"white",strokeOpacity:1,strokeCap:"butt",strokeDashes:"6,6"}],legend:{line:!0}},{id:"@identify-location",title:"Identify Location",style:{markerUrl:o["tool-identify-config.crosshair-png"],markerSize:[40,40],markerOffset:[20,20]},legend:{point:!0}},{id:"@identify-edit-search-area",title:"Identify Edit Search Area",style:[{strokeWidth:3,strokeColor:"red",strokeOpacity:1}],legend:{line:!0}}]})))))});} }
        ] }
    );
    include.tag( "tool-identify-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/identify/tool-identify-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/identify/tool-identify-esri3d.js]" ); include.module("tool-identify-esri3d",["esri3d","types-esri3d","util-esri3d","tool-identify","feature-list-esri3d"],function(e){"use strict";var i=SMK.TYPE.Esri3d;SMK.TYPE.IdentifyTool.prototype.styleFeature=function(e){return Object.assign({strokeColor:"black",strokeWidth:8,strokeOpacity:.8,fillColor:"white",fillOpacity:.5},this.style,e)},SMK.TYPE.IdentifyTool.prototype.afterInitialize.push(function(t){var r=this;this.identifyLayer=new i.layers.GraphicsLayer({visible:!1}),t.$viewer.map.add(this.identifyLayer),this.identifyPlaceholderLayer=new i.layers.GraphicsLayer({visible:!1}),t.$viewer.map.add(this.identifyPlaceholderLayer),this.changedActive(function(){r.identifyLayer.visible=r.active,r.identifyPlaceholderLayer.visible=r.active}),t.$viewer.changedPopup(function(e){r.active&&(r.identifyLayer.visible=!t.$viewer.isPopupVisible(),r.identifyPlaceholderLayer.visible=t.$viewer.isPopupVisible())}),t.$viewer.handlePick(3,function(e){if(r.active)return t.$viewer.view.hitTest(e.screen).then(function(e){if(0!=e.results.length&&e.results[0].graphic&&e.results[0].graphic.attributes.$identifyMarker)return t.$viewer.identified.pick(r.firstId),!0})}),t.$viewer.startedIdentify(function(e){r.identifyLayer.removeAll(),r.identifyPlaceholderLayer.removeAll(),r.clickLocation=new i.Graphic({geometry:{type:"point",latitude:e.location.latitude,longitude:e.location.longitude},attributes:{$identifyMarker:0},symbol:{type:"point-3d",symbolLayers:[{type:"icon",size:"10px",anchor:"center",material:{color:"white"},resource:{primitive:"circle"},outline:{size:1,color:[0,0,0,.2]}}]}}),r.identifyPlaceholderLayer.add(r.clickLocation),r.identifyPlaceholderLayer.visible=!0}),t.$viewer.finishedIdentify(function(e){var i=t.$viewer.identified.getStats();r.clickLocation.symbol={type:"point-3d",symbolLayers:[{type:"text",material:{color:"black"},size:9,text:i.featureCount},{type:"icon",size:"30px",anchor:"center",material:{color:[0,0,0,.2]},resource:{primitive:"circle"}},{type:"icon",size:"25px",anchor:"center",material:{color:"white"},resource:{primitive:"circle"}}]},r.clickLocation.attributes.$identifyMarker=i.featureCount,r.identifyLayer.add(r.clickLocation)})}),SMK.TYPE.IdentifyTool.prototype.afterInitialize.push(e["feature-list-esri3d"])});} }
        ] }
    );
    include.tag( "tool-identify-leaflet",
        { loader: "group", tags: [
            { loader: "style", url: "smk/viewer-leaflet/tool/identify/tool-identify-leaflet.css", load: "/* [smk/viewer-leaflet/tool/identify/tool-identify-leaflet.css] */\n.smk-identify-cluster{background-color:#fff;border:1px solid #a9a9a9;box-shadow:0 3px 14px rgba(0,0,0,.4)}.smk-identify-cluster div{height:100%;display:flex;justify-content:center;align-items:center}.smk-identify-cluster-one{background-color:rgba(100%,100%,100%,.7);border-radius:20px;width:20px;height:20px;margin-top:-11px;margin-left:-11px}.smk-identify-cluster-many{border-radius:24px;width:24px;height:24px;margin-top:-13px;margin-left:-13px}.smk-map-frame .smk-drag-handle{border:2px solid #000;background-color:#fff}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/identify/tool-identify-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/identify/tool-identify-leaflet.js]" ); include.module("tool-identify-leaflet",["leaflet","tool-identify","tool-leaflet","tool-leaflet.tool-feature-list-leaflet-js"],function(a){"use strict";function l(e){return[e.lng,e.lat]}SMK.TYPE.IdentifyListTool.addInitializer(function(e){var i=this;a["tool-leaflet.tool-feature-list-leaflet-js"].call(this,e);var n,r=L.layerGroup().addTo(e.$viewer.map);this.clearMarker=function(){r.clearLayers()},e.$viewer.map.on("mousemove",function(e){if(i.trackMouse&&i.searchLocation&&!e.originalEvent.buttons){var a=e.target.layerPointToLatLng(e.layerPoint),t=1e3*turf.distance([i.searchLocation.map.longitude,i.searchLocation.map.latitude],l(a));if(Math.abs(t-i.getRadiusMeters())<i.bufferDistance()){var o=i.closestPointOnBoundary(a);n?n.setLatLng(o):(n=L.marker(o,{icon:L.divIcon({className:"smk-drag-handle",iconSize:[10,10],iconAnchor:[5,5]}),bubblingMouseEvents:!0,draggable:!0}).on("dragstart",function(e){i.trackMouse=!1,i.displayEditSearchArea(i.makeSearchLocationCircle(t))}).on("drag",function(e){var a=1e3*turf.distance([i.searchLocation.map.longitude,i.searchLocation.map.latitude],l(e.latlng));i.displayEditSearchArea(i.makeSearchLocationCircle(a))}).on("dragend",function(e){i.setRadiusMeters(1e3*turf.distance([i.searchLocation.map.longitude,i.searchLocation.map.latitude],l(e.target.getLatLng()))),i.restartIdentify()}),r.addLayer(n))}else n&&(n.remove(),n=null)}})})});} }
        ] }
    );
    include.tag( "tool-layers",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/layers/layer-display.html", load:"<div v-bind:class=\"[\n    'smk-display',\n    'smk-display-' + display.type,\n    display.class,\n    {\n        'smk-visible':   display.isVisible,\n        'smk-expanded':  display.isExpanded,\n        'smk-disabled': !display.isEnabled,\n        'smk-obscured': !display.isActuallyVisible,\n        'smk-metadata': !!display.metadataUrl\n    }\n]\">\n    <div class=\"smk-item\"\n        v-if=\"display.id != 'root' && display.showItem\"\n        v-bind:title=\"'id: ' + display.id\"\n        v-on:click=\"$$emit( display.type + '-click', display )\"\n    >\n        <i class=\"smk-folder-expand material-icons smk-command smk-icon\"\n            v-if=\"display.type == 'folder' && !inGroup\"\n            v-bind:title=\"'Expand ' + display.title\"\n        >{{ display.isExpanded ? 'arrow_drop_down' : 'arrow_right' }}</i>\n\n        <i class=\"smk-visibility material-icons smk-command smk-icon\"\n            v-if=\"!inGroup\"\n            v-bind:title=\"'Toggle visibility of \\'' + display.title + '\\'' + ( display.type == 'folder' ? '\\nSHIFT-click to toggle visibility on internal layers.' : '' ) \"\n            v-on:click.stop=\"!display.isInternal && $$emit( 'set-item-visible', { id: display.id, visible: !display.isVisible, deep: $event.shiftKey } )\"\n            v-bind:class=\"{ 'smk-disabled': display.isInternal }\"\n        >{{ display.isVisible && display.isEnabled ? glyph.visible : glyph.hidden }}</i>\n\n        <span class=\"smk-layer-title\"\n            v-if=\"!inGroup\"\n        >{{ display.title }}</span>\n\n        <div class=\"smk-legend\"\n            v-if=\"display.legends && ( display.showLegend && display.isActuallyVisible || display.alwaysShowLegend )\"\n        >\n            <div class=\"smk-legend-item\"\n                v-for=\"legend in display.legends\"\n            >\n                <img v-bind:src=\"legend.url\" v-bind:style=\"{ width: legend.width + 'px', height: legend.height + 'px' }\">\n                <span class=\"smk-legend-title\">{{ legend.title }}</span>\n            </div>\n        </div>\n\n        <i class=\"material-icons smk-metadata\"\n            v-if=\"display.metadataUrl && ( !inGroup || ( display.legends && ( display.showLegend && display.isActuallyVisible || display.alwaysShowLegend ) ) )\"\n            v-bind:title=\"'Link to metadata for \\'' + display.title + '\\' layer'\"\n        >open_in_new</i>\n    </div>\n\n    <layer-display\n        v-for=\"item in display.items\"\n        v-if=\"item.inFilter && display.isExpanded\"\n        v-bind:key=\"item.id\"\n        v-bind:id=\"id\"\n        v-bind:display=\"item\"\n        v-bind:glyph=\"glyph\"\n        v-bind:inGroup=\"inGroup || display.type == 'group'\"\n    ></layer-display>\n</div>\n" },
            { loader: "template", url: "smk/tool/layers/panel-layers.html", load:"<tool-panel class=\"smk-layers-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n    xv-bind:message=\"busy ? 'Loading data' : ( !contexts[ 0 ].items || contexts[ 0 ].items.length == 0 ) ? 'No layers are configured' : ''\"\n    xv-bind:status=\"busy ? 'progress' : ( !contexts[ 0 ].items || contexts[ 0 ].items.length == 0 ) ? 'warning' : ''\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <i class=\"smk-all-visibility material-icons smk-command smk-icon\"\n            v-if=\"command.allVisibility\"\n            v-bind:title=\"'Toggle visibility of all layers.\\nSHIFT-click to toggle visibility on each layer.'\"\n            v-on:click=\"$$emit( 'set-all-layers-visible', { visible: !allVisible, deep: $event.shiftKey } )\"\n        >{{ allVisible ? glyph.visible : glyph.hidden }}</i>\n\n        <enter-input class=\"smk-filter\"\n            placeholder=\"Filter layers\"\n            v-if=\"command.filter\"\n            v-bind:value=\"filter\"\n            v-on:change=\"$$emit( 'change', { filter: $event } )\"\n        ></enter-input>\n\n        <toggle-button class=\"smk-legend-toggle\"\n            v-if=\"command.legend\"\n            v-bind:value=\"legend\"\n            v-on:change=\"$$emit( 'change', { legend: $event } )\"\n        >Legend</toggle-button>\n    </template>\n\n    <layer-display\n        v-for=\"c, i in contexts\"\n        v-bind:key=\"'ctx-' + i\"\n        v-bind:id=\"id\"\n        v-bind:display=\"c\"\n        v-bind:glyph=\"glyph\"\n    ></layer-display>\n\n</tool-panel>" },
            { loader: "style", url: "smk/tool/layers/tool-layers.css", load: "/* [smk/tool/layers/tool-layers.css] */\n.smk-layers-panel .smk-commands .smk-all-visibility{order:60}.smk-layers-panel .smk-commands .smk-filter{flex-grow:1;order:70}.smk-layers-panel .smk-commands .smk-legend-toggle{order:80}.smk-layers-panel .smk-all-visibility{padding:0}.smk-layers-panel .smk-all-visibility.smk-some-visible{opacity:.5}.smk-layers-panel .smk-item{font-size:14px}.smk-layers-panel .smk-display .smk-display{padding-left:12px}.smk-layers-panel .smk-display-group .smk-display{padding-left:0}.smk-layers-panel .smk-display .smk-item{display:flex;align-items:center;position:relative}.smk-layers-panel .smk-display .smk-item .smk-folder-expand{position:absolute;left:-20px}.smk-layers-panel .smk-display .smk-item .smk-layer-title{display:inline-block;margin-left:5px;margin-top:5px;margin-bottom:5px;flex-grow:1}.smk-layers-panel .smk-display .smk-item .smk-metadata{display:none;font-size:18px;cursor:pointer}.smk-layers-panel .smk-display .smk-item:hover .smk-metadata{display:block}.smk-layers-panel .smk-display.smk-obscured .smk-layer-title{font-style:italic;color:gray}.smk-layers-panel .smk-display.smk-disabled .smk-layer-title{font-style:italic;color:gray;text-decoration:line-through;text-decoration-color:red}.smk-layers-panel .smk-display.smk-disabled .smk-visibility{opacity:.5}.smk-layers-panel .smk-display.smk-disabled .smk-visibility:hover{border:1px solid transparent}.smk-layers-panel .smk-legend{padding-left:12px;flex-grow:0}.smk-layers-panel .smk-legend .smk-legend-item{display:flex;justify-content:flex-start;align-items:center}.smk-layers-panel .smk-legend .smk-legend-item img{margin:2px}.smk-layers-panel .smk-legend .smk-legend-title{font-size:11px}.smk-layers-panel .smk-display .smk-folder-expand:hover{border:1px solid transparent}.smk-layers-panel .smk-display.smk-inline-legend .smk-visibility{order:0}.smk-layers-panel .smk-display.smk-inline-legend .smk-legend{order:1;padding-left:0;flex-grow:0}.smk-layers-panel .smk-display.smk-inline-legend .smk-layer-title{order:2}.smk-layers-panel .smk-display.smk-inline-legend .smk-metadata{order:3}.smk-layers-panel .smk-display.smk-inline-legend .smk-legend-title{display:none}" },
            { loader: "script", url: "smk/tool/layers/tool-layers.js", load: function () { console.debug( "[smk/tool/layers/tool-layers.js]" ); include.module("tool-layers",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-layers.panel-layers-html","tool-layers.layer-display-html","component-enter-input","component-toggle-button"],function(e){"use strict";return Vue.component("layer-display",{mixins:[SMK.COMPONENT.ToolEmit],template:e["tool-layers.layer-display-html"],props:{id:{type:String},display:{type:Object},glyph:{type:Object},inGroup:{type:Boolean,default:!1}}}),Vue.component("layers-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("layers-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-layers.panel-layers-html"],props:["contexts","allVisible","glyph","command","filter","legend"]}),SMK.TYPE.Tool.define("LayersTool",function(){SMK.TYPE.ToolWidget.call(this,"layers-widget"),SMK.TYPE.ToolPanel.call(this,"layers-panel"),this.defineProp("contexts"),this.defineProp("allVisible"),this.defineProp("glyph"),this.defineProp("command"),this.defineProp("filter"),this.defineProp("legend"),this.contexts=[],this.allVisible=!0,this.legend=!1},function(l){var n=this;this.display&&l.$viewer.setDisplayContextItems(this.type,this.display),n.changedActive(function(){n.active?(n.contexts=l.$viewer.getDisplayContexts(),SMK.HANDLER.get(n.id,"activated")(l,n)):SMK.HANDLER.get(n.id,"deactivated")(l,n)}),l.on(this.id,{activate:function(){n.enabled&&n.active&&(l.$viewer.setDisplayContextLegendsVisible(!0),n.legend||Vue.nextTick(function(){l.$viewer.setDisplayContextLegendsVisible(!1)}))},change:function(e){var i;if(Object.assign(n,e),l.$viewer.setDisplayContextLegendsVisible(n.legend),n.filter&&n.filter.trim()){var t=n.filter.trim();i=new RegExp(t.toLowerCase().split(/\s+/).map(function(e){return"(?=.*"+e+")"}).join(""),"i")}else i=/.*/;l.$viewer.displayContext.layers.setFilter(i)},"set-all-layers-visible":function(e){l.$viewer.displayContext.layers.setItemVisible(l.$viewer.displayContext.layers.root.id,e.visible,e.deep),l.$viewer.updateLayersVisible()},"set-item-visible":function(e){l.$viewer.displayContext.layers.setItemVisible(e.id,e.visible,e.deep),l.$viewer.updateLayersVisible()},"layer-click":function(e){e.metadataUrl&&window.open(e.metadataUrl,"_blank")},"folder-click":function(e){l.$viewer.setDisplayContextFolderExpanded(e.id,!e.isExpanded)},"group-click":function(e){},"swipe-up":function(e){l.$sidepanel.setExpand(2)},"swipe-down":function(e){l.$sidepanel.incrExpand(-1)}}),l.$viewer.changedLayerVisibility(function(){n.allVisible=l.$viewer.displayContext.layers.isItemVisible(l.$viewer.displayContext.layers.root.id)}),l.$viewer.startedLoading(function(e){n.busy=!0}),l.$viewer.finishedLoading(function(e){n.busy=!1})})});} }
        ] }
    );
    include.tag( "tool-layers-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/layers/config/tool-layers-config.js", load: function () { console.debug( "[smk/tool/layers/config/tool-layers-config.js]" ); include.module("tool-layers-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"layers",enabled:!1,order:3,position:["shortcut-menu","list-menu"],icon:"layers",title:"Layers",command:{allVisibility:!0,filter:!0,legend:!0},glyph:{visible:"visibility",hidden:"visibility_off"}}))))});} }
        ] }
    );
    include.tag( "tool-leaflet",
        { loader: "group", tags: [
            { loader: "asset", url: "smk/viewer-leaflet/tool/marker-icon-white.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/marker-shadow.png" },
            { loader: "script", url: "smk/viewer-leaflet/tool/tool-feature-list-clustering-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/tool-feature-list-clustering-leaflet.js]" ); include.module("tool-leaflet.tool-feature-list-clustering-leaflet-js",["leaflet","turf","tool-leaflet.tool-feature-list-leaflet-js"],function(t){"use strict";return function(e){var r=this;t["tool-leaflet.tool-feature-list-leaflet-js"].call(this,e),this.marker={},this.cluster=L.markerClusterGroup(Object.assign({singleMarkerMode:!0,zoomToBoundsOnClick:!1,spiderfyOnMaxZoom:!1,iconCreateFunction:function(e){var t=e.getChildCount();return new L.DivIcon({html:"<div><span>"+(1==t?"":999<t?"lots":t)+"</span></div>",className:"smk-identify-cluster smk-identify-cluster-"+(1==t?"one":"many"),iconSize:null})}},e.viewer.clusterOption)).on({clusterclick:function(e){var t=e.layer.getAllChildMarkers().map(function(e){return e.options.featureId});r.featureSet.pick(t[0],{cluster:!0,position:e.latlng})},click:function(e){r.featureSet.pick(e.layer.options.featureId,{cluster:!0,position:e.latlng})}}),r.changedVisible(function(){r.visible?r.cluster.addTo(e.$viewer.map):r.cluster.remove()}),r.featureSet.addedFeatures(function(e){e.features.forEach(function(e){var t;switch(turf.getType(e)){case"Point":t=L.GeoJSON.coordsToLatLng(e.geometry.coordinates);break;case"MultiPoint":e._identifyPoint&&(t=[e._identifyPoint.latitude,e._identifyPoint.longitude])}t||(t=L.GeoJSON.coordsToLatLng(turf.centerOfMass(e.geometry).geometry.coordinates)),r.marker[e.id]=L.marker(t,{featureId:e.id}),r.cluster.addLayer(r.marker[e.id])})}),r.featureSet.clearedFeatures(function(e){r.cluster.clearLayers(),r.marker={}})}});} },
            { loader: "script", url: "smk/viewer-leaflet/tool/tool-feature-list-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/tool-feature-list-leaflet.js]" ); include.module("tool-leaflet.tool-feature-list-leaflet-js",["leaflet","tool-leaflet.marker-icon-white-png","tool-leaflet.marker-shadow-png"],function(e){"use strict";var i=new L.Icon({iconUrl:e["tool-leaflet.marker-icon-white-png"],shadowUrl:e["tool-leaflet.marker-shadow-png"],iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});return function(o){var n=this;function t(e,t){if(t)n.highlight[e]||(n.highlight[e]=(i=n.featureSet.get(e),L.geoJSON(i.geometry,{pointToLayer:function(e,t){return L.marker(t,n.styleGeoJSON(e))},style:function(e){return n.styleGeoJSON(e)}}))),n.featureHighlights.addLayer(n.highlight[e]);else{if(!n.highlight[e])return;n.featureHighlights.removeLayer(n.highlight[e]),delete n.highlight[e]}var i}this.highlight={},this.featureHighlights=L.layerGroup({pane:"markerPane"}),n.changedActive(function(){n.visible=n.active}),n.changedVisible(function(){n.visible?n.featureHighlights.addTo(o.$viewer.map):o.$viewer.map.removeLayer(n.featureHighlights)}),n.featureSet.pickedFeature(function(e){e.was&&t(e.was.id,!1),e.feature&&t(e.feature.id,!0)}),n.featureSet.highlightedFeatures(function(e){e.features&&e.features.forEach(function(e){t(e.id,!0)}),e.was&&e.was.forEach(function(e){e&&e.id&&t(e.id,n.featureSet.isPicked(e.id))})}),n.featureSet.clearedFeatures(function(e){n.featureHighlights.clearLayers(),n.highlight={}}),n.featureSet.removedFeatures(function(e){e.features.forEach(function(e){n.featureSet.isPicked(e.id)&&n.featureSet.pick(null),n.featureHighlights.removeLayer(n.highlight[e.id]),delete n.highlight[e.id]})}),n.featureSet.zoomToFeature(function(e){var t;switch(turf.getType(e.feature)){case"Point":var i=turf.circle(e.feature,e.feature.radius||100,{units:"meters",steps:8}),r=turf.bbox(i);t=L.latLngBounds([[r[1],r[0]],[r[3],r[2]]]);break;default:n.highlight[e.feature.id]&&(t=n.highlight[e.feature.id].getBounds())}if(t){var a=o.$viewer.getPanelPadding(!0);o.$viewer.map.fitBounds(t,{paddingTopLeft:a.topLeft,paddingBottomRight:a.bottomRight,animate:!0})}}),n.stylePoint=function(e){return{title:e.title,icon:i}},n.styleLine=function(e){return{color:"black",weight:3,opacity:.8}},n.stylePolygon=function(e){return{color:"black",weight:3,opacity:.8,fillColor:"white",fillOpacity:.5}},n.styleGeoJSON=function(e){var t=e.type;switch("Feature"==t&&(t=e.geometry.type),t){case"Point":case"MultiPoint":return this.stylePoint(e);case"LineString":case"MultiLineString":return this.styleLine(e);case"Polygon":case"MultiPolygon":return this.stylePolygon(e)}}}});} }
        ] }
    );
    include.tag( "tool-legend",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/legend/legend-display.html", load:"<div v-bind:class=\"[ \n    'smk-display', \n    'smk-display-' + display.type, \n    display.class, \n    { \n        'smk-visible':   display.isVisible,\n        'smk-expanded':  display.isExpanded, \n        'smk-disabled': !display.isEnabled,\n        'smk-obscured': !display.isActuallyVisible,\n    } \n]\">\n    <div class=\"smk-item\"\n        v-if=\"display.id != 'root'\"\n    >\n        <span class=\"smk-legend-title\"\n            v-if=\"!inGroup && display.class && display.legends && display.isActuallyVisible\"\n        >{{ display.title }}</span>\n\n        <div class=\"smk-legend\" \n            v-if=\"display.legends && display.isActuallyVisible\"\n        >\n            <div class=\"smk-legend-item\" \n                v-for=\"legend in display.legends\"\n            >\n                <img v-bind:src=\"legend.url\" v-bind:style=\"{ width: legend.width + 'px', height: legend.height + 'px' }\">\n                <span class=\"smk-legend-title\">{{ legend.title }}</span>\n            </div>\n        </div>\n    </div>\n    \n    <legend-display\n        v-for=\"item in display.items\"\n        v-bind:key=\"item.id\"\n        v-bind:display=\"item\"\n        v-bind:inGroup=\"inGroup || display.type == 'group'\"\n    ></legend-display>\n</div>\n" },
            { loader: "template", url: "smk/tool/legend/legend.html", load:"<div class=\"smk-elastic-frame smk-legend-status\">\n    <div class=\"smk-elastic-content\">\n        <div class=\"smk-elastic-body\">\n            <legend-display \n                v-for=\"c, i in contexts\"\n                v-bind:key=\"'ctx-' + i\"\n                v-bind:display=\"c\"\n            ></legend-display>\n        </div>\n    </div>\n</div>" },
            { loader: "style", url: "smk/tool/legend/tool-legend.css", load: "/* [smk/tool/legend/tool-legend.css] */\n.smk-legend-status{max-width:200px}.smk-legend-status .smk-display .smk-legend-item{display:flex;justify-content:flex-start;align-items:center}.smk-legend-status .smk-display .smk-legend-item img{margin:2px}.smk-legend-status .smk-display .smk-legend-title{font-size:11px}.smk-legend-status .smk-display .smk-item{display:flex;align-items:center;position:relative;margin:0}.smk-legend-status .smk-display .smk-folder-expand:hover{border:1px solid transparent}.smk-legend-status .smk-display.smk-inline-legend .smk-visibility{order:0}.smk-legend-status .smk-display.smk-inline-legend .smk-legend{order:1;padding-left:0}.smk-legend-status .smk-display.smk-inline-legend .smk-legend-title{order:2}.smk-legend-status .smk-display.smk-inline-legend .smk-legend .smk-legend-title{display:none}" },
            { loader: "script", url: "smk/tool/legend/tool-legend.js", load: function () { console.debug( "[smk/tool/legend/tool-legend.js]" ); include.module("tool-legend",["tool.tool-js","tool-legend.legend-html","tool-legend.legend-display-html"],function(l){"use strict";return Vue.component("legend-display",{template:l["tool-legend.legend-display-html"],props:{display:{type:Object},inGroup:{type:Boolean,default:!1}}}),SMK.TYPE.Tool.define("LegendTool",null,function(e){var t=this;this.model={contexts:[]},this.vm=new Vue({el:e.addToStatus(l["tool-legend.legend-html"]),data:this.model}),SMK.BOOT.then(function(){t.model.contexts=e.$viewer.getDisplayContexts(),e.$viewer.setDisplayContextLegendsVisible(!0),Vue.nextTick(function(){e.$viewer.setDisplayContextLegendsVisible(!1)})})})});} }
        ] }
    );
    include.tag( "tool-legend-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/legend/config/tool-legend-config.js", load: function () { console.debug( "[smk/tool/legend/config/tool-legend-config.js]" ); include.module("tool-legend-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"legend"}))});} }
        ] }
    );
    include.tag( "tool-legend-leaflet",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-list-menu",
        { loader: "group", tags: [
            { loader: "style", url: "smk/tool/list-menu/list-menu.css", load: "/* [smk/tool/list-menu/list-menu.css] */\n.smk-sidepanel .smk-tool-list-panel .smk-body .smk-tool{display:flex}" },
            { loader: "template", url: "smk/tool/list-menu/panel-list-menu.html", load:"<tool-panel class=\"smk-tool-list-panel\" \n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <component class=\"smk-tool\"\n        v-for=\"w in subWidgets\"\n        v-bind:key=\"w.prop.id\"\n        v-bind:is=\"w.component\"\n        v-bind=\"w.prop\"\n    ></component>\n\n</tool-panel>" },
            { loader: "script", url: "smk/tool/list-menu/tool-list-menu.js", load: function () { console.debug( "[smk/tool/list-menu/tool-list-menu.js]" ); include.module("tool-list-menu",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-list-menu.panel-list-menu-html"],function(e){"use strict";return Vue.component("list-menu-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("list-menu-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-list-menu.panel-list-menu-html"],props:["subWidgets"]}),SMK.TYPE.Tool.define("ListMenuTool",function(){SMK.TYPE.ToolWidget.call(this,"list-menu-widget"),SMK.TYPE.ToolPanel.call(this,"list-menu-panel"),this.defineProp("subWidgets"),this.subWidgets=[]},function(t){t.on(this.id,{"swipe-up":function(e){t.$sidepanel.setExpand(2)},"swipe-down":function(e){t.$sidepanel.incrExpand(-1)}})},{addTool:function(e,t,o){return e.parentId||(o(e,this.id),this.subWidgets.push(e.makeWidgetComponent())),t.getSidepanel().addTool(e,t),e.showTitle=!0}})});} }
        ] }
    );
    include.tag( "tool-list-menu-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/list-menu/config/tool-list-menu-config.js", load: function () { console.debug( "[smk/tool/list-menu/config/tool-list-menu-config.js]" ); include.module("tool-list-menu-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"list-menu",icon:"menu",position:"toolbar"}))))});} }
        ] }
    );
    include.tag( "tool-location",
        { loader: "group", tags: [
            { loader: "asset", url: "smk/tool/location/marker-icon-blue.png" },
            { loader: "asset", url: "smk/tool/location/marker-shadow.png" },
            { loader: "template", url: "smk/tool/location/panel-location.html", load:"<tool-panel class=\"smk-location-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <span class=\"smk-command\" v-if=\"tool.identify\" v-on:click=\"$$emit( 'identify' )\">Identify features</span>\n        <span class=\"smk-command\" v-if=\"tool.measure\" v-on:click=\"$$emit( 'measure' )\">Start measurement</span>\n        <span class=\"smk-command\" v-if=\"tool.directions\" v-on:click=\"$$emit( 'directions' )\">Directions to here</span>\n    </template>    \n\n    <div class=\"smk-address\">\n        <div class=\"smk-street\">\n            <span class=\"smk-civic-number\">{{ site.civicNumber }}</span>\n            <span class=\"smk-street-name\">{{ site.streetName || 'No address for this location.' }}</span>\n            <span class=\"smk-street-type\">{{ site.streetType }}</span>\n        </div>\n        <div class=\"smk-locality\">\n            <span class=\"smk-locality-name\">{{ site.localityName || '&nbsp;' }}</span>\n            <span class=\"smk-locality-type\" v-if=\"site.localityType && site.localityType != 'Unknown'\">({{ site.localityType }})</span>\n        </div>\n    </div>\n\n    <div class=\"smk-coordinate\">\n        <span class=\"smk-ordinate\">\n            <label>latitude<div>{{ site.latitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class=\"smk-ordinate\">\n            <label>longitude<div>{{ site.longitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n\n</tool-panel>\n" },
            { loader: "template", url: "smk/tool/location/popup-location.html", load:"<div class=\"smk-location-popup\" v-if=\"site.latitude\">\n    <div class=\"smk-address\" v-if=\"site.fullAddress\">\n        <div class=\"smk-street\">\n            <span class=\"smk-civic-number\">{{ site.civicNumber }}</span>\n            <span class=\"smk-street-name\">{{ site.streetName }}</span>\n            <span class=\"smk-street-type\">{{ site.streetType }}</span>\n        </div>\n        <div class=\"smk-locality\">\n            <span class=\"smk-locality-name\">{{ site.localityName }}</span>\n            <span class=\"smk-locality-type\" v-if=\"site.localityType != 'Unknown'\">({{ site.localityType }})</span>\n        </div>\n    </div>\n\n    <div class=\"smk-coordinate\">\n        <span class=\"smk-ordinate\">\n            <label>latitude<div>{{ site.latitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class=\"smk-ordinate\">\n            <label>longitude<div>{{ site.longitude | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n\n    <div class=\"smk-commands\">\n        <span class=\"smk-command\" v-if=\"tool.identify\" v-on:click=\"identifyFeatures()\">Identify features</span>\n        <span class=\"smk-command\" v-if=\"tool.measure\" v-on:click=\"startMeasurement()\">Start measurement</span>\n        <span class=\"smk-command\" v-if=\"tool.directions\" v-on:click=\"startDirections()\">Directions to here</span>\n    </div>\n</div>" },
            { loader: "style", url: "smk/tool/location/tool-location.css", load: "/* [smk/tool/location/tool-location.css] */\n.smk-sidepanel.smk-location-panel .smk-body .smk-address{font-weight:700}.smk-sidepanel.smk-location-panel .smk-body .smk-coordinate{margin-top:5px}" },
            { loader: "script", url: "smk/tool/location/tool-location.js", load: function () { console.debug( "[smk/tool/location/tool-location.js]" ); include.module("tool-location",["tool.tool-base-js","tool.tool-panel-js","tool-location.panel-location-html","api"],function(t){"use strict";return Vue.component("location-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:t["tool-location.panel-location-html"],props:["site","tool"]}),SMK.TYPE.Tool.define("LocationTool",function(){SMK.TYPE.ToolPanel.call(this,"location-panel"),this.defineProp("site"),this.defineProp("tool"),this.site={},this.tool={}},function(e){var i=this;e.getSidepanel().addTool(this,e),this.geocoder=new SMK.TYPE.Geocoder(this.geocoderService),this.setIdentifyHandler=function(t){e.$tool.identify&&(i.tool.identify=!!t,i.identifyHandler=t||function(){})},i.identifyHandler=function(){},this.setDirectionsHandler=function(t){e.$tool.directions&&(i.tool.directions=!!t,i.directionsHandler=t||function(){})},i.directionsHandler=function(){},e.on(this.id,{identify:function(){i.identifyHandler()},measure:function(){},directions:function(){i.directionsHandler()}}),e.$viewer.handlePick(1,function(t){return i.active=!0,i.site=t.map,i.pickLocation(t),i.setDirectionsHandler(),i.setIdentifyHandler(function(){i.reset(),e.$viewer.identifyFeatures(t)}),i.geocoder.fetchNearestSite(t.map).then(function(t){return i.site=t,i.setDirectionsHandler(function(){i.reset(),e.$tool.directions.active=!0,e.$tool.directions.activating.then(function(){return e.$tool.directions.startAtCurrentLocation()}).then(function(){return e.$tool.directions.addWaypoint(t)})}),!0}).catch(function(t){return!0})}),this.pickLocation=function(t){},this.reset=function(){this.site={},this.active=!1,i.setDirectionsHandler(),i.setIdentifyHandler()},e.$viewer.changedView(function(){i.reset()}),i.changedActive(function(){i.active||i.reset()})})});} }
        ] }
    );
    include.tag( "tool-location-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/location/config/tool-location-config.js", load: function () { console.debug( "[smk/tool/location/config/tool-location-config.js]" ); include.module("tool-location-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-panel-config-js"]({type:"location",enabled:!0,showHeader:!1})))});} }
        ] }
    );
    include.tag( "tool-location-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/location/tool-location-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/location/tool-location-esri3d.js]" ); include.module("tool-location-esri3d",["esri3d","types-esri3d","tool-location"],function(o){"use strict";var a=SMK.TYPE.Esri3d,e=include.option("baseUrl")+"images/tool/location",t={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:e+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:e+"/marker-icon-blue.png"}}]};SMK.TYPE.LocationTool.prototype.afterInitialize.push(function(o){var i=this;i.locationLayer=new a.layers.GraphicsLayer({visible:!1}),o.$viewer.map.add(i.locationLayer),i.changedActive(function(){i.locationLayer.visible=i.active}),i.pickLocation=function(o){var e=new a.Graphic({geometry:o.map,symbol:t});i.locationLayer.removeAll(),i.locationLayer.add(e)}})});} }
        ] }
    );
    include.tag( "tool-location-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/tool/location/tool-location-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/location/tool-location-leaflet.js]" ); include.module("tool-location-leaflet",["leaflet","tool-location","tool-location-leaflet.marker-icon-blue-png","tool-location-leaflet.marker-shadow-png"],function(o){"use strict";var e=new L.Icon({iconUrl:o["tool-location-leaflet.marker-icon-blue-png"],shadowUrl:o["tool-location-leaflet.marker-shadow-png"],iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});SMK.TYPE.LocationTool.addInitializer(function(a){var t=this;this.locationMarker=L.marker(null,{icon:e}),this.changedActive(function(){t.active||t.locationMarker.remove()}),this.pickLocation=function(o){t.locationMarker.setLatLng([o.map.latitude,o.map.longitude]).addTo(a.$viewer.map)}})});} }
        ] }
    );
    include.tag( "tool-markup",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/markup/tool-markup.js", load: function () { console.debug( "[smk/tool/markup/tool-markup.js]" ); include.module("tool-markup",["tool.tool-js"],function(){"use strict";return SMK.TYPE.Tool.define("MarkupTool")});} }
        ] }
    );
    include.tag( "tool-markup-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/markup/config/tool-markup-config.js", load: function () { console.debug( "[smk/tool/markup/config/tool-markup-config.js]" ); include.module("tool-markup-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"markup",order:3}))});} }
        ] }
    );
    include.tag( "tool-markup-esri3d",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-markup-leaflet",
        { loader: "sequence", tags: [
            { loader: "style", url: "smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.css", load: "/* [smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.css] */\n.marker-icon,.marker-icon:focus{background-color:#fff;border:1px solid #38f;border-radius:50%;margin:-8px 0 0 -8px!important;width:14px!important;height:14px!important;outline:0;transition:opacity ease .3s}.marker-icon-middle,.marker-icon-middle:focus{opacity:.7;margin:-6px 0 0 -6px!important;width:10px!important;height:10px!important}.leaflet-pm-draggable{cursor:move!important}.cursor-marker{cursor:crosshair;pointer-events:none;display:none}.cursor-marker.visible{display:block!important}.leaflet-pm-toolbar .leaflet-buttons-control-button{padding:3px;box-sizing:border-box}.leaflet-pm-toolbar .control-icon{width:100%;height:100%;box-sizing:border-box;opacity:.8;background-size:contain;background-repeat:no-repeat;background-position:center center}.leaflet-pm-toolbar .leaflet-pm-icon-marker{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAZCAYAAADTyxWqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFENzY1MUQyODUzNzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFENzY1MUQxODUzNzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bwCVTQAAARZJREFUeNqclQERwyAMRaEGhoRKmAQkVEIlIKESJgEJSNgcVELngClgcBd2LCWBkrt/t63JCwlLKkIIAiuaijJRe1RASr+tyecUVwHpqKMCwUo+moRBxnBR6wkGJ6JOYKMeRNlJdwzDpXlcRpEUQ48frFKez9mYC8LJ1/zQUX1ggLgtLj/460ELRLTGT1LKdOTSXqLfjuLzbUq9QQ6zGLVamQnYUaLCcRMwPyjH1nEOg76/qdtkb5SYFNsaI1f+36C/lvDV3ARc0ROP0zII8vnCcC/cAMxQK0hBpl6Qay3H5UJ5ioUBcOuA6eba7uyfqcY0xqW2WS0Z0zF/O3ozqSEYAGdotudASRICWIs77w4bZuf8vgIMAAI1tNMVERhgAAAAAElFTkSuQmCC)}.leaflet-pm-toolbar .leaflet-pm-icon-polygon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAYAAAAv3j5gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwM0ZDNzlCODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwM0ZDNzlBODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qfabAwAAAYxJREFUeNqsVj1PwzAUjKtuCMHOViExIRXEQNUOjEiIj5GNEXUiDPwJOtD+g1SMLFUnRtgR4hcgdWEGVczh3L6WlxfHsVOfdHIdO3ft1X62StM0coVSKjMZ7yrXd2uRJ7S4j4GXEX7JJtg3PO/rMddvaCXQBD/01ALqsWapTolJLESfwEvwlD7zsdimpUyLgeJIwHN6NAUfwDcx9QC8Bdep/wpeQPM7pymNYHKEZgRu0KN3sAf+FqS/Bt6B+9T/IbOXQiP6w2/Y+CNF5IIT8Jr1B9COl9qUr8QXeA9+eq7iBtgFd3LRzRfefF/QhnwGh5aoyqCjvAKPua7J6CwKgzHXrZtKSyhw3Rq5DtgyDoUpWxRqUYISavV+2A1gcsj2VrKsdXDUZWRCA3sBjLapnZB2pqiOqG0FMGoLzYzRIr4t2g9V0SANrvlvJOLrrGDUkbGZzqMQ8bVkbCajVeMzxpYzChCfMbaiY0JWCdeSNLZdXIxGovZ5XVykRuVbUFXUy4qh69VqdhRYEvgTYAAqrQMfMqEIJwAAAABJRU5ErkJggg==)}.leaflet-pm-toolbar .leaflet-pm-icon-polyline{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwM0ZDNzlGODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwM0ZDNzlFODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+KUUD2gAAAJhJREFUeNq01dsNwCAIhWHZyO4/RDtKN6DwYKP2ouDBhNhL8n+PEDMn5CGiJkgRgBwqz1BAglmuvQaSAoiRo/FThpsJiOud73+R8WVgFF8CZuJuYDbuAixxM2CNmwBPfBrwxqeAlfgQWI3/Aoj4J4CKvwLI+ANAxxsgIl6WGXcDi+voamt2qFybvB+wNdoD5RkK1B/QwCXAAMyWX2PeMm23AAAAAElFTkSuQmCC);background-size:80%}.leaflet-pm-toolbar .leaflet-pm-icon-circle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQwM0ZDNzk3ODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQwM0ZDNzk2ODUzNDExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ZDy0gwAAAW9JREFUeNq8lj1Ow0AQhb0WbcgBaKKcwC1VaCjcoFCnyRG4QBq4QI6QxlWQQDRpSZWWEyBHgh7CAcwb6Y0ZlpVjYydPerJ3d/ab7Hp/4oqiiOrIOfcrEP1cnX7xHmgCz+FcoQqWOnghMZUZZAS+oQH8LM3Wpr3wLLGDICsAH8MfpvMbvAxAl2zTsvQZ+zxnvwGGK/AHFndwBq/2THMKT+BTlq/BfCyZmgBwmZYXuA9/wTP4NaqnIXwH9+BPOAE39z/ygvBdQ3jE2Bn79sn6WUVcCSPWZQ3hNknG95GuLh3BDZ/vNea8SisySqYmuOBzE7XXxjIdl5jVVcsET392st2hXcjy4ujAOgkdZG1leTGHsjV7oa3u+dwKW6dIt/ZlBwnOLTP2fvkZz5b/KiWjZOoqkjNozYYJz5amGrKvaE3mEQ87VkxZlMDbmtOVMrbH8lThwRut6wvn+Feml0iO3DmcBxLkbEuqGO7Qf1u+BRgABphW5i4/+hMAAAAASUVORK5CYII=);background-size:90%}.leaflet-pm-toolbar .leaflet-pm-icon-delete{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk5QzE2QjUyODUzMzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk5QzE2QjUxODUzMzExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UGbNXAAAAI5JREFUeNpi+P//PwM2DAQNQPwfB27ApY8RqhkFMDIyCgCp9wx4AFAfIzZxFgYCAF0j0LL/+NQz4TDkAwOZAGQ7SDM/A3XARyYGKgOskUIRgBr4AU8SIRZ/gCcbQjFHguMYqR6G2AzMhmJyxLAm7McUiDHQxcujBo4aOOQNxJb1ZCkQG6LFF9kVFIgACDAAqr5rFp6MjMcAAAAASUVORK5CYII=);background-size:70%}.leaflet-pm-toolbar .leaflet-pm-icon-edit{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgzRTE5MjcxODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgzRTE5MjcwODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4jFzXwAAAOdJREFUeNq0leENhCAMheEmuREc4UZwBEdihI7CKLqBG9RWi+F6aqBwTd4PaPkeIbY6RHQ9RRFIkTTs6z/AUbSySU/4tAMPcDKJKTmS5ixRIga95TzIHiiTkOBogA8KjsokSP68ORieBW4uMGU1x2ZHOKi6eoNSuMmgBl5tUAuvMrDAiw1Uh/7A0ydrMpA+0R36Bedci8F60aGg8mgykPly2aFZDbYYRDUePhc1NgMeZOdEzFq/1sBLAS+8U+G952k5u4egmtvzHC/SIoWgkwXwdGZ5qrOMa63x9gkbfjgoZ8anJt0EGAAZUK4sZc82dAAAAABJRU5ErkJggg==);background-size:80%;background-position:4px center}.leaflet-buttons-control-button:hover{cursor:pointer;background-color:#f4f4f4}.leaflet-buttons-control-button.active{background-color:#f4f4f4}.leaflet-buttons-control-button.active>.control-icon{opacity:.5}.leaflet-buttons-control-text-hide{display:none}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.min.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/markup/lib/leaflet-pm-0.17.3.min.js]" ); /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 21);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Snapping = __webpack_require__(2);\n\nvar _Snapping2 = _interopRequireDefault(_Snapping);\n\nvar _Drag = __webpack_require__(14);\n\nvar _Drag2 = _interopRequireDefault(_Drag);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Edit = L.Class.extend({\n    includes: [_Drag2.default, _Snapping2.default]\n});\n\nexports.default = Edit;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5qcz85YjEzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX1NuYXBwaW5nID0gcmVxdWlyZSgnLi4vTWl4aW5zL1NuYXBwaW5nJyk7XG5cbnZhciBfU25hcHBpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hcHBpbmcpO1xuXG52YXIgX0RyYWcgPSByZXF1aXJlKCcuLi9NaXhpbnMvRHJhZycpO1xuXG52YXIgX0RyYWcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRHJhZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBFZGl0ID0gTC5DbGFzcy5leHRlbmQoe1xuICAgIGluY2x1ZGVzOiBbX0RyYWcyLmRlZmF1bHQsIF9TbmFwcGluZzIuZGVmYXVsdF1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBFZGl0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Snapping = __webpack_require__(2);\n\nvar _Snapping2 = _interopRequireDefault(_Snapping);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Draw = L.Class.extend({\n    includes: [_Snapping2.default],\n    options: {\n        snappable: true,\n        snapDistance: 20,\n        finishOnDoubleClick: false,\n        templineStyle: {\n            color: 'red'\n        },\n        hintlineStyle: {\n            color: 'red',\n            dashArray: [5, 5]\n        },\n        markerStyle: {\n            draggable: true\n        }\n    },\n    initialize: function initialize(map) {\n        var _this = this;\n\n        // save the map\n        this._map = map;\n\n        // define all possible shapes that can be drawn\n        this.shapes = ['Poly', 'Line', 'Marker', 'Circle'];\n\n        // initiate drawing class for our shapes\n        this.shapes.forEach(function (shape) {\n            _this[shape] = new L.PM.Draw[shape](_this._map);\n        });\n    },\n    setPathOptions: function setPathOptions(options) {\n        this.options.pathOptions = options;\n    },\n    getShapes: function getShapes() {\n        // if somebody wants to know what shapes are available\n        return this.shapes;\n    },\n    enable: function enable(shape, options) {\n        if (!shape) {\n            throw new Error('Error: Please pass a shape as a parameter. Possible shapes are: ' + this.getShapes().join(','));\n        }\n\n        // disable drawing for all shapes\n        this.disable();\n\n        // enable draw for a shape\n        this[shape].enable(options);\n    },\n    disable: function disable() {\n        var _this2 = this;\n\n        // there can only be one drawing mode active at a time on a map\n        // so it doesn't matter which one should be disabled.\n        // just disable all of them\n        this.shapes.forEach(function (shape) {\n            _this2[shape].disable();\n        });\n    },\n    addControls: function addControls() {\n        var _this3 = this;\n\n        // add control buttons for our shapes\n        this.shapes.forEach(function (shape) {\n            _this3[shape].addButton();\n        });\n    }\n});\n\nexports.default = Draw;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5qcz85Nzk3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX1NuYXBwaW5nID0gcmVxdWlyZSgnLi4vTWl4aW5zL1NuYXBwaW5nJyk7XG5cbnZhciBfU25hcHBpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU25hcHBpbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgRHJhdyA9IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgICBpbmNsdWRlczogW19TbmFwcGluZzIuZGVmYXVsdF0sXG4gICAgb3B0aW9uczoge1xuICAgICAgICBzbmFwcGFibGU6IHRydWUsXG4gICAgICAgIHNuYXBEaXN0YW5jZTogMjAsXG4gICAgICAgIGZpbmlzaE9uRG91YmxlQ2xpY2s6IGZhbHNlLFxuICAgICAgICB0ZW1wbGluZVN0eWxlOiB7XG4gICAgICAgICAgICBjb2xvcjogJ3JlZCdcbiAgICAgICAgfSxcbiAgICAgICAgaGludGxpbmVTdHlsZToge1xuICAgICAgICAgICAgY29sb3I6ICdyZWQnLFxuICAgICAgICAgICAgZGFzaEFycmF5OiBbNSwgNV1cbiAgICAgICAgfSxcbiAgICAgICAgbWFya2VyU3R5bGU6IHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIHNhdmUgdGhlIG1hcFxuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG5cbiAgICAgICAgLy8gZGVmaW5lIGFsbCBwb3NzaWJsZSBzaGFwZXMgdGhhdCBjYW4gYmUgZHJhd25cbiAgICAgICAgdGhpcy5zaGFwZXMgPSBbJ1BvbHknLCAnTGluZScsICdNYXJrZXInLCAnQ2lyY2xlJ107XG5cbiAgICAgICAgLy8gaW5pdGlhdGUgZHJhd2luZyBjbGFzcyBmb3Igb3VyIHNoYXBlc1xuICAgICAgICB0aGlzLnNoYXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaGFwZSkge1xuICAgICAgICAgICAgX3RoaXNbc2hhcGVdID0gbmV3IEwuUE0uRHJhd1tzaGFwZV0oX3RoaXMuX21hcCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0UGF0aE9wdGlvbnM6IGZ1bmN0aW9uIHNldFBhdGhPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zID0gb3B0aW9ucztcbiAgICB9LFxuICAgIGdldFNoYXBlczogZnVuY3Rpb24gZ2V0U2hhcGVzKCkge1xuICAgICAgICAvLyBpZiBzb21lYm9keSB3YW50cyB0byBrbm93IHdoYXQgc2hhcGVzIGFyZSBhdmFpbGFibGVcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGVzO1xuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoc2hhcGUsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFzaGFwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogUGxlYXNlIHBhc3MgYSBzaGFwZSBhcyBhIHBhcmFtZXRlci4gUG9zc2libGUgc2hhcGVzIGFyZTogJyArIHRoaXMuZ2V0U2hhcGVzKCkuam9pbignLCcpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRpc2FibGUgZHJhd2luZyBmb3IgYWxsIHNoYXBlc1xuICAgICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgICAvLyBlbmFibGUgZHJhdyBmb3IgYSBzaGFwZVxuICAgICAgICB0aGlzW3NoYXBlXS5lbmFibGUob3B0aW9ucyk7XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAvLyB0aGVyZSBjYW4gb25seSBiZSBvbmUgZHJhd2luZyBtb2RlIGFjdGl2ZSBhdCBhIHRpbWUgb24gYSBtYXBcbiAgICAgICAgLy8gc28gaXQgZG9lc24ndCBtYXR0ZXIgd2hpY2ggb25lIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAgICAgICAgLy8ganVzdCBkaXNhYmxlIGFsbCBvZiB0aGVtXG4gICAgICAgIHRoaXMuc2hhcGVzLmZvckVhY2goZnVuY3Rpb24gKHNoYXBlKSB7XG4gICAgICAgICAgICBfdGhpczJbc2hhcGVdLmRpc2FibGUoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhZGRDb250cm9sczogZnVuY3Rpb24gYWRkQ29udHJvbHMoKSB7XG4gICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgIC8vIGFkZCBjb250cm9sIGJ1dHRvbnMgZm9yIG91ciBzaGFwZXNcbiAgICAgICAgdGhpcy5zaGFwZXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcbiAgICAgICAgICAgIF90aGlzM1tzaGFwZV0uYWRkQnV0dG9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEcmF3O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar SnapMixin = {\n    _initSnappableMarkers: function _initSnappableMarkers() {\n        var _this = this;\n\n        this.options.snapDistance = this.options.snapDistance || 30;\n\n        this._markers.forEach(function (marker) {\n            marker.off('drag', _this._handleSnapping, _this);\n            marker.on('drag', _this._handleSnapping, _this);\n\n            marker.off('dragend', _this._cleanupSnapping, _this);\n            marker.on('dragend', _this._cleanupSnapping, _this);\n        });\n\n        this._layer.off('pm:dragstart', this._unsnap, this);\n        this._layer.on('pm:dragstart', this._unsnap, this);\n    },\n    _unsnap: function _unsnap() {\n        // delete the last snap\n        delete this._snapLatLng;\n    },\n    _cleanupSnapping: function _cleanupSnapping() {\n        // delete it, we need to refresh this with each start of a drag because\n        // meanwhile, new layers could've been added to the map\n        delete this._snapList;\n\n        if (this.debugIndicatorLines) {\n            this.debugIndicatorLines.forEach(function (line) {\n                line.remove();\n            });\n        }\n    },\n    _handleSnapping: function _handleSnapping(e) {\n        var _this2 = this;\n\n        // if snapping is disabled via holding ALT during drag, stop right here\n        if (e.originalEvent.altKey) {\n            return false;\n        }\n\n        // create a list of polygons that the marker could snap to\n        // this isn't inside a movestart/dragstart callback because middlemarkers are initialized\n        // after dragstart/movestart so it wouldn't fire for them\n        if (this._snapList === undefined) {\n            this._createSnapList(e);\n        }\n\n        // if there are no layers to snap to, stop here\n        if (this._snapList.length <= 0) {\n            return false;\n        }\n\n        var marker = e.target;\n\n        // get the closest layer, it's closest latlng, segment and the distance\n        var closestLayer = this._calcClosestLayer(marker.getLatLng(), this._snapList);\n\n        var isMarker = closestLayer.layer instanceof L.Marker || closestLayer.layer instanceof L.CircleMarker;\n\n        // find the final latlng that we want to snap to\n        var snapLatLng = void 0;\n        if (!isMarker) {\n            snapLatLng = this._checkPrioritiySnapping(closestLayer);\n        } else {\n            snapLatLng = closestLayer.latlng;\n        }\n\n        // minimal distance before marker snaps (in pixels)\n        var minDistance = this.options.snapDistance;\n\n        // event info for pm:snap and pm:unsnap\n        var eventInfo = {\n            marker: marker,\n            snapLatLng: snapLatLng,\n            segment: closestLayer.segment,\n            layer: this._layer,\n            layerInteractedWith: closestLayer.layer };\n\n        if (closestLayer.distance < minDistance) {\n            // snap the marker\n            marker.setLatLng(snapLatLng);\n\n            marker._snapped = true;\n\n            var triggerSnap = function triggerSnap() {\n                _this2._snapLatLng = snapLatLng;\n                marker.fire('pm:snap', eventInfo);\n                _this2._layer.fire('pm:snap', eventInfo);\n            };\n\n            // check if the snapping position differs from the last snap\n            // Thanks Max & car2go Team\n            var a = this._snapLatLng || {};\n            var b = snapLatLng || {};\n\n            if (a.lat !== b.lat || b.lng !== b.lng) {\n                triggerSnap();\n            }\n        } else if (this._snapLatLng) {\n            // no more snapping\n\n            // if it was previously snapped...\n            // ...unsnap\n            this._unsnap(eventInfo);\n\n            marker._snapped = false;\n\n            // and fire unsnap event\n            eventInfo.marker.fire('pm:unsnap', eventInfo);\n            this._layer.fire('pm:unsnap', eventInfo);\n        }\n\n        return true;\n    },\n\n\n    // we got the point we want to snap to (C), but we need to check if a coord of the polygon\n    // receives priority over C as the snapping point. Let's check this here\n    _checkPrioritiySnapping: function _checkPrioritiySnapping(closestLayer) {\n        var map = this._map;\n\n        // A and B are the points of the closest segment to P (the marker position we want to snap)\n        var A = closestLayer.segment[0];\n        var B = closestLayer.segment[1];\n\n        // C is the point we would snap to on the segment.\n        // The closest point on the closest segment of the closest polygon to P. That's right.\n        var C = closestLayer.latlng;\n\n        // distances from A to C and B to C to check which one is closer to C\n        var distanceAC = this._getDistance(map, A, C);\n        var distanceBC = this._getDistance(map, B, C);\n\n        // closest latlng of A and B to C\n        var closestVertexLatLng = distanceAC < distanceBC ? A : B;\n\n        // distance between closestVertexLatLng and C\n        var shortestDistance = distanceAC < distanceBC ? distanceAC : distanceBC;\n\n        // the distance that needs to be undercut to trigger priority\n        var priorityDistance = this.options.snapDistance;\n\n        // the latlng we ultemately want to snap to\n        var snapLatlng = void 0;\n\n        // if C is closer to the closestVertexLatLng (A or B) than the snapDistance,\n        // the closestVertexLatLng has priority over C as the snapping point.\n        if (shortestDistance < priorityDistance) {\n            snapLatlng = closestVertexLatLng;\n        } else {\n            snapLatlng = C;\n        }\n\n        // return the copy of snapping point\n        return Object.assign({}, snapLatlng);\n    },\n    _createSnapList: function _createSnapList() {\n        var _this3 = this;\n\n        var layers = [];\n        var debugIndicatorLines = [];\n        var map = this._map;\n\n        // find all layers that are or inherit from Polylines... and markers that are not\n        // temporary markers of polygon-edits\n        map.eachLayer(function (layer) {\n            if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.CircleMarker) {\n                layers.push(layer);\n\n                // this is for debugging\n                var debugLine = L.polyline([], { color: 'red' });\n                debugIndicatorLines.push(debugLine);\n\n                // uncomment  this line to show helper lines for debugging\n                // debugLine.addTo(map);\n            }\n        });\n\n        // ...except myself\n        layers = layers.filter(function (layer) {\n            return _this3._layer !== layer;\n        });\n\n        // also remove everything that has no coordinates yet\n        layers = layers.filter(function (layer) {\n            return layer._latlng || layer._latlngs && layer._latlngs.length > 0;\n        });\n\n        // finally remove everything that's leaflet.pm specific temporary stuff\n        layers = layers.filter(function (layer) {\n            return !layer._pmTempLayer;\n        });\n\n        // save snaplist from layers and the other snap layers added from other classes/scripts\n        if (this._otherSnapLayers) {\n            this._snapList = layers.concat(this._otherSnapLayers);\n        } else {\n            this._snapList = layers;\n        }\n\n        this.debugIndicatorLines = debugIndicatorLines;\n    },\n    _calcClosestLayer: function _calcClosestLayer(latlng, layers) {\n        var _this4 = this;\n\n        // the closest polygon to our dragged marker latlng\n        var closestLayer = {};\n\n        // loop through the layers\n        layers.forEach(function (layer, index) {\n            // find the closest latlng, segment and the distance of this layer to the dragged marker latlng\n            var results = _this4._calcLayerDistances(latlng, layer);\n\n            // show indicator lines, it's for debugging\n            _this4.debugIndicatorLines[index].setLatLngs([latlng, results.latlng]);\n\n            // save the info if it doesn't exist or if the distance is smaller than the previous one\n            if (closestLayer.distance === undefined || results.distance < closestLayer.distance) {\n                closestLayer = results;\n                closestLayer.layer = layer;\n            }\n        });\n\n        // return the closest layer and it's data\n        // if there is no closest layer, return undefined\n        return closestLayer;\n    },\n    _calcLayerDistances: function _calcLayerDistances(latlng, layer) {\n        var _this5 = this;\n\n        var map = this._map;\n\n        // is this a polyline, marker or polygon?\n        var isPolygon = layer instanceof L.Polygon;\n        var isPolyline = !(layer instanceof L.Polygon) && layer instanceof L.Polyline;\n        var isMarker = layer instanceof L.Marker || layer instanceof L.CircleMarker;\n\n        // the point P which we want to snap (probpably the marker that is dragged)\n        var P = latlng;\n\n        var coords = void 0;\n\n        // the coords of the layer\n        if (isPolygon) {\n            // polygon\n            coords = layer.getLatLngs()[0];\n        } else if (isPolyline) {\n            // polyline\n            coords = layer.getLatLngs();\n        } else if (isMarker) {\n            // marker\n            coords = layer.getLatLng();\n\n            // return the info for the marker, no more calculations needed\n            return {\n                latlng: Object.assign({}, coords),\n                distance: this._getDistance(map, coords, P)\n            };\n        }\n\n        // the closest segment (line between two points) of the layer\n        var closestSegment = void 0;\n\n        // the shortest distance from P to closestSegment\n        var shortestDistance = void 0;\n\n        // loop through the coords of the layer\n        coords.forEach(function (coord, index) {\n            // take this coord (A)...\n            var A = coord;\n            var nextIndex = void 0;\n\n            // and the next coord (B) as points\n            if (isPolygon) {\n                nextIndex = index + 1 === coords.length ? 0 : index + 1;\n            } else {\n                nextIndex = index + 1 === coords.length ? undefined : index + 1;\n            }\n\n            var B = coords[nextIndex];\n\n            if (B) {\n                // calc the distance between P and AB-segment\n                var distance = _this5._getDistanceToSegment(map, P, A, B);\n\n                // is the distance shorter than the previous one? Save it and the segment\n                if (shortestDistance === undefined || distance < shortestDistance) {\n                    shortestDistance = distance;\n                    closestSegment = [A, B];\n                }\n            }\n\n            return true;\n        });\n\n        // now, take the closest segment (closestSegment) and calc the closest point to P on it.\n        var C = this._getClosestPointOnSegment(map, latlng, closestSegment[0], closestSegment[1]);\n\n        // return the latlng of that sucker\n        return {\n            latlng: Object.assign({}, C),\n            segment: closestSegment,\n            distance: shortestDistance\n        };\n    },\n    _getClosestPointOnSegment: function _getClosestPointOnSegment(map, latlng, latlngA, latlngB) {\n        var maxzoom = map.getMaxZoom();\n        if (maxzoom === Infinity) {\n            maxzoom = map.getZoom();\n        }\n        var P = map.project(latlng, maxzoom);\n        var A = map.project(latlngA, maxzoom);\n        var B = map.project(latlngB, maxzoom);\n        var closest = L.LineUtil.closestPointOnSegment(P, A, B);\n        return map.unproject(closest, maxzoom);\n    },\n    _getDistanceToSegment: function _getDistanceToSegment(map, latlng, latlngA, latlngB) {\n        var P = map.latLngToLayerPoint(latlng);\n        var A = map.latLngToLayerPoint(latlngA);\n        var B = map.latLngToLayerPoint(latlngB);\n        return L.LineUtil.pointToSegmentDistance(P, A, B);\n    },\n    _getDistance: function _getDistance(map, latlngA, latlngB) {\n        return map.latLngToLayerPoint(latlngA).distanceTo(map.latLngToLayerPoint(latlngB));\n    }\n};\n\nexports.default = SnapMixin;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9NaXhpbnMvU25hcHBpbmcuanM/N2E5YSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciBTbmFwTWl4aW4gPSB7XG4gICAgX2luaXRTbmFwcGFibGVNYXJrZXJzOiBmdW5jdGlvbiBfaW5pdFNuYXBwYWJsZU1hcmtlcnMoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnNuYXBEaXN0YW5jZSA9IHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2UgfHwgMzA7XG5cbiAgICAgICAgdGhpcy5fbWFya2Vycy5mb3JFYWNoKGZ1bmN0aW9uIChtYXJrZXIpIHtcbiAgICAgICAgICAgIG1hcmtlci5vZmYoJ2RyYWcnLCBfdGhpcy5faGFuZGxlU25hcHBpbmcsIF90aGlzKTtcbiAgICAgICAgICAgIG1hcmtlci5vbignZHJhZycsIF90aGlzLl9oYW5kbGVTbmFwcGluZywgX3RoaXMpO1xuXG4gICAgICAgICAgICBtYXJrZXIub2ZmKCdkcmFnZW5kJywgX3RoaXMuX2NsZWFudXBTbmFwcGluZywgX3RoaXMpO1xuICAgICAgICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgX3RoaXMuX2NsZWFudXBTbmFwcGluZywgX3RoaXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9sYXllci5vZmYoJ3BtOmRyYWdzdGFydCcsIHRoaXMuX3Vuc25hcCwgdGhpcyk7XG4gICAgICAgIHRoaXMuX2xheWVyLm9uKCdwbTpkcmFnc3RhcnQnLCB0aGlzLl91bnNuYXAsIHRoaXMpO1xuICAgIH0sXG4gICAgX3Vuc25hcDogZnVuY3Rpb24gX3Vuc25hcCgpIHtcbiAgICAgICAgLy8gZGVsZXRlIHRoZSBsYXN0IHNuYXBcbiAgICAgICAgZGVsZXRlIHRoaXMuX3NuYXBMYXRMbmc7XG4gICAgfSxcbiAgICBfY2xlYW51cFNuYXBwaW5nOiBmdW5jdGlvbiBfY2xlYW51cFNuYXBwaW5nKCkge1xuICAgICAgICAvLyBkZWxldGUgaXQsIHdlIG5lZWQgdG8gcmVmcmVzaCB0aGlzIHdpdGggZWFjaCBzdGFydCBvZiBhIGRyYWcgYmVjYXVzZVxuICAgICAgICAvLyBtZWFud2hpbGUsIG5ldyBsYXllcnMgY291bGQndmUgYmVlbiBhZGRlZCB0byB0aGUgbWFwXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9zbmFwTGlzdDtcblxuICAgICAgICBpZiAodGhpcy5kZWJ1Z0luZGljYXRvckxpbmVzKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnSW5kaWNhdG9yTGluZXMuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICAgICAgICAgIGxpbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2hhbmRsZVNuYXBwaW5nOiBmdW5jdGlvbiBfaGFuZGxlU25hcHBpbmcoZSkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAvLyBpZiBzbmFwcGluZyBpcyBkaXNhYmxlZCB2aWEgaG9sZGluZyBBTFQgZHVyaW5nIGRyYWcsIHN0b3AgcmlnaHQgaGVyZVxuICAgICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmFsdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3JlYXRlIGEgbGlzdCBvZiBwb2x5Z29ucyB0aGF0IHRoZSBtYXJrZXIgY291bGQgc25hcCB0b1xuICAgICAgICAvLyB0aGlzIGlzbid0IGluc2lkZSBhIG1vdmVzdGFydC9kcmFnc3RhcnQgY2FsbGJhY2sgYmVjYXVzZSBtaWRkbGVtYXJrZXJzIGFyZSBpbml0aWFsaXplZFxuICAgICAgICAvLyBhZnRlciBkcmFnc3RhcnQvbW92ZXN0YXJ0IHNvIGl0IHdvdWxkbid0IGZpcmUgZm9yIHRoZW1cbiAgICAgICAgaWYgKHRoaXMuX3NuYXBMaXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVNuYXBMaXN0KGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGxheWVycyB0byBzbmFwIHRvLCBzdG9wIGhlcmVcbiAgICAgICAgaWYgKHRoaXMuX3NuYXBMaXN0Lmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWFya2VyID0gZS50YXJnZXQ7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBjbG9zZXN0IGxheWVyLCBpdCdzIGNsb3Nlc3QgbGF0bG5nLCBzZWdtZW50IGFuZCB0aGUgZGlzdGFuY2VcbiAgICAgICAgdmFyIGNsb3Nlc3RMYXllciA9IHRoaXMuX2NhbGNDbG9zZXN0TGF5ZXIobWFya2VyLmdldExhdExuZygpLCB0aGlzLl9zbmFwTGlzdCk7XG5cbiAgICAgICAgdmFyIGlzTWFya2VyID0gY2xvc2VzdExheWVyLmxheWVyIGluc3RhbmNlb2YgTC5NYXJrZXIgfHwgY2xvc2VzdExheWVyLmxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGVNYXJrZXI7XG5cbiAgICAgICAgLy8gZmluZCB0aGUgZmluYWwgbGF0bG5nIHRoYXQgd2Ugd2FudCB0byBzbmFwIHRvXG4gICAgICAgIHZhciBzbmFwTGF0TG5nID0gdm9pZCAwO1xuICAgICAgICBpZiAoIWlzTWFya2VyKSB7XG4gICAgICAgICAgICBzbmFwTGF0TG5nID0gdGhpcy5fY2hlY2tQcmlvcml0aXlTbmFwcGluZyhjbG9zZXN0TGF5ZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc25hcExhdExuZyA9IGNsb3Nlc3RMYXllci5sYXRsbmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtaW5pbWFsIGRpc3RhbmNlIGJlZm9yZSBtYXJrZXIgc25hcHMgKGluIHBpeGVscylcbiAgICAgICAgdmFyIG1pbkRpc3RhbmNlID0gdGhpcy5vcHRpb25zLnNuYXBEaXN0YW5jZTtcblxuICAgICAgICAvLyBldmVudCBpbmZvIGZvciBwbTpzbmFwIGFuZCBwbTp1bnNuYXBcbiAgICAgICAgdmFyIGV2ZW50SW5mbyA9IHtcbiAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgc25hcExhdExuZzogc25hcExhdExuZyxcbiAgICAgICAgICAgIHNlZ21lbnQ6IGNsb3Nlc3RMYXllci5zZWdtZW50LFxuICAgICAgICAgICAgbGF5ZXI6IHRoaXMuX2xheWVyLFxuICAgICAgICAgICAgbGF5ZXJJbnRlcmFjdGVkV2l0aDogY2xvc2VzdExheWVyLmxheWVyIH07XG5cbiAgICAgICAgaWYgKGNsb3Nlc3RMYXllci5kaXN0YW5jZSA8IG1pbkRpc3RhbmNlKSB7XG4gICAgICAgICAgICAvLyBzbmFwIHRoZSBtYXJrZXJcbiAgICAgICAgICAgIG1hcmtlci5zZXRMYXRMbmcoc25hcExhdExuZyk7XG5cbiAgICAgICAgICAgIG1hcmtlci5fc25hcHBlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciB0cmlnZ2VyU25hcCA9IGZ1bmN0aW9uIHRyaWdnZXJTbmFwKCkge1xuICAgICAgICAgICAgICAgIF90aGlzMi5fc25hcExhdExuZyA9IHNuYXBMYXRMbmc7XG4gICAgICAgICAgICAgICAgbWFya2VyLmZpcmUoJ3BtOnNuYXAnLCBldmVudEluZm8pO1xuICAgICAgICAgICAgICAgIF90aGlzMi5fbGF5ZXIuZmlyZSgncG06c25hcCcsIGV2ZW50SW5mbyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc25hcHBpbmcgcG9zaXRpb24gZGlmZmVycyBmcm9tIHRoZSBsYXN0IHNuYXBcbiAgICAgICAgICAgIC8vIFRoYW5rcyBNYXggJiBjYXIyZ28gVGVhbVxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLl9zbmFwTGF0TG5nIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGIgPSBzbmFwTGF0TG5nIHx8IHt9O1xuXG4gICAgICAgICAgICBpZiAoYS5sYXQgIT09IGIubGF0IHx8IGIubG5nICE9PSBiLmxuZykge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJTbmFwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc25hcExhdExuZykge1xuICAgICAgICAgICAgLy8gbm8gbW9yZSBzbmFwcGluZ1xuXG4gICAgICAgICAgICAvLyBpZiBpdCB3YXMgcHJldmlvdXNseSBzbmFwcGVkLi4uXG4gICAgICAgICAgICAvLyAuLi51bnNuYXBcbiAgICAgICAgICAgIHRoaXMuX3Vuc25hcChldmVudEluZm8pO1xuXG4gICAgICAgICAgICBtYXJrZXIuX3NuYXBwZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gYW5kIGZpcmUgdW5zbmFwIGV2ZW50XG4gICAgICAgICAgICBldmVudEluZm8ubWFya2VyLmZpcmUoJ3BtOnVuc25hcCcsIGV2ZW50SW5mbyk7XG4gICAgICAgICAgICB0aGlzLl9sYXllci5maXJlKCdwbTp1bnNuYXAnLCBldmVudEluZm8pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuXG4gICAgLy8gd2UgZ290IHRoZSBwb2ludCB3ZSB3YW50IHRvIHNuYXAgdG8gKEMpLCBidXQgd2UgbmVlZCB0byBjaGVjayBpZiBhIGNvb3JkIG9mIHRoZSBwb2x5Z29uXG4gICAgLy8gcmVjZWl2ZXMgcHJpb3JpdHkgb3ZlciBDIGFzIHRoZSBzbmFwcGluZyBwb2ludC4gTGV0J3MgY2hlY2sgdGhpcyBoZXJlXG4gICAgX2NoZWNrUHJpb3JpdGl5U25hcHBpbmc6IGZ1bmN0aW9uIF9jaGVja1ByaW9yaXRpeVNuYXBwaW5nKGNsb3Nlc3RMYXllcikge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuXG4gICAgICAgIC8vIEEgYW5kIEIgYXJlIHRoZSBwb2ludHMgb2YgdGhlIGNsb3Nlc3Qgc2VnbWVudCB0byBQICh0aGUgbWFya2VyIHBvc2l0aW9uIHdlIHdhbnQgdG8gc25hcClcbiAgICAgICAgdmFyIEEgPSBjbG9zZXN0TGF5ZXIuc2VnbWVudFswXTtcbiAgICAgICAgdmFyIEIgPSBjbG9zZXN0TGF5ZXIuc2VnbWVudFsxXTtcblxuICAgICAgICAvLyBDIGlzIHRoZSBwb2ludCB3ZSB3b3VsZCBzbmFwIHRvIG9uIHRoZSBzZWdtZW50LlxuICAgICAgICAvLyBUaGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgY2xvc2VzdCBzZWdtZW50IG9mIHRoZSBjbG9zZXN0IHBvbHlnb24gdG8gUC4gVGhhdCdzIHJpZ2h0LlxuICAgICAgICB2YXIgQyA9IGNsb3Nlc3RMYXllci5sYXRsbmc7XG5cbiAgICAgICAgLy8gZGlzdGFuY2VzIGZyb20gQSB0byBDIGFuZCBCIHRvIEMgdG8gY2hlY2sgd2hpY2ggb25lIGlzIGNsb3NlciB0byBDXG4gICAgICAgIHZhciBkaXN0YW5jZUFDID0gdGhpcy5fZ2V0RGlzdGFuY2UobWFwLCBBLCBDKTtcbiAgICAgICAgdmFyIGRpc3RhbmNlQkMgPSB0aGlzLl9nZXREaXN0YW5jZShtYXAsIEIsIEMpO1xuXG4gICAgICAgIC8vIGNsb3Nlc3QgbGF0bG5nIG9mIEEgYW5kIEIgdG8gQ1xuICAgICAgICB2YXIgY2xvc2VzdFZlcnRleExhdExuZyA9IGRpc3RhbmNlQUMgPCBkaXN0YW5jZUJDID8gQSA6IEI7XG5cbiAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjbG9zZXN0VmVydGV4TGF0TG5nIGFuZCBDXG4gICAgICAgIHZhciBzaG9ydGVzdERpc3RhbmNlID0gZGlzdGFuY2VBQyA8IGRpc3RhbmNlQkMgPyBkaXN0YW5jZUFDIDogZGlzdGFuY2VCQztcblxuICAgICAgICAvLyB0aGUgZGlzdGFuY2UgdGhhdCBuZWVkcyB0byBiZSB1bmRlcmN1dCB0byB0cmlnZ2VyIHByaW9yaXR5XG4gICAgICAgIHZhciBwcmlvcml0eURpc3RhbmNlID0gdGhpcy5vcHRpb25zLnNuYXBEaXN0YW5jZTtcblxuICAgICAgICAvLyB0aGUgbGF0bG5nIHdlIHVsdGVtYXRlbHkgd2FudCB0byBzbmFwIHRvXG4gICAgICAgIHZhciBzbmFwTGF0bG5nID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIGlmIEMgaXMgY2xvc2VyIHRvIHRoZSBjbG9zZXN0VmVydGV4TGF0TG5nIChBIG9yIEIpIHRoYW4gdGhlIHNuYXBEaXN0YW5jZSxcbiAgICAgICAgLy8gdGhlIGNsb3Nlc3RWZXJ0ZXhMYXRMbmcgaGFzIHByaW9yaXR5IG92ZXIgQyBhcyB0aGUgc25hcHBpbmcgcG9pbnQuXG4gICAgICAgIGlmIChzaG9ydGVzdERpc3RhbmNlIDwgcHJpb3JpdHlEaXN0YW5jZSkge1xuICAgICAgICAgICAgc25hcExhdGxuZyA9IGNsb3Nlc3RWZXJ0ZXhMYXRMbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzbmFwTGF0bG5nID0gQztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldHVybiB0aGUgY29weSBvZiBzbmFwcGluZyBwb2ludFxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc25hcExhdGxuZyk7XG4gICAgfSxcbiAgICBfY3JlYXRlU25hcExpc3Q6IGZ1bmN0aW9uIF9jcmVhdGVTbmFwTGlzdCgpIHtcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGxheWVycyA9IFtdO1xuICAgICAgICB2YXIgZGVidWdJbmRpY2F0b3JMaW5lcyA9IFtdO1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5fbWFwO1xuXG4gICAgICAgIC8vIGZpbmQgYWxsIGxheWVycyB0aGF0IGFyZSBvciBpbmhlcml0IGZyb20gUG9seWxpbmVzLi4uIGFuZCBtYXJrZXJzIHRoYXQgYXJlIG5vdFxuICAgICAgICAvLyB0ZW1wb3JhcnkgbWFya2VycyBvZiBwb2x5Z29uLWVkaXRzXG4gICAgICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLlBvbHlsaW5lIHx8IGxheWVyIGluc3RhbmNlb2YgTC5NYXJrZXIgfHwgbGF5ZXIgaW5zdGFuY2VvZiBMLkNpcmNsZU1hcmtlcikge1xuICAgICAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcblxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgICAgIHZhciBkZWJ1Z0xpbmUgPSBMLnBvbHlsaW5lKFtdLCB7IGNvbG9yOiAncmVkJyB9KTtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZGljYXRvckxpbmVzLnB1c2goZGVidWdMaW5lKTtcblxuICAgICAgICAgICAgICAgIC8vIHVuY29tbWVudCDwn5GHIHRoaXMgbGluZSB0byBzaG93IGhlbHBlciBsaW5lcyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgLy8gZGVidWdMaW5lLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC4uLmV4Y2VwdCBteXNlbGZcbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2xheWVyICE9PSBsYXllcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gYWxzbyByZW1vdmUgZXZlcnl0aGluZyB0aGF0IGhhcyBubyBjb29yZGluYXRlcyB5ZXRcbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllci5fbGF0bG5nIHx8IGxheWVyLl9sYXRsbmdzICYmIGxheWVyLl9sYXRsbmdzLmxlbmd0aCA+IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbmFsbHkgcmVtb3ZlIGV2ZXJ5dGhpbmcgdGhhdCdzIGxlYWZsZXQucG0gc3BlY2lmaWMgdGVtcG9yYXJ5IHN0dWZmXG4gICAgICAgIGxheWVycyA9IGxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gIWxheWVyLl9wbVRlbXBMYXllcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc2F2ZSBzbmFwbGlzdCBmcm9tIGxheWVycyBhbmQgdGhlIG90aGVyIHNuYXAgbGF5ZXJzIGFkZGVkIGZyb20gb3RoZXIgY2xhc3Nlcy9zY3JpcHRzXG4gICAgICAgIGlmICh0aGlzLl9vdGhlclNuYXBMYXllcnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3NuYXBMaXN0ID0gbGF5ZXJzLmNvbmNhdCh0aGlzLl9vdGhlclNuYXBMYXllcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc25hcExpc3QgPSBsYXllcnM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlYnVnSW5kaWNhdG9yTGluZXMgPSBkZWJ1Z0luZGljYXRvckxpbmVzO1xuICAgIH0sXG4gICAgX2NhbGNDbG9zZXN0TGF5ZXI6IGZ1bmN0aW9uIF9jYWxjQ2xvc2VzdExheWVyKGxhdGxuZywgbGF5ZXJzKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIC8vIHRoZSBjbG9zZXN0IHBvbHlnb24gdG8gb3VyIGRyYWdnZWQgbWFya2VyIGxhdGxuZ1xuICAgICAgICB2YXIgY2xvc2VzdExheWVyID0ge307XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBsYXllcnNcbiAgICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyLCBpbmRleCkge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY2xvc2VzdCBsYXRsbmcsIHNlZ21lbnQgYW5kIHRoZSBkaXN0YW5jZSBvZiB0aGlzIGxheWVyIHRvIHRoZSBkcmFnZ2VkIG1hcmtlciBsYXRsbmdcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gX3RoaXM0Ll9jYWxjTGF5ZXJEaXN0YW5jZXMobGF0bG5nLCBsYXllcik7XG5cbiAgICAgICAgICAgIC8vIHNob3cgaW5kaWNhdG9yIGxpbmVzLCBpdCdzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgIF90aGlzNC5kZWJ1Z0luZGljYXRvckxpbmVzW2luZGV4XS5zZXRMYXRMbmdzKFtsYXRsbmcsIHJlc3VsdHMubGF0bG5nXSk7XG5cbiAgICAgICAgICAgIC8vIHNhdmUgdGhlIGluZm8gaWYgaXQgZG9lc24ndCBleGlzdCBvciBpZiB0aGUgZGlzdGFuY2UgaXMgc21hbGxlciB0aGFuIHRoZSBwcmV2aW91cyBvbmVcbiAgICAgICAgICAgIGlmIChjbG9zZXN0TGF5ZXIuZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCByZXN1bHRzLmRpc3RhbmNlIDwgY2xvc2VzdExheWVyLmRpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdExheWVyID0gcmVzdWx0cztcbiAgICAgICAgICAgICAgICBjbG9zZXN0TGF5ZXIubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBjbG9zZXN0IGxheWVyIGFuZCBpdCdzIGRhdGFcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gY2xvc2VzdCBsYXllciwgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICByZXR1cm4gY2xvc2VzdExheWVyO1xuICAgIH0sXG4gICAgX2NhbGNMYXllckRpc3RhbmNlczogZnVuY3Rpb24gX2NhbGNMYXllckRpc3RhbmNlcyhsYXRsbmcsIGxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICAgICAgLy8gaXMgdGhpcyBhIHBvbHlsaW5lLCBtYXJrZXIgb3IgcG9seWdvbj9cbiAgICAgICAgdmFyIGlzUG9seWdvbiA9IGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5Z29uO1xuICAgICAgICB2YXIgaXNQb2x5bGluZSA9ICEobGF5ZXIgaW5zdGFuY2VvZiBMLlBvbHlnb24pICYmIGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5bGluZTtcbiAgICAgICAgdmFyIGlzTWFya2VyID0gbGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciB8fCBsYXllciBpbnN0YW5jZW9mIEwuQ2lyY2xlTWFya2VyO1xuXG4gICAgICAgIC8vIHRoZSBwb2ludCBQIHdoaWNoIHdlIHdhbnQgdG8gc25hcCAocHJvYnBhYmx5IHRoZSBtYXJrZXIgdGhhdCBpcyBkcmFnZ2VkKVxuICAgICAgICB2YXIgUCA9IGxhdGxuZztcblxuICAgICAgICB2YXIgY29vcmRzID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIHRoZSBjb29yZHMgb2YgdGhlIGxheWVyXG4gICAgICAgIGlmIChpc1BvbHlnb24pIHtcbiAgICAgICAgICAgIC8vIHBvbHlnb25cbiAgICAgICAgICAgIGNvb3JkcyA9IGxheWVyLmdldExhdExuZ3MoKVswXTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1BvbHlsaW5lKSB7XG4gICAgICAgICAgICAvLyBwb2x5bGluZVxuICAgICAgICAgICAgY29vcmRzID0gbGF5ZXIuZ2V0TGF0TG5ncygpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTWFya2VyKSB7XG4gICAgICAgICAgICAvLyBtYXJrZXJcbiAgICAgICAgICAgIGNvb3JkcyA9IGxheWVyLmdldExhdExuZygpO1xuXG4gICAgICAgICAgICAvLyByZXR1cm4gdGhlIGluZm8gZm9yIHRoZSBtYXJrZXIsIG5vIG1vcmUgY2FsY3VsYXRpb25zIG5lZWRlZFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsYXRsbmc6IE9iamVjdC5hc3NpZ24oe30sIGNvb3JkcyksXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IHRoaXMuX2dldERpc3RhbmNlKG1hcCwgY29vcmRzLCBQKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZSBjbG9zZXN0IHNlZ21lbnQgKGxpbmUgYmV0d2VlbiB0d28gcG9pbnRzKSBvZiB0aGUgbGF5ZXJcbiAgICAgICAgdmFyIGNsb3Nlc3RTZWdtZW50ID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIHRoZSBzaG9ydGVzdCBkaXN0YW5jZSBmcm9tIFAgdG8gY2xvc2VzdFNlZ21lbnRcbiAgICAgICAgdmFyIHNob3J0ZXN0RGlzdGFuY2UgPSB2b2lkIDA7XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBjb29yZHMgb2YgdGhlIGxheWVyXG4gICAgICAgIGNvb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChjb29yZCwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8vIHRha2UgdGhpcyBjb29yZCAoQSkuLi5cbiAgICAgICAgICAgIHZhciBBID0gY29vcmQ7XG4gICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAvLyBhbmQgdGhlIG5leHQgY29vcmQgKEIpIGFzIHBvaW50c1xuICAgICAgICAgICAgaWYgKGlzUG9seWdvbikge1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IGluZGV4ICsgMSA9PT0gY29vcmRzLmxlbmd0aCA/IDAgOiBpbmRleCArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCA9IGluZGV4ICsgMSA9PT0gY29vcmRzLmxlbmd0aCA/IHVuZGVmaW5lZCA6IGluZGV4ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIEIgPSBjb29yZHNbbmV4dEluZGV4XTtcblxuICAgICAgICAgICAgaWYgKEIpIHtcbiAgICAgICAgICAgICAgICAvLyBjYWxjIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIFAgYW5kIEFCLXNlZ21lbnRcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBfdGhpczUuX2dldERpc3RhbmNlVG9TZWdtZW50KG1hcCwgUCwgQSwgQik7XG5cbiAgICAgICAgICAgICAgICAvLyBpcyB0aGUgZGlzdGFuY2Ugc2hvcnRlciB0aGFuIHRoZSBwcmV2aW91cyBvbmU/IFNhdmUgaXQgYW5kIHRoZSBzZWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKHNob3J0ZXN0RGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBkaXN0YW5jZSA8IHNob3J0ZXN0RGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0U2VnbWVudCA9IFtBLCBCXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBub3csIHRha2UgdGhlIGNsb3Nlc3Qgc2VnbWVudCAoY2xvc2VzdFNlZ21lbnQpIGFuZCBjYWxjIHRoZSBjbG9zZXN0IHBvaW50IHRvIFAgb24gaXQuXG4gICAgICAgIHZhciBDID0gdGhpcy5fZ2V0Q2xvc2VzdFBvaW50T25TZWdtZW50KG1hcCwgbGF0bG5nLCBjbG9zZXN0U2VnbWVudFswXSwgY2xvc2VzdFNlZ21lbnRbMV0pO1xuXG4gICAgICAgIC8vIHJldHVybiB0aGUgbGF0bG5nIG9mIHRoYXQgc3Vja2VyXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRsbmc6IE9iamVjdC5hc3NpZ24oe30sIEMpLFxuICAgICAgICAgICAgc2VnbWVudDogY2xvc2VzdFNlZ21lbnQsXG4gICAgICAgICAgICBkaXN0YW5jZTogc2hvcnRlc3REaXN0YW5jZVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudDogZnVuY3Rpb24gX2dldENsb3Nlc3RQb2ludE9uU2VnbWVudChtYXAsIGxhdGxuZywgbGF0bG5nQSwgbGF0bG5nQikge1xuICAgICAgICB2YXIgbWF4em9vbSA9IG1hcC5nZXRNYXhab29tKCk7XG4gICAgICAgIGlmIChtYXh6b29tID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgbWF4em9vbSA9IG1hcC5nZXRab29tKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIFAgPSBtYXAucHJvamVjdChsYXRsbmcsIG1heHpvb20pO1xuICAgICAgICB2YXIgQSA9IG1hcC5wcm9qZWN0KGxhdGxuZ0EsIG1heHpvb20pO1xuICAgICAgICB2YXIgQiA9IG1hcC5wcm9qZWN0KGxhdGxuZ0IsIG1heHpvb20pO1xuICAgICAgICB2YXIgY2xvc2VzdCA9IEwuTGluZVV0aWwuY2xvc2VzdFBvaW50T25TZWdtZW50KFAsIEEsIEIpO1xuICAgICAgICByZXR1cm4gbWFwLnVucHJvamVjdChjbG9zZXN0LCBtYXh6b29tKTtcbiAgICB9LFxuICAgIF9nZXREaXN0YW5jZVRvU2VnbWVudDogZnVuY3Rpb24gX2dldERpc3RhbmNlVG9TZWdtZW50KG1hcCwgbGF0bG5nLCBsYXRsbmdBLCBsYXRsbmdCKSB7XG4gICAgICAgIHZhciBQID0gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmcpO1xuICAgICAgICB2YXIgQSA9IG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobGF0bG5nQSk7XG4gICAgICAgIHZhciBCID0gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmdCKTtcbiAgICAgICAgcmV0dXJuIEwuTGluZVV0aWwucG9pbnRUb1NlZ21lbnREaXN0YW5jZShQLCBBLCBCKTtcbiAgICB9LFxuICAgIF9nZXREaXN0YW5jZTogZnVuY3Rpb24gX2dldERpc3RhbmNlKG1hcCwgbGF0bG5nQSwgbGF0bG5nQikge1xuICAgICAgICByZXR1cm4gbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChsYXRsbmdBKS5kaXN0YW5jZVRvKG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobGF0bG5nQikpO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNuYXBNaXhpbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9NaXhpbnMvU25hcHBpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(17);\n\nvar _package = __webpack_require__(20);\n\nvar _LPM = __webpack_require__(13);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nvar _LPM3 = __webpack_require__(16);\n\nvar _LPM4 = _interopRequireDefault(_LPM3);\n\nvar _LPM5 = __webpack_require__(1);\n\nvar _LPM6 = _interopRequireDefault(_LPM5);\n\n__webpack_require__(4);\n\n__webpack_require__(5);\n\n__webpack_require__(7);\n\n__webpack_require__(6);\n\nvar _LPM7 = __webpack_require__(0);\n\nvar _LPM8 = _interopRequireDefault(_LPM7);\n\n__webpack_require__(10);\n\n__webpack_require__(12);\n\n__webpack_require__(8);\n\n__webpack_require__(11);\n\n__webpack_require__(9);\n\n__webpack_require__(19);\n\n__webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nL.PM = L.PM || {\n    Map: _LPM2.default,\n    Toolbar: _LPM4.default,\n    Draw: _LPM6.default,\n    Edit: _LPM8.default,\n    version: _package.version,\n    initialize: function initialize() {\n        this.addInitHooks();\n    },\n    addInitHooks: function addInitHooks() {\n        function initLayerGroup() {\n            this.pm = new L.PM.Edit.LayerGroup(this);\n        }\n\n        L.LayerGroup.addInitHook(initLayerGroup);\n\n        function initMarker() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Marker(this);\n            }\n        }\n\n        L.Marker.addInitHook(initMarker);\n\n        function initPolygon() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Poly(this);\n            }\n        }\n\n        L.Polygon.addInitHook(initPolygon);\n\n        function initPolyline() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Line(this);\n            }\n        }\n\n        L.Polyline.addInitHook(initPolyline);\n\n        function initCircle() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Edit.Circle(this);\n            }\n        }\n\n        L.Circle.addInitHook(initCircle);\n\n        function initMap() {\n            if (!this.options.pmIgnore) {\n                this.pm = new L.PM.Map(this);\n            }\n        }\n\n        L.Map.addInitHook(initMap);\n    }\n};\n\n// initialize leaflet.pm\n/**\n*\n* A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0\n* by Sumit Kumar (@TweetsOfSumit)\n* Github Repo: https://github.com/codeofsumit/leaflet.pm\n*/\n\nL.PM.initialize();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9MLlBNLmpzP2M0MjUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5yZXF1aXJlKCcuL3BvbHlmaWxscy5qcycpO1xuXG52YXIgX3BhY2thZ2UgPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlLmpzb24nKTtcblxudmFyIF9MUE0gPSByZXF1aXJlKCcuL0wuUE0uTWFwJyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbnZhciBfTFBNMyA9IHJlcXVpcmUoJy4vVG9vbGJhci9MLlBNLlRvb2xiYXInKTtcblxudmFyIF9MUE00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNMyk7XG5cbnZhciBfTFBNNSA9IHJlcXVpcmUoJy4vRHJhdy9MLlBNLkRyYXcnKTtcblxudmFyIF9MUE02ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNNSk7XG5cbnJlcXVpcmUoJy4vRHJhdy9MLlBNLkRyYXcuQ2lyY2xlJyk7XG5cbnJlcXVpcmUoJy4vRHJhdy9MLlBNLkRyYXcuTGluZScpO1xuXG5yZXF1aXJlKCcuL0RyYXcvTC5QTS5EcmF3LlBvbHknKTtcblxucmVxdWlyZSgnLi9EcmF3L0wuUE0uRHJhdy5NYXJrZXInKTtcblxudmFyIF9MUE03ID0gcmVxdWlyZSgnLi9FZGl0L0wuUE0uRWRpdCcpO1xuXG52YXIgX0xQTTggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MUE03KTtcblxucmVxdWlyZSgnLi9FZGl0L0wuUE0uRWRpdC5MaW5lJyk7XG5cbnJlcXVpcmUoJy4vRWRpdC9MLlBNLkVkaXQuUG9seScpO1xuXG5yZXF1aXJlKCcuL0VkaXQvTC5QTS5FZGl0LkNpcmNsZScpO1xuXG5yZXF1aXJlKCcuL0VkaXQvTC5QTS5FZGl0Lk1hcmtlcicpO1xuXG5yZXF1aXJlKCcuL0VkaXQvTC5QTS5FZGl0LkxheWVyR3JvdXAnKTtcblxucmVxdWlyZSgnLi4vY3NzL2xheWVycy5jc3MnKTtcblxucmVxdWlyZSgnLi4vY3NzL2NvbnRyb2xzLmNzcycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5MLlBNID0gTC5QTSB8fCB7XG4gICAgTWFwOiBfTFBNMi5kZWZhdWx0LFxuICAgIFRvb2xiYXI6IF9MUE00LmRlZmF1bHQsXG4gICAgRHJhdzogX0xQTTYuZGVmYXVsdCxcbiAgICBFZGl0OiBfTFBNOC5kZWZhdWx0LFxuICAgIHZlcnNpb246IF9wYWNrYWdlLnZlcnNpb24sXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5hZGRJbml0SG9va3MoKTtcbiAgICB9LFxuICAgIGFkZEluaXRIb29rczogZnVuY3Rpb24gYWRkSW5pdEhvb2tzKCkge1xuICAgICAgICBmdW5jdGlvbiBpbml0TGF5ZXJHcm91cCgpIHtcbiAgICAgICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0LkxheWVyR3JvdXAodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBMLkxheWVyR3JvdXAuYWRkSW5pdEhvb2soaW5pdExheWVyR3JvdXApO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRNYXJrZXIoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0Lk1hcmtlcih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEwuTWFya2VyLmFkZEluaXRIb29rKGluaXRNYXJrZXIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRQb2x5Z29uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucG1JZ25vcmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBtID0gbmV3IEwuUE0uRWRpdC5Qb2x5KHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgTC5Qb2x5Z29uLmFkZEluaXRIb29rKGluaXRQb2x5Z29uKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0UG9seWxpbmUoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5wbUlnbm9yZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG0gPSBuZXcgTC5QTS5FZGl0LkxpbmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBMLlBvbHlsaW5lLmFkZEluaXRIb29rKGluaXRQb2x5bGluZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdENpcmNsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnBtSWdub3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbSA9IG5ldyBMLlBNLkVkaXQuQ2lyY2xlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgTC5DaXJjbGUuYWRkSW5pdEhvb2soaW5pdENpcmNsZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnBtSWdub3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbSA9IG5ldyBMLlBNLk1hcCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIEwuTWFwLmFkZEluaXRIb29rKGluaXRNYXApO1xuICAgIH1cbn07XG5cbi8vIGluaXRpYWxpemUgbGVhZmxldC5wbVxuLyoqXG4qXG4qIEEgTGVhZmxldCBQbHVnaW4gRm9yIEVkaXRpbmcgR2VvbWV0cnkgTGF5ZXJzIGluIExlYWZsZXQgMS4wXG4qIGJ5IFN1bWl0IEt1bWFyIChAVHdlZXRzT2ZTdW1pdClcbiogR2l0aHViIFJlcG86IGh0dHBzOi8vZ2l0aHViLmNvbS9jb2Rlb2ZzdW1pdC9sZWFmbGV0LnBtXG4qL1xuXG5MLlBNLmluaXRpYWxpemUoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9MLlBNLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Circle = _LPM2.default.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Circle';\n        this.toolbarButtonName = 'drawCircle';\n    },\n    enable: function enable(options) {\n        // TODO: Think about if these options could be passed globally for all\n        // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n        L.Util.setOptions(this, options);\n\n        this.options.radius = 0;\n\n        // enable draw mode\n        this._enabled = true;\n\n        // create a new layergroup\n        this._layerGroup = new L.LayerGroup();\n        this._layerGroup._pmTempLayer = true;\n        this._layerGroup.addTo(this._map);\n\n        // this is the circle we want to draw\n        this._layer = L.circle([0, 0], this.options.templineStyle);\n        this._layer._pmTempLayer = true;\n        this._layerGroup.addLayer(this._layer);\n\n        // this is the marker in the center of the circle\n        this._centerMarker = L.marker([0, 0], {\n            icon: L.divIcon({ className: 'marker-icon' }),\n            draggable: true,\n            zIndexOffset: 100\n        });\n        this._centerMarker._pmTempLayer = true;\n        this._layerGroup.addLayer(this._centerMarker);\n\n        // this is the hintmarker on the mouse cursor\n        this._hintMarker = L.marker([0, 0], {\n            icon: L.divIcon({ className: 'marker-icon cursor-marker' })\n        });\n        this._hintMarker._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintMarker);\n\n        // show the hintmarker if the option is set\n        if (this.options.cursorMarker) {\n            L.DomUtil.addClass(this._hintMarker._icon, 'visible');\n        }\n\n        // this is the hintline from the hint marker to the center marker\n        this._hintline = L.polyline([], this.options.hintlineStyle);\n        this._hintline._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintline);\n\n        // change map cursor\n        this._map._container.style.cursor = 'crosshair';\n\n        // create a polygon-point on click\n        this._map.on('click', this._placeCenterMarker, this);\n\n        // sync hint marker with mouse cursor\n        this._map.on('mousemove', this._syncHintMarker, this);\n\n        // fire drawstart event\n        this._map.fire('pm:drawstart', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true);\n\n        // an array used in the snapping mixin.\n        // TODO: think about moving this somewhere else?\n        this._otherSnapLayers = [];\n    },\n    disable: function disable() {\n        // disable drawing mode\n\n        // cancel, if drawing mode isn't event enabled\n        if (!this._enabled) {\n            return;\n        }\n\n        this._enabled = false;\n\n        // reset cursor\n        this._map._container.style.cursor = 'default';\n\n        // unbind listeners\n        this._map.off('click', this._finishShape, this);\n        this._map.off('click', this._placeCenterMarker, this);\n        this._map.off('mousemove', this._syncHintMarker, this);\n\n        // remove helping layers\n        this._map.removeLayer(this._layerGroup);\n\n        // fire drawend event\n        this._map.fire('pm:drawend', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false);\n\n        // cleanup snapping\n        if (this.options.snappable) {\n            this._cleanupSnapping();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    toggle: function toggle(options) {\n        if (this.enabled()) {\n            this.disable();\n        } else {\n            this.enable(options);\n        }\n    },\n    _syncHintLine: function _syncHintLine() {\n        var latlng = this._centerMarker.getLatLng();\n\n        // set coords for hintline from marker to last vertex of drawin polyline\n        this._hintline.setLatLngs([latlng, this._hintMarker.getLatLng()]);\n    },\n    _syncCircleRadius: function _syncCircleRadius() {\n        var A = this._centerMarker.getLatLng();\n        var B = this._hintMarker.getLatLng();\n\n        var distance = A.distanceTo(B);\n\n        this._layer.setRadius(distance);\n    },\n    _syncHintMarker: function _syncHintMarker(e) {\n        // move the cursor marker\n        this._hintMarker.setLatLng(e.latlng);\n\n        // if snapping is enabled, do it\n        if (this.options.snappable) {\n            var fakeDragEvent = e;\n            fakeDragEvent.target = this._hintMarker;\n            this._handleSnapping(fakeDragEvent);\n        }\n    },\n    _placeCenterMarker: function _placeCenterMarker(e) {\n        // assign the coordinate of the click to the hintMarker, that's necessary for\n        // mobile where the marker can't follow a cursor\n        if (!this._hintMarker._snapped) {\n            this._hintMarker.setLatLng(e.latlng);\n        }\n\n        // get coordinate for new vertex by hintMarker (cursor marker)\n        var latlng = this._hintMarker.getLatLng();\n\n        this._centerMarker.setLatLng(latlng);\n\n        this._map.off('click', this._placeCenterMarker, this);\n        this._map.on('click', this._finishShape, this);\n\n        this._placeCircleCenter();\n    },\n    _placeCircleCenter: function _placeCircleCenter() {\n        var latlng = this._centerMarker.getLatLng();\n\n        if (latlng) {\n            this._layer.setLatLng(latlng);\n\n            // sync the hintline with hint marker\n            this._hintMarker.on('move', this._syncHintLine, this);\n            this._hintMarker.on('move', this._syncCircleRadius, this);\n        }\n    },\n    _finishShape: function _finishShape() {\n        // calc the radius\n        var center = this._centerMarker.getLatLng();\n        var cursor = this._hintMarker.getLatLng();\n        var radius = center.distanceTo(cursor);\n\n        // create the final circle layer\n        var circleLayer = L.circle(center, { radius: radius }).addTo(this._map);\n\n        // disable drawing\n        this.disable();\n\n        // fire the pm:create event and pass shape and layer\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            layer: circleLayer\n        });\n    },\n    _createMarker: function _createMarker(latlng) {\n        // create the new marker\n        var marker = new L.Marker(latlng, {\n            draggable: false,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n        marker._pmTempLayer = true;\n\n        // add it to the map\n        this._layerGroup.addLayer(marker);\n\n        return marker;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5DaXJjbGUuanM/MTE2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfTFBNID0gcmVxdWlyZSgnLi9MLlBNLkRyYXcnKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTTIuZGVmYXVsdC5DaXJjbGUgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICB0aGlzLl9zaGFwZSA9ICdDaXJjbGUnO1xuICAgICAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdDaXJjbGUnO1xuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgICAgICAvLyBUT0RPOiBUaGluayBhYm91dCBpZiB0aGVzZSBvcHRpb25zIGNvdWxkIGJlIHBhc3NlZCBnbG9iYWxseSBmb3IgYWxsXG4gICAgICAgIC8vIGluc3RhbmNlcyBvZiBMLlBNLkRyYXcuIFNvIGEgZGV2IGNvdWxkIHNldCBkcmF3aW5nIHN0eWxlIG9uZSB0aW1lIGFzIHNvbWUga2luZCBvZiBjb25maWdcbiAgICAgICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnJhZGl1cyA9IDA7XG5cbiAgICAgICAgLy8gZW5hYmxlIGRyYXcgbW9kZVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAvLyBjcmVhdGUgYSBuZXcgbGF5ZXJncm91cFxuICAgICAgICB0aGlzLl9sYXllckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgICAgICB0aGlzLl9sYXllckdyb3VwLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkVG8odGhpcy5fbWFwKTtcblxuICAgICAgICAvLyB0aGlzIGlzIHRoZSBjaXJjbGUgd2Ugd2FudCB0byBkcmF3XG4gICAgICAgIHRoaXMuX2xheWVyID0gTC5jaXJjbGUoWzAsIDBdLCB0aGlzLm9wdGlvbnMudGVtcGxpbmVTdHlsZSk7XG4gICAgICAgIHRoaXMuX2xheWVyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5fbGF5ZXIpO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIG1hcmtlciBpbiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGVcbiAgICAgICAgdGhpcy5fY2VudGVyTWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB7XG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSksXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICB6SW5kZXhPZmZzZXQ6IDEwMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2VudGVyTWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5fY2VudGVyTWFya2VyKTtcblxuICAgICAgICAvLyB0aGlzIGlzIHRoZSBoaW50bWFya2VyIG9uIHRoZSBtb3VzZSBjdXJzb3JcbiAgICAgICAgdGhpcy5faGludE1hcmtlciA9IEwubWFya2VyKFswLCAwXSwge1xuICAgICAgICAgICAgaWNvbjogTC5kaXZJY29uKHsgY2xhc3NOYW1lOiAnbWFya2VyLWljb24gY3Vyc29yLW1hcmtlcicgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9oaW50TWFya2VyKTtcblxuICAgICAgICAvLyBzaG93IHRoZSBoaW50bWFya2VyIGlmIHRoZSBvcHRpb24gaXMgc2V0XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY3Vyc29yTWFya2VyKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5faGludE1hcmtlci5faWNvbiwgJ3Zpc2libGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGhpbnRsaW5lIGZyb20gdGhlIGhpbnQgbWFya2VyIHRvIHRoZSBjZW50ZXIgbWFya2VyXG4gICAgICAgIHRoaXMuX2hpbnRsaW5lID0gTC5wb2x5bGluZShbXSwgdGhpcy5vcHRpb25zLmhpbnRsaW5lU3R5bGUpO1xuICAgICAgICB0aGlzLl9oaW50bGluZS5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRsaW5lKTtcblxuICAgICAgICAvLyBjaGFuZ2UgbWFwIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcblxuICAgICAgICAvLyBjcmVhdGUgYSBwb2x5Z29uLXBvaW50IG9uIGNsaWNrXG4gICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9wbGFjZUNlbnRlck1hcmtlciwgdGhpcyk7XG5cbiAgICAgICAgLy8gc3luYyBoaW50IG1hcmtlciB3aXRoIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAub24oJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBmaXJlIGRyYXdzdGFydCBldmVudFxuICAgICAgICB0aGlzLl9tYXAuZmlyZSgncG06ZHJhd3N0YXJ0JywgeyBzaGFwZTogdGhpcy5fc2hhcGUgfSk7XG5cbiAgICAgICAgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZW5hYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIHRydWUpO1xuXG4gICAgICAgIC8vIGFuIGFycmF5IHVzZWQgaW4gdGhlIHNuYXBwaW5nIG1peGluLlxuICAgICAgICAvLyBUT0RPOiB0aGluayBhYm91dCBtb3ZpbmcgdGhpcyBzb21ld2hlcmUgZWxzZT9cbiAgICAgICAgdGhpcy5fb3RoZXJTbmFwTGF5ZXJzID0gW107XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICAvLyBkaXNhYmxlIGRyYXdpbmcgbW9kZVxuXG4gICAgICAgIC8vIGNhbmNlbCwgaWYgZHJhd2luZyBtb2RlIGlzbid0IGV2ZW50IGVuYWJsZWRcbiAgICAgICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gcmVzZXQgY3Vyc29yXG4gICAgICAgIHRoaXMuX21hcC5fY29udGFpbmVyLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcblxuICAgICAgICAvLyB1bmJpbmQgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuICAgICAgICB0aGlzLl9tYXAub2ZmKCdjbGljaycsIHRoaXMuX3BsYWNlQ2VudGVyTWFya2VyLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fbWFwLm9mZignbW91c2Vtb3ZlJywgdGhpcy5fc3luY0hpbnRNYXJrZXIsIHRoaXMpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBoZWxwaW5nIGxheWVyc1xuICAgICAgICB0aGlzLl9tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJHcm91cCk7XG5cbiAgICAgICAgLy8gZmlyZSBkcmF3ZW5kIGV2ZW50XG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3ZW5kJywgeyBzaGFwZTogdGhpcy5fc2hhcGUgfSk7XG5cbiAgICAgICAgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZGlzYWJsZWQgd2l0aG91dCB0aGUgYnV0dG9uXG4gICAgICAgIHRoaXMuX21hcC5wbS5Ub29sYmFyLnRvZ2dsZUJ1dHRvbih0aGlzLnRvb2xiYXJCdXR0b25OYW1lLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gY2xlYW51cCBzbmFwcGluZ1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5fY2xlYW51cFNuYXBwaW5nKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9zeW5jSGludExpbmU6IGZ1bmN0aW9uIF9zeW5jSGludExpbmUoKSB7XG4gICAgICAgIHZhciBsYXRsbmcgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgLy8gc2V0IGNvb3JkcyBmb3IgaGludGxpbmUgZnJvbSBtYXJrZXIgdG8gbGFzdCB2ZXJ0ZXggb2YgZHJhd2luIHBvbHlsaW5lXG4gICAgICAgIHRoaXMuX2hpbnRsaW5lLnNldExhdExuZ3MoW2xhdGxuZywgdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKV0pO1xuICAgIH0sXG4gICAgX3N5bmNDaXJjbGVSYWRpdXM6IGZ1bmN0aW9uIF9zeW5jQ2lyY2xlUmFkaXVzKCkge1xuICAgICAgICB2YXIgQSA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIEIgPSB0aGlzLl9oaW50TWFya2VyLmdldExhdExuZygpO1xuXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IEEuZGlzdGFuY2VUbyhCKTtcblxuICAgICAgICB0aGlzLl9sYXllci5zZXRSYWRpdXMoZGlzdGFuY2UpO1xuICAgIH0sXG4gICAgX3N5bmNIaW50TWFya2VyOiBmdW5jdGlvbiBfc3luY0hpbnRNYXJrZXIoZSkge1xuICAgICAgICAvLyBtb3ZlIHRoZSBjdXJzb3IgbWFya2VyXG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuc2V0TGF0TG5nKGUubGF0bG5nKTtcblxuICAgICAgICAvLyBpZiBzbmFwcGluZyBpcyBlbmFibGVkLCBkbyBpdFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgICAgICAgdmFyIGZha2VEcmFnRXZlbnQgPSBlO1xuICAgICAgICAgICAgZmFrZURyYWdFdmVudC50YXJnZXQgPSB0aGlzLl9oaW50TWFya2VyO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlU25hcHBpbmcoZmFrZURyYWdFdmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9wbGFjZUNlbnRlck1hcmtlcjogZnVuY3Rpb24gX3BsYWNlQ2VudGVyTWFya2VyKGUpIHtcbiAgICAgICAgLy8gYXNzaWduIHRoZSBjb29yZGluYXRlIG9mIHRoZSBjbGljayB0byB0aGUgaGludE1hcmtlciwgdGhhdCdzIG5lY2Vzc2FyeSBmb3JcbiAgICAgICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG4gICAgICAgIGlmICghdGhpcy5faGludE1hcmtlci5fc25hcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IGNvb3JkaW5hdGUgZm9yIG5ldyB2ZXJ0ZXggYnkgaGludE1hcmtlciAoY3Vyc29yIG1hcmtlcilcbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgdGhpcy5fY2VudGVyTWFya2VyLnNldExhdExuZyhsYXRsbmcpO1xuXG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fcGxhY2VDZW50ZXJNYXJrZXIsIHRoaXMpO1xuICAgICAgICB0aGlzLl9tYXAub24oJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMuX3BsYWNlQ2lyY2xlQ2VudGVyKCk7XG4gICAgfSxcbiAgICBfcGxhY2VDaXJjbGVDZW50ZXI6IGZ1bmN0aW9uIF9wbGFjZUNpcmNsZUNlbnRlcigpIHtcbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgICAgICBpZiAobGF0bG5nKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmcobGF0bG5nKTtcblxuICAgICAgICAgICAgLy8gc3luYyB0aGUgaGludGxpbmUgd2l0aCBoaW50IG1hcmtlclxuICAgICAgICAgICAgdGhpcy5faGludE1hcmtlci5vbignbW92ZScsIHRoaXMuX3N5bmNIaW50TGluZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9oaW50TWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fc3luY0NpcmNsZVJhZGl1cywgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9maW5pc2hTaGFwZTogZnVuY3Rpb24gX2ZpbmlzaFNoYXBlKCkge1xuICAgICAgICAvLyBjYWxjIHRoZSByYWRpdXNcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciByYWRpdXMgPSBjZW50ZXIuZGlzdGFuY2VUbyhjdXJzb3IpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgZmluYWwgY2lyY2xlIGxheWVyXG4gICAgICAgIHZhciBjaXJjbGVMYXllciA9IEwuY2lyY2xlKGNlbnRlciwgeyByYWRpdXM6IHJhZGl1cyB9KS5hZGRUbyh0aGlzLl9tYXApO1xuXG4gICAgICAgIC8vIGRpc2FibGUgZHJhd2luZ1xuICAgICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgICAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICAgICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICAgICAgICBsYXllcjogY2lyY2xlTGF5ZXJcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZykge1xuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtYXJrZXJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIC8vIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LkNpcmNsZS5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Line = _LPM2.default.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Line';\n        this.toolbarButtonName = 'drawPolyline';\n    },\n    enable: function enable(options) {\n        // TODO: Think about if these options could be passed globally for all\n        // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n        L.Util.setOptions(this, options);\n\n        // enable draw mode\n        this._enabled = true;\n\n        // create a new layergroup\n        this._layerGroup = new L.LayerGroup();\n        this._layerGroup._pmTempLayer = true;\n        this._layerGroup.addTo(this._map);\n\n        // this is the polyLine that'll make up the polygon\n        this._layer = L.polyline([], this.options.templineStyle);\n        this._layer._pmTempLayer = true;\n        this._layerGroup.addLayer(this._layer);\n\n        // this is the hintline from the mouse cursor to the last marker\n        this._hintline = L.polyline([], this.options.hintlineStyle);\n        this._hintline._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintline);\n\n        // this is the hintmarker on the mouse cursor\n        this._hintMarker = L.marker([0, 0], {\n            icon: L.divIcon({ className: 'marker-icon cursor-marker' })\n        });\n        this._hintMarker._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintMarker);\n\n        // show the hintmarker if the option is set\n        if (this.options.cursorMarker) {\n            L.DomUtil.addClass(this._hintMarker._icon, 'visible');\n        }\n\n        // change map cursor\n        this._map._container.style.cursor = 'crosshair';\n\n        // create a polygon-point on click\n        this._map.on('click', this._createVertex, this);\n\n        // finish on double click\n        if (this.options.finishOnDoubleClick) {\n            this._map.on('dblclick', this._finishShape, this);\n        }\n\n        // sync hint marker with mouse cursor\n        this._map.on('mousemove', this._syncHintMarker, this);\n\n        // sync the hintline with hint marker\n        this._hintMarker.on('move', this._syncHintLine, this);\n\n        // fire drawstart event\n        this._map.fire('pm:drawstart', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true);\n\n        // an array used in the snapping mixin.\n        // TODO: think about moving this somewhere else?\n        this._otherSnapLayers = [];\n    },\n    disable: function disable() {\n        // disable draw mode\n\n        // cancel, if drawing mode isn't even enabled\n        if (!this._enabled) {\n            return;\n        }\n\n        this._enabled = false;\n\n        // reset cursor\n        this._map._container.style.cursor = 'default';\n\n        // unbind listeners\n        this._map.off('click', this._createVertex, this);\n        this._map.off('mousemove', this._syncHintMarker, this);\n        this._map.off('dblclick', this._finishShape, this);\n\n        // remove layer\n        this._map.removeLayer(this._layerGroup);\n\n        // fire drawend event\n        this._map.fire('pm:drawend', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false);\n\n        // cleanup snapping\n        if (this.options.snappable) {\n            this._cleanupSnapping();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    toggle: function toggle(options) {\n        if (this.enabled()) {\n            this.disable();\n        } else {\n            this.enable(options);\n        }\n    },\n    _syncHintLine: function _syncHintLine() {\n        var polyPoints = this._layer.getLatLngs();\n\n        if (polyPoints.length > 0) {\n            var lastPolygonPoint = polyPoints[polyPoints.length - 1];\n\n            // set coords for hintline from marker to last vertex of drawin polyline\n            this._hintline.setLatLngs([lastPolygonPoint, this._hintMarker.getLatLng()]);\n        }\n    },\n    _syncHintMarker: function _syncHintMarker(e) {\n        // move the cursor marker\n        this._hintMarker.setLatLng(e.latlng);\n\n        // if snapping is enabled, do it\n        if (this.options.snappable) {\n            var fakeDragEvent = e;\n            fakeDragEvent.target = this._hintMarker;\n            this._handleSnapping(fakeDragEvent);\n        }\n    },\n    _createVertex: function _createVertex(e) {\n        // assign the coordinate of the click to the hintMarker, that's necessary for\n        // mobile where the marker can't follow a cursor\n        if (!this._hintMarker._snapped) {\n            this._hintMarker.setLatLng(e.latlng);\n        }\n\n        // get coordinate for new vertex by hintMarker (cursor marker)\n        var latlng = this._hintMarker.getLatLng();\n\n        // check if the first and this vertex have the same latlng\n        if (latlng.equals(this._layer.getLatLngs()[0])) {\n            // yes? finish the polygon\n            this._finishShape();\n\n            // \"why?\", you ask? Because this happens when we snap the last vertex to the first one\n            // and then click without hitting the last marker. Click happens on the map\n            // in 99% of cases it's because the user wants to finish the polygon. So...\n            return;\n        }\n\n        // is this the first point?\n        var first = this._layer.getLatLngs().length === 0;\n\n        this._layer.addLatLng(latlng);\n        this._createMarker(latlng, first);\n\n        this._hintline.setLatLngs([latlng, latlng]);\n    },\n    _finishShape: function _finishShape() {\n        // get coordinates, create the leaflet shape and add it to the map\n        var coords = this._layer.getLatLngs();\n        var polylineLayer = L.polyline(coords, this.options.pathOptions).addTo(this._map);\n\n        // disable drawing\n        this.disable();\n\n        // fire the pm:create event and pass shape and layer\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            layer: polylineLayer\n        });\n\n        if (this.options.snappable) {\n            this._cleanupSnapping();\n        }\n    },\n    _createMarker: function _createMarker(latlng) {\n        // create the new marker\n        var marker = new L.Marker(latlng, {\n            draggable: false,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n        marker._pmTempLayer = true;\n\n        // add it to the map\n        this._layerGroup.addLayer(marker);\n\n        // a click on any marker finishes this shape\n        marker.on('click', this._finishShape, this);\n\n        return marker;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5MaW5lLmpzP2ZkNDUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5EcmF3Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbl9MUE0yLmRlZmF1bHQuTGluZSA9IF9MUE0yLmRlZmF1bHQuZXh0ZW5kKHtcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG1hcCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMuX3NoYXBlID0gJ0xpbmUnO1xuICAgICAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdQb2x5bGluZSc7XG4gICAgfSxcbiAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZShvcHRpb25zKSB7XG4gICAgICAgIC8vIFRPRE86IFRoaW5rIGFib3V0IGlmIHRoZXNlIG9wdGlvbnMgY291bGQgYmUgcGFzc2VkIGdsb2JhbGx5IGZvciBhbGxcbiAgICAgICAgLy8gaW5zdGFuY2VzIG9mIEwuUE0uRHJhdy4gU28gYSBkZXYgY291bGQgc2V0IGRyYXdpbmcgc3R5bGUgb25lIHRpbWUgYXMgc29tZSBraW5kIG9mIGNvbmZpZ1xuICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBlbmFibGUgZHJhdyBtb2RlXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBsYXllcmdyb3VwXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAgPSBuZXcgTC5MYXllckdyb3VwKCk7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRUbyh0aGlzLl9tYXApO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIHBvbHlMaW5lIHRoYXQnbGwgbWFrZSB1cCB0aGUgcG9seWdvblxuICAgICAgICB0aGlzLl9sYXllciA9IEwucG9seWxpbmUoW10sIHRoaXMub3B0aW9ucy50ZW1wbGluZVN0eWxlKTtcbiAgICAgICAgdGhpcy5fbGF5ZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9sYXllcik7XG5cbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgaGludGxpbmUgZnJvbSB0aGUgbW91c2UgY3Vyc29yIHRvIHRoZSBsYXN0IG1hcmtlclxuICAgICAgICB0aGlzLl9oaW50bGluZSA9IEwucG9seWxpbmUoW10sIHRoaXMub3B0aW9ucy5oaW50bGluZVN0eWxlKTtcbiAgICAgICAgdGhpcy5faGludGxpbmUuX3BtVGVtcExheWVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5hZGRMYXllcih0aGlzLl9oaW50bGluZSk7XG5cbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgaGludG1hcmtlciBvbiB0aGUgbW91c2UgY3Vyc29yXG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIgPSBMLm1hcmtlcihbMCwgMF0sIHtcbiAgICAgICAgICAgIGljb246IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uIGN1cnNvci1tYXJrZXInIH0pXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9oaW50TWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIodGhpcy5faGludE1hcmtlcik7XG5cbiAgICAgICAgLy8gc2hvdyB0aGUgaGludG1hcmtlciBpZiB0aGUgb3B0aW9uIGlzIHNldFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmN1cnNvck1hcmtlcikge1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2hpbnRNYXJrZXIuX2ljb24sICd2aXNpYmxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGFuZ2UgbWFwIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcblxuICAgICAgICAvLyBjcmVhdGUgYSBwb2x5Z29uLXBvaW50IG9uIGNsaWNrXG4gICAgICAgIHRoaXMuX21hcC5vbignY2xpY2snLCB0aGlzLl9jcmVhdGVWZXJ0ZXgsIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpbmlzaCBvbiBkb3VibGUgY2xpY2tcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5maW5pc2hPbkRvdWJsZUNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXAub24oJ2RibGNsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3luYyBoaW50IG1hcmtlciB3aXRoIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAub24oJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBzeW5jIHRoZSBoaW50bGluZSB3aXRoIGhpbnQgbWFya2VyXG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIub24oJ21vdmUnLCB0aGlzLl9zeW5jSGludExpbmUsIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBlbmFibGVkIHdpdGhvdXQgdGhlIGJ1dHRvblxuICAgICAgICB0aGlzLl9tYXAucG0uVG9vbGJhci50b2dnbGVCdXR0b24odGhpcy50b29sYmFyQnV0dG9uTmFtZSwgdHJ1ZSk7XG5cbiAgICAgICAgLy8gYW4gYXJyYXkgdXNlZCBpbiB0aGUgc25hcHBpbmcgbWl4aW4uXG4gICAgICAgIC8vIFRPRE86IHRoaW5rIGFib3V0IG1vdmluZyB0aGlzIHNvbWV3aGVyZSBlbHNlP1xuICAgICAgICB0aGlzLl9vdGhlclNuYXBMYXllcnMgPSBbXTtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIC8vIGRpc2FibGUgZHJhdyBtb2RlXG5cbiAgICAgICAgLy8gY2FuY2VsLCBpZiBkcmF3aW5nIG1vZGUgaXNuJ3QgZXZlbiBlbmFibGVkXG4gICAgICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIHJlc2V0IGN1cnNvclxuICAgICAgICB0aGlzLl9tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG5cbiAgICAgICAgLy8gdW5iaW5kIGxpc3RlbmVyc1xuICAgICAgICB0aGlzLl9tYXAub2ZmKCdjbGljaycsIHRoaXMuX2NyZWF0ZVZlcnRleCwgdGhpcyk7XG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ21vdXNlbW92ZScsIHRoaXMuX3N5bmNIaW50TWFya2VyLCB0aGlzKTtcbiAgICAgICAgdGhpcy5fbWFwLm9mZignZGJsY2xpY2snLCB0aGlzLl9maW5pc2hTaGFwZSwgdGhpcyk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGxheWVyXG4gICAgICAgIHRoaXMuX21hcC5yZW1vdmVMYXllcih0aGlzLl9sYXllckdyb3VwKTtcblxuICAgICAgICAvLyBmaXJlIGRyYXdlbmQgZXZlbnRcbiAgICAgICAgdGhpcy5fbWFwLmZpcmUoJ3BtOmRyYXdlbmQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBkaXNhYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIGZhbHNlKTtcblxuICAgICAgICAvLyBjbGVhbnVwIHNuYXBwaW5nXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZShvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX3N5bmNIaW50TGluZTogZnVuY3Rpb24gX3N5bmNIaW50TGluZSgpIHtcbiAgICAgICAgdmFyIHBvbHlQb2ludHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG5cbiAgICAgICAgaWYgKHBvbHlQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGxhc3RQb2x5Z29uUG9pbnQgPSBwb2x5UG9pbnRzW3BvbHlQb2ludHMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgIC8vIHNldCBjb29yZHMgZm9yIGhpbnRsaW5lIGZyb20gbWFya2VyIHRvIGxhc3QgdmVydGV4IG9mIGRyYXdpbiBwb2x5bGluZVxuICAgICAgICAgICAgdGhpcy5faGludGxpbmUuc2V0TGF0TG5ncyhbbGFzdFBvbHlnb25Qb2ludCwgdGhpcy5faGludE1hcmtlci5nZXRMYXRMbmcoKV0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfc3luY0hpbnRNYXJrZXI6IGZ1bmN0aW9uIF9zeW5jSGludE1hcmtlcihlKSB7XG4gICAgICAgIC8vIG1vdmUgdGhlIGN1cnNvciBtYXJrZXJcbiAgICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuXG4gICAgICAgIC8vIGlmIHNuYXBwaW5nIGlzIGVuYWJsZWQsIGRvIGl0XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB2YXIgZmFrZURyYWdFdmVudCA9IGU7XG4gICAgICAgICAgICBmYWtlRHJhZ0V2ZW50LnRhcmdldCA9IHRoaXMuX2hpbnRNYXJrZXI7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTbmFwcGluZyhmYWtlRHJhZ0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2NyZWF0ZVZlcnRleDogZnVuY3Rpb24gX2NyZWF0ZVZlcnRleChlKSB7XG4gICAgICAgIC8vIGFzc2lnbiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgY2xpY2sgdG8gdGhlIGhpbnRNYXJrZXIsIHRoYXQncyBuZWNlc3NhcnkgZm9yXG4gICAgICAgIC8vIG1vYmlsZSB3aGVyZSB0aGUgbWFya2VyIGNhbid0IGZvbGxvdyBhIGN1cnNvclxuICAgICAgICBpZiAoIXRoaXMuX2hpbnRNYXJrZXIuX3NuYXBwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuc2V0TGF0TG5nKGUubGF0bG5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdldCBjb29yZGluYXRlIGZvciBuZXcgdmVydGV4IGJ5IGhpbnRNYXJrZXIgKGN1cnNvciBtYXJrZXIpXG4gICAgICAgIHZhciBsYXRsbmcgPSB0aGlzLl9oaW50TWFya2VyLmdldExhdExuZygpO1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBmaXJzdCBhbmQgdGhpcyB2ZXJ0ZXggaGF2ZSB0aGUgc2FtZSBsYXRsbmdcbiAgICAgICAgaWYgKGxhdGxuZy5lcXVhbHModGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpWzBdKSkge1xuICAgICAgICAgICAgLy8geWVzPyBmaW5pc2ggdGhlIHBvbHlnb25cbiAgICAgICAgICAgIHRoaXMuX2ZpbmlzaFNoYXBlKCk7XG5cbiAgICAgICAgICAgIC8vIFwid2h5P1wiLCB5b3UgYXNrPyBCZWNhdXNlIHRoaXMgaGFwcGVucyB3aGVuIHdlIHNuYXAgdGhlIGxhc3QgdmVydGV4IHRvIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgIC8vIGFuZCB0aGVuIGNsaWNrIHdpdGhvdXQgaGl0dGluZyB0aGUgbGFzdCBtYXJrZXIuIENsaWNrIGhhcHBlbnMgb24gdGhlIG1hcFxuICAgICAgICAgICAgLy8gaW4gOTklIG9mIGNhc2VzIGl0J3MgYmVjYXVzZSB0aGUgdXNlciB3YW50cyB0byBmaW5pc2ggdGhlIHBvbHlnb24uIFNvLi4uXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpcyB0aGlzIHRoZSBmaXJzdCBwb2ludD9cbiAgICAgICAgdmFyIGZpcnN0ID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpLmxlbmd0aCA9PT0gMDtcblxuICAgICAgICB0aGlzLl9sYXllci5hZGRMYXRMbmcobGF0bG5nKTtcbiAgICAgICAgdGhpcy5fY3JlYXRlTWFya2VyKGxhdGxuZywgZmlyc3QpO1xuXG4gICAgICAgIHRoaXMuX2hpbnRsaW5lLnNldExhdExuZ3MoW2xhdGxuZywgbGF0bG5nXSk7XG4gICAgfSxcbiAgICBfZmluaXNoU2hhcGU6IGZ1bmN0aW9uIF9maW5pc2hTaGFwZSgpIHtcbiAgICAgICAgLy8gZ2V0IGNvb3JkaW5hdGVzLCBjcmVhdGUgdGhlIGxlYWZsZXQgc2hhcGUgYW5kIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5nZXRMYXRMbmdzKCk7XG4gICAgICAgIHZhciBwb2x5bGluZUxheWVyID0gTC5wb2x5bGluZShjb29yZHMsIHRoaXMub3B0aW9ucy5wYXRoT3B0aW9ucykuYWRkVG8odGhpcy5fbWFwKTtcblxuICAgICAgICAvLyBkaXNhYmxlIGRyYXdpbmdcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG5cbiAgICAgICAgLy8gZmlyZSB0aGUgcG06Y3JlYXRlIGV2ZW50IGFuZCBwYXNzIHNoYXBlIGFuZCBsYXllclxuICAgICAgICB0aGlzLl9tYXAuZmlyZSgncG06Y3JlYXRlJywge1xuICAgICAgICAgICAgc2hhcGU6IHRoaXMuX3NoYXBlLFxuICAgICAgICAgICAgbGF5ZXI6IHBvbHlsaW5lTGF5ZXJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFudXBTbmFwcGluZygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGxhdGxuZykge1xuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtYXJrZXJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIC8vIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgICAgICAvLyBhIGNsaWNrIG9uIGFueSBtYXJrZXIgZmluaXNoZXMgdGhpcyBzaGFwZVxuICAgICAgICBtYXJrZXIub24oJ2NsaWNrJywgdGhpcy5fZmluaXNoU2hhcGUsIHRoaXMpO1xuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTGluZS5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Marker = _LPM2.default.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Marker';\n        this.toolbarButtonName = 'drawMarker';\n    },\n    enable: function enable(options) {\n        // TODO: Think about if these options could be passed globally for all\n        // instances of L.PM.Draw. So a dev could set drawing style one time as some kind of config\n        L.Util.setOptions(this, options);\n\n        // change enabled state\n        this._enabled = true;\n\n        // create a marker on click on the map\n        this._map.on('click', this._createMarker, this);\n\n        // toggle the draw button of the Toolbar in case drawing mode got enabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, true);\n\n        // this is the hintmarker on the mouse cursor\n        this._hintMarker = L.marker([0, 0], this.options.markerStyle);\n        this._hintMarker._pmTempLayer = true;\n        this._hintMarker.addTo(this._map);\n\n        // this is just to keep the snappable mixin happy\n        this._layer = this._hintMarker;\n\n        // sync hint marker with mouse cursor\n        this._map.on('mousemove', this._syncHintMarker, this);\n\n        // fire drawstart event\n        this._map.fire('pm:drawstart', { shape: this._shape });\n\n        // enable edit mode for existing markers\n        this._map.eachLayer(function (layer) {\n            if (layer instanceof L.Marker && layer.pm) {\n                layer.pm.enable();\n            }\n        });\n    },\n    disable: function disable() {\n        // cancel, if drawing mode isn't even enabled\n        if (!this._enabled) {\n            return;\n        }\n\n        // undbind click event, don't create a marker on click anymore\n        this._map.off('click', this._createMarker, this);\n\n        // remove hint marker\n        this._hintMarker.remove();\n\n        // remove event listener to sync hint marker\n        this._map.off('mousemove', this._syncHintMarker, this);\n\n        // disable dragging and removing for all markers\n        this._map.eachLayer(function (layer) {\n            if (layer instanceof L.Marker && layer.pm && !layer._pmTempLayer) {\n                layer.pm.disable();\n            }\n        });\n\n        // fire drawend event\n        this._map.fire('pm:drawend', { shape: this._shape });\n\n        // toggle the draw button of the Toolbar in case drawing mode got disabled without the button\n        this._map.pm.Toolbar.toggleButton(this.toolbarButtonName, false);\n\n        // change enabled state\n        this._enabled = false;\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    toggle: function toggle(options) {\n        if (this.enabled()) {\n            this.disable();\n        } else {\n            this.enable(options);\n        }\n    },\n    _createMarker: function _createMarker(e) {\n        if (!e.latlng) {\n            return;\n        }\n\n        // assign the coordinate of the click to the hintMarker, that's necessary for\n        // mobile where the marker can't follow a cursor\n        if (!this._hintMarker._snapped) {\n            this._hintMarker.setLatLng(e.latlng);\n        }\n\n        // get coordinate for new vertex by hintMarker (cursor marker)\n        var latlng = this._hintMarker.getLatLng();\n\n        // create marker\n        var marker = new L.Marker(latlng, this.options.markerStyle);\n\n        // add marker to the map\n        marker.addTo(this._map);\n\n        // enable editing for the marker\n        marker.pm.enable();\n\n        // fire the pm:create event and pass shape and marker\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            marker: marker, // DEPRECATED\n            layer: marker\n        });\n\n        this._cleanupSnapping();\n    },\n    _syncHintMarker: function _syncHintMarker(e) {\n        // move the cursor marker\n        this._hintMarker.setLatLng(e.latlng);\n\n        // if snapping is enabled, do it\n        if (this.options.snappable) {\n            var fakeDragEvent = e;\n            fakeDragEvent.target = this._hintMarker;\n            this._handleSnapping(fakeDragEvent);\n        }\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5NYXJrZXIuanM/YTUzMiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfTFBNID0gcmVxdWlyZSgnLi9MLlBNLkRyYXcnKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTTIuZGVmYXVsdC5NYXJrZXIgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuICAgICAgICB0aGlzLl9zaGFwZSA9ICdNYXJrZXInO1xuICAgICAgICB0aGlzLnRvb2xiYXJCdXR0b25OYW1lID0gJ2RyYXdNYXJrZXInO1xuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUob3B0aW9ucykge1xuICAgICAgICAvLyBUT0RPOiBUaGluayBhYm91dCBpZiB0aGVzZSBvcHRpb25zIGNvdWxkIGJlIHBhc3NlZCBnbG9iYWxseSBmb3IgYWxsXG4gICAgICAgIC8vIGluc3RhbmNlcyBvZiBMLlBNLkRyYXcuIFNvIGEgZGV2IGNvdWxkIHNldCBkcmF3aW5nIHN0eWxlIG9uZSB0aW1lIGFzIHNvbWUga2luZCBvZiBjb25maWdcbiAgICAgICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy8gY2hhbmdlIGVuYWJsZWQgc3RhdGVcbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgLy8gY3JlYXRlIGEgbWFya2VyIG9uIGNsaWNrIG9uIHRoZSBtYXBcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdjbGljaycsIHRoaXMuX2NyZWF0ZU1hcmtlciwgdGhpcyk7XG5cbiAgICAgICAgLy8gdG9nZ2xlIHRoZSBkcmF3IGJ1dHRvbiBvZiB0aGUgVG9vbGJhciBpbiBjYXNlIGRyYXdpbmcgbW9kZSBnb3QgZW5hYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIHRydWUpO1xuXG4gICAgICAgIC8vIHRoaXMgaXMgdGhlIGhpbnRtYXJrZXIgb24gdGhlIG1vdXNlIGN1cnNvclxuICAgICAgICB0aGlzLl9oaW50TWFya2VyID0gTC5tYXJrZXIoWzAsIDBdLCB0aGlzLm9wdGlvbnMubWFya2VyU3R5bGUpO1xuICAgICAgICB0aGlzLl9oaW50TWFya2VyLl9wbVRlbXBMYXllciA9IHRydWU7XG4gICAgICAgIHRoaXMuX2hpbnRNYXJrZXIuYWRkVG8odGhpcy5fbWFwKTtcblxuICAgICAgICAvLyB0aGlzIGlzIGp1c3QgdG8ga2VlcCB0aGUgc25hcHBhYmxlIG1peGluIGhhcHB5XG4gICAgICAgIHRoaXMuX2xheWVyID0gdGhpcy5faGludE1hcmtlcjtcblxuICAgICAgICAvLyBzeW5jIGhpbnQgbWFya2VyIHdpdGggbW91c2UgY3Vyc29yXG4gICAgICAgIHRoaXMuX21hcC5vbignbW91c2Vtb3ZlJywgdGhpcy5fc3luY0hpbnRNYXJrZXIsIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpcmUgZHJhd3N0YXJ0IGV2ZW50XG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpkcmF3c3RhcnQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyBlbmFibGUgZWRpdCBtb2RlIGZvciBleGlzdGluZyBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciAmJiBsYXllci5wbSkge1xuICAgICAgICAgICAgICAgIGxheWVyLnBtLmVuYWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIC8vIGNhbmNlbCwgaWYgZHJhd2luZyBtb2RlIGlzbid0IGV2ZW4gZW5hYmxlZFxuICAgICAgICBpZiAoIXRoaXMuX2VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVuZGJpbmQgY2xpY2sgZXZlbnQsIGRvbid0IGNyZWF0ZSBhIG1hcmtlciBvbiBjbGljayBhbnltb3JlXG4gICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyByZW1vdmUgaGludCBtYXJrZXJcbiAgICAgICAgdGhpcy5faGludE1hcmtlci5yZW1vdmUoKTtcblxuICAgICAgICAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXIgdG8gc3luYyBoaW50IG1hcmtlclxuICAgICAgICB0aGlzLl9tYXAub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLl9zeW5jSGludE1hcmtlciwgdGhpcyk7XG5cbiAgICAgICAgLy8gZGlzYWJsZSBkcmFnZ2luZyBhbmQgcmVtb3ZpbmcgZm9yIGFsbCBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlciAmJiBsYXllci5wbSAmJiAhbGF5ZXIuX3BtVGVtcExheWVyKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIucG0uZGlzYWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXJlIGRyYXdlbmQgZXZlbnRcbiAgICAgICAgdGhpcy5fbWFwLmZpcmUoJ3BtOmRyYXdlbmQnLCB7IHNoYXBlOiB0aGlzLl9zaGFwZSB9KTtcblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGRyYXcgYnV0dG9uIG9mIHRoZSBUb29sYmFyIGluIGNhc2UgZHJhd2luZyBtb2RlIGdvdCBkaXNhYmxlZCB3aXRob3V0IHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5fbWFwLnBtLlRvb2xiYXIudG9nZ2xlQnV0dG9uKHRoaXMudG9vbGJhckJ1dHRvbk5hbWUsIGZhbHNlKTtcblxuICAgICAgICAvLyBjaGFuZ2UgZW5hYmxlZCBzdGF0ZVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbiBfY3JlYXRlTWFya2VyKGUpIHtcbiAgICAgICAgaWYgKCFlLmxhdGxuZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXNzaWduIHRoZSBjb29yZGluYXRlIG9mIHRoZSBjbGljayB0byB0aGUgaGludE1hcmtlciwgdGhhdCdzIG5lY2Vzc2FyeSBmb3JcbiAgICAgICAgLy8gbW9iaWxlIHdoZXJlIHRoZSBtYXJrZXIgY2FuJ3QgZm9sbG93IGEgY3Vyc29yXG4gICAgICAgIGlmICghdGhpcy5faGludE1hcmtlci5fc25hcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5faGludE1hcmtlci5zZXRMYXRMbmcoZS5sYXRsbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IGNvb3JkaW5hdGUgZm9yIG5ldyB2ZXJ0ZXggYnkgaGludE1hcmtlciAoY3Vyc29yIG1hcmtlcilcbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2hpbnRNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgLy8gY3JlYXRlIG1hcmtlclxuICAgICAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKGxhdGxuZywgdGhpcy5vcHRpb25zLm1hcmtlclN0eWxlKTtcblxuICAgICAgICAvLyBhZGQgbWFya2VyIHRvIHRoZSBtYXBcbiAgICAgICAgbWFya2VyLmFkZFRvKHRoaXMuX21hcCk7XG5cbiAgICAgICAgLy8gZW5hYmxlIGVkaXRpbmcgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgbWFya2VyLnBtLmVuYWJsZSgpO1xuXG4gICAgICAgIC8vIGZpcmUgdGhlIHBtOmNyZWF0ZSBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbWFya2VyXG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICAgICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICAgICAgICBtYXJrZXI6IG1hcmtlciwgLy8gREVQUkVDQVRFRFxuICAgICAgICAgICAgbGF5ZXI6IG1hcmtlclxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgICB9LFxuICAgIF9zeW5jSGludE1hcmtlcjogZnVuY3Rpb24gX3N5bmNIaW50TWFya2VyKGUpIHtcbiAgICAgICAgLy8gbW92ZSB0aGUgY3Vyc29yIG1hcmtlclxuICAgICAgICB0aGlzLl9oaW50TWFya2VyLnNldExhdExuZyhlLmxhdGxuZyk7XG5cbiAgICAgICAgLy8gaWYgc25hcHBpbmcgaXMgZW5hYmxlZCwgZG8gaXRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHZhciBmYWtlRHJhZ0V2ZW50ID0gZTtcbiAgICAgICAgICAgIGZha2VEcmFnRXZlbnQudGFyZ2V0ID0gdGhpcy5faGludE1hcmtlcjtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVNuYXBwaW5nKGZha2VEcmFnRXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRHJhdy9MLlBNLkRyYXcuTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(1);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Poly = _LPM2.default.Line.extend({\n    initialize: function initialize(map) {\n        this._map = map;\n        this._shape = 'Poly';\n        this.toolbarButtonName = 'drawPolygon';\n    },\n    _finishShape: function _finishShape() {\n        // get coordinates, create the leaflet shape and add it to the map\n        var coords = this._layer.getLatLngs();\n        var polygonLayer = L.polygon(coords, this.options.pathOptions).addTo(this._map);\n\n        // disable drawing\n        this.disable();\n\n        // fire the pm:create event and pass shape and layer\n        this._map.fire('pm:create', {\n            shape: this._shape,\n            layer: polygonLayer\n        });\n\n        // clean up snapping states\n        this._cleanupSnapping();\n\n        // remove the first vertex from \"other snapping layers\"\n        this._otherSnapLayers.splice(this._tempSnapLayerIndex, 1);\n        delete this._tempSnapLayerIndex;\n    },\n    _createMarker: function _createMarker(latlng, first) {\n        // create the new marker\n        var marker = new L.Marker(latlng, {\n            draggable: false,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n\n        // mark this marker as temporary\n        marker._pmTempLayer = true;\n\n        // add it to the map\n        this._layerGroup.addLayer(marker);\n\n        // if the first marker gets clicked again, finish this shape\n        if (first) {\n            marker.on('click', this._finishShape, this);\n\n            // add the first vertex to \"other snapping layers\" so the polygon is easier to finish\n            this._tempSnapLayerIndex = this._otherSnapLayers.push(marker) - 1;\n\n            if (this.options.snappable) {\n                this._cleanupSnapping();\n            }\n        }\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9EcmF3L0wuUE0uRHJhdy5Qb2x5LmpzPzBkYWMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5EcmF3Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbl9MUE0yLmRlZmF1bHQuUG9seSA9IF9MUE0yLmRlZmF1bHQuTGluZS5leHRlbmQoe1xuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICAgICAgdGhpcy5fc2hhcGUgPSAnUG9seSc7XG4gICAgICAgIHRoaXMudG9vbGJhckJ1dHRvbk5hbWUgPSAnZHJhd1BvbHlnb24nO1xuICAgIH0sXG4gICAgX2ZpbmlzaFNoYXBlOiBmdW5jdGlvbiBfZmluaXNoU2hhcGUoKSB7XG4gICAgICAgIC8vIGdldCBjb29yZGluYXRlcywgY3JlYXRlIHRoZSBsZWFmbGV0IHNoYXBlIGFuZCBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpO1xuICAgICAgICB2YXIgcG9seWdvbkxheWVyID0gTC5wb2x5Z29uKGNvb3JkcywgdGhpcy5vcHRpb25zLnBhdGhPcHRpb25zKS5hZGRUbyh0aGlzLl9tYXApO1xuXG4gICAgICAgIC8vIGRpc2FibGUgZHJhd2luZ1xuICAgICAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgICAgICAvLyBmaXJlIHRoZSBwbTpjcmVhdGUgZXZlbnQgYW5kIHBhc3Mgc2hhcGUgYW5kIGxheWVyXG4gICAgICAgIHRoaXMuX21hcC5maXJlKCdwbTpjcmVhdGUnLCB7XG4gICAgICAgICAgICBzaGFwZTogdGhpcy5fc2hhcGUsXG4gICAgICAgICAgICBsYXllcjogcG9seWdvbkxheWVyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNsZWFuIHVwIHNuYXBwaW5nIHN0YXRlc1xuICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcblxuICAgICAgICAvLyByZW1vdmUgdGhlIGZpcnN0IHZlcnRleCBmcm9tIFwib3RoZXIgc25hcHBpbmcgbGF5ZXJzXCJcbiAgICAgICAgdGhpcy5fb3RoZXJTbmFwTGF5ZXJzLnNwbGljZSh0aGlzLl90ZW1wU25hcExheWVySW5kZXgsIDEpO1xuICAgICAgICBkZWxldGUgdGhpcy5fdGVtcFNuYXBMYXllckluZGV4O1xuICAgIH0sXG4gICAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcsIGZpcnN0KSB7XG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IG1hcmtlclxuICAgICAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKGxhdGxuZywge1xuICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGljb246IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uJyB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBtYXJrIHRoaXMgbWFya2VyIGFzIHRlbXBvcmFyeVxuICAgICAgICBtYXJrZXIuX3BtVGVtcExheWVyID0gdHJ1ZTtcblxuICAgICAgICAvLyBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICAgICAgLy8gaWYgdGhlIGZpcnN0IG1hcmtlciBnZXRzIGNsaWNrZWQgYWdhaW4sIGZpbmlzaCB0aGlzIHNoYXBlXG4gICAgICAgIGlmIChmaXJzdCkge1xuICAgICAgICAgICAgbWFya2VyLm9uKCdjbGljaycsIHRoaXMuX2ZpbmlzaFNoYXBlLCB0aGlzKTtcblxuICAgICAgICAgICAgLy8gYWRkIHRoZSBmaXJzdCB2ZXJ0ZXggdG8gXCJvdGhlciBzbmFwcGluZyBsYXllcnNcIiBzbyB0aGUgcG9seWdvbiBpcyBlYXNpZXIgdG8gZmluaXNoXG4gICAgICAgICAgICB0aGlzLl90ZW1wU25hcExheWVySW5kZXggPSB0aGlzLl9vdGhlclNuYXBMYXllcnMucHVzaChtYXJrZXIpIC0gMTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGVhbnVwU25hcHBpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0RyYXcvTC5QTS5EcmF3LlBvbHkuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Circle = _LPM2.default.extend({\n    initialize: function initialize(layer) {\n        this._layer = layer;\n        this._enabled = false;\n    },\n    toggleEdit: function toggleEdit(options) {\n        if (!this.enabled()) {\n            this.enable(options);\n        } else {\n            this.disable();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    enable: function enable() {\n        var _this = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this.options = options;\n\n        this._map = this._layer._map;\n\n        if (!this.enabled()) {\n            // if it was already enabled, disable first\n            // we don't block enabling again because new options might be passed\n            this.disable();\n        }\n\n        // change state\n        this._enabled = true;\n\n        // // init markers\n        this._initMarkers();\n\n        // if polygon gets removed from map, disable edit mode\n        this._layer.on('remove', function (e) {\n            _this.disable(e.target);\n        });\n    },\n    disable: function disable() {\n        var layer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._layer;\n\n        // if it's not enabled, it doesn't need to be disabled\n        if (!this.enabled()) {\n            return false;\n        }\n\n        // prevent disabling if layer is being dragged\n        if (layer.pm._dragging) {\n            return false;\n        }\n        layer.pm._enabled = false;\n        layer.pm._layerGroup.clearLayers();\n\n        // clean up draggable\n        layer.off('mousedown');\n        layer.off('mouseup');\n\n        // remove draggable class\n        var el = layer._path;\n        L.DomUtil.removeClass(el, 'leaflet-pm-draggable');\n\n        return true;\n    },\n    _initMarkers: function _initMarkers() {\n        var map = this._map;\n\n        // cleanup old ones first\n        if (this._layerGroup) {\n            this._layerGroup.clearLayers();\n        }\n\n        // add markerGroup to map, markerGroup includes regular and middle markers\n        this._layerGroup = new L.LayerGroup();\n        map.addLayer(this._layerGroup);\n\n        // create marker for each coordinate\n        var center = this._layer.getLatLng();\n        var radius = this._layer._radius;\n\n        var outer = this._getLatLngOnCircle(center, radius);\n\n        this._centerMarker = this._createCenterMarker(center);\n        this._outerMarker = this._createOuterMarker(outer);\n        this._markers = [this._centerMarker, this._outerMarker];\n        this._createHintLine(this._centerMarker, this._outerMarker);\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    _getLatLngOnCircle: function _getLatLngOnCircle(center, radius) {\n        var pointA = this._map.project(center);\n        var pointB = L.point(pointA.x + radius, pointA.y);\n\n        return this._map.unproject(pointB);\n    },\n    _resizeCircle: function _resizeCircle() {\n        this._syncHintLine();\n        this._syncCircleRadius();\n        this._fireEdit();\n    },\n    _moveCircle: function _moveCircle(e) {\n        var center = e.latlng;\n        this._layer.setLatLng(center);\n\n        var radius = this._layer._radius;\n\n        var outer = this._getLatLngOnCircle(center, radius);\n        this._outerMarker.setLatLng(outer);\n        this._syncHintLine();\n        this._fireEdit();\n    },\n    _syncCircleRadius: function _syncCircleRadius() {\n        var A = this._centerMarker.getLatLng();\n        var B = this._outerMarker.getLatLng();\n\n        var distance = A.distanceTo(B);\n\n        this._layer.setRadius(distance);\n    },\n    _syncHintLine: function _syncHintLine() {\n        var A = this._centerMarker.getLatLng();\n        var B = this._outerMarker.getLatLng();\n\n        // set coords for hintline from marker to last vertex of drawin polyline\n        this._hintline.setLatLngs([A, B]);\n    },\n    _createHintLine: function _createHintLine(markerA, markerB) {\n        var A = markerA.getLatLng();\n        var B = markerB.getLatLng();\n        this._hintline = L.polyline([A, B], this.options.hintlineStyle);\n        this._hintline._pmTempLayer = true;\n        this._layerGroup.addLayer(this._hintline);\n    },\n    _createCenterMarker: function _createCenterMarker(latlng) {\n        var marker = this._createMarker(latlng);\n\n        // marker.on('dragstart', this._onMarkerDragStart, this);\n        marker.on('move', this._moveCircle, this);\n        // marker.on('dragend', this._onMarkerDragEnd, this);\n        // marker.on('contextmenu', this._removeMarker, this);\n\n        return marker;\n    },\n    _createOuterMarker: function _createOuterMarker(latlng) {\n        var marker = this._createMarker(latlng);\n\n        // marker.on('dragstart', this._onMarkerDragStart, this);\n        marker.on('move', this._resizeCircle, this);\n        // marker.on('dragend', this._onMarkerDragEnd, this);\n        // marker.on('contextmenu', this._removeMarker, this);\n\n        return marker;\n    },\n    _createMarker: function _createMarker(latlng) {\n        var marker = new L.Marker(latlng, {\n            draggable: true,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n\n        marker._origLatLng = latlng;\n        marker._pmTempLayer = true;\n\n        this._layerGroup.addLayer(marker);\n\n        return marker;\n    },\n    _fireEdit: function _fireEdit() {\n        // fire edit event\n        this._layer.fire('pm:edit');\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5DaXJjbGUuanM/NTA0NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfTFBNID0gcmVxdWlyZSgnLi9MLlBNLkVkaXQnKTtcblxudmFyIF9MUE0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTFBNKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuX0xQTTIuZGVmYXVsdC5DaXJjbGUgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShsYXllcikge1xuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfSxcbiAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICB0aGlzLl9tYXAgPSB0aGlzLl9sYXllci5fbWFwO1xuXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0IHdhcyBhbHJlYWR5IGVuYWJsZWQsIGRpc2FibGUgZmlyc3RcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGJsb2NrIGVuYWJsaW5nIGFnYWluIGJlY2F1c2UgbmV3IG9wdGlvbnMgbWlnaHQgYmUgcGFzc2VkXG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoYW5nZSBzdGF0ZVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAvLyAvLyBpbml0IG1hcmtlcnNcbiAgICAgICAgdGhpcy5faW5pdE1hcmtlcnMoKTtcblxuICAgICAgICAvLyBpZiBwb2x5Z29uIGdldHMgcmVtb3ZlZCBmcm9tIG1hcCwgZGlzYWJsZSBlZGl0IG1vZGVcbiAgICAgICAgdGhpcy5fbGF5ZXIub24oJ3JlbW92ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfdGhpcy5kaXNhYmxlKGUudGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuX2xheWVyO1xuXG4gICAgICAgIC8vIGlmIGl0J3Mgbm90IGVuYWJsZWQsIGl0IGRvZXNuJ3QgbmVlZCB0byBiZSBkaXNhYmxlZFxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwcmV2ZW50IGRpc2FibGluZyBpZiBsYXllciBpcyBiZWluZyBkcmFnZ2VkXG4gICAgICAgIGlmIChsYXllci5wbS5fZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsYXllci5wbS5fZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBsYXllci5wbS5fbGF5ZXJHcm91cC5jbGVhckxheWVycygpO1xuXG4gICAgICAgIC8vIGNsZWFuIHVwIGRyYWdnYWJsZVxuICAgICAgICBsYXllci5vZmYoJ21vdXNlZG93bicpO1xuICAgICAgICBsYXllci5vZmYoJ21vdXNldXAnKTtcblxuICAgICAgICAvLyByZW1vdmUgZHJhZ2dhYmxlIGNsYXNzXG4gICAgICAgIHZhciBlbCA9IGxheWVyLl9wYXRoO1xuICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWRyYWdnYWJsZScpO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgX2luaXRNYXJrZXJzOiBmdW5jdGlvbiBfaW5pdE1hcmtlcnMoKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICAgICAgLy8gY2xlYW51cCBvbGQgb25lcyBmaXJzdFxuICAgICAgICBpZiAodGhpcy5fbGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5jbGVhckxheWVycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIG1hcmtlckdyb3VwIHRvIG1hcCwgbWFya2VyR3JvdXAgaW5jbHVkZXMgcmVndWxhciBhbmQgbWlkZGxlIG1hcmtlcnNcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cCA9IG5ldyBMLkxheWVyR3JvdXAoKTtcbiAgICAgICAgbWFwLmFkZExheWVyKHRoaXMuX2xheWVyR3JvdXApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciByYWRpdXMgPSB0aGlzLl9sYXllci5fcmFkaXVzO1xuXG4gICAgICAgIHZhciBvdXRlciA9IHRoaXMuX2dldExhdExuZ09uQ2lyY2xlKGNlbnRlciwgcmFkaXVzKTtcblxuICAgICAgICB0aGlzLl9jZW50ZXJNYXJrZXIgPSB0aGlzLl9jcmVhdGVDZW50ZXJNYXJrZXIoY2VudGVyKTtcbiAgICAgICAgdGhpcy5fb3V0ZXJNYXJrZXIgPSB0aGlzLl9jcmVhdGVPdXRlck1hcmtlcihvdXRlcik7XG4gICAgICAgIHRoaXMuX21hcmtlcnMgPSBbdGhpcy5fY2VudGVyTWFya2VyLCB0aGlzLl9vdXRlck1hcmtlcl07XG4gICAgICAgIHRoaXMuX2NyZWF0ZUhpbnRMaW5lKHRoaXMuX2NlbnRlck1hcmtlciwgdGhpcy5fb3V0ZXJNYXJrZXIpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfZ2V0TGF0TG5nT25DaXJjbGU6IGZ1bmN0aW9uIF9nZXRMYXRMbmdPbkNpcmNsZShjZW50ZXIsIHJhZGl1cykge1xuICAgICAgICB2YXIgcG9pbnRBID0gdGhpcy5fbWFwLnByb2plY3QoY2VudGVyKTtcbiAgICAgICAgdmFyIHBvaW50QiA9IEwucG9pbnQocG9pbnRBLnggKyByYWRpdXMsIHBvaW50QS55KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLnVucHJvamVjdChwb2ludEIpO1xuICAgIH0sXG4gICAgX3Jlc2l6ZUNpcmNsZTogZnVuY3Rpb24gX3Jlc2l6ZUNpcmNsZSgpIHtcbiAgICAgICAgdGhpcy5fc3luY0hpbnRMaW5lKCk7XG4gICAgICAgIHRoaXMuX3N5bmNDaXJjbGVSYWRpdXMoKTtcbiAgICAgICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LFxuICAgIF9tb3ZlQ2lyY2xlOiBmdW5jdGlvbiBfbW92ZUNpcmNsZShlKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSBlLmxhdGxuZztcbiAgICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5nKGNlbnRlcik7XG5cbiAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMuX2xheWVyLl9yYWRpdXM7XG5cbiAgICAgICAgdmFyIG91dGVyID0gdGhpcy5fZ2V0TGF0TG5nT25DaXJjbGUoY2VudGVyLCByYWRpdXMpO1xuICAgICAgICB0aGlzLl9vdXRlck1hcmtlci5zZXRMYXRMbmcob3V0ZXIpO1xuICAgICAgICB0aGlzLl9zeW5jSGludExpbmUoKTtcbiAgICAgICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LFxuICAgIF9zeW5jQ2lyY2xlUmFkaXVzOiBmdW5jdGlvbiBfc3luY0NpcmNsZVJhZGl1cygpIHtcbiAgICAgICAgdmFyIEEgPSB0aGlzLl9jZW50ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciBCID0gdGhpcy5fb3V0ZXJNYXJrZXIuZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgdmFyIGRpc3RhbmNlID0gQS5kaXN0YW5jZVRvKEIpO1xuXG4gICAgICAgIHRoaXMuX2xheWVyLnNldFJhZGl1cyhkaXN0YW5jZSk7XG4gICAgfSxcbiAgICBfc3luY0hpbnRMaW5lOiBmdW5jdGlvbiBfc3luY0hpbnRMaW5lKCkge1xuICAgICAgICB2YXIgQSA9IHRoaXMuX2NlbnRlck1hcmtlci5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIEIgPSB0aGlzLl9vdXRlck1hcmtlci5nZXRMYXRMbmcoKTtcblxuICAgICAgICAvLyBzZXQgY29vcmRzIGZvciBoaW50bGluZSBmcm9tIG1hcmtlciB0byBsYXN0IHZlcnRleCBvZiBkcmF3aW4gcG9seWxpbmVcbiAgICAgICAgdGhpcy5faGludGxpbmUuc2V0TGF0TG5ncyhbQSwgQl0pO1xuICAgIH0sXG4gICAgX2NyZWF0ZUhpbnRMaW5lOiBmdW5jdGlvbiBfY3JlYXRlSGludExpbmUobWFya2VyQSwgbWFya2VyQikge1xuICAgICAgICB2YXIgQSA9IG1hcmtlckEuZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciBCID0gbWFya2VyQi5nZXRMYXRMbmcoKTtcbiAgICAgICAgdGhpcy5faGludGxpbmUgPSBMLnBvbHlsaW5lKFtBLCBCXSwgdGhpcy5vcHRpb25zLmhpbnRsaW5lU3R5bGUpO1xuICAgICAgICB0aGlzLl9oaW50bGluZS5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLl9sYXllckdyb3VwLmFkZExheWVyKHRoaXMuX2hpbnRsaW5lKTtcbiAgICB9LFxuICAgIF9jcmVhdGVDZW50ZXJNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVDZW50ZXJNYXJrZXIobGF0bG5nKSB7XG4gICAgICAgIHZhciBtYXJrZXIgPSB0aGlzLl9jcmVhdGVNYXJrZXIobGF0bG5nKTtcblxuICAgICAgICAvLyBtYXJrZXIub24oJ2RyYWdzdGFydCcsIHRoaXMuX29uTWFya2VyRHJhZ1N0YXJ0LCB0aGlzKTtcbiAgICAgICAgbWFya2VyLm9uKCdtb3ZlJywgdGhpcy5fbW92ZUNpcmNsZSwgdGhpcyk7XG4gICAgICAgIC8vIG1hcmtlci5vbignZHJhZ2VuZCcsIHRoaXMuX29uTWFya2VyRHJhZ0VuZCwgdGhpcyk7XG4gICAgICAgIC8vIG1hcmtlci5vbignY29udGV4dG1lbnUnLCB0aGlzLl9yZW1vdmVNYXJrZXIsIHRoaXMpO1xuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfSxcbiAgICBfY3JlYXRlT3V0ZXJNYXJrZXI6IGZ1bmN0aW9uIF9jcmVhdGVPdXRlck1hcmtlcihsYXRsbmcpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihsYXRsbmcpO1xuXG4gICAgICAgIC8vIG1hcmtlci5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25NYXJrZXJEcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ21vdmUnLCB0aGlzLl9yZXNpemVDaXJjbGUsIHRoaXMpO1xuICAgICAgICAvLyBtYXJrZXIub24oJ2RyYWdlbmQnLCB0aGlzLl9vbk1hcmtlckRyYWdFbmQsIHRoaXMpO1xuICAgICAgICAvLyBtYXJrZXIub24oJ2NvbnRleHRtZW51JywgdGhpcy5fcmVtb3ZlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH0sXG4gICAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uJyB9KVxuICAgICAgICB9KTtcblxuICAgICAgICBtYXJrZXIuX29yaWdMYXRMbmcgPSBsYXRsbmc7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuX2xheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgICAgICByZXR1cm4gbWFya2VyO1xuICAgIH0sXG4gICAgX2ZpcmVFZGl0OiBmdW5jdGlvbiBfZmlyZUVkaXQoKSB7XG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9sYXllci5maXJlKCdwbTplZGl0Jyk7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuQ2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// LayerGroup doesn't inherit from L.PM.Edit because it's just calling L.PM.Edit.Poly\n// (which inherits from L.PM.Edit) for each layer,\n// so it's not really a parent class\n_LPM2.default.LayerGroup = L.Class.extend({\n    initialize: function initialize(layerGroup) {\n        var _this = this;\n\n        this._layerGroup = layerGroup;\n        this._layers = this.findLayers();\n\n        // init all layers of the group\n        this._layers.forEach(function (layer) {\n            return _this._initLayer(layer);\n        });\n\n        // if a new layer is added to the group, reinitialize\n        // This only works for FeatureGroups, not LayerGroups\n        // https://github.com/Leaflet/Leaflet/issues/4861\n        this._layerGroup.on('layeradd', function (e) {\n            _this._layers = _this.findLayers();\n\n            // init the newly added layer\n            if (e.layer.pm) {\n                _this._initLayer(e.layer);\n            }\n\n            // if editing was already enabled for this group, enable it again\n            // so the new layers are enabled\n            if (e.target.pm.enabled()) {\n                _this.enable(_this.getOptions());\n            }\n        });\n    },\n    findLayers: function findLayers() {\n        // get all layers of the layer group\n        var layers = this._layerGroup.getLayers();\n\n        // filter out layers that don't have leaflet.pm\n        layers = layers.filter(function (layer) {\n            return !!layer.pm;\n        });\n\n        // return them\n        return layers;\n    },\n    _initLayer: function _initLayer(layer) {\n        var _this2 = this;\n\n        // available events\n        var availableEvents = ['pm:edit', 'pm:remove', 'pm:dragstart', 'pm:drag', 'pm:dragend', 'pm:snap', 'pm:unsnap', 'pm:raiseMarkers', 'pm:markerdragend', 'pm:markerdragstart'];\n\n        // listen to the events of the layers in this group\n        availableEvents.forEach(function (event) {\n            layer.on(event, _this2._fireEvent, _this2);\n        });\n\n        // add reference for the group to each layer inside said group\n        layer.pm._layerGroup = this._layerGroup;\n    },\n    _fireEvent: function _fireEvent(e) {\n        this._layerGroup.fireEvent(e.type, e);\n    },\n    toggleEdit: function toggleEdit(options) {\n        this._options = options;\n        this._layers.forEach(function (layer) {\n            layer.pm.toggleEdit(options);\n        });\n    },\n    enable: function enable(options) {\n        this._options = options;\n        this._layers.forEach(function (layer) {\n            layer.pm.enable(options);\n        });\n    },\n    disable: function disable() {\n        this._layers.forEach(function (layer) {\n            layer.pm.disable();\n        });\n    },\n    enabled: function enabled() {\n        var enabled = this._layers.find(function (layer) {\n            return layer.pm.enabled();\n        });\n        return !!enabled;\n    },\n    dragging: function dragging() {\n        var dragging = this._layers.find(function (layer) {\n            return layer.pm.dragging();\n        });\n        return !!dragging;\n    },\n    getOptions: function getOptions() {\n        return this._options;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5MYXllckdyb3VwLmpzPzJjZDAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5FZGl0Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vIExheWVyR3JvdXAgZG9lc24ndCBpbmhlcml0IGZyb20gTC5QTS5FZGl0IGJlY2F1c2UgaXQncyBqdXN0IGNhbGxpbmcgTC5QTS5FZGl0LlBvbHlcbi8vICh3aGljaCBpbmhlcml0cyBmcm9tIEwuUE0uRWRpdCkgZm9yIGVhY2ggbGF5ZXIsXG4vLyBzbyBpdCdzIG5vdCByZWFsbHkgYSBwYXJlbnQgY2xhc3Ncbl9MUE0yLmRlZmF1bHQuTGF5ZXJHcm91cCA9IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKGxheWVyR3JvdXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB0aGlzLl9sYXllckdyb3VwID0gbGF5ZXJHcm91cDtcbiAgICAgICAgdGhpcy5fbGF5ZXJzID0gdGhpcy5maW5kTGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gaW5pdCBhbGwgbGF5ZXJzIG9mIHRoZSBncm91cFxuICAgICAgICB0aGlzLl9sYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5faW5pdExheWVyKGxheWVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaWYgYSBuZXcgbGF5ZXIgaXMgYWRkZWQgdG8gdGhlIGdyb3VwLCByZWluaXRpYWxpemVcbiAgICAgICAgLy8gVGhpcyBvbmx5IHdvcmtzIGZvciBGZWF0dXJlR3JvdXBzLCBub3QgTGF5ZXJHcm91cHNcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0xlYWZsZXQvTGVhZmxldC9pc3N1ZXMvNDg2MVxuICAgICAgICB0aGlzLl9sYXllckdyb3VwLm9uKCdsYXllcmFkZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfdGhpcy5fbGF5ZXJzID0gX3RoaXMuZmluZExheWVycygpO1xuXG4gICAgICAgICAgICAvLyBpbml0IHRoZSBuZXdseSBhZGRlZCBsYXllclxuICAgICAgICAgICAgaWYgKGUubGF5ZXIucG0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5faW5pdExheWVyKGUubGF5ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiBlZGl0aW5nIHdhcyBhbHJlYWR5IGVuYWJsZWQgZm9yIHRoaXMgZ3JvdXAsIGVuYWJsZSBpdCBhZ2FpblxuICAgICAgICAgICAgLy8gc28gdGhlIG5ldyBsYXllcnMgYXJlIGVuYWJsZWRcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC5wbS5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbmFibGUoX3RoaXMuZ2V0T3B0aW9ucygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBmaW5kTGF5ZXJzOiBmdW5jdGlvbiBmaW5kTGF5ZXJzKCkge1xuICAgICAgICAvLyBnZXQgYWxsIGxheWVycyBvZiB0aGUgbGF5ZXIgZ3JvdXBcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuX2xheWVyR3JvdXAuZ2V0TGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gZmlsdGVyIG91dCBsYXllcnMgdGhhdCBkb24ndCBoYXZlIGxlYWZsZXQucG1cbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWxheWVyLnBtO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyByZXR1cm4gdGhlbVxuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH0sXG4gICAgX2luaXRMYXllcjogZnVuY3Rpb24gX2luaXRMYXllcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAvLyBhdmFpbGFibGUgZXZlbnRzXG4gICAgICAgIHZhciBhdmFpbGFibGVFdmVudHMgPSBbJ3BtOmVkaXQnLCAncG06cmVtb3ZlJywgJ3BtOmRyYWdzdGFydCcsICdwbTpkcmFnJywgJ3BtOmRyYWdlbmQnLCAncG06c25hcCcsICdwbTp1bnNuYXAnLCAncG06cmFpc2VNYXJrZXJzJywgJ3BtOm1hcmtlcmRyYWdlbmQnLCAncG06bWFya2VyZHJhZ3N0YXJ0J107XG5cbiAgICAgICAgLy8gbGlzdGVuIHRvIHRoZSBldmVudHMgb2YgdGhlIGxheWVycyBpbiB0aGlzIGdyb3VwXG4gICAgICAgIGF2YWlsYWJsZUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgbGF5ZXIub24oZXZlbnQsIF90aGlzMi5fZmlyZUV2ZW50LCBfdGhpczIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgcmVmZXJlbmNlIGZvciB0aGUgZ3JvdXAgdG8gZWFjaCBsYXllciBpbnNpZGUgc2FpZCBncm91cFxuICAgICAgICBsYXllci5wbS5fbGF5ZXJHcm91cCA9IHRoaXMuX2xheWVyR3JvdXA7XG4gICAgfSxcbiAgICBfZmlyZUV2ZW50OiBmdW5jdGlvbiBfZmlyZUV2ZW50KGUpIHtcbiAgICAgICAgdGhpcy5fbGF5ZXJHcm91cC5maXJlRXZlbnQoZS50eXBlLCBlKTtcbiAgICB9LFxuICAgIHRvZ2dsZUVkaXQ6IGZ1bmN0aW9uIHRvZ2dsZUVkaXQob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5wbS50b2dnbGVFZGl0KG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX2xheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIucG0uZW5hYmxlKG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIHRoaXMuX2xheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgbGF5ZXIucG0uZGlzYWJsZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGVuYWJsZWQ6IGZ1bmN0aW9uIGVuYWJsZWQoKSB7XG4gICAgICAgIHZhciBlbmFibGVkID0gdGhpcy5fbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIucG0uZW5hYmxlZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICEhZW5hYmxlZDtcbiAgICB9LFxuICAgIGRyYWdnaW5nOiBmdW5jdGlvbiBkcmFnZ2luZygpIHtcbiAgICAgICAgdmFyIGRyYWdnaW5nID0gdGhpcy5fbGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIucG0uZHJhZ2dpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhIWRyYWdnaW5nO1xuICAgIH0sXG4gICAgZ2V0T3B0aW9uczogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGF5ZXJHcm91cC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Line = _LPM2.default.extend({\n    initialize: function initialize(layer) {\n        this._layer = layer;\n        this._enabled = false;\n    },\n    toggleEdit: function toggleEdit(options) {\n        if (!this.enabled()) {\n            this.enable(options);\n        } else {\n            this.disable();\n        }\n    },\n    enable: function enable() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        this.options = options;\n\n        this._map = this._layer._map;\n\n        // cancel when map isn't available, this happens when the polygon is removed before this fires\n        if (!this._map) {\n            return;\n        }\n\n        if (!this.enabled()) {\n            // if it was already enabled, disable first\n            // we don't block enabling again because new options might be passed\n            this.disable();\n        }\n\n        // change state\n        this._enabled = true;\n\n        // init markers\n        this._initMarkers();\n\n        // if polygon gets removed from map, disable edit mode\n        this._layer.on('remove', this._onLayerRemove, this);\n\n        if (this.options.draggable) {\n            this._initDraggableLayer();\n        }\n    },\n    _onLayerRemove: function _onLayerRemove(e) {\n        this.disable(e.target);\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    disable: function disable() {\n        var poly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._layer;\n\n        // if it's not enabled, it doesn't need to be disabled\n        if (!this.enabled()) {\n            return false;\n        }\n\n        // prevent disabling if polygon is being dragged\n        if (poly.pm._dragging) {\n            return false;\n        }\n        poly.pm._enabled = false;\n        poly.pm._markerGroup.clearLayers();\n\n        // clean up draggable\n        poly.off('mousedown');\n        poly.off('mouseup');\n\n        // remove onRemove listener\n        this._layer.off('remove', this._onLayerRemove);\n\n        // remove draggable class\n        var el = poly._path;\n        L.DomUtil.removeClass(el, 'leaflet-pm-draggable');\n\n        return true;\n    },\n    _initMarkers: function _initMarkers() {\n        var map = this._map;\n\n        // cleanup old ones first\n        if (this._markerGroup) {\n            this._markerGroup.clearLayers();\n        }\n\n        // add markerGroup to map, markerGroup includes regular and middle markers\n        this._markerGroup = new L.LayerGroup();\n        this._markerGroup._pmTempLayer = true;\n        map.addLayer(this._markerGroup);\n\n        // create marker for each coordinate\n        var coords = this._layer._latlngs;\n\n        // the marker array, it includes only the markers that're associated with the coordinates\n        this._markers = coords.map(this._createMarker, this);\n\n        // create small markers in the middle of the regular markers\n        for (var k = 0; k < coords.length - 1; k += 1) {\n            var nextIndex = k + 1;\n            this._createMiddleMarker(this._markers[k], this._markers[nextIndex]);\n        }\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n\n\n    // creates initial markers for coordinates\n    _createMarker: function _createMarker(latlng, index) {\n        var marker = new L.Marker(latlng, {\n            draggable: true,\n            icon: L.divIcon({ className: 'marker-icon' })\n        });\n\n        marker._origLatLng = latlng;\n        marker._index = index;\n        marker._pmTempLayer = true;\n\n        marker.on('dragstart', this._onMarkerDragStart, this);\n        marker.on('move', this._onMarkerDrag, this);\n        marker.on('dragend', this._onMarkerDragEnd, this);\n        marker.on('contextmenu', this._removeMarker, this);\n\n        this._markerGroup.addLayer(marker);\n\n        return marker;\n    },\n\n\n    // creates the middle markes between coordinates\n    _createMiddleMarker: function _createMiddleMarker(leftM, rightM) {\n        var _this = this;\n\n        var latlng = this._calcMiddleLatLng(leftM.getLatLng(), rightM.getLatLng());\n\n        var middleMarker = this._createMarker(latlng);\n        var middleIcon = L.divIcon({ className: 'marker-icon marker-icon-middle' });\n        middleMarker.setIcon(middleIcon);\n\n        // save reference to this middle markers on the neighboor regular markers\n        leftM._middleMarkerNext = middleMarker;\n        rightM._middleMarkerPrev = middleMarker;\n\n        middleMarker.on('click', function () {\n            // TODO: move the next two lines inside _addMarker() as soon as\n            // https://github.com/Leaflet/Leaflet/issues/4484\n            // is fixed\n            var icon = L.divIcon({ className: 'marker-icon' });\n            middleMarker.setIcon(icon);\n\n            _this._addMarker(middleMarker, leftM, rightM);\n        });\n        middleMarker.on('movestart', function () {\n            // TODO: This is a workaround. Remove the moveend listener and\n            // callback as soon as this is fixed:\n            // https://github.com/Leaflet/Leaflet/issues/4484\n            middleMarker.on('moveend', function () {\n                var icon = L.divIcon({ className: 'marker-icon' });\n                middleMarker.setIcon(icon);\n\n                middleMarker.off('moveend');\n            });\n\n            _this._addMarker(middleMarker, leftM, rightM);\n        });\n    },\n\n\n    // adds a new marker from a middlemarker\n    _addMarker: function _addMarker(newM, leftM, rightM) {\n        // first, make this middlemarker a regular marker\n        newM.off('movestart');\n        newM.off('click');\n\n        // now, create the polygon coordinate point for that marker\n        var latlng = newM.getLatLng();\n        var coords = this._layer._latlngs;\n        var index = leftM._index + 1;\n\n        coords.splice(index, 0, latlng);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // associate polygon coordinate with marker coordinate\n        newM._origLatLng = coords[index];\n\n        // push into marker array & update the indexes for every marker\n        this._markers.splice(index, 0, newM);\n        this._markers.map(function (marker, i) {\n            marker._index = i;\n            return true;\n        });\n\n        // create the new middlemarkers\n        this._createMiddleMarker(leftM, newM);\n        this._createMiddleMarker(newM, rightM);\n\n        // fire edit event\n        this._fireEdit();\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    _removeMarker: function _removeMarker(e) {\n        var marker = e.target;\n        var coords = this._layer._latlngs;\n        var index = marker._index;\n\n        // only continue if this is NOT a middle marker (those can't be deleted)\n        if (index === undefined) {\n            return;\n        }\n\n        // remove polygon coordinate from this marker\n        coords.splice(index, 1);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // if the poly has no coordinates left, remove the layer\n        // else, redraw it\n        if (coords.length < 1) {\n            this._layer.remove();\n        } else {\n            this._layer.redraw();\n        }\n\n        // remove the marker and the middlemarkers next to it from the map\n        if (marker._middleMarkerPrev) {\n            this._markerGroup.removeLayer(marker._middleMarkerPrev);\n        }\n        if (marker._middleMarkerNext) {\n            this._markerGroup.removeLayer(marker._middleMarkerNext);\n        }\n\n        this._markerGroup.removeLayer(marker);\n\n        // find neighbor marker-indexes\n        var leftMarkerIndex = index - 1 < 0 ? undefined : index - 1;\n        var rightMarkerIndex = index + 1 >= this._markers.length ? undefined : index + 1;\n\n        // don't create middlemarkers if there is only one marker left\n        // or if the middlemarker would be between the first and last coordinate of a polyline\n        if (rightMarkerIndex && leftMarkerIndex && rightMarkerIndex !== leftMarkerIndex) {\n            var leftM = this._markers[leftMarkerIndex];\n            var rightM = this._markers[rightMarkerIndex];\n            this._createMiddleMarker(leftM, rightM);\n        }\n\n        // remove the marker from the markers array & update indexes\n        this._markers.splice(index, 1);\n        this._markers.map(function (m, i) {\n            m._index = i;\n            return true;\n        });\n\n        // fire edit event\n        this._fireEdit();\n    },\n    updatePolygonCoordsFromMarkerDrag: function updatePolygonCoordsFromMarkerDrag(marker) {\n        // update polygon coords\n        var coords = this._layer.getLatLngs();\n        var index = marker._index;\n\n        coords.splice(index, 1, marker.getLatLng());\n        this._layer.setLatLngs(coords).redraw();\n    },\n    _onMarkerDrag: function _onMarkerDrag(e) {\n        // dragged marker\n        var marker = e.target;\n\n        // only continue if this is NOT a middle marker (those can't be deleted)\n        if (marker._index === undefined) {\n            return;\n        }\n\n        // the dragged markers neighbors\n        var nextMarkerIndex = marker._index + 1 >= this._markers.length ? 0 : marker._index + 1;\n        var prevMarkerIndex = marker._index - 1 < 0 ? this._markers.length - 1 : marker._index - 1;\n\n        // update marker coordinates\n        L.extend(marker._origLatLng, marker._latlng);\n\n        this.updatePolygonCoordsFromMarkerDrag(marker);\n\n        // update middle markers on the left and right\n        // be aware that \"next\" and \"prev\" might be interchanged, depending on the geojson array\n        var markerLatLng = marker.getLatLng();\n        var prevMarkerLatLng = this._markers[prevMarkerIndex].getLatLng();\n        var nextMarkerLatLng = this._markers[nextMarkerIndex].getLatLng();\n\n        if (marker._middleMarkerNext) {\n            var middleMarkerNextLatLng = this._calcMiddleLatLng(markerLatLng, nextMarkerLatLng);\n            marker._middleMarkerNext.setLatLng(middleMarkerNextLatLng);\n        }\n\n        if (marker._middleMarkerPrev) {\n            var middleMarkerPrevLatLng = this._calcMiddleLatLng(markerLatLng, prevMarkerLatLng);\n            marker._middleMarkerPrev.setLatLng(middleMarkerPrevLatLng);\n        }\n    },\n    _onMarkerDragEnd: function _onMarkerDragEnd(e) {\n        this._layer.fire('pm:markerdragend', {\n            markerEvent: e\n        });\n\n        // fire edit event\n        this._fireEdit();\n    },\n    _onMarkerDragStart: function _onMarkerDragStart(e) {\n        this._layer.fire('pm:markerdragstart', {\n            markerEvent: e\n        });\n    },\n    _fireEdit: function _fireEdit() {\n        // fire edit event\n        this._layer.edited = true;\n        this._layer.fire('pm:edit');\n    },\n    _calcMiddleLatLng: function _calcMiddleLatLng(latlng1, latlng2) {\n        // calculate the middle coordinates between two markers\n        // TODO: put this into a utils.js or something\n\n        var map = this._map;\n        var p1 = map.project(latlng1);\n        var p2 = map.project(latlng2);\n\n        var latlng = map.unproject(p1._add(p2)._divideBy(2));\n\n        return latlng;\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTGluZS5qcz83MGY0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF9MUE0gPSByZXF1aXJlKCcuL0wuUE0uRWRpdCcpO1xuXG52YXIgX0xQTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MUE0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNMi5kZWZhdWx0LkxpbmUgPSBfTFBNMi5kZWZhdWx0LmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShsYXllcikge1xuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMuX21hcCA9IHRoaXMuX2xheWVyLl9tYXA7XG5cbiAgICAgICAgLy8gY2FuY2VsIHdoZW4gbWFwIGlzbid0IGF2YWlsYWJsZSwgdGhpcyBoYXBwZW5zIHdoZW4gdGhlIHBvbHlnb24gaXMgcmVtb3ZlZCBiZWZvcmUgdGhpcyBmaXJlc1xuICAgICAgICBpZiAoIXRoaXMuX21hcCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgLy8gaWYgaXQgd2FzIGFscmVhZHkgZW5hYmxlZCwgZGlzYWJsZSBmaXJzdFxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgYmxvY2sgZW5hYmxpbmcgYWdhaW4gYmVjYXVzZSBuZXcgb3B0aW9ucyBtaWdodCBiZSBwYXNzZWRcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hhbmdlIHN0YXRlXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIC8vIGluaXQgbWFya2Vyc1xuICAgICAgICB0aGlzLl9pbml0TWFya2VycygpO1xuXG4gICAgICAgIC8vIGlmIHBvbHlnb24gZ2V0cyByZW1vdmVkIGZyb20gbWFwLCBkaXNhYmxlIGVkaXQgbW9kZVxuICAgICAgICB0aGlzLl9sYXllci5vbigncmVtb3ZlJywgdGhpcy5fb25MYXllclJlbW92ZSwgdGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2luaXREcmFnZ2FibGVMYXllcigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfb25MYXllclJlbW92ZTogZnVuY3Rpb24gX29uTGF5ZXJSZW1vdmUoZSkge1xuICAgICAgICB0aGlzLmRpc2FibGUoZS50YXJnZXQpO1xuICAgIH0sXG4gICAgZW5hYmxlZDogZnVuY3Rpb24gZW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XG4gICAgfSxcbiAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICB2YXIgcG9seSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdGhpcy5fbGF5ZXI7XG5cbiAgICAgICAgLy8gaWYgaXQncyBub3QgZW5hYmxlZCwgaXQgZG9lc24ndCBuZWVkIHRvIGJlIGRpc2FibGVkXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHByZXZlbnQgZGlzYWJsaW5nIGlmIHBvbHlnb24gaXMgYmVpbmcgZHJhZ2dlZFxuICAgICAgICBpZiAocG9seS5wbS5fZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBwb2x5LnBtLl9lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHBvbHkucG0uX21hcmtlckdyb3VwLmNsZWFyTGF5ZXJzKCk7XG5cbiAgICAgICAgLy8gY2xlYW4gdXAgZHJhZ2dhYmxlXG4gICAgICAgIHBvbHkub2ZmKCdtb3VzZWRvd24nKTtcbiAgICAgICAgcG9seS5vZmYoJ21vdXNldXAnKTtcblxuICAgICAgICAvLyByZW1vdmUgb25SZW1vdmUgbGlzdGVuZXJcbiAgICAgICAgdGhpcy5fbGF5ZXIub2ZmKCdyZW1vdmUnLCB0aGlzLl9vbkxheWVyUmVtb3ZlKTtcblxuICAgICAgICAvLyByZW1vdmUgZHJhZ2dhYmxlIGNsYXNzXG4gICAgICAgIHZhciBlbCA9IHBvbHkuX3BhdGg7XG4gICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0tZHJhZ2dhYmxlJyk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBfaW5pdE1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0TWFya2VycygpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcblxuICAgICAgICAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG4gICAgICAgIGlmICh0aGlzLl9tYXJrZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBtYXJrZXJHcm91cCB0byBtYXAsIG1hcmtlckdyb3VwIGluY2x1ZGVzIHJlZ3VsYXIgYW5kIG1pZGRsZSBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcmtlckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuICAgICAgICBtYXAuYWRkTGF5ZXIodGhpcy5fbWFya2VyR3JvdXApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3M7XG5cbiAgICAgICAgLy8gdGhlIG1hcmtlciBhcnJheSwgaXQgaW5jbHVkZXMgb25seSB0aGUgbWFya2VycyB0aGF0J3JlIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5fbWFya2VycyA9IGNvb3Jkcy5tYXAodGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBjcmVhdGUgc21hbGwgbWFya2VycyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByZWd1bGFyIG1hcmtlcnNcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb29yZHMubGVuZ3RoIC0gMTsgayArPSAxKSB7XG4gICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gayArIDE7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVNaWRkbGVNYXJrZXIodGhpcy5fbWFya2Vyc1trXSwgdGhpcy5fbWFya2Vyc1tuZXh0SW5kZXhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcblxuXG4gICAgLy8gY3JlYXRlcyBpbml0aWFsIG1hcmtlcnMgZm9yIGNvb3JkaW5hdGVzXG4gICAgX2NyZWF0ZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1hcmtlcihsYXRsbmcsIGluZGV4KSB7XG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIobGF0bG5nLCB7XG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFya2VyLl9vcmlnTGF0TG5nID0gbGF0bG5nO1xuICAgICAgICBtYXJrZXIuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgIG1hcmtlci5fcG1UZW1wTGF5ZXIgPSB0cnVlO1xuXG4gICAgICAgIG1hcmtlci5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25NYXJrZXJEcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ21vdmUnLCB0aGlzLl9vbk1hcmtlckRyYWcsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ2RyYWdlbmQnLCB0aGlzLl9vbk1hcmtlckRyYWdFbmQsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ2NvbnRleHRtZW51JywgdGhpcy5fcmVtb3ZlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5hZGRMYXllcihtYXJrZXIpO1xuXG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgfSxcblxuXG4gICAgLy8gY3JlYXRlcyB0aGUgbWlkZGxlIG1hcmtlcyBiZXR3ZWVuIGNvb3JkaW5hdGVzXG4gICAgX2NyZWF0ZU1pZGRsZU1hcmtlcjogZnVuY3Rpb24gX2NyZWF0ZU1pZGRsZU1hcmtlcihsZWZ0TSwgcmlnaHRNKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGxhdGxuZyA9IHRoaXMuX2NhbGNNaWRkbGVMYXRMbmcobGVmdE0uZ2V0TGF0TG5nKCksIHJpZ2h0TS5nZXRMYXRMbmcoKSk7XG5cbiAgICAgICAgdmFyIG1pZGRsZU1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihsYXRsbmcpO1xuICAgICAgICB2YXIgbWlkZGxlSWNvbiA9IEwuZGl2SWNvbih7IGNsYXNzTmFtZTogJ21hcmtlci1pY29uIG1hcmtlci1pY29uLW1pZGRsZScgfSk7XG4gICAgICAgIG1pZGRsZU1hcmtlci5zZXRJY29uKG1pZGRsZUljb24pO1xuXG4gICAgICAgIC8vIHNhdmUgcmVmZXJlbmNlIHRvIHRoaXMgbWlkZGxlIG1hcmtlcnMgb24gdGhlIG5laWdoYm9vciByZWd1bGFyIG1hcmtlcnNcbiAgICAgICAgbGVmdE0uX21pZGRsZU1hcmtlck5leHQgPSBtaWRkbGVNYXJrZXI7XG4gICAgICAgIHJpZ2h0TS5fbWlkZGxlTWFya2VyUHJldiA9IG1pZGRsZU1hcmtlcjtcblxuICAgICAgICBtaWRkbGVNYXJrZXIub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gVE9ETzogbW92ZSB0aGUgbmV4dCB0d28gbGluZXMgaW5zaWRlIF9hZGRNYXJrZXIoKSBhcyBzb29uIGFzXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTGVhZmxldC9MZWFmbGV0L2lzc3Vlcy80NDg0XG4gICAgICAgICAgICAvLyBpcyBmaXhlZFxuICAgICAgICAgICAgdmFyIGljb24gPSBMLmRpdkljb24oeyBjbGFzc05hbWU6ICdtYXJrZXItaWNvbicgfSk7XG4gICAgICAgICAgICBtaWRkbGVNYXJrZXIuc2V0SWNvbihpY29uKTtcblxuICAgICAgICAgICAgX3RoaXMuX2FkZE1hcmtlcihtaWRkbGVNYXJrZXIsIGxlZnRNLCByaWdodE0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbWlkZGxlTWFya2VyLm9uKCdtb3Zlc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBUaGlzIGlzIGEgd29ya2Fyb3VuZC4gUmVtb3ZlIHRoZSBtb3ZlZW5kIGxpc3RlbmVyIGFuZFxuICAgICAgICAgICAgLy8gY2FsbGJhY2sgYXMgc29vbiBhcyB0aGlzIGlzIGZpeGVkOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0xlYWZsZXQvTGVhZmxldC9pc3N1ZXMvNDQ4NFxuICAgICAgICAgICAgbWlkZGxlTWFya2VyLm9uKCdtb3ZlZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpY29uID0gTC5kaXZJY29uKHsgY2xhc3NOYW1lOiAnbWFya2VyLWljb24nIH0pO1xuICAgICAgICAgICAgICAgIG1pZGRsZU1hcmtlci5zZXRJY29uKGljb24pO1xuXG4gICAgICAgICAgICAgICAgbWlkZGxlTWFya2VyLm9mZignbW92ZWVuZCcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF90aGlzLl9hZGRNYXJrZXIobWlkZGxlTWFya2VyLCBsZWZ0TSwgcmlnaHRNKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgLy8gYWRkcyBhIG5ldyBtYXJrZXIgZnJvbSBhIG1pZGRsZW1hcmtlclxuICAgIF9hZGRNYXJrZXI6IGZ1bmN0aW9uIF9hZGRNYXJrZXIobmV3TSwgbGVmdE0sIHJpZ2h0TSkge1xuICAgICAgICAvLyBmaXJzdCwgbWFrZSB0aGlzIG1pZGRsZW1hcmtlciBhIHJlZ3VsYXIgbWFya2VyXG4gICAgICAgIG5ld00ub2ZmKCdtb3Zlc3RhcnQnKTtcbiAgICAgICAgbmV3TS5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgLy8gbm93LCBjcmVhdGUgdGhlIHBvbHlnb24gY29vcmRpbmF0ZSBwb2ludCBmb3IgdGhhdCBtYXJrZXJcbiAgICAgICAgdmFyIGxhdGxuZyA9IG5ld00uZ2V0TGF0TG5nKCk7XG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5fbGF0bG5ncztcbiAgICAgICAgdmFyIGluZGV4ID0gbGVmdE0uX2luZGV4ICsgMTtcblxuICAgICAgICBjb29yZHMuc3BsaWNlKGluZGV4LCAwLCBsYXRsbmcpO1xuXG4gICAgICAgIC8vIHNldCBuZXcgbGF0bG5ncyB0byB0cmlnZ2VyIGJvdW5kcyB1cGRhdGVcbiAgICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyhjb29yZHMpO1xuXG4gICAgICAgIC8vIGFzc29jaWF0ZSBwb2x5Z29uIGNvb3JkaW5hdGUgd2l0aCBtYXJrZXIgY29vcmRpbmF0ZVxuICAgICAgICBuZXdNLl9vcmlnTGF0TG5nID0gY29vcmRzW2luZGV4XTtcblxuICAgICAgICAvLyBwdXNoIGludG8gbWFya2VyIGFycmF5ICYgdXBkYXRlIHRoZSBpbmRleGVzIGZvciBldmVyeSBtYXJrZXJcbiAgICAgICAgdGhpcy5fbWFya2Vycy5zcGxpY2UoaW5kZXgsIDAsIG5ld00pO1xuICAgICAgICB0aGlzLl9tYXJrZXJzLm1hcChmdW5jdGlvbiAobWFya2VyLCBpKSB7XG4gICAgICAgICAgICBtYXJrZXIuX2luZGV4ID0gaTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjcmVhdGUgdGhlIG5ldyBtaWRkbGVtYXJrZXJzXG4gICAgICAgIHRoaXMuX2NyZWF0ZU1pZGRsZU1hcmtlcihsZWZ0TSwgbmV3TSk7XG4gICAgICAgIHRoaXMuX2NyZWF0ZU1pZGRsZU1hcmtlcihuZXdNLCByaWdodE0pO1xuXG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9maXJlRWRpdCgpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfcmVtb3ZlTWFya2VyOiBmdW5jdGlvbiBfcmVtb3ZlTWFya2VyKGUpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3M7XG4gICAgICAgIHZhciBpbmRleCA9IG1hcmtlci5faW5kZXg7XG5cbiAgICAgICAgLy8gb25seSBjb250aW51ZSBpZiB0aGlzIGlzIE5PVCBhIG1pZGRsZSBtYXJrZXIgKHRob3NlIGNhbid0IGJlIGRlbGV0ZWQpXG4gICAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgcG9seWdvbiBjb29yZGluYXRlIGZyb20gdGhpcyBtYXJrZXJcbiAgICAgICAgY29vcmRzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgLy8gc2V0IG5ldyBsYXRsbmdzIHRvIHRyaWdnZXIgYm91bmRzIHVwZGF0ZVxuICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3Jkcyk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHBvbHkgaGFzIG5vIGNvb3JkaW5hdGVzIGxlZnQsIHJlbW92ZSB0aGUgbGF5ZXJcbiAgICAgICAgLy8gZWxzZSwgcmVkcmF3IGl0XG4gICAgICAgIGlmIChjb29yZHMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhpcy5fbGF5ZXIucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9sYXllci5yZWRyYXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgbWFya2VyIGFuZCB0aGUgbWlkZGxlbWFya2VycyBuZXh0IHRvIGl0IGZyb20gdGhlIG1hcFxuICAgICAgICBpZiAobWFya2VyLl9taWRkbGVNYXJrZXJQcmV2KSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5yZW1vdmVMYXllcihtYXJrZXIuX21pZGRsZU1hcmtlclByZXYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrZXIuX21pZGRsZU1hcmtlck5leHQpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcmtlckdyb3VwLnJlbW92ZUxheWVyKG1hcmtlci5fbWlkZGxlTWFya2VyTmV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9tYXJrZXJHcm91cC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXG4gICAgICAgIC8vIGZpbmQgbmVpZ2hib3IgbWFya2VyLWluZGV4ZXNcbiAgICAgICAgdmFyIGxlZnRNYXJrZXJJbmRleCA9IGluZGV4IC0gMSA8IDAgPyB1bmRlZmluZWQgOiBpbmRleCAtIDE7XG4gICAgICAgIHZhciByaWdodE1hcmtlckluZGV4ID0gaW5kZXggKyAxID49IHRoaXMuX21hcmtlcnMubGVuZ3RoID8gdW5kZWZpbmVkIDogaW5kZXggKyAxO1xuXG4gICAgICAgIC8vIGRvbid0IGNyZWF0ZSBtaWRkbGVtYXJrZXJzIGlmIHRoZXJlIGlzIG9ubHkgb25lIG1hcmtlciBsZWZ0XG4gICAgICAgIC8vIG9yIGlmIHRoZSBtaWRkbGVtYXJrZXIgd291bGQgYmUgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgY29vcmRpbmF0ZSBvZiBhIHBvbHlsaW5lXG4gICAgICAgIGlmIChyaWdodE1hcmtlckluZGV4ICYmIGxlZnRNYXJrZXJJbmRleCAmJiByaWdodE1hcmtlckluZGV4ICE9PSBsZWZ0TWFya2VySW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBsZWZ0TSA9IHRoaXMuX21hcmtlcnNbbGVmdE1hcmtlckluZGV4XTtcbiAgICAgICAgICAgIHZhciByaWdodE0gPSB0aGlzLl9tYXJrZXJzW3JpZ2h0TWFya2VySW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCByaWdodE0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBtYXJrZXIgZnJvbSB0aGUgbWFya2VycyBhcnJheSAmIHVwZGF0ZSBpbmRleGVzXG4gICAgICAgIHRoaXMuX21hcmtlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5fbWFya2Vycy5tYXAoZnVuY3Rpb24gKG0sIGkpIHtcbiAgICAgICAgICAgIG0uX2luZGV4ID0gaTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXJlIGVkaXQgZXZlbnRcbiAgICAgICAgdGhpcy5fZmlyZUVkaXQoKTtcbiAgICB9LFxuICAgIHVwZGF0ZVBvbHlnb25Db29yZHNGcm9tTWFya2VyRHJhZzogZnVuY3Rpb24gdXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnKG1hcmtlcikge1xuICAgICAgICAvLyB1cGRhdGUgcG9seWdvbiBjb29yZHNcbiAgICAgICAgdmFyIGNvb3JkcyA9IHRoaXMuX2xheWVyLmdldExhdExuZ3MoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gbWFya2VyLl9pbmRleDtcblxuICAgICAgICBjb29yZHMuc3BsaWNlKGluZGV4LCAxLCBtYXJrZXIuZ2V0TGF0TG5nKCkpO1xuICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3JkcykucmVkcmF3KCk7XG4gICAgfSxcbiAgICBfb25NYXJrZXJEcmFnOiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnKGUpIHtcbiAgICAgICAgLy8gZHJhZ2dlZCBtYXJrZXJcbiAgICAgICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuXG4gICAgICAgIC8vIG9ubHkgY29udGludWUgaWYgdGhpcyBpcyBOT1QgYSBtaWRkbGUgbWFya2VyICh0aG9zZSBjYW4ndCBiZSBkZWxldGVkKVxuICAgICAgICBpZiAobWFya2VyLl9pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGUgZHJhZ2dlZCBtYXJrZXJzIG5laWdoYm9yc1xuICAgICAgICB2YXIgbmV4dE1hcmtlckluZGV4ID0gbWFya2VyLl9pbmRleCArIDEgPj0gdGhpcy5fbWFya2Vycy5sZW5ndGggPyAwIDogbWFya2VyLl9pbmRleCArIDE7XG4gICAgICAgIHZhciBwcmV2TWFya2VySW5kZXggPSBtYXJrZXIuX2luZGV4IC0gMSA8IDAgPyB0aGlzLl9tYXJrZXJzLmxlbmd0aCAtIDEgOiBtYXJrZXIuX2luZGV4IC0gMTtcblxuICAgICAgICAvLyB1cGRhdGUgbWFya2VyIGNvb3JkaW5hdGVzXG4gICAgICAgIEwuZXh0ZW5kKG1hcmtlci5fb3JpZ0xhdExuZywgbWFya2VyLl9sYXRsbmcpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnKG1hcmtlcik7XG5cbiAgICAgICAgLy8gdXBkYXRlIG1pZGRsZSBtYXJrZXJzIG9uIHRoZSBsZWZ0IGFuZCByaWdodFxuICAgICAgICAvLyBiZSBhd2FyZSB0aGF0IFwibmV4dFwiIGFuZCBcInByZXZcIiBtaWdodCBiZSBpbnRlcmNoYW5nZWQsIGRlcGVuZGluZyBvbiB0aGUgZ2VvanNvbiBhcnJheVxuICAgICAgICB2YXIgbWFya2VyTGF0TG5nID0gbWFya2VyLmdldExhdExuZygpO1xuICAgICAgICB2YXIgcHJldk1hcmtlckxhdExuZyA9IHRoaXMuX21hcmtlcnNbcHJldk1hcmtlckluZGV4XS5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIG5leHRNYXJrZXJMYXRMbmcgPSB0aGlzLl9tYXJrZXJzW25leHRNYXJrZXJJbmRleF0uZ2V0TGF0TG5nKCk7XG5cbiAgICAgICAgaWYgKG1hcmtlci5fbWlkZGxlTWFya2VyTmV4dCkge1xuICAgICAgICAgICAgdmFyIG1pZGRsZU1hcmtlck5leHRMYXRMbmcgPSB0aGlzLl9jYWxjTWlkZGxlTGF0TG5nKG1hcmtlckxhdExuZywgbmV4dE1hcmtlckxhdExuZyk7XG4gICAgICAgICAgICBtYXJrZXIuX21pZGRsZU1hcmtlck5leHQuc2V0TGF0TG5nKG1pZGRsZU1hcmtlck5leHRMYXRMbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hcmtlci5fbWlkZGxlTWFya2VyUHJldikge1xuICAgICAgICAgICAgdmFyIG1pZGRsZU1hcmtlclByZXZMYXRMbmcgPSB0aGlzLl9jYWxjTWlkZGxlTGF0TG5nKG1hcmtlckxhdExuZywgcHJldk1hcmtlckxhdExuZyk7XG4gICAgICAgICAgICBtYXJrZXIuX21pZGRsZU1hcmtlclByZXYuc2V0TGF0TG5nKG1pZGRsZU1hcmtlclByZXZMYXRMbmcpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfb25NYXJrZXJEcmFnRW5kOiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnRW5kKGUpIHtcbiAgICAgICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06bWFya2VyZHJhZ2VuZCcsIHtcbiAgICAgICAgICAgIG1hcmtlckV2ZW50OiBlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9maXJlRWRpdCgpO1xuICAgIH0sXG4gICAgX29uTWFya2VyRHJhZ1N0YXJ0OiBmdW5jdGlvbiBfb25NYXJrZXJEcmFnU3RhcnQoZSkge1xuICAgICAgICB0aGlzLl9sYXllci5maXJlKCdwbTptYXJrZXJkcmFnc3RhcnQnLCB7XG4gICAgICAgICAgICBtYXJrZXJFdmVudDogZVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIF9maXJlRWRpdDogZnVuY3Rpb24gX2ZpcmVFZGl0KCkge1xuICAgICAgICAvLyBmaXJlIGVkaXQgZXZlbnRcbiAgICAgICAgdGhpcy5fbGF5ZXIuZWRpdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbGF5ZXIuZmlyZSgncG06ZWRpdCcpO1xuICAgIH0sXG4gICAgX2NhbGNNaWRkbGVMYXRMbmc6IGZ1bmN0aW9uIF9jYWxjTWlkZGxlTGF0TG5nKGxhdGxuZzEsIGxhdGxuZzIpIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBtaWRkbGUgY29vcmRpbmF0ZXMgYmV0d2VlbiB0d28gbWFya2Vyc1xuICAgICAgICAvLyBUT0RPOiBwdXQgdGhpcyBpbnRvIGEgdXRpbHMuanMgb3Igc29tZXRoaW5nXG5cbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcbiAgICAgICAgdmFyIHAxID0gbWFwLnByb2plY3QobGF0bG5nMSk7XG4gICAgICAgIHZhciBwMiA9IG1hcC5wcm9qZWN0KGxhdGxuZzIpO1xuXG4gICAgICAgIHZhciBsYXRsbmcgPSBtYXAudW5wcm9qZWN0KHAxLl9hZGQocDIpLl9kaXZpZGVCeSgyKSk7XG5cbiAgICAgICAgcmV0dXJuIGxhdGxuZztcbiAgICB9XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9FZGl0L0wuUE0uRWRpdC5MaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Marker = _LPM2.default.extend({\n    initialize: function initialize(layer) {\n        // layer is a marker in this case :-)\n        this._layer = layer;\n        this._enabled = false;\n\n        // register dragend event e.g. to fire pm:edit\n        this._layer.on('dragend', this._onDragEnd, this);\n    },\n    toggleEdit: function toggleEdit(options) {\n        if (!this.enabled()) {\n            this.enable(options);\n        } else {\n            this.disable();\n        }\n    },\n    enable: function enable() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            draggable: true,\n            snappable: true\n        };\n\n        this.options = options;\n\n        this._map = this._layer._map;\n\n        if (this.enabled()) {\n            return;\n        }\n        this._enabled = true;\n\n        // enable removal for the marker\n        this._layer.on('contextmenu', this._removeMarker, this);\n\n        // enable dragging and removal for the marker\n        if (this.options.snappable) {\n            this._layer.dragging.enable();\n        }\n\n        // enable snapping\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    enabled: function enabled() {\n        return this._enabled;\n    },\n    disable: function disable() {\n        this._enabled = false;\n\n        // disable dragging and removal for the marker\n        this._layer.dragging.disable();\n        this._layer.off('contextmenu', this._removeMarker, this);\n    },\n    _removeMarker: function _removeMarker(e) {\n        var marker = e.target;\n        marker.remove();\n        marker.fire('pm:remove');\n    },\n    _onDragEnd: function _onDragEnd(e) {\n        var marker = e.target;\n\n        // fire the pm:edit event and pass shape and marker\n        marker.fire('pm:edit');\n    },\n\n\n    // overwrite initSnappableMarkers from Snapping.js Mixin\n    _initSnappableMarkers: function _initSnappableMarkers() {\n        var marker = this._layer;\n\n        this.options.snapDistance = this.options.snapDistance || 30;\n\n        marker.off('drag', this._handleSnapping, this);\n        marker.on('drag', this._handleSnapping, this);\n\n        marker.off('dragend', this._cleanupSnapping, this);\n        marker.on('dragend', this._cleanupSnapping, this);\n\n        marker.off('pm:dragstart', this._unsnap, this);\n        marker.on('pm:dragstart', this._unsnap, this);\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTWFya2VyLmpzPzI2ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX0xQTSA9IHJlcXVpcmUoJy4vTC5QTS5FZGl0Jyk7XG5cbnZhciBfTFBNMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xQTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbl9MUE0yLmRlZmF1bHQuTWFya2VyID0gX0xQTTIuZGVmYXVsdC5leHRlbmQoe1xuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobGF5ZXIpIHtcbiAgICAgICAgLy8gbGF5ZXIgaXMgYSBtYXJrZXIgaW4gdGhpcyBjYXNlIDotKVxuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgZHJhZ2VuZCBldmVudCBlLmcuIHRvIGZpcmUgcG06ZWRpdFxuICAgICAgICB0aGlzLl9sYXllci5vbignZHJhZ2VuZCcsIHRoaXMuX29uRHJhZ0VuZCwgdGhpcyk7XG4gICAgfSxcbiAgICB0b2dnbGVFZGl0OiBmdW5jdGlvbiB0b2dnbGVFZGl0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGUob3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7XG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICBzbmFwcGFibGU6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgIHRoaXMuX21hcCA9IHRoaXMuX2xheWVyLl9tYXA7XG5cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgLy8gZW5hYmxlIHJlbW92YWwgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgdGhpcy5fbGF5ZXIub24oJ2NvbnRleHRtZW51JywgdGhpcy5fcmVtb3ZlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBlbmFibGUgZHJhZ2dpbmcgYW5kIHJlbW92YWwgZm9yIHRoZSBtYXJrZXJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLmRyYWdnaW5nLmVuYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZW5hYmxlIHNuYXBwaW5nXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc25hcHBhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0U25hcHBhYmxlTWFya2VycygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZDtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBkaXNhYmxlIGRyYWdnaW5nIGFuZCByZW1vdmFsIGZvciB0aGUgbWFya2VyXG4gICAgICAgIHRoaXMuX2xheWVyLmRyYWdnaW5nLmRpc2FibGUoKTtcbiAgICAgICAgdGhpcy5fbGF5ZXIub2ZmKCdjb250ZXh0bWVudScsIHRoaXMuX3JlbW92ZU1hcmtlciwgdGhpcyk7XG4gICAgfSxcbiAgICBfcmVtb3ZlTWFya2VyOiBmdW5jdGlvbiBfcmVtb3ZlTWFya2VyKGUpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IGUudGFyZ2V0O1xuICAgICAgICBtYXJrZXIucmVtb3ZlKCk7XG4gICAgICAgIG1hcmtlci5maXJlKCdwbTpyZW1vdmUnKTtcbiAgICB9LFxuICAgIF9vbkRyYWdFbmQ6IGZ1bmN0aW9uIF9vbkRyYWdFbmQoZSkge1xuICAgICAgICB2YXIgbWFya2VyID0gZS50YXJnZXQ7XG5cbiAgICAgICAgLy8gZmlyZSB0aGUgcG06ZWRpdCBldmVudCBhbmQgcGFzcyBzaGFwZSBhbmQgbWFya2VyXG4gICAgICAgIG1hcmtlci5maXJlKCdwbTplZGl0Jyk7XG4gICAgfSxcblxuXG4gICAgLy8gb3ZlcndyaXRlIGluaXRTbmFwcGFibGVNYXJrZXJzIGZyb20gU25hcHBpbmcuanMgTWl4aW5cbiAgICBfaW5pdFNuYXBwYWJsZU1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0U25hcHBhYmxlTWFya2VycygpIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMuX2xheWVyO1xuXG4gICAgICAgIHRoaXMub3B0aW9ucy5zbmFwRGlzdGFuY2UgPSB0aGlzLm9wdGlvbnMuc25hcERpc3RhbmNlIHx8IDMwO1xuXG4gICAgICAgIG1hcmtlci5vZmYoJ2RyYWcnLCB0aGlzLl9oYW5kbGVTbmFwcGluZywgdGhpcyk7XG4gICAgICAgIG1hcmtlci5vbignZHJhZycsIHRoaXMuX2hhbmRsZVNuYXBwaW5nLCB0aGlzKTtcblxuICAgICAgICBtYXJrZXIub2ZmKCdkcmFnZW5kJywgdGhpcy5fY2xlYW51cFNuYXBwaW5nLCB0aGlzKTtcbiAgICAgICAgbWFya2VyLm9uKCdkcmFnZW5kJywgdGhpcy5fY2xlYW51cFNuYXBwaW5nLCB0aGlzKTtcblxuICAgICAgICBtYXJrZXIub2ZmKCdwbTpkcmFnc3RhcnQnLCB0aGlzLl91bnNuYXAsIHRoaXMpO1xuICAgICAgICBtYXJrZXIub24oJ3BtOmRyYWdzdGFydCcsIHRoaXMuX3Vuc25hcCwgdGhpcyk7XG4gICAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuTWFya2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _LPM = __webpack_require__(0);\n\nvar _LPM2 = _interopRequireDefault(_LPM);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_LPM2.default.Poly = _LPM2.default.Line.extend({\n    _initMarkers: function _initMarkers() {\n        var map = this._map;\n\n        // cleanup old ones first\n        if (this._markerGroup) {\n            this._markerGroup.clearLayers();\n        }\n\n        // add markerGroup to map, markerGroup includes regular and middle markers\n        this._markerGroup = new L.LayerGroup();\n        map.addLayer(this._markerGroup);\n\n        // create marker for each coordinate\n        var coords = this._layer._latlngs[0];\n\n        // the marker array, it includes only the markers that're associated with the coordinates\n        this._markers = coords.map(this._createMarker, this);\n\n        // create small markers in the middle of the regular markers\n        for (var k = 0; k < coords.length; k += 1) {\n            var nextIndex = k + 1 >= coords.length ? 0 : k + 1;\n            this._createMiddleMarker(this._markers[k], this._markers[nextIndex]);\n        }\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    updatePolygonCoordsFromMarkerDrag: function updatePolygonCoordsFromMarkerDrag(marker) {\n        // update polygon coords\n        var coords = this._layer.getLatLngs()[0];\n        var index = marker._index;\n\n        coords.splice(index, 1, marker.getLatLng());\n        this._layer.setLatLngs(coords).redraw();\n    },\n\n\n    // adds a new marker from a middlemarker\n    _addMarker: function _addMarker(newM, leftM, rightM) {\n        // first, make this middlemarker a regular marker\n        newM.off('movestart');\n        newM.off('click');\n\n        // now, create the polygon coordinate point for that marker\n        var latlng = newM.getLatLng();\n        var coords = this._layer._latlngs[0];\n        var index = leftM._index + 1;\n\n        coords.splice(index, 0, latlng);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // associate polygon coordinate with marker coordinate\n        newM._origLatLng = coords[index];\n\n        // push into marker array & update the indexes for every marker\n        this._markers.splice(index, 0, newM);\n        this._markers.map(function (marker, i) {\n            marker._index = i;\n            return true;\n        });\n\n        // create the new middlemarkers\n        this._createMiddleMarker(leftM, newM);\n        this._createMiddleMarker(newM, rightM);\n\n        // fire edit event\n        this._fireEdit();\n\n        if (this.options.snappable) {\n            this._initSnappableMarkers();\n        }\n    },\n    _removeMarker: function _removeMarker(e) {\n        var marker = e.target;\n        var coords = this._layer._latlngs[0];\n        var index = marker._index;\n\n        // only continue if this is NOT a middle marker (those can't be deleted)\n        if (index === undefined) {\n            return;\n        }\n\n        // don't remove a marker if a polygon has only 3 coordinates.\n        if (coords.length <= 3) {\n            return;\n        }\n\n        // remove polygon coordinate from this marker\n        coords.splice(index, 1);\n\n        // set new latlngs to trigger bounds update\n        this._layer.setLatLngs(coords);\n\n        // if the poly has no coordinates left, remove the layer\n        // else, redraw it\n        if (coords.length < 1) {\n            this._layer.remove();\n        } else {\n            this._layer.redraw();\n        }\n\n        // remove the marker and the middlemarkers next to it from the map\n        this._markerGroup.removeLayer(marker._middleMarkerPrev);\n        this._markerGroup.removeLayer(marker._middleMarkerNext);\n        this._markerGroup.removeLayer(marker);\n\n        // find neighbor marker-indexes\n        var leftMarkerIndex = index - 1 < 0 ? this._markers.length - 1 : index - 1;\n        var rightMarkerIndex = index + 1 >= this._markers.length ? 0 : index + 1;\n\n        // don't create middlemarkers if there is only one marker left\n        if (rightMarkerIndex !== leftMarkerIndex) {\n            var leftM = this._markers[leftMarkerIndex];\n            var rightM = this._markers[rightMarkerIndex];\n            this._createMiddleMarker(leftM, rightM);\n        }\n\n        // remove the marker from the markers array & update indexes\n        this._markers.splice(index, 1);\n        this._markers.map(function (m, i) {\n            m._index = i;\n            return true;\n        });\n\n        // fire edit event\n        this._fireEdit();\n    }\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvRWRpdC9MLlBNLkVkaXQuUG9seS5qcz8zODlhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIF9MUE0gPSByZXF1aXJlKCcuL0wuUE0uRWRpdCcpO1xuXG52YXIgX0xQTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MUE0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5fTFBNMi5kZWZhdWx0LlBvbHkgPSBfTFBNMi5kZWZhdWx0LkxpbmUuZXh0ZW5kKHtcbiAgICBfaW5pdE1hcmtlcnM6IGZ1bmN0aW9uIF9pbml0TWFya2VycygpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcblxuICAgICAgICAvLyBjbGVhbnVwIG9sZCBvbmVzIGZpcnN0XG4gICAgICAgIGlmICh0aGlzLl9tYXJrZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBtYXJrZXJHcm91cCB0byBtYXAsIG1hcmtlckdyb3VwIGluY2x1ZGVzIHJlZ3VsYXIgYW5kIG1pZGRsZSBtYXJrZXJzXG4gICAgICAgIHRoaXMuX21hcmtlckdyb3VwID0gbmV3IEwuTGF5ZXJHcm91cCgpO1xuICAgICAgICBtYXAuYWRkTGF5ZXIodGhpcy5fbWFya2VyR3JvdXApO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBtYXJrZXIgZm9yIGVhY2ggY29vcmRpbmF0ZVxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuX2xhdGxuZ3NbMF07XG5cbiAgICAgICAgLy8gdGhlIG1hcmtlciBhcnJheSwgaXQgaW5jbHVkZXMgb25seSB0aGUgbWFya2VycyB0aGF0J3JlIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29vcmRpbmF0ZXNcbiAgICAgICAgdGhpcy5fbWFya2VycyA9IGNvb3Jkcy5tYXAodGhpcy5fY3JlYXRlTWFya2VyLCB0aGlzKTtcblxuICAgICAgICAvLyBjcmVhdGUgc21hbGwgbWFya2VycyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByZWd1bGFyIG1hcmtlcnNcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb29yZHMubGVuZ3RoOyBrICs9IDEpIHtcbiAgICAgICAgICAgIHZhciBuZXh0SW5kZXggPSBrICsgMSA+PSBjb29yZHMubGVuZ3RoID8gMCA6IGsgKyAxO1xuICAgICAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKHRoaXMuX21hcmtlcnNba10sIHRoaXMuX21hcmtlcnNbbmV4dEluZGV4XSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNuYXBwYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5faW5pdFNuYXBwYWJsZU1hcmtlcnMoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlUG9seWdvbkNvb3Jkc0Zyb21NYXJrZXJEcmFnOiBmdW5jdGlvbiB1cGRhdGVQb2x5Z29uQ29vcmRzRnJvbU1hcmtlckRyYWcobWFya2VyKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBwb2x5Z29uIGNvb3Jkc1xuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fbGF5ZXIuZ2V0TGF0TG5ncygpWzBdO1xuICAgICAgICB2YXIgaW5kZXggPSBtYXJrZXIuX2luZGV4O1xuXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoaW5kZXgsIDEsIG1hcmtlci5nZXRMYXRMbmcoKSk7XG4gICAgICAgIHRoaXMuX2xheWVyLnNldExhdExuZ3MoY29vcmRzKS5yZWRyYXcoKTtcbiAgICB9LFxuXG5cbiAgICAvLyBhZGRzIGEgbmV3IG1hcmtlciBmcm9tIGEgbWlkZGxlbWFya2VyXG4gICAgX2FkZE1hcmtlcjogZnVuY3Rpb24gX2FkZE1hcmtlcihuZXdNLCBsZWZ0TSwgcmlnaHRNKSB7XG4gICAgICAgIC8vIGZpcnN0LCBtYWtlIHRoaXMgbWlkZGxlbWFya2VyIGEgcmVndWxhciBtYXJrZXJcbiAgICAgICAgbmV3TS5vZmYoJ21vdmVzdGFydCcpO1xuICAgICAgICBuZXdNLm9mZignY2xpY2snKTtcblxuICAgICAgICAvLyBub3csIGNyZWF0ZSB0aGUgcG9seWdvbiBjb29yZGluYXRlIHBvaW50IGZvciB0aGF0IG1hcmtlclxuICAgICAgICB2YXIgbGF0bG5nID0gbmV3TS5nZXRMYXRMbmcoKTtcbiAgICAgICAgdmFyIGNvb3JkcyA9IHRoaXMuX2xheWVyLl9sYXRsbmdzWzBdO1xuICAgICAgICB2YXIgaW5kZXggPSBsZWZ0TS5faW5kZXggKyAxO1xuXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoaW5kZXgsIDAsIGxhdGxuZyk7XG5cbiAgICAgICAgLy8gc2V0IG5ldyBsYXRsbmdzIHRvIHRyaWdnZXIgYm91bmRzIHVwZGF0ZVxuICAgICAgICB0aGlzLl9sYXllci5zZXRMYXRMbmdzKGNvb3Jkcyk7XG5cbiAgICAgICAgLy8gYXNzb2NpYXRlIHBvbHlnb24gY29vcmRpbmF0ZSB3aXRoIG1hcmtlciBjb29yZGluYXRlXG4gICAgICAgIG5ld00uX29yaWdMYXRMbmcgPSBjb29yZHNbaW5kZXhdO1xuXG4gICAgICAgIC8vIHB1c2ggaW50byBtYXJrZXIgYXJyYXkgJiB1cGRhdGUgdGhlIGluZGV4ZXMgZm9yIGV2ZXJ5IG1hcmtlclxuICAgICAgICB0aGlzLl9tYXJrZXJzLnNwbGljZShpbmRleCwgMCwgbmV3TSk7XG4gICAgICAgIHRoaXMuX21hcmtlcnMubWFwKGZ1bmN0aW9uIChtYXJrZXIsIGkpIHtcbiAgICAgICAgICAgIG1hcmtlci5faW5kZXggPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IG1pZGRsZW1hcmtlcnNcbiAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKGxlZnRNLCBuZXdNKTtcbiAgICAgICAgdGhpcy5fY3JlYXRlTWlkZGxlTWFya2VyKG5ld00sIHJpZ2h0TSk7XG5cbiAgICAgICAgLy8gZmlyZSBlZGl0IGV2ZW50XG4gICAgICAgIHRoaXMuX2ZpcmVFZGl0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zbmFwcGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2luaXRTbmFwcGFibGVNYXJrZXJzKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIF9yZW1vdmVNYXJrZXI6IGZ1bmN0aW9uIF9yZW1vdmVNYXJrZXIoZSkge1xuICAgICAgICB2YXIgbWFya2VyID0gZS50YXJnZXQ7XG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl9sYXllci5fbGF0bG5nc1swXTtcbiAgICAgICAgdmFyIGluZGV4ID0gbWFya2VyLl9pbmRleDtcblxuICAgICAgICAvLyBvbmx5IGNvbnRpbnVlIGlmIHRoaXMgaXMgTk9UIGEgbWlkZGxlIG1hcmtlciAodGhvc2UgY2FuJ3QgYmUgZGVsZXRlZClcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRvbid0IHJlbW92ZSBhIG1hcmtlciBpZiBhIHBvbHlnb24gaGFzIG9ubHkgMyBjb29yZGluYXRlcy5cbiAgICAgICAgaWYgKGNvb3Jkcy5sZW5ndGggPD0gMykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIHBvbHlnb24gY29vcmRpbmF0ZSBmcm9tIHRoaXMgbWFya2VyXG4gICAgICAgIGNvb3Jkcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICAgIC8vIHNldCBuZXcgbGF0bG5ncyB0byB0cmlnZ2VyIGJvdW5kcyB1cGRhdGVcbiAgICAgICAgdGhpcy5fbGF5ZXIuc2V0TGF0TG5ncyhjb29yZHMpO1xuXG4gICAgICAgIC8vIGlmIHRoZSBwb2x5IGhhcyBubyBjb29yZGluYXRlcyBsZWZ0LCByZW1vdmUgdGhlIGxheWVyXG4gICAgICAgIC8vIGVsc2UsIHJlZHJhdyBpdFxuICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbGF5ZXIucmVkcmF3KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgdGhlIG1hcmtlciBhbmQgdGhlIG1pZGRsZW1hcmtlcnMgbmV4dCB0byBpdCBmcm9tIHRoZSBtYXBcbiAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyLl9taWRkbGVNYXJrZXJQcmV2KTtcbiAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyLl9taWRkbGVNYXJrZXJOZXh0KTtcbiAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblxuICAgICAgICAvLyBmaW5kIG5laWdoYm9yIG1hcmtlci1pbmRleGVzXG4gICAgICAgIHZhciBsZWZ0TWFya2VySW5kZXggPSBpbmRleCAtIDEgPCAwID8gdGhpcy5fbWFya2Vycy5sZW5ndGggLSAxIDogaW5kZXggLSAxO1xuICAgICAgICB2YXIgcmlnaHRNYXJrZXJJbmRleCA9IGluZGV4ICsgMSA+PSB0aGlzLl9tYXJrZXJzLmxlbmd0aCA/IDAgOiBpbmRleCArIDE7XG5cbiAgICAgICAgLy8gZG9uJ3QgY3JlYXRlIG1pZGRsZW1hcmtlcnMgaWYgdGhlcmUgaXMgb25seSBvbmUgbWFya2VyIGxlZnRcbiAgICAgICAgaWYgKHJpZ2h0TWFya2VySW5kZXggIT09IGxlZnRNYXJrZXJJbmRleCkge1xuICAgICAgICAgICAgdmFyIGxlZnRNID0gdGhpcy5fbWFya2Vyc1tsZWZ0TWFya2VySW5kZXhdO1xuICAgICAgICAgICAgdmFyIHJpZ2h0TSA9IHRoaXMuX21hcmtlcnNbcmlnaHRNYXJrZXJJbmRleF07XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVNaWRkbGVNYXJrZXIobGVmdE0sIHJpZ2h0TSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgdGhlIG1hcmtlciBmcm9tIHRoZSBtYXJrZXJzIGFycmF5ICYgdXBkYXRlIGluZGV4ZXNcbiAgICAgICAgdGhpcy5fbWFya2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLl9tYXJrZXJzLm1hcChmdW5jdGlvbiAobSwgaSkge1xuICAgICAgICAgICAgbS5faW5kZXggPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpcmUgZWRpdCBldmVudFxuICAgICAgICB0aGlzLl9maXJlRWRpdCgpO1xuICAgIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0VkaXQvTC5QTS5FZGl0LlBvbHkuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar Map = L.Class.extend({\n    initialize: function initialize(map) {\n        var _this = this;\n\n        this.map = map;\n        this.Draw = new L.PM.Draw(map);\n        this.Toolbar = new L.PM.Toolbar(map);\n\n        this.map.on('layerremove', function (e) {\n            if (e.layer.pm && !e.layer._pmTempLayer) {\n                _this.map.fire('pm:remove', e);\n            }\n        });\n    },\n    addControls: function addControls(options) {\n        this.Toolbar.addControls(options);\n    },\n    removeControls: function removeControls() {\n        this.Toolbar.removeControls();\n    },\n    toggleControls: function toggleControls() {\n        this.Toolbar.toggleControls();\n    },\n    controlsVisible: function controlsVisible() {\n        return this.Toolbar.isVisible;\n    },\n    enableDraw: function enableDraw() {\n        var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Poly';\n        var options = arguments[1];\n\n        this.Draw.enable(shape, options);\n    },\n    disableDraw: function disableDraw() {\n        var shape = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Poly';\n\n        this.Draw.disable(shape);\n    },\n    setPathOptions: function setPathOptions(options) {\n        this.Draw.setPathOptions(options);\n    },\n    removeLayer: function removeLayer(e) {\n        var layer = e.target;\n        if (!layer._layers && (!layer.pm || !layer.pm.dragging())) {\n            e.target.remove();\n        }\n    },\n    toggleGlobalRemovalMode: function toggleGlobalRemovalMode() {\n        var _this2 = this;\n\n        // toggle global edit mode\n        if (this.globalRemovalEnabled()) {\n            this._globalRemovalMode = false;\n            this.map.eachLayer(function (layer) {\n                layer.off('click', _this2.removeLayer);\n            });\n        } else {\n            this._globalRemovalMode = true;\n            this.map.eachLayer(function (layer) {\n                if (layer.pm) {\n                    layer.on('click', _this2.removeLayer);\n                }\n            });\n        }\n\n        // toogle the button in the toolbar\n        this.Toolbar.toggleButton('deleteLayer', this._globalRemovalMode);\n    },\n    globalRemovalEnabled: function globalRemovalEnabled() {\n        return this._globalRemovalMode;\n    },\n    globalEditEnabled: function globalEditEnabled() {\n        return this._globalEditMode;\n    },\n    toggleGlobalEditMode: function toggleGlobalEditMode() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { snappable: true, draggable: true };\n\n        // find all layers that are or inherit from Polylines...\n        var layers = [];\n        this.map.eachLayer(function (layer) {\n            if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.Circle) {\n                layers.push(layer);\n            }\n        });\n\n        // filter out layers that don't have the leaflet.pm instance\n        layers = layers.filter(function (layer) {\n            return !!layer.pm;\n        });\n\n        // filter out everything that's leaflet.pm specific temporary stuff\n        layers = layers.filter(function (layer) {\n            return !layer._pmTempLayer;\n        });\n\n        if (this.globalEditEnabled()) {\n            // disable\n\n            this._globalEditMode = false;\n\n            layers.forEach(function (layer) {\n                layer.pm.disable();\n            });\n        } else {\n            // enable\n\n            this._globalEditMode = true;\n\n            layers.forEach(function (layer) {\n                layer.pm.enable(options);\n            });\n        }\n\n        // toggle the button in the toolbar\n        this.Toolbar.toggleButton('editPolygon', this._globalEditMode);\n    }\n});\n\nexports.default = Map;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTC5QTS5NYXAuanM/Mzk5NyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciBNYXAgPSBMLkNsYXNzLmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgdGhpcy5EcmF3ID0gbmV3IEwuUE0uRHJhdyhtYXApO1xuICAgICAgICB0aGlzLlRvb2xiYXIgPSBuZXcgTC5QTS5Ub29sYmFyKG1hcCk7XG5cbiAgICAgICAgdGhpcy5tYXAub24oJ2xheWVycmVtb3ZlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmxheWVyLnBtICYmICFlLmxheWVyLl9wbVRlbXBMYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLm1hcC5maXJlKCdwbTpyZW1vdmUnLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhZGRDb250cm9sczogZnVuY3Rpb24gYWRkQ29udHJvbHMob3B0aW9ucykge1xuICAgICAgICB0aGlzLlRvb2xiYXIuYWRkQ29udHJvbHMob3B0aW9ucyk7XG4gICAgfSxcbiAgICByZW1vdmVDb250cm9sczogZnVuY3Rpb24gcmVtb3ZlQ29udHJvbHMoKSB7XG4gICAgICAgIHRoaXMuVG9vbGJhci5yZW1vdmVDb250cm9scygpO1xuICAgIH0sXG4gICAgdG9nZ2xlQ29udHJvbHM6IGZ1bmN0aW9uIHRvZ2dsZUNvbnRyb2xzKCkge1xuICAgICAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQ29udHJvbHMoKTtcbiAgICB9LFxuICAgIGNvbnRyb2xzVmlzaWJsZTogZnVuY3Rpb24gY29udHJvbHNWaXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ub29sYmFyLmlzVmlzaWJsZTtcbiAgICB9LFxuICAgIGVuYWJsZURyYXc6IGZ1bmN0aW9uIGVuYWJsZURyYXcoKSB7XG4gICAgICAgIHZhciBzaGFwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ1BvbHknO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICB0aGlzLkRyYXcuZW5hYmxlKHNoYXBlLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGRpc2FibGVEcmF3OiBmdW5jdGlvbiBkaXNhYmxlRHJhdygpIHtcbiAgICAgICAgdmFyIHNoYXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnUG9seSc7XG5cbiAgICAgICAgdGhpcy5EcmF3LmRpc2FibGUoc2hhcGUpO1xuICAgIH0sXG4gICAgc2V0UGF0aE9wdGlvbnM6IGZ1bmN0aW9uIHNldFBhdGhPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5EcmF3LnNldFBhdGhPcHRpb25zKG9wdGlvbnMpO1xuICAgIH0sXG4gICAgcmVtb3ZlTGF5ZXI6IGZ1bmN0aW9uIHJlbW92ZUxheWVyKGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gZS50YXJnZXQ7XG4gICAgICAgIGlmICghbGF5ZXIuX2xheWVycyAmJiAoIWxheWVyLnBtIHx8ICFsYXllci5wbS5kcmFnZ2luZygpKSkge1xuICAgICAgICAgICAgZS50YXJnZXQucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHRvZ2dsZUdsb2JhbFJlbW92YWxNb2RlOiBmdW5jdGlvbiB0b2dnbGVHbG9iYWxSZW1vdmFsTW9kZSgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgLy8gdG9nZ2xlIGdsb2JhbCBlZGl0IG1vZGVcbiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsUmVtb3ZhbEVuYWJsZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fZ2xvYmFsUmVtb3ZhbE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBsYXllci5vZmYoJ2NsaWNrJywgX3RoaXMyLnJlbW92ZUxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZ2xvYmFsUmVtb3ZhbE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5tYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5wbSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5vbignY2xpY2snLCBfdGhpczIucmVtb3ZlTGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdG9vZ2xlIHRoZSBidXR0b24gaW4gdGhlIHRvb2xiYXJcbiAgICAgICAgdGhpcy5Ub29sYmFyLnRvZ2dsZUJ1dHRvbignZGVsZXRlTGF5ZXInLCB0aGlzLl9nbG9iYWxSZW1vdmFsTW9kZSk7XG4gICAgfSxcbiAgICBnbG9iYWxSZW1vdmFsRW5hYmxlZDogZnVuY3Rpb24gZ2xvYmFsUmVtb3ZhbEVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nbG9iYWxSZW1vdmFsTW9kZTtcbiAgICB9LFxuICAgIGdsb2JhbEVkaXRFbmFibGVkOiBmdW5jdGlvbiBnbG9iYWxFZGl0RW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsb2JhbEVkaXRNb2RlO1xuICAgIH0sXG4gICAgdG9nZ2xlR2xvYmFsRWRpdE1vZGU6IGZ1bmN0aW9uIHRvZ2dsZUdsb2JhbEVkaXRNb2RlKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogeyBzbmFwcGFibGU6IHRydWUsIGRyYWdnYWJsZTogdHJ1ZSB9O1xuXG4gICAgICAgIC8vIGZpbmQgYWxsIGxheWVycyB0aGF0IGFyZSBvciBpbmhlcml0IGZyb20gUG9seWxpbmVzLi4uXG4gICAgICAgIHZhciBsYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTC5Qb2x5bGluZSB8fCBsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyIHx8IGxheWVyIGluc3RhbmNlb2YgTC5DaXJjbGUpIHtcbiAgICAgICAgICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbHRlciBvdXQgbGF5ZXJzIHRoYXQgZG9uJ3QgaGF2ZSB0aGUgbGVhZmxldC5wbSBpbnN0YW5jZVxuICAgICAgICBsYXllcnMgPSBsYXllcnMuZmlsdGVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgcmV0dXJuICEhbGF5ZXIucG07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbHRlciBvdXQgZXZlcnl0aGluZyB0aGF0J3MgbGVhZmxldC5wbSBzcGVjaWZpYyB0ZW1wb3Jhcnkgc3R1ZmZcbiAgICAgICAgbGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAhbGF5ZXIuX3BtVGVtcExheWVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5nbG9iYWxFZGl0RW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlXG5cbiAgICAgICAgICAgIHRoaXMuX2dsb2JhbEVkaXRNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgICAgIGxheWVyLnBtLmRpc2FibGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZW5hYmxlXG5cbiAgICAgICAgICAgIHRoaXMuX2dsb2JhbEVkaXRNb2RlID0gdHJ1ZTtcblxuICAgICAgICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIucG0uZW5hYmxlKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0b2dnbGUgdGhlIGJ1dHRvbiBpbiB0aGUgdG9vbGJhclxuICAgICAgICB0aGlzLlRvb2xiYXIudG9nZ2xlQnV0dG9uKCdlZGl0UG9seWdvbicsIHRoaXMuX2dsb2JhbEVkaXRNb2RlKTtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTWFwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL0wuUE0uTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar DragMixin = {\n    _initDraggableLayer: function _initDraggableLayer() {\n        // temporary coord variable for delta calculation\n        this._tempDragCoord = null;\n\n        // add CSS class\n        var el = this._layer._path;\n        L.DomUtil.addClass(el, 'leaflet-pm-draggable');\n\n        this._layer.on('mousedown', this._dragMixinOnMouseDown, this);\n    },\n    _dragMixinOnMouseUp: function _dragMixinOnMouseUp() {\n        var _this = this;\n\n        var el = this._layer._path;\n\n        // re-enable map drag\n        if (this._originalMapDragState) {\n            this._layer._map.dragging.enable();\n        }\n\n        // clear up mousemove event\n        this._layer._map.off('mousemove', this._dragMixinOnMouseMove, this);\n\n        // clear up mouseup event\n        this._layer.off('mouseup', this._dragMixinOnMouseUp, this);\n\n        // if no drag happened, don't do anything\n        if (!this._dragging) {\n            return false;\n        }\n\n        // show markers again\n        this._initMarkers();\n\n        // timeout to prevent click event after drag :-/\n        // TODO: do it better as soon as leaflet has a way to do it better :-)\n        window.setTimeout(function () {\n            // set state\n            _this._dragging = false;\n            L.DomUtil.removeClass(el, 'leaflet-pm-dragging');\n\n            // fire pm:dragend event\n            _this._layer.fire('pm:dragend');\n\n            // fire edit\n            _this._fireEdit();\n        }, 10);\n\n        return true;\n    },\n    _dragMixinOnMouseMove: function _dragMixinOnMouseMove(e) {\n        var el = this._layer._path;\n\n        if (!this._dragging) {\n            // set state\n            this._dragging = true;\n            L.DomUtil.addClass(el, 'leaflet-pm-dragging');\n\n            // bring it to front to prevent drag interception\n            this._layer.bringToFront();\n\n            // disbale map drag\n            if (this._originalMapDragState) {\n                this._layer._map.dragging.disable();\n            }\n\n            // hide markers\n            this._markerGroup.clearLayers();\n\n            // fire pm:dragstart event\n            this._layer.fire('pm:dragstart');\n        }\n\n        this._onLayerDrag(e);\n    },\n    _dragMixinOnMouseDown: function _dragMixinOnMouseDown(e) {\n        // save current map dragging state\n        this._originalMapDragState = this._layer._map.dragging._enabled;\n\n        // save for delta calculation\n        this._tempDragCoord = e.latlng;\n\n        this._layer.on('mouseup', this._dragMixinOnMouseUp, this);\n\n        // listen to mousemove on map (instead of polygon),\n        // otherwise fast mouse movements stop the drag\n        this._layer._map.on('mousemove', this._dragMixinOnMouseMove, this);\n    },\n    dragging: function dragging() {\n        return this._dragging;\n    },\n    _onLayerDrag: function _onLayerDrag(e) {\n        // latLng of mouse event\n        var latlng = e.latlng;\n\n        // delta coords (how far was dragged)\n        var deltaLatLng = {\n            lat: latlng.lat - this._tempDragCoord.lat,\n            lng: latlng.lng - this._tempDragCoord.lng\n        };\n\n        // create the new coordinates array\n        var coords = void 0;\n\n        if (this._layer instanceof L.Polygon) {\n            coords = this._layer._latlngs[0];\n        } else {\n            coords = this._layer._latlngs;\n        }\n\n        var newLatLngs = coords.map(function (currentLatLng) {\n            var c = {\n                lat: currentLatLng.lat + deltaLatLng.lat,\n                lng: currentLatLng.lng + deltaLatLng.lng\n            };\n            return c;\n        });\n\n        // set new coordinates and redraw\n        this._layer.setLatLngs(newLatLngs).redraw();\n\n        // save current latlng for next delta calculation\n        this._tempDragCoord = latlng;\n\n        // fire pm:dragstart event\n        this._layer.fire('pm:drag');\n    }\n};\n\nexports.default = DragMixin;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvTWl4aW5zL0RyYWcuanM/OThmNCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciBEcmFnTWl4aW4gPSB7XG4gICAgX2luaXREcmFnZ2FibGVMYXllcjogZnVuY3Rpb24gX2luaXREcmFnZ2FibGVMYXllcigpIHtcbiAgICAgICAgLy8gdGVtcG9yYXJ5IGNvb3JkIHZhcmlhYmxlIGZvciBkZWx0YSBjYWxjdWxhdGlvblxuICAgICAgICB0aGlzLl90ZW1wRHJhZ0Nvb3JkID0gbnVsbDtcblxuICAgICAgICAvLyBhZGQgQ1NTIGNsYXNzXG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MoZWwsICdsZWFmbGV0LXBtLWRyYWdnYWJsZScpO1xuXG4gICAgICAgIHRoaXMuX2xheWVyLm9uKCdtb3VzZWRvd24nLCB0aGlzLl9kcmFnTWl4aW5Pbk1vdXNlRG93biwgdGhpcyk7XG4gICAgfSxcbiAgICBfZHJhZ01peGluT25Nb3VzZVVwOiBmdW5jdGlvbiBfZHJhZ01peGluT25Nb3VzZVVwKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuXG4gICAgICAgIC8vIHJlLWVuYWJsZSBtYXAgZHJhZ1xuICAgICAgICBpZiAodGhpcy5fb3JpZ2luYWxNYXBEcmFnU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLl9tYXAuZHJhZ2dpbmcuZW5hYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhciB1cCBtb3VzZW1vdmUgZXZlbnRcbiAgICAgICAgdGhpcy5fbGF5ZXIuX21hcC5vZmYoJ21vdXNlbW92ZScsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VNb3ZlLCB0aGlzKTtcblxuICAgICAgICAvLyBjbGVhciB1cCBtb3VzZXVwIGV2ZW50XG4gICAgICAgIHRoaXMuX2xheWVyLm9mZignbW91c2V1cCcsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VVcCwgdGhpcyk7XG5cbiAgICAgICAgLy8gaWYgbm8gZHJhZyBoYXBwZW5lZCwgZG9uJ3QgZG8gYW55dGhpbmdcbiAgICAgICAgaWYgKCF0aGlzLl9kcmFnZ2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBtYXJrZXJzIGFnYWluXG4gICAgICAgIHRoaXMuX2luaXRNYXJrZXJzKCk7XG5cbiAgICAgICAgLy8gdGltZW91dCB0byBwcmV2ZW50IGNsaWNrIGV2ZW50IGFmdGVyIGRyYWcgOi0vXG4gICAgICAgIC8vIFRPRE86IGRvIGl0IGJldHRlciBhcyBzb29uIGFzIGxlYWZsZXQgaGFzIGEgd2F5IHRvIGRvIGl0IGJldHRlciA6LSlcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gc2V0IHN0YXRlXG4gICAgICAgICAgICBfdGhpcy5fZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyhlbCwgJ2xlYWZsZXQtcG0tZHJhZ2dpbmcnKTtcblxuICAgICAgICAgICAgLy8gZmlyZSBwbTpkcmFnZW5kIGV2ZW50XG4gICAgICAgICAgICBfdGhpcy5fbGF5ZXIuZmlyZSgncG06ZHJhZ2VuZCcpO1xuXG4gICAgICAgICAgICAvLyBmaXJlIGVkaXRcbiAgICAgICAgICAgIF90aGlzLl9maXJlRWRpdCgpO1xuICAgICAgICB9LCAxMCk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBfZHJhZ01peGluT25Nb3VzZU1vdmU6IGZ1bmN0aW9uIF9kcmFnTWl4aW5Pbk1vdXNlTW92ZShlKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXMuX2xheWVyLl9wYXRoO1xuXG4gICAgICAgIGlmICghdGhpcy5fZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIC8vIHNldCBzdGF0ZVxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGVsLCAnbGVhZmxldC1wbS1kcmFnZ2luZycpO1xuXG4gICAgICAgICAgICAvLyBicmluZyBpdCB0byBmcm9udCB0byBwcmV2ZW50IGRyYWcgaW50ZXJjZXB0aW9uXG4gICAgICAgICAgICB0aGlzLl9sYXllci5icmluZ1RvRnJvbnQoKTtcblxuICAgICAgICAgICAgLy8gZGlzYmFsZSBtYXAgZHJhZ1xuICAgICAgICAgICAgaWYgKHRoaXMuX29yaWdpbmFsTWFwRHJhZ1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGF5ZXIuX21hcC5kcmFnZ2luZy5kaXNhYmxlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGhpZGUgbWFya2Vyc1xuICAgICAgICAgICAgdGhpcy5fbWFya2VyR3JvdXAuY2xlYXJMYXllcnMoKTtcblxuICAgICAgICAgICAgLy8gZmlyZSBwbTpkcmFnc3RhcnQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOmRyYWdzdGFydCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fb25MYXllckRyYWcoZSk7XG4gICAgfSxcbiAgICBfZHJhZ01peGluT25Nb3VzZURvd246IGZ1bmN0aW9uIF9kcmFnTWl4aW5Pbk1vdXNlRG93bihlKSB7XG4gICAgICAgIC8vIHNhdmUgY3VycmVudCBtYXAgZHJhZ2dpbmcgc3RhdGVcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxNYXBEcmFnU3RhdGUgPSB0aGlzLl9sYXllci5fbWFwLmRyYWdnaW5nLl9lbmFibGVkO1xuXG4gICAgICAgIC8vIHNhdmUgZm9yIGRlbHRhIGNhbGN1bGF0aW9uXG4gICAgICAgIHRoaXMuX3RlbXBEcmFnQ29vcmQgPSBlLmxhdGxuZztcblxuICAgICAgICB0aGlzLl9sYXllci5vbignbW91c2V1cCcsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VVcCwgdGhpcyk7XG5cbiAgICAgICAgLy8gbGlzdGVuIHRvIG1vdXNlbW92ZSBvbiBtYXAgKGluc3RlYWQgb2YgcG9seWdvbiksXG4gICAgICAgIC8vIG90aGVyd2lzZSBmYXN0IG1vdXNlIG1vdmVtZW50cyBzdG9wIHRoZSBkcmFnXG4gICAgICAgIHRoaXMuX2xheWVyLl9tYXAub24oJ21vdXNlbW92ZScsIHRoaXMuX2RyYWdNaXhpbk9uTW91c2VNb3ZlLCB0aGlzKTtcbiAgICB9LFxuICAgIGRyYWdnaW5nOiBmdW5jdGlvbiBkcmFnZ2luZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RyYWdnaW5nO1xuICAgIH0sXG4gICAgX29uTGF5ZXJEcmFnOiBmdW5jdGlvbiBfb25MYXllckRyYWcoZSkge1xuICAgICAgICAvLyBsYXRMbmcgb2YgbW91c2UgZXZlbnRcbiAgICAgICAgdmFyIGxhdGxuZyA9IGUubGF0bG5nO1xuXG4gICAgICAgIC8vIGRlbHRhIGNvb3JkcyAoaG93IGZhciB3YXMgZHJhZ2dlZClcbiAgICAgICAgdmFyIGRlbHRhTGF0TG5nID0ge1xuICAgICAgICAgICAgbGF0OiBsYXRsbmcubGF0IC0gdGhpcy5fdGVtcERyYWdDb29yZC5sYXQsXG4gICAgICAgICAgICBsbmc6IGxhdGxuZy5sbmcgLSB0aGlzLl90ZW1wRHJhZ0Nvb3JkLmxuZ1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IGNvb3JkaW5hdGVzIGFycmF5XG4gICAgICAgIHZhciBjb29yZHMgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHRoaXMuX2xheWVyIGluc3RhbmNlb2YgTC5Qb2x5Z29uKSB7XG4gICAgICAgICAgICBjb29yZHMgPSB0aGlzLl9sYXllci5fbGF0bG5nc1swXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvb3JkcyA9IHRoaXMuX2xheWVyLl9sYXRsbmdzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5ld0xhdExuZ3MgPSBjb29yZHMubWFwKGZ1bmN0aW9uIChjdXJyZW50TGF0TG5nKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IGN1cnJlbnRMYXRMbmcubGF0ICsgZGVsdGFMYXRMbmcubGF0LFxuICAgICAgICAgICAgICAgIGxuZzogY3VycmVudExhdExuZy5sbmcgKyBkZWx0YUxhdExuZy5sbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc2V0IG5ldyBjb29yZGluYXRlcyBhbmQgcmVkcmF3XG4gICAgICAgIHRoaXMuX2xheWVyLnNldExhdExuZ3MobmV3TGF0TG5ncykucmVkcmF3KCk7XG5cbiAgICAgICAgLy8gc2F2ZSBjdXJyZW50IGxhdGxuZyBmb3IgbmV4dCBkZWx0YSBjYWxjdWxhdGlvblxuICAgICAgICB0aGlzLl90ZW1wRHJhZ0Nvb3JkID0gbGF0bG5nO1xuXG4gICAgICAgIC8vIGZpcmUgcG06ZHJhZ3N0YXJ0IGV2ZW50XG4gICAgICAgIHRoaXMuX2xheWVyLmZpcmUoJ3BtOmRyYWcnKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEcmFnTWl4aW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvTWl4aW5zL0RyYWcuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar PMButton = L.Control.extend({\n    options: {\n        position: 'topleft'\n    },\n    // TODO: clean up variable names like _button should be _options and that domNodeVariable stuff\n    initialize: function initialize(options) {\n        this._button = L.Util.setOptions(this, options);\n    },\n    onAdd: function onAdd(map) {\n        this._map = map;\n\n        this._container = this._map.pm.Toolbar.container;\n        this.buttonsDomNode = this._makeButton(this._button);\n        this._container.appendChild(this.buttonsDomNode);\n\n        return this._container;\n    },\n    onRemove: function onRemove() {\n        this.buttonsDomNode.remove();\n\n        return this._container;\n    },\n    getText: function getText() {\n        return this._button.text;\n    },\n    getIconUrl: function getIconUrl() {\n        return this._button.iconUrl;\n    },\n    destroy: function destroy() {\n        this._button = {};\n        this._update();\n    },\n    toggle: function toggle(e) {\n        if (typeof e === 'boolean') {\n            this._button.toggleStatus = e;\n        } else {\n            this._button.toggleStatus = !this._button.toggleStatus;\n        }\n        this._applyStyleClasses();\n\n        return this._button.toggleStatus;\n    },\n    toggled: function toggled() {\n        return this._button.toggleStatus;\n    },\n    onCreate: function onCreate() {\n        this.toggle(false);\n    },\n    _triggerClick: function _triggerClick(e) {\n        this._button.onClick(e);\n        this._clicked(e);\n        this._button.afterClick(e);\n    },\n    _makeButton: function _makeButton(button) {\n        var _this = this;\n\n        var newButton = L.DomUtil.create('a', 'leaflet-buttons-control-button', this._container);\n        if (button.toggleStatus) {\n            L.DomUtil.addClass(newButton, 'active');\n        }\n\n        var image = L.DomUtil.create('div', 'control-icon', newButton);\n        if (button.iconUrl) {\n            image.setAttribute('src', button.iconUrl);\n        }\n        if (button.className) {\n            L.DomUtil.addClass(image, button.className);\n        }\n        // before the actual click, trigger a click on currently toggled buttons to\n        // untoggle them and their functionality\n        L.DomEvent.addListener(newButton, 'click', function () {\n            if (_this._button.disableOtherButtons) {\n                _this._map.pm.Toolbar.triggerClickOnToggledButtons(_this);\n            }\n        });\n        L.DomEvent.addListener(newButton, 'click', this._triggerClick, this);\n\n        L.DomEvent.disableClickPropagation(newButton);\n        return newButton;\n    },\n    _applyStyleClasses: function _applyStyleClasses() {\n        if (!this._container) {\n            return;\n        }\n\n        if (!this._button.toggleStatus) {\n            L.DomUtil.removeClass(this.buttonsDomNode, 'active');\n        } else {\n            L.DomUtil.addClass(this.buttonsDomNode, 'active');\n        }\n    },\n    _clicked: function _clicked() {\n        if (this._button.doToggle) {\n            this.toggle();\n        }\n        return;\n    }\n});\n\nexports.default = PMButton;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvVG9vbGJhci9MLkNvbnRyb2xzLmpzPzlhYTEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgUE1CdXR0b24gPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9LFxuICAgIC8vIFRPRE86IGNsZWFuIHVwIHZhcmlhYmxlIG5hbWVzIGxpa2UgX2J1dHRvbiBzaG91bGQgYmUgX29wdGlvbnMgYW5kIHRoYXQgZG9tTm9kZVZhcmlhYmxlIHN0dWZmXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG5cbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gdGhpcy5fbWFwLnBtLlRvb2xiYXIuY29udGFpbmVyO1xuICAgICAgICB0aGlzLmJ1dHRvbnNEb21Ob2RlID0gdGhpcy5fbWFrZUJ1dHRvbih0aGlzLl9idXR0b24pO1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5idXR0b25zRG9tTm9kZSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICB9LFxuICAgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5idXR0b25zRG9tTm9kZS5yZW1vdmUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICAgIH0sXG4gICAgZ2V0VGV4dDogZnVuY3Rpb24gZ2V0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbi50ZXh0O1xuICAgIH0sXG4gICAgZ2V0SWNvblVybDogZnVuY3Rpb24gZ2V0SWNvblVybCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbi5pY29uVXJsO1xuICAgIH0sXG4gICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0ge307XG4gICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiB0b2dnbGUoZSkge1xuICAgICAgICBpZiAodHlwZW9mIGUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cyA9IGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzID0gIXRoaXMuX2J1dHRvbi50b2dnbGVTdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXBwbHlTdHlsZUNsYXNzZXMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uLnRvZ2dsZVN0YXR1cztcbiAgICB9LFxuICAgIHRvZ2dsZWQ6IGZ1bmN0aW9uIHRvZ2dsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzO1xuICAgIH0sXG4gICAgb25DcmVhdGU6IGZ1bmN0aW9uIG9uQ3JlYXRlKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZShmYWxzZSk7XG4gICAgfSxcbiAgICBfdHJpZ2dlckNsaWNrOiBmdW5jdGlvbiBfdHJpZ2dlckNsaWNrKGUpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uLm9uQ2xpY2soZSk7XG4gICAgICAgIHRoaXMuX2NsaWNrZWQoZSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbi5hZnRlckNsaWNrKGUpO1xuICAgIH0sXG4gICAgX21ha2VCdXR0b246IGZ1bmN0aW9uIF9tYWtlQnV0dG9uKGJ1dHRvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBuZXdCdXR0b24gPSBMLkRvbVV0aWwuY3JlYXRlKCdhJywgJ2xlYWZsZXQtYnV0dG9ucy1jb250cm9sLWJ1dHRvbicsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIGlmIChidXR0b24udG9nZ2xlU3RhdHVzKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3MobmV3QnV0dG9uLCAnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW1hZ2UgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnY29udHJvbC1pY29uJywgbmV3QnV0dG9uKTtcbiAgICAgICAgaWYgKGJ1dHRvbi5pY29uVXJsKSB7XG4gICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGJ1dHRvbi5pY29uVXJsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGltYWdlLCBidXR0b24uY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBiZWZvcmUgdGhlIGFjdHVhbCBjbGljaywgdHJpZ2dlciBhIGNsaWNrIG9uIGN1cnJlbnRseSB0b2dnbGVkIGJ1dHRvbnMgdG9cbiAgICAgICAgLy8gdW50b2dnbGUgdGhlbSBhbmQgdGhlaXIgZnVuY3Rpb25hbGl0eVxuICAgICAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKG5ld0J1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLl9idXR0b24uZGlzYWJsZU90aGVyQnV0dG9ucykge1xuICAgICAgICAgICAgICAgIF90aGlzLl9tYXAucG0uVG9vbGJhci50cmlnZ2VyQ2xpY2tPblRvZ2dsZWRCdXR0b25zKF90aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIobmV3QnV0dG9uLCAnY2xpY2snLCB0aGlzLl90cmlnZ2VyQ2xpY2ssIHRoaXMpO1xuXG4gICAgICAgIEwuRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24obmV3QnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIG5ld0J1dHRvbjtcbiAgICB9LFxuICAgIF9hcHBseVN0eWxlQ2xhc3NlczogZnVuY3Rpb24gX2FwcGx5U3R5bGVDbGFzc2VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9idXR0b24udG9nZ2xlU3RhdHVzKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5idXR0b25zRG9tTm9kZSwgJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuYnV0dG9uc0RvbU5vZGUsICdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2NsaWNrZWQ6IGZ1bmN0aW9uIF9jbGlja2VkKCkge1xuICAgICAgICBpZiAodGhpcy5fYnV0dG9uLmRvVG9nZ2xlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUE1CdXR0b247XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvVG9vbGJhci9MLkNvbnRyb2xzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _L = __webpack_require__(15);\n\nvar _L2 = _interopRequireDefault(_L);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nL.Control.PMButton = _L2.default; /**\n                                  * The Icons used in this Toolbar are CC-BY Glyphicons - http://glyphicons.com/\n                                  */\n\nvar Toolbar = L.Class.extend({\n    options: {\n        drawMarker: true,\n        drawPolygon: true,\n        drawPolyline: true,\n        drawCircle: true,\n        editPolygon: true,\n        dragPolygon: false,\n        deleteLayer: true,\n        position: 'topleft'\n    },\n    initialize: function initialize(map) {\n        this.map = map;\n\n        this.buttons = {};\n        this.isVisible = false;\n        this.container = L.DomUtil.create('div', 'leaflet-pm-toolbar leaflet-bar leaflet-control');\n        this._defineButtons();\n    },\n    getButtons: function getButtons() {\n        return this.buttons;\n    },\n    addControls: function addControls() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options;\n\n        // adds all buttons to the map specified inside options\n\n        // first set the options\n        L.Util.setOptions(this, options);\n\n        // now show the specified buttons\n        this._showHideButtons();\n        this.isVisible = true;\n    },\n    removeControls: function removeControls() {\n        // grab all buttons to loop through\n        var buttons = this.getButtons();\n\n        // remove all buttons\n        for (var btn in buttons) {\n            buttons[btn].remove();\n        }\n\n        this.isVisible = false;\n    },\n    toggleControls: function toggleControls() {\n        if (this.isVisible) {\n            this.removeControls();\n        } else {\n            this.addControls();\n        }\n    },\n    _addButton: function _addButton(name, button) {\n        this.buttons[name] = button;\n        this.options[name] = this.options[name] || false;\n\n        return this.buttons[name];\n    },\n    triggerClickOnToggledButtons: function triggerClickOnToggledButtons(exceptThisButton) {\n        // this function is used when - e.g. drawing mode is enabled and a possible\n        // other active mode (like removal tool) is already active.\n        // we can't have two active modes because of possible event conflicts\n        // so, we trigger a click on all currently active (toggled) buttons\n\n        for (var name in this.buttons) {\n            if (this.buttons[name] !== exceptThisButton && this.buttons[name].toggled()) {\n                this.buttons[name]._triggerClick();\n            }\n        }\n    },\n    toggleButton: function toggleButton(name, status) {\n        // does not fire the events/functionality of the button\n        // this just changes the state and is used if a functionality (like Draw)\n        // is enabled manually via script\n\n        // as some mode got enabled, we still have to trigger the click on the other buttons\n        // to disable their mode\n        this.triggerClickOnToggledButtons(this.buttons[name]);\n\n        // now toggle the state of the button\n        return this.buttons[name].toggle(status);\n    },\n    _defineButtons: function _defineButtons() {\n        var _this = this;\n\n        // some buttons are still in their respective classes, like L.PM.Draw.Poly\n        var deleteButton = {\n            className: ' leaflet-pm-icon-delete',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                _this.map.pm.toggleGlobalRemovalMode();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawPolyButton = {\n            className: 'leaflet-pm-icon-polygon',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Poly.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawMarkerButton = {\n            className: 'leaflet-pm-icon-marker',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Marker.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawLineButton = {\n            className: 'leaflet-pm-icon-polyline',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Line.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var drawCircleButton = {\n            className: 'leaflet-pm-icon-circle',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                // toggle drawing mode\n                _this.map.pm.Draw.Circle.toggle();\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var editButton = {\n            className: 'leaflet-pm-icon-edit',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {\n                _this.map.pm.toggleGlobalEditMode({\n                    snappable: true,\n                    draggable: true\n                });\n            },\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        var dragButton = {\n            className: 'leaflet-pm-icon-drag',\n            onClick: function onClick() {},\n            afterClick: function afterClick() {},\n            doToggle: true,\n            toggleStatus: false,\n            disableOtherButtons: true,\n            position: this.options.position\n        };\n\n        this._addButton('drawMarker', new L.Control.PMButton(drawMarkerButton));\n        this._addButton('drawPolygon', new L.Control.PMButton(drawPolyButton));\n        this._addButton('drawPolyline', new L.Control.PMButton(drawLineButton));\n        this._addButton('drawCircle', new L.Control.PMButton(drawCircleButton));\n        // TODO: rename editPolygon to editMode\n        this._addButton('editPolygon', new L.Control.PMButton(editButton));\n        this._addButton('dragPolygon', new L.Control.PMButton(dragButton));\n        // TODO: rename deleteLayer to removalMode\n        this._addButton('deleteLayer', new L.Control.PMButton(deleteButton));\n    },\n    _showHideButtons: function _showHideButtons() {\n        // remove all buttons, that's because the Toolbar can be added again with\n        // different options so it's basically a reset and add again\n        this.removeControls();\n\n        var buttons = this.getButtons();\n        for (var btn in buttons) {\n            if (this.options[btn]) {\n                // if options say the button should be visible, add it to the map\n                buttons[btn].setPosition(this.options.position);\n                buttons[btn].addTo(this.map);\n            }\n        }\n    }\n});\n\nexports.default = Toolbar;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvVG9vbGJhci9MLlBNLlRvb2xiYXIuanM/Y2RjOCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9MID0gcmVxdWlyZSgnLi9MLkNvbnRyb2xzJyk7XG5cbnZhciBfTDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuTC5Db250cm9sLlBNQnV0dG9uID0gX0wyLmRlZmF1bHQ7IC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhlIEljb25zIHVzZWQgaW4gdGhpcyBUb29sYmFyIGFyZSBDQy1CWSBHbHlwaGljb25zIC0gaHR0cDovL2dseXBoaWNvbnMuY29tL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbnZhciBUb29sYmFyID0gTC5DbGFzcy5leHRlbmQoe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgZHJhd01hcmtlcjogdHJ1ZSxcbiAgICAgICAgZHJhd1BvbHlnb246IHRydWUsXG4gICAgICAgIGRyYXdQb2x5bGluZTogdHJ1ZSxcbiAgICAgICAgZHJhd0NpcmNsZTogdHJ1ZSxcbiAgICAgICAgZWRpdFBvbHlnb246IHRydWUsXG4gICAgICAgIGRyYWdQb2x5Z29uOiBmYWxzZSxcbiAgICAgICAgZGVsZXRlTGF5ZXI6IHRydWUsXG4gICAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCdcbiAgICB9LFxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobWFwKSB7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IHt9O1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsICdsZWFmbGV0LXBtLXRvb2xiYXIgbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sJyk7XG4gICAgICAgIHRoaXMuX2RlZmluZUJ1dHRvbnMoKTtcbiAgICB9LFxuICAgIGdldEJ1dHRvbnM6IGZ1bmN0aW9uIGdldEJ1dHRvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnM7XG4gICAgfSxcbiAgICBhZGRDb250cm9sczogZnVuY3Rpb24gYWRkQ29udHJvbHMoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgLy8gYWRkcyBhbGwgYnV0dG9ucyB0byB0aGUgbWFwIHNwZWNpZmllZCBpbnNpZGUgb3B0aW9uc1xuXG4gICAgICAgIC8vIGZpcnN0IHNldCB0aGUgb3B0aW9uc1xuICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBub3cgc2hvdyB0aGUgc3BlY2lmaWVkIGJ1dHRvbnNcbiAgICAgICAgdGhpcy5fc2hvd0hpZGVCdXR0b25zKCk7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICB9LFxuICAgIHJlbW92ZUNvbnRyb2xzOiBmdW5jdGlvbiByZW1vdmVDb250cm9scygpIHtcbiAgICAgICAgLy8gZ3JhYiBhbGwgYnV0dG9ucyB0byBsb29wIHRocm91Z2hcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSB0aGlzLmdldEJ1dHRvbnMoKTtcblxuICAgICAgICAvLyByZW1vdmUgYWxsIGJ1dHRvbnNcbiAgICAgICAgZm9yICh2YXIgYnRuIGluIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgIGJ1dHRvbnNbYnRuXS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfSxcbiAgICB0b2dnbGVDb250cm9sczogZnVuY3Rpb24gdG9nZ2xlQ29udHJvbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDb250cm9scygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hZGRDb250cm9scygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBfYWRkQnV0dG9uOiBmdW5jdGlvbiBfYWRkQnV0dG9uKG5hbWUsIGJ1dHRvbikge1xuICAgICAgICB0aGlzLmJ1dHRvbnNbbmFtZV0gPSBidXR0b247XG4gICAgICAgIHRoaXMub3B0aW9uc1tuYW1lXSA9IHRoaXMub3B0aW9uc1tuYW1lXSB8fCBmYWxzZTtcblxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b25zW25hbWVdO1xuICAgIH0sXG4gICAgdHJpZ2dlckNsaWNrT25Ub2dnbGVkQnV0dG9uczogZnVuY3Rpb24gdHJpZ2dlckNsaWNrT25Ub2dnbGVkQnV0dG9ucyhleGNlcHRUaGlzQnV0dG9uKSB7XG4gICAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIC0gZS5nLiBkcmF3aW5nIG1vZGUgaXMgZW5hYmxlZCBhbmQgYSBwb3NzaWJsZVxuICAgICAgICAvLyBvdGhlciBhY3RpdmUgbW9kZSAobGlrZSByZW1vdmFsIHRvb2wpIGlzIGFscmVhZHkgYWN0aXZlLlxuICAgICAgICAvLyB3ZSBjYW4ndCBoYXZlIHR3byBhY3RpdmUgbW9kZXMgYmVjYXVzZSBvZiBwb3NzaWJsZSBldmVudCBjb25mbGljdHNcbiAgICAgICAgLy8gc28sIHdlIHRyaWdnZXIgYSBjbGljayBvbiBhbGwgY3VycmVudGx5IGFjdGl2ZSAodG9nZ2xlZCkgYnV0dG9uc1xuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5idXR0b25zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5idXR0b25zW25hbWVdICE9PSBleGNlcHRUaGlzQnV0dG9uICYmIHRoaXMuYnV0dG9uc1tuYW1lXS50b2dnbGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbnNbbmFtZV0uX3RyaWdnZXJDbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICB0b2dnbGVCdXR0b246IGZ1bmN0aW9uIHRvZ2dsZUJ1dHRvbihuYW1lLCBzdGF0dXMpIHtcbiAgICAgICAgLy8gZG9lcyBub3QgZmlyZSB0aGUgZXZlbnRzL2Z1bmN0aW9uYWxpdHkgb2YgdGhlIGJ1dHRvblxuICAgICAgICAvLyB0aGlzIGp1c3QgY2hhbmdlcyB0aGUgc3RhdGUgYW5kIGlzIHVzZWQgaWYgYSBmdW5jdGlvbmFsaXR5IChsaWtlIERyYXcpXG4gICAgICAgIC8vIGlzIGVuYWJsZWQgbWFudWFsbHkgdmlhIHNjcmlwdFxuXG4gICAgICAgIC8vIGFzIHNvbWUgbW9kZSBnb3QgZW5hYmxlZCwgd2Ugc3RpbGwgaGF2ZSB0byB0cmlnZ2VyIHRoZSBjbGljayBvbiB0aGUgb3RoZXIgYnV0dG9uc1xuICAgICAgICAvLyB0byBkaXNhYmxlIHRoZWlyIG1vZGVcbiAgICAgICAgdGhpcy50cmlnZ2VyQ2xpY2tPblRvZ2dsZWRCdXR0b25zKHRoaXMuYnV0dG9uc1tuYW1lXSk7XG5cbiAgICAgICAgLy8gbm93IHRvZ2dsZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvblxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b25zW25hbWVdLnRvZ2dsZShzdGF0dXMpO1xuICAgIH0sXG4gICAgX2RlZmluZUJ1dHRvbnM6IGZ1bmN0aW9uIF9kZWZpbmVCdXR0b25zKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIC8vIHNvbWUgYnV0dG9ucyBhcmUgc3RpbGwgaW4gdGhlaXIgcmVzcGVjdGl2ZSBjbGFzc2VzLCBsaWtlIEwuUE0uRHJhdy5Qb2x5XG4gICAgICAgIHZhciBkZWxldGVCdXR0b24gPSB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICcgbGVhZmxldC1wbS1pY29uLWRlbGV0ZScsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm1hcC5wbS50b2dnbGVHbG9iYWxSZW1vdmFsTW9kZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRvVG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgdG9nZ2xlU3RhdHVzOiBmYWxzZSxcbiAgICAgICAgICAgIGRpc2FibGVPdGhlckJ1dHRvbnM6IHRydWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5vcHRpb25zLnBvc2l0aW9uXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGRyYXdQb2x5QnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLXBvbHlnb24nLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGUgZHJhd2luZyBtb2RlXG4gICAgICAgICAgICAgICAgX3RoaXMubWFwLnBtLkRyYXcuUG9seS50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkcmF3TWFya2VyQnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLW1hcmtlcicsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZSBkcmF3aW5nIG1vZGVcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5NYXJrZXIudG9nZ2xlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZHJhd0xpbmVCdXR0b24gPSB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LXBtLWljb24tcG9seWxpbmUnLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHtcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGUgZHJhd2luZyBtb2RlXG4gICAgICAgICAgICAgICAgX3RoaXMubWFwLnBtLkRyYXcuTGluZS50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkcmF3Q2lyY2xlQnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLWNpcmNsZScsXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge30sXG4gICAgICAgICAgICBhZnRlckNsaWNrOiBmdW5jdGlvbiBhZnRlckNsaWNrKCkge1xuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZSBkcmF3aW5nIG1vZGVcbiAgICAgICAgICAgICAgICBfdGhpcy5tYXAucG0uRHJhdy5DaXJjbGUudG9nZ2xlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZWRpdEJ1dHRvbiA9IHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2xlYWZsZXQtcG0taWNvbi1lZGl0JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7fSxcbiAgICAgICAgICAgIGFmdGVyQ2xpY2s6IGZ1bmN0aW9uIGFmdGVyQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubWFwLnBtLnRvZ2dsZUdsb2JhbEVkaXRNb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgc25hcHBhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb1RvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIHRvZ2dsZVN0YXR1czogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlT3RoZXJCdXR0b25zOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMub3B0aW9ucy5wb3NpdGlvblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkcmFnQnV0dG9uID0ge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1wbS1pY29uLWRyYWcnLFxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHt9LFxuICAgICAgICAgICAgYWZ0ZXJDbGljazogZnVuY3Rpb24gYWZ0ZXJDbGljaygpIHt9LFxuICAgICAgICAgICAgZG9Ub2dnbGU6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVTdGF0dXM6IGZhbHNlLFxuICAgICAgICAgICAgZGlzYWJsZU90aGVyQnV0dG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hZGRCdXR0b24oJ2RyYXdNYXJrZXInLCBuZXcgTC5Db250cm9sLlBNQnV0dG9uKGRyYXdNYXJrZXJCdXR0b24pKTtcbiAgICAgICAgdGhpcy5fYWRkQnV0dG9uKCdkcmF3UG9seWdvbicsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZHJhd1BvbHlCdXR0b24pKTtcbiAgICAgICAgdGhpcy5fYWRkQnV0dG9uKCdkcmF3UG9seWxpbmUnLCBuZXcgTC5Db250cm9sLlBNQnV0dG9uKGRyYXdMaW5lQnV0dG9uKSk7XG4gICAgICAgIHRoaXMuX2FkZEJ1dHRvbignZHJhd0NpcmNsZScsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZHJhd0NpcmNsZUJ1dHRvbikpO1xuICAgICAgICAvLyBUT0RPOiByZW5hbWUgZWRpdFBvbHlnb24gdG8gZWRpdE1vZGVcbiAgICAgICAgdGhpcy5fYWRkQnV0dG9uKCdlZGl0UG9seWdvbicsIG5ldyBMLkNvbnRyb2wuUE1CdXR0b24oZWRpdEJ1dHRvbikpO1xuICAgICAgICB0aGlzLl9hZGRCdXR0b24oJ2RyYWdQb2x5Z29uJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkcmFnQnV0dG9uKSk7XG4gICAgICAgIC8vIFRPRE86IHJlbmFtZSBkZWxldGVMYXllciB0byByZW1vdmFsTW9kZVxuICAgICAgICB0aGlzLl9hZGRCdXR0b24oJ2RlbGV0ZUxheWVyJywgbmV3IEwuQ29udHJvbC5QTUJ1dHRvbihkZWxldGVCdXR0b24pKTtcbiAgICB9LFxuICAgIF9zaG93SGlkZUJ1dHRvbnM6IGZ1bmN0aW9uIF9zaG93SGlkZUJ1dHRvbnMoKSB7XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgYnV0dG9ucywgdGhhdCdzIGJlY2F1c2UgdGhlIFRvb2xiYXIgY2FuIGJlIGFkZGVkIGFnYWluIHdpdGhcbiAgICAgICAgLy8gZGlmZmVyZW50IG9wdGlvbnMgc28gaXQncyBiYXNpY2FsbHkgYSByZXNldCBhbmQgYWRkIGFnYWluXG4gICAgICAgIHRoaXMucmVtb3ZlQ29udHJvbHMoKTtcblxuICAgICAgICB2YXIgYnV0dG9ucyA9IHRoaXMuZ2V0QnV0dG9ucygpO1xuICAgICAgICBmb3IgKHZhciBidG4gaW4gYnV0dG9ucykge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uc1tidG5dKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgb3B0aW9ucyBzYXkgdGhlIGJ1dHRvbiBzaG91bGQgYmUgdmlzaWJsZSwgYWRkIGl0IHRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICBidXR0b25zW2J0bl0uc2V0UG9zaXRpb24odGhpcy5vcHRpb25zLnBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBidXR0b25zW2J0bl0uYWRkVG8odGhpcy5tYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRvb2xiYXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvVG9vbGJhci9MLlBNLlRvb2xiYXIuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/* eslint-disable */\n\n// Array.find Polyfill for IE<12.\n// Requested here: https://github.com/codeofsumit/leaflet.pm/issues/173\nArray.prototype.find = Array.prototype.find || function (callback) {\n  if (this === null) {\n    throw new TypeError('Array.prototype.find called on null or undefined');\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('callback must be a function');\n  }\n  var list = Object(this);\n  // Makes sures is always has an positive integer as length.\n  var length = list.length >>> 0;\n  var thisArg = arguments[1];\n  for (var i = 0; i < length; i++) {\n    var element = list[i];\n    if (callback.call(thisArg, element, i, list)) {\n      return element;\n    }\n  }\n};\n\n// Polyfill for Object.assign()\n// https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\nif (typeof Object.assign != 'function') {\n  Object.assign = function (target) {\n    'use strict';\n\n    if (target == null) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    target = Object(target);\n    for (var index = 1; index < arguments.length; index++) {\n      var source = arguments[index];\n      if (source != null) {\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n}\n\n// Polyfill for Element.remove()\n// https://developer.mozilla.org/de/docs/Web/API/ChildNode/remove#Polyfill\n(function (arr) {\n  arr.forEach(function (item) {\n    if (item.hasOwnProperty('remove')) {\n      return;\n    }\n    Object.defineProperty(item, 'remove', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function remove() {\n        this.parentNode.removeChild(this);\n      }\n    });\n  });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcG9seWZpbGxzLmpzPzlmNTAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vLyBBcnJheS5maW5kIFBvbHlmaWxsIGZvciBJRTwxMi5cbi8vIFJlcXVlc3RlZCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vY29kZW9mc3VtaXQvbGVhZmxldC5wbS9pc3N1ZXMvMTczXG5BcnJheS5wcm90b3R5cGUuZmluZCA9IEFycmF5LnByb3RvdHlwZS5maW5kIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBpZiAodGhpcyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5LnByb3RvdHlwZS5maW5kIGNhbGxlZCBvbiBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG4gIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpO1xuICAvLyBNYWtlcyBzdXJlcyBpcyBhbHdheXMgaGFzIGFuIHBvc2l0aXZlIGludGVnZXIgYXMgbGVuZ3RoLlxuICB2YXIgbGVuZ3RoID0gbGlzdC5sZW5ndGggPj4+IDA7XG4gIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBsaXN0W2ldO1xuICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGVsZW1lbnQsIGksIGxpc3QpKSB7XG4gICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gIH1cbn07XG5cbi8vIFBvbHlmaWxsIGZvciBPYmplY3QuYXNzaWduKClcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RlL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24jUG9seWZpbGxcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPSAnZnVuY3Rpb24nKSB7XG4gIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICB9XG5cbiAgICB0YXJnZXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xufVxuXG4vLyBQb2x5ZmlsbCBmb3IgRWxlbWVudC5yZW1vdmUoKVxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZGUvZG9jcy9XZWIvQVBJL0NoaWxkTm9kZS9yZW1vdmUjUG9seWZpbGxcbihmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKFtFbGVtZW50LnByb3RvdHlwZSwgQ2hhcmFjdGVyRGF0YS5wcm90b3R5cGUsIERvY3VtZW50VHlwZS5wcm90b3R5cGVdKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9wb2x5ZmlsbHMuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 18 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2NvbnRyb2xzLmNzcz8xMGE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY3NzL2NvbnRyb2xzLmNzc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 19 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3NzL2xheWVycy5jc3M/NTM3NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2Nzcy9sYXllcnMuY3NzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 20 */
/***/ (function(module, exports) {

eval("module.exports = {\n\t\"name\": \"leaflet.pm\",\n\t\"version\": \"0.17.3\",\n\t\"description\": \"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0\",\n\t\"keywords\": [\n\t\t\"leaflet\",\n\t\t\"polygon management\",\n\t\t\"geometry editing\",\n\t\t\"map data\",\n\t\t\"map overlay\",\n\t\t\"polygon\",\n\t\t\"geojson\",\n\t\t\"leaflet-draw\",\n\t\t\"data-field-geojson\",\n\t\t\"ui-leaflet-draw\"\n\t],\n\t\"files\": [\n\t\t\"dist\"\n\t],\n\t\"main\": \"dist/leaflet.pm.min.js\",\n\t\"dependencies\": {},\n\t\"devDependencies\": {\n\t\t\"babel-core\": \"^6.24.1\",\n\t\t\"babel-loader\": \"^7.0.0\",\n\t\t\"babel-preset-env\": \"^1.4.0\",\n\t\t\"css-loader\": \"^0.28.0\",\n\t\t\"eslint\": \"^3.5.0\",\n\t\t\"eslint-config-airbnb-base\": \"^7.1.0\",\n\t\t\"eslint-plugin-import\": \"^1.15.0\",\n\t\t\"extract-text-webpack-plugin\": \"^2.1.0\",\n\t\t\"file-loader\": \"^0.11.1\",\n\t\t\"style-loader\": \"^0.16.1\",\n\t\t\"tape\": \"^4.6.2\",\n\t\t\"tape-run\": \"^2.1.4\",\n\t\t\"url-loader\": \"^0.5.8\",\n\t\t\"webpack\": \"^2.4.1\"\n\t},\n\t\"peerDependencies\": {\n\t\t\"leaflet\": \"^1.0.2\"\n\t},\n\t\"scripts\": {\n\t\t\"start\": \"npm run dev\",\n\t\t\"dev\": \"./node_modules/.bin/webpack --config=webpack.dev.js\",\n\t\t\"test\": \"browserify ./spec/test.spec.js | tape-run\",\n\t\t\"build\": \"./node_modules/.bin/webpack --config=webpack.build.js\",\n\t\t\"prepublish\": \"npm run build\"\n\t},\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"git+https://github.com/codeofsumit/leaflet.pm.git\"\n\t},\n\t\"author\": {\n\t\t\"name\": \"Sumit Kumar\",\n\t\t\"email\": \"sk@outlook.com\",\n\t\t\"url\": \"http://twitter.com/TweetsOfSumit\"\n\t},\n\t\"license\": \"MIT\",\n\t\"bugs\": {\n\t\t\"url\": \"https://github.com/codeofsumit/leaflet.pm/issues\"\n\t},\n\t\"homepage\": \"https://codeofsumit.github.io/leaflet.pm/\"\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWNrYWdlLmpzb24/ZWQ4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHtcblx0XCJuYW1lXCI6IFwibGVhZmxldC5wbVwiLFxuXHRcInZlcnNpb25cIjogXCIwLjE3LjNcIixcblx0XCJkZXNjcmlwdGlvblwiOiBcIkEgTGVhZmxldCBQbHVnaW4gRm9yIEVkaXRpbmcgR2VvbWV0cnkgTGF5ZXJzIGluIExlYWZsZXQgMS4wXCIsXG5cdFwia2V5d29yZHNcIjogW1xuXHRcdFwibGVhZmxldFwiLFxuXHRcdFwicG9seWdvbiBtYW5hZ2VtZW50XCIsXG5cdFx0XCJnZW9tZXRyeSBlZGl0aW5nXCIsXG5cdFx0XCJtYXAgZGF0YVwiLFxuXHRcdFwibWFwIG92ZXJsYXlcIixcblx0XHRcInBvbHlnb25cIixcblx0XHRcImdlb2pzb25cIixcblx0XHRcImxlYWZsZXQtZHJhd1wiLFxuXHRcdFwiZGF0YS1maWVsZC1nZW9qc29uXCIsXG5cdFx0XCJ1aS1sZWFmbGV0LWRyYXdcIlxuXHRdLFxuXHRcImZpbGVzXCI6IFtcblx0XHRcImRpc3RcIlxuXHRdLFxuXHRcIm1haW5cIjogXCJkaXN0L2xlYWZsZXQucG0ubWluLmpzXCIsXG5cdFwiZGVwZW5kZW5jaWVzXCI6IHt9LFxuXHRcImRldkRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XCJiYWJlbC1jb3JlXCI6IFwiXjYuMjQuMVwiLFxuXHRcdFwiYmFiZWwtbG9hZGVyXCI6IFwiXjcuMC4wXCIsXG5cdFx0XCJiYWJlbC1wcmVzZXQtZW52XCI6IFwiXjEuNC4wXCIsXG5cdFx0XCJjc3MtbG9hZGVyXCI6IFwiXjAuMjguMFwiLFxuXHRcdFwiZXNsaW50XCI6IFwiXjMuNS4wXCIsXG5cdFx0XCJlc2xpbnQtY29uZmlnLWFpcmJuYi1iYXNlXCI6IFwiXjcuMS4wXCIsXG5cdFx0XCJlc2xpbnQtcGx1Z2luLWltcG9ydFwiOiBcIl4xLjE1LjBcIixcblx0XHRcImV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblwiOiBcIl4yLjEuMFwiLFxuXHRcdFwiZmlsZS1sb2FkZXJcIjogXCJeMC4xMS4xXCIsXG5cdFx0XCJzdHlsZS1sb2FkZXJcIjogXCJeMC4xNi4xXCIsXG5cdFx0XCJ0YXBlXCI6IFwiXjQuNi4yXCIsXG5cdFx0XCJ0YXBlLXJ1blwiOiBcIl4yLjEuNFwiLFxuXHRcdFwidXJsLWxvYWRlclwiOiBcIl4wLjUuOFwiLFxuXHRcdFwid2VicGFja1wiOiBcIl4yLjQuMVwiXG5cdH0sXG5cdFwicGVlckRlcGVuZGVuY2llc1wiOiB7XG5cdFx0XCJsZWFmbGV0XCI6IFwiXjEuMC4yXCJcblx0fSxcblx0XCJzY3JpcHRzXCI6IHtcblx0XHRcInN0YXJ0XCI6IFwibnBtIHJ1biBkZXZcIixcblx0XHRcImRldlwiOiBcIi4vbm9kZV9tb2R1bGVzLy5iaW4vd2VicGFjayAtLWNvbmZpZz13ZWJwYWNrLmRldi5qc1wiLFxuXHRcdFwidGVzdFwiOiBcImJyb3dzZXJpZnkgLi9zcGVjL3Rlc3Quc3BlYy5qcyB8IHRhcGUtcnVuXCIsXG5cdFx0XCJidWlsZFwiOiBcIi4vbm9kZV9tb2R1bGVzLy5iaW4vd2VicGFjayAtLWNvbmZpZz13ZWJwYWNrLmJ1aWxkLmpzXCIsXG5cdFx0XCJwcmVwdWJsaXNoXCI6IFwibnBtIHJ1biBidWlsZFwiXG5cdH0sXG5cdFwicmVwb3NpdG9yeVwiOiB7XG5cdFx0XCJ0eXBlXCI6IFwiZ2l0XCIsXG5cdFx0XCJ1cmxcIjogXCJnaXQraHR0cHM6Ly9naXRodWIuY29tL2NvZGVvZnN1bWl0L2xlYWZsZXQucG0uZ2l0XCJcblx0fSxcblx0XCJhdXRob3JcIjoge1xuXHRcdFwibmFtZVwiOiBcIlN1bWl0IEt1bWFyXCIsXG5cdFx0XCJlbWFpbFwiOiBcInNrQG91dGxvb2suY29tXCIsXG5cdFx0XCJ1cmxcIjogXCJodHRwOi8vdHdpdHRlci5jb20vVHdlZXRzT2ZTdW1pdFwiXG5cdH0sXG5cdFwibGljZW5zZVwiOiBcIk1JVFwiLFxuXHRcImJ1Z3NcIjoge1xuXHRcdFwidXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL2NvZGVvZnN1bWl0L2xlYWZsZXQucG0vaXNzdWVzXCJcblx0fSxcblx0XCJob21lcGFnZVwiOiBcImh0dHBzOi8vY29kZW9mc3VtaXQuZ2l0aHViLmlvL2xlYWZsZXQucG0vXCJcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wYWNrYWdlLmpzb25cbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(3);


/***/ })
/******/ ]);} },
            { loader: "script", url: "smk/viewer-leaflet/tool/markup/tool-markup-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/markup/tool-markup-leaflet.js]" ); include.module("tool-markup-leaflet",["leaflet","tool-markup"],function(){"use strict";SMK.TYPE.MarkupTool.addInitializer(function(e){"mobile"!=e.$device&&e.$viewer.map.pm.addControls({position:"topright",drawMarker:!0,drawPolygon:!0,drawPolyline:!0,drawCircle:!0,editPolygon:!0,deleteLayer:!0})})});} }
        ] }
    );
    include.tag( "tool-measure",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/measure/panel-measure.html", load:"<tool-panel class=\"smk-measure-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-area\"\n            v-bind:disabled=\"busy\"\n            v-on:click=\"$$emit( 'start-area' )\"\n        >Area</command-button>\n\n        <command-button class=\"smk-distance\"\n            v-bind:disabled=\"busy\"\n            v-on:click=\"$$emit( 'start-distance' )\"\n        >Distance</command-button>\n\n        <command-button class=\"smk-cancel\"\n            v-if=\"viewer.leaflet\"\n            v-bind:disabled=\"!busy\"\n            v-on:click=\"$$emit( 'cancel' )\"\n        >Cancel</command-button>\n\n        <select-dropdown class=\"smk-units\"\n            v-if=\"viewer.leaflet\"\n            v-bind:disabled=\"busy\"\n            v-model=\"unit\"\n            v-bind:options=\"[\n                { value: 'metric',          label: 'Metric' },\n                { value: 'imperial',        label: 'Imperial' },\n                { value: 'inches',          label: 'Inches' },\n                { value: 'feet',            label: 'Feet' },\n                { value: 'yards',           label: 'Yards' },\n                { value: 'miles',           label: 'Miles' },\n                { value: 'nautical-miles',  label: 'Nautical Miles' },\n                { value: 'meters',          label: 'Meters' },\n                { value: 'kilometers',      label: 'Kilometers' },\n                { value: 'acres',           label: 'Acres' },\n                { value: 'hectares',        label: 'Hectares' },\n            ]\"\n        >\n        </select-dropdown>\n    </template>\n\n    <div class=\"smk-measure-container\"\n        v-if=\"content\"\n        v-content=\"content\"\n    ></div>\n\n    <div class=\"smk-results\"\n        v-if=\"results && results.length > 0\"\n    >\n        <div class=\"smk-result\"\n            v-for=\"result in results\"\n        >\n            <span class=\"smk-measure-title\" v-html=\"result.title\"></span>\n            <span class=\"smk-value\" v-html=\"dimensionalNumber( result.value, result.dim, unit, 5 )\"></span>\n        </div>\n    </div>\n\n</tool-panel>" },
            { loader: "style", url: "smk/tool/measure/tool-measure.css", load: "/* [smk/tool/measure/tool-measure.css] */\n.smk-measure-panel .smk-result{display:flex;justify-content:space-between;align-items:center;margin-top:0;margin-left:10px;margin-right:10px;margin-bottom:5px}.smk-measure-panel .smk-result .smk-value{flex-grow:1;text-align:right}" },
            { loader: "script", url: "smk/tool/measure/tool-measure.js", load: function () { console.debug( "[smk/tool/measure/tool-measure.js]" ); include.module("tool-measure",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-measure.panel-measure-html","component-command-button","component-select-dropdown"],function(e){"use strict";return Vue.component("measure-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("measure-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-measure.panel-measure-html"],props:["results","viewer","content"],data:function(){return{unit:"metric"}},computed:{dimensionalNumber:{get:function(){return Vue.filter("dimensionalNumber")}}}}),SMK.TYPE.Tool.define("MeasureTool",function(){SMK.TYPE.ToolWidget.call(this,"measure-widget"),SMK.TYPE.ToolPanel.call(this,"measure-panel"),this.defineProp("results"),this.defineProp("viewer"),this.defineProp("content"),this.results=[],this.viewer={},this.$propFilter.dimensionalNumber=!1})});} }
        ] }
    );
    include.tag( "tool-measure-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/measure/config/tool-measure-config.js", load: function () { console.debug( "[smk/tool/measure/config/tool-measure-config.js]" ); include.module("tool-measure-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"measure",order:6,position:["shortcut-menu","list-menu"],icon:"straighten",title:"Measurement"}))))});} }
        ] }
    );
    include.tag( "tool-measure-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/measure/tool-measure-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/measure/tool-measure-esri3d.js]" ); include.module("tool-measure-esri3d",["tool-measure","esri3d","types-esri3d","util-esri3d"],function(){"use strict";var r=SMK.TYPE.Esri3d;SMK.TYPE.MeasureTool.prototype.afterInitialize.push(function(t){var i=this;function n(){return $("<div>").appendTo(i.containerEl).get(0)}function s(){i.measureWidget&&i.measureWidget.destroy(),i.measureWidget=null}this.changedActive(function(){i.active&&i.showStatusMessage("Select measurement method")}),t.on(this.id,{"container-inserted":function(e){console.log(e),i.containerEl=e.el},"container-unbind":function(e){s()},"start-area":function(e){s(),i.showStatusMessage(),i.measureWidget=new r.widgets.AreaMeasurement3D({view:t.$viewer.view,container:n()})},"start-distance":function(e){s(),i.showStatusMessage(),i.measureWidget=new r.widgets.DirectLineMeasurement3D({view:t.$viewer.view,container:n()})},cancel:function(e){s()}})})});} }
        ] }
    );
    include.tag( "tool-measure-leaflet",
        { loader: "group", tags: [
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/cancel_@2X.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/cancel.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/check_@2X.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/check.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/focus_@2X.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/focus.png" },
            { loader: "style", url: "smk/viewer-leaflet/tool/measure/lib/leaflet-measure.css", load: "/* [smk/viewer-leaflet/tool/measure/lib/leaflet-measure.css] */\n.leaflet-control-measure h3,.leaflet-measure-resultpopup h3{margin:0 0 12px 0;padding-bottom:10px;line-height:1em;font-weight:400;font-size:1.1em;border-bottom:solid 1px #ddd}.leaflet-control-measure p,.leaflet-measure-resultpopup p{margin:10px 0 0;line-height:1em}.leaflet-control-measure p:first-child,.leaflet-measure-resultpopup p:first-child{margin-top:0}.leaflet-control-measure a,.leaflet-measure-resultpopup a{color:#5e66cc;text-decoration:none}.leaflet-control-measure a:hover,.leaflet-measure-resultpopup a:hover{opacity:.5;text-decoration:none}.leaflet-control-measure .tasks,.leaflet-measure-resultpopup .tasks{margin:12px 0 0;padding:10px 0 0;border-top:solid 1px #ddd;list-style:none;list-style-image:none}.leaflet-control-measure .tasks li,.leaflet-measure-resultpopup .tasks li{display:inline;margin:0 10px 0 0}.leaflet-control-measure .tasks li:last-child,.leaflet-measure-resultpopup .tasks li:last-child{margin-right:0}.leaflet-control-measure .coorddivider,.leaflet-measure-resultpopup .coorddivider{color:#999}.leaflet-control-measure{background:#fff;border-radius:4px;box-shadow:none}.leaflet-control-measure .leaflet-control-measure-toggle,.leaflet-control-measure .leaflet-control-measure-toggle:hover{display:block;width:36px;height:36px;background-position:50% 50%;background-repeat:no-repeat;background-image:url(rulers.png);border-radius:4px;text-indent:100%;white-space:nowrap;overflow:hidden}.leaflet-retina .leaflet-control-measure .leaflet-control-measure-toggle,.leaflet-retina .leaflet-control-measure .leaflet-control-measure-toggle:hover{background-image:url(rulers_@2X.png);background-size:16px 16px}.leaflet-touch .leaflet-control-measure .leaflet-control-measure-toggle,.leaflet-touch .leaflet-control-measure .leaflet-control-measure-toggle:hover{width:30px;height:30px;border:2px solid rgba(0,0,0,.2)}.leaflet-control-measure .startprompt h3{margin-bottom:10px}.leaflet-control-measure .startprompt .tasks{margin-top:0;padding-top:0;border-top:0}.leaflet-control-measure .leaflet-control-measure-interaction{padding:10px 12px}.leaflet-control-measure .results .group{margin-top:10px;padding-top:10px;border-top:dotted 1px #eaeaea}.leaflet-control-measure .results .group:first-child{margin-top:0;padding-top:0;border-top:0}.leaflet-control-measure .results .heading{margin-right:5px;color:#999}.leaflet-control-measure a.start{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(start.png)}.leaflet-retina .leaflet-control-measure a.start{background-image:url(start_@2X.png);background-size:12px 12px}.leaflet-control-measure a.cancel{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(cancel.png)}.leaflet-retina .leaflet-control-measure a.cancel{background-image:url(cancel_@2X.png);background-size:12px 12px}.leaflet-control-measure a.finish{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(/check.png)}.leaflet-retina .leaflet-control-measure a.finish{background-image:url(/check_@2X.png);background-size:12px 12px}.leaflet-measure-resultpopup a.zoomto{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(/focus.png)}.leaflet-retina .leaflet-measure-resultpopup a.zoomto{background-image:url(/focus_@2X.png);background-size:12px 12px}.leaflet-measure-resultpopup a.deletemarkup{padding-left:18px;background-repeat:no-repeat;background-position:0 50%;background-image:url(/trash.png)}.leaflet-retina .leaflet-measure-resultpopup a.deletemarkup{background-image:url(/trash_@2X.png);background-size:11px 12px}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/measure/lib/leaflet-measure.min.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/measure/lib/leaflet-measure.min.js]" ); !function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,c,d){function e(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),b<0&&(b+=360),d=(h+i)/2,c=i==h?0:d<=.5?j/(i+h):j/(2-i-h),[b,100*c,100*d]}function f(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return c=0==i?0:j/i*1e3/10,i==h?b=0:e==i?b=(f-g)/j:f==i?b=2+(g-e)/j:g==i&&(b=4+(e-f)/j),b=Math.min(60*b,360),b<0&&(b+=360),d=i/255*1e3/10,[b,c,d]}function h(a){var b=a[0],c=a[1],d=a[2],f=e(a)[0],g=1/255*Math.min(b,Math.min(c,d)),d=1-1/255*Math.max(b,Math.max(c,d));return[f,100*g,100*d]}function i(a){var b,c,d,e,f=a[0]/255,g=a[1]/255,h=a[2]/255;return e=Math.min(1-f,1-g,1-h),b=(1-f-e)/(1-e)||0,c=(1-g-e)/(1-e)||0,d=(1-h-e)/(1-e)||0,[100*b,100*c,100*d,100*e]}function j(a){return Z[JSON.stringify(a)]}function k(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]}function l(a){var b,c,d,e=k(a),f=e[0],g=e[1],h=e[2];return f/=95.047,g/=100,h/=108.883,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,b=116*g-16,c=500*(f-g),d=200*(g-h),[b,c,d]}function m(a){return M(l(a))}function n(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0==h)return f=255*i,[f,f,f];c=i<.5?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;j<3;j++)d=g+1/3*-(j-1),d<0&&d++,d>1&&d--,f=6*d<1?b+6*(c-b)*d:2*d<1?c:3*d<2?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}function o(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return 0===f?[0,0,0]:(f*=2,e*=f<=1?f:2-f,c=(f+e)/2,b=2*e/(f+e),[d,100*b,100*c])}function p(a){return h(n(a))}function q(a){return i(n(a))}function s(a){return j(n(a))}function t(a){var b=a[0]/60,c=a[1]/100,d=a[2]/100,e=Math.floor(b)%6,f=b-Math.floor(b),g=255*d*(1-c),h=255*d*(1-c*f),i=255*d*(1-c*(1-f)),d=255*d;switch(e){case 0:return[d,i,g];case 1:return[h,d,g];case 2:return[g,d,i];case 3:return[g,h,d];case 4:return[i,g,d];case 5:return[d,g,h]}}function u(a){var b,c,d=a[0],e=a[1]/100,f=a[2]/100;return c=(2-e)*f,b=e*f,b/=c<=1?c:2-c,b=b||0,c/=2,[d,100*b,100*c]}function v(a){return h(t(a))}function w(a){return i(t(a))}function x(a){return j(t(a))}function y(a){var c,d,e,f,h=a[0]/360,i=a[1]/100,j=a[2]/100,k=i+j;switch(k>1&&(i/=k,j/=k),c=Math.floor(6*h),d=1-j,e=6*h-c,0!=(1&c)&&(e=1-e),f=i+e*(d-i),c){default:case 6:case 0:r=d,g=f,b=i;break;case 1:r=f,g=d,b=i;break;case 2:r=i,g=d,b=f;break;case 3:r=i,g=f,b=d;break;case 4:r=f,g=i,b=d;break;case 5:r=d,g=i,b=f}return[255*r,255*g,255*b]}function z(a){return e(y(a))}function A(a){return f(y(a))}function B(a){return i(y(a))}function C(a){return j(y(a))}function D(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100,h=a[3]/100;return b=1-Math.min(1,e*(1-h)+h),c=1-Math.min(1,f*(1-h)+h),d=1-Math.min(1,g*(1-h)+h),[255*b,255*c,255*d]}function E(a){return e(D(a))}function F(a){return f(D(a))}function G(a){return h(D(a))}function H(a){return j(D(a))}function I(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+f*-1.5372+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b*=12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c*=12.92,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d*=12.92,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d]}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=116*f-16,c=500*(e-f),d=200*(f-g),[b,c,d]}function K(a){return M(J(a))}function L(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return f<=8?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=b/95.047<=.008856?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=d/108.883<=.008859?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d]}function M(a){var b,c,d,e=a[0],f=a[1],g=a[2];return b=Math.atan2(g,f),c=360*b/2/Math.PI,c<0&&(c+=360),d=Math.sqrt(f*f+g*g),[e,d,c]}function N(a){return I(L(a))}function O(a){var b,c,d,e=a[0],f=a[1],g=a[2];return d=g/360*2*Math.PI,b=f*Math.cos(d),c=f*Math.sin(d),[e,b,c]}function P(a){return L(O(a))}function Q(a){return N(O(a))}function R(a){return Y[a]}function S(a){return e(R(a))}function T(a){return f(R(a))}function U(a){return h(R(a))}function V(a){return i(R(a))}function W(a){return l(R(a))}function X(a){return k(R(a))}c.exports={rgb2hsl:e,rgb2hsv:f,rgb2hwb:h,rgb2cmyk:i,rgb2keyword:j,rgb2xyz:k,rgb2lab:l,rgb2lch:m,hsl2rgb:n,hsl2hsv:o,hsl2hwb:p,hsl2cmyk:q,hsl2keyword:s,hsv2rgb:t,hsv2hsl:u,hsv2hwb:v,hsv2cmyk:w,hsv2keyword:x,hwb2rgb:y,hwb2hsl:z,hwb2hsv:A,hwb2cmyk:B,hwb2keyword:C,cmyk2rgb:D,cmyk2hsl:E,cmyk2hsv:F,cmyk2hwb:G,cmyk2keyword:H,keyword2rgb:R,keyword2hsl:S,keyword2hsv:T,keyword2hwb:U,keyword2cmyk:V,keyword2lab:W,keyword2xyz:X,xyz2rgb:I,xyz2lab:J,xyz2lch:K,lab2xyz:L,lab2rgb:N,lab2lch:M,lch2lab:O,lch2xyz:P,lch2rgb:Q};var Y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z={};for(var $ in Y)Z[JSON.stringify(Y[$])]=$},{}],3:[function(a,b,c){var d=a("./conversions"),e=function(){return new j};for(var f in d){e[f+"Raw"]=function(a){return function(b){return"number"==typeof b&&(b=Array.prototype.slice.call(arguments)),d[a](b)}}(f);var g=/(\w+)2(\w+)/.exec(f),h=g[1],i=g[2];e[h]=e[h]||{},e[h][i]=e[f]=function(a){return function(b){"number"==typeof b&&(b=Array.prototype.slice.call(arguments));var c=d[a](b);if("string"==typeof c||void 0===c)return c;for(var e=0;e<c.length;e++)c[e]=Math.round(c[e]);return c}}(f)}var j=function(){this.convs={}};j.prototype.routeSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c))},j.prototype.setValues=function(a,b){return this.space=a,this.convs={},this.convs[a]=b,this},j.prototype.getValues=function(a){var b=this.convs[a];if(!b){var c=this.space,d=this.convs[c];b=e[c][a](d),this.convs[a]=b}return b},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(a){j.prototype[a]=function(b){return this.routeSpace(a,arguments)}}),b.exports=e},{"./conversions":2}],4:[function(a,b,c){b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(a,b,c){function d(a){if(a){var b=/^#([a-fA-F0-9]{3})$/,c=/^#([a-fA-F0-9]{6})$/,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,e=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,f=/(\D+)/,g=[0,0,0],h=1,i=a.match(b);if(i){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i[j]+i[j],16)}else if(i=a.match(c)){i=i[1];for(var j=0;j<g.length;j++)g[j]=parseInt(i.slice(2*j,2*j+2),16)}else if(i=a.match(d)){for(var j=0;j<g.length;j++)g[j]=parseInt(i[j+1]);h=parseFloat(i[4])}else if(i=a.match(e)){for(var j=0;j<g.length;j++)g[j]=Math.round(2.55*parseFloat(i[j+1]));h=parseFloat(i[4])}else if(i=a.match(f)){if("transparent"==i[1])return[0,0,0,0];if(g=u[i[1]],!g)return}for(var j=0;j<g.length;j++)g[j]=s(g[j],0,255);return h=h||0==h?s(h,0,1):1,g[3]=h,g}}function e(a){if(a){var b=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function f(a){if(a){var b=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,c=a.match(b);if(c){var d=parseFloat(c[4]),e=s(parseInt(c[1]),0,360),f=s(parseFloat(c[2]),0,100),g=s(parseFloat(c[3]),0,100),h=s(isNaN(d)?1:d,0,1);return[e,f,g,h]}}}function g(a){var b=d(a);return b&&b.slice(0,3)}function h(a){var b=e(a);return b&&b.slice(0,3)}function i(a){var b=d(a);return b?b[3]:(b=e(a))?b[3]:(b=f(a))?b[3]:void 0}function j(a){return"#"+t(a[0])+t(a[1])+t(a[2])}function k(a,b){return b<1||a[3]&&a[3]<1?l(a,b):"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function l(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+b+")"}function m(a,b){if(b<1||a[3]&&a[3]<1)return n(a,b);var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgb("+c+"%, "+d+"%, "+e+"%)"}function n(a,b){var c=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),e=Math.round(a[2]/255*100);return"rgba("+c+"%, "+d+"%, "+e+"%, "+(b||a[3]||1)+")"}function o(a,b){return b<1||a[3]&&a[3]<1?p(a,b):"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)"}function p(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+b+")"}function q(a,b){return void 0===b&&(b=void 0!==a[3]?a[3]:1),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+(void 0!==b&&1!==b?", "+b:"")+")"}function r(a){return v[a.slice(0,3)]}function s(a,b,c){return Math.min(Math.max(b,a),c)}function t(a){var b=a.toString(16).toUpperCase();return b.length<2?"0"+b:b}var u=a("color-name");b.exports={getRgba:d,getHsla:e,getRgb:g,getHsl:h,getHwb:f,getAlpha:i,hexString:j,rgbString:k,rgbaString:l,percentString:m,percentaString:n,hslString:o,hslaString:p,hwbString:q,keyword:r};var v={};for(var w in u)v[u[w]]=w},{"color-name":4}],6:[function(a,b,c){var d=a("color-convert"),e=a("color-string"),f=function(a){if(a instanceof f)return a;if(!(this instanceof f))return new f(a);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof a){var b=e.getRgba(a);if(b)this.setValues("rgb",b);else if(b=e.getHsla(a))this.setValues("hsl",b);else{if(!(b=e.getHwb(a)))throw new Error('Unable to parse color from string "'+a+'"');this.setValues("hwb",b)}}else if("object"==typeof a){var b=a;if(void 0!==b.r||void 0!==b.red)this.setValues("rgb",b);else if(void 0!==b.l||void 0!==b.lightness)this.setValues("hsl",b);else if(void 0!==b.v||void 0!==b.value)this.setValues("hsv",b);else if(void 0!==b.w||void 0!==b.whiteness)this.setValues("hwb",b);else{if(void 0===b.c&&void 0===b.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(a));this.setValues("cmyk",b)}}};f.prototype={rgb:function(a){return this.setSpace("rgb",arguments)},hsl:function(a){return this.setSpace("hsl",arguments)},hsv:function(a){return this.setSpace("hsv",arguments)},hwb:function(a){return this.setSpace("hwb",arguments)},cmyk:function(a){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var a=this.values.rgb;return a.concat([this.values.alpha])},hslaArray:function(){var a=this.values.hsl;return a.concat([this.values.alpha])},alpha:function(a){return void 0===a?this.values.alpha:(this.setValues("alpha",a),this)},red:function(a){return this.setChannel("rgb",0,a)},green:function(a){return this.setChannel("rgb",1,a)},blue:function(a){return this.setChannel("rgb",2,a)},hue:function(a){return this.setChannel("hsl",0,a)},saturation:function(a){return this.setChannel("hsl",1,a)},lightness:function(a){return this.setChannel("hsl",2,a)},saturationv:function(a){return this.setChannel("hsv",1,a)},whiteness:function(a){return this.setChannel("hwb",1,a)},blackness:function(a){return this.setChannel("hwb",2,a)},value:function(a){return this.setChannel("hsv",2,a)},cyan:function(a){return this.setChannel("cmyk",0,a)},magenta:function(a){return this.setChannel("cmyk",1,a)},yellow:function(a){return this.setChannel("cmyk",2,a)},black:function(a){return this.setChannel("cmyk",3,a)},hexString:function(){return e.hexString(this.values.rgb)},rgbString:function(){return e.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return e.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return e.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return e.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return e.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return e.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return e.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var a=this.values.rgb,b=[],c=0;c<a.length;c++){var d=a[c]/255;b[c]=d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4)}return.2126*b[0]+.7152*b[1]+.0722*b[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();return b>c?(b+.05)/(c+.05):(c+.05)/(b+.05)},level:function(a){var b=this.contrast(a);return b>=7.1?"AAA":b>=4.5?"AA":""},dark:function(){var a=this.values.rgb,b=(299*a[0]+587*a[1]+114*a[2])/1e3;return b<128},light:function(){return!this.dark()},negate:function(){for(var a=[],b=0;b<3;b++)a[b]=255-this.values.rgb[b];return this.setValues("rgb",a),this},lighten:function(a){return this.values.hsl[2]+=this.values.hsl[2]*a,this.setValues("hsl",this.values.hsl),this},darken:function(a){return this.values.hsl[2]-=this.values.hsl[2]*a,this.setValues("hsl",this.values.hsl),this},saturate:function(a){return this.values.hsl[1]+=this.values.hsl[1]*a,this.setValues("hsl",this.values.hsl),this},desaturate:function(a){return this.values.hsl[1]-=this.values.hsl[1]*a,this.setValues("hsl",this.values.hsl),this},whiten:function(a){return this.values.hwb[1]+=this.values.hwb[1]*a,this.setValues("hwb",this.values.hwb),this},blacken:function(a){return this.values.hwb[2]+=this.values.hwb[2]*a,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var a=this.values.rgb,b=.3*a[0]+.59*a[1]+.11*a[2];return this.setValues("rgb",[b,b,b]),this},clearer:function(a){return this.setValues("alpha",this.values.alpha-this.values.alpha*a),this},opaquer:function(a){return this.setValues("alpha",this.values.alpha+this.values.alpha*a),this},rotate:function(a){var b=this.values.hsl[0];return b=(b+a)%360,b=b<0?360+b:b,this.values.hsl[0]=b,this.setValues("hsl",this.values.hsl),this},mix:function(a,b){b=1-(null==b?.5:b);for(var c=2*b-1,d=this.alpha()-a.alpha(),e=((c*d==-1?c:(c+d)/(1+c*d))+1)/2,f=1-e,g=this.rgbArray(),h=a.rgbArray(),i=0;i<g.length;i++)g[i]=g[i]*e+h[i]*f;this.setValues("rgb",g);var j=this.alpha()*b+a.alpha()*(1-b);return this.setValues("alpha",j),this},toJSON:function(){return this.rgb()},clone:function(){return new f(this.rgb())}},f.prototype.getValues=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=this.values[a][c];return 1!=this.values.alpha&&(b.a=this.values.alpha),b},f.prototype.setValues=function(a,b){var c={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},e={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},f=1;if("alpha"==a)f=b;else if(b.length)this.values[a]=b.slice(0,a.length),f=b[a.length];else if(void 0!==b[a.charAt(0)]){for(var g=0;g<a.length;g++)this.values[a][g]=b[a.charAt(g)];f=b.a}else if(void 0!==b[c[a][0]]){for(var h=c[a],g=0;g<a.length;g++)this.values[a][g]=b[h[g]];f=b.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==f?f:this.values.alpha)),"alpha"!=a){for(var g=0;g<a.length;g++){var i=Math.max(0,Math.min(e[a][g],this.values[a][g]));this.values[a][g]=Math.round(i)}for(var j in c){j!=a&&(this.values[j]=d[a][j](this.values[a]));for(var g=0;g<j.length;g++){var i=Math.max(0,Math.min(e[j][g],this.values[j][g]));this.values[j][g]=Math.round(i)}}return!0}},f.prototype.setSpace=function(a,b){var c=b[0];return void 0===c?this.getValues(a):("number"==typeof c&&(c=Array.prototype.slice.call(b)),this.setValues(a,c),this)},f.prototype.setChannel=function(a,b,c){return void 0===c?this.values[a][b]:(this.values[a][b]=c,this.setValues(a,this.values[a]),this)},b.exports=f},{"color-convert":3,"color-string":5}],7:[function(a,b,c){b.exports=a("./lib/geocrunch")},{"./lib/geocrunch":12}],8:[function(a,b,c){var d=a("underscore"),e=a("./constants").EARTHRADIUS,f=a("./units"),g=a("./flipcoords"),h={sqmeters:function(a){return a},sqmiles:function(a){return f.sqMeters.toSqMiles(a)},acres:function(a){return f.sqMeters.toAcres(a)}},i=function(a){var b,c,d,g,h=0;for(b=0,c=a.length;b<c;b+=1)d=a[b],g=a[(b+1)%a.length],h+=f.degrees.toRadians(g[0]-d[0])*(2+Math.sin(f.degrees.toRadians(d[1]))+Math.sin(f.degrees.toRadians(g[1])));return Math.abs(h*e*e/2)},j=function(a){var b,c,d,e,f,g=a[0],h=0,i=0,j=0;if(1===a.length)return a[0];for(b=0,c=a.length;b<c;b+=1)d=a[b],e=a[(b+1)%a.length],f=(d[1]-g[1])*(e[0]-g[0])-(e[1]-g[1])*(d[0]-g[0]),h+=f,i+=(d[0]+e[0]-2*g[0])*f,j+=(d[1]+e[1]-2*g[1])*f;return f=3*h,[i/f+g[0],j/f+g[1]]};b.exports={_internalAreaCalc:function(){this._calcedArea||(this._coords.length<3?this._calcedArea=0:this._calcedArea=i(this._coords))},_internalCenterCalc:function(){!this._calcedCenter&&this._coords.length&&(this._calcedCenter=j(this._coords))},area:function(a){var b=d.extend({units:"sqmeters"},a);if(this._internalAreaCalc(),d.isFunction(h[b.units]))return h[b.units](this._calcedArea)},center:function(){return this._internalCenterCalc(),this._options.imBackwards===!0?g(this._calcedCenter):this._calcedCenter}}},{"./constants":9,"./flipcoords":11,"./units":14,underscore:15}],9:[function(a,b,c){b.exports={EARTHRADIUS:6371e3}},{}],10:[function(a,b,c){var d=a("underscore"),e=a("./constants").EARTHRADIUS,f=a("./units"),g={meters:function(a){return a},kilometers:function(a){return f.meters.toKilometers(a)},feet:function(a){return f.meters.toFeet(a)},miles:function(a){return f.meters.toMiles(a)}},h=function(a,b){var c=f.degrees.toRadians(a[0]-b[0]),d=f.degrees.toRadians(a[1]-b[1]),g=f.degrees.toRadians(a[1]),h=f.degrees.toRadians(b[1]),i=Math.sin(c/2),j=Math.sin(d/2),k=j*j+i*i*Math.cos(g)*Math.cos(h);return 2*e*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))};b.exports={_internalDistanceCalc:function(){var a,b,c=0;if(!this._calcedDistance){for(a=0,b=this._coords.length;a<b;a+=1)a>0&&(c+=h(this._coords[a-1],this._coords[a]));this._calcedDistance=c}},distance:function(a){var b=d.extend({units:"meters"},a);if(this._internalDistanceCalc(),d.isFunction(g[b.units]))return g[b.units](this._calcedDistance)}}},{"./constants":9,"./units":14,underscore:15}],11:[function(a,b,c){var d=a("underscore");b.exports=function(a){return d.map(a,function(a){return[a[1],a[0]]})}},{underscore:15}],12:[function(a,b,c){var d=a("underscore"),e=a("./path"),f=a("./distance"),g=a("./area");d.extend(e.prototype,f,g),c.path=function(a,b){return new e(a,b)}},{"./area":8,"./distance":10,"./path":13,underscore:15}],13:[function(a,b,c){var d=a("./flipcoords"),e=function(a,b){this._options=b||{},a=a||[],this._coords=this._options.imBackwards===!0?d(a):a};b.exports=e},{"./flipcoords":11}],14:[function(a,b,c){c.meters={toFeet:function(a){return 3.28084*a},toKilometers:function(a){return.001*a},toMiles:function(a){return 621371e-9*a}},c.sqMeters={toSqMiles:function(a){return 3.86102e-7*a},toAcres:function(a){return 247105e-9*a}},c.degrees={toRadians:function(a){return a*Math.PI/180}}},{}],15:[function(a,b,c){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?void(this._wrapped=a):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.5.2";var A=z.each=z.forEach=function(a,b,c){if(null!=a)if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g=z.keys(a),d=0,f=g.length;d<f;d++)if(b.call(c,a[g[d]],g[d],a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){if(!(d=d&&b.call(c,a,f,g)))return e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){if(d||(d=b.call(c,a,f,g)))return e}),!!d)};z.contains=z.include=function(a,b){return null!=a&&(u&&a.indexOf===u?a.indexOf(b)!=-1:C(a,function(a){return a===b}))},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b,c){return z.isEmpty(b)?c?void 0:[]:z[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.findWhere=function(a,b){return z.where(a,b,!0)},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d},z.sample=function(a,b,c){return arguments.length<2||c?a[z.random(a.length-1)]:z.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a){return function(b,c,d){var e={},f=null==c?z.identity:D(c);return A(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};z.groupBy=E(function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)}),z.indexBy=E(function(a,b,c){a[b]=c}),z.countBy=E(function(a,b){z.has(a,b)?a[b]++:a[b]=1}),z.sortedIndex=function(a,b,c,d){c=null==c?z.identity:D(c);for(var e=c.call(d,b),f=0,g=a.length;f<g;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return b&&z.every(a,z.isArray)?k.apply(c,a):(A(a,function(a){z.isArray(a)||z.isArguments(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c)};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(z.flatten(arguments,!0))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0});
})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=z.max(z.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;c<a;c++)b[c]=z.pluck(arguments,""+c);return b},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);e<d;)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}},z.partial=function(a){var b=j.call(arguments,1);return function(){return a.apply(this,b.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},z.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;j<b?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&b.push(c);return b},z.values=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},z.pairs=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},z.invert=function(a){for(var b={},c=z.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(z.isFunction(g)&&g instanceof g&&z.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=H(a[i],b[i],c,d)););}else{for(var k in a)if(z.has(a,k)&&(i++,!(j=z.has(b,k)&&H(a[k],b[k],c,d))))break;if(j){for(k in b)if(z.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;e<a;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(null!=a){var c=a[b];return z.isFunction(c)?c.call(a):c}},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=++K+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(N,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(a){throw a.source=g,a}if(b)return d(b,z);var h=function(a){return d.call(this,a,z)};return h.source="function("+(c.variable||"obj")+"){\n"+g+"}",h},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],16:[function(a,b,c){(function(){var a=this,d=a.humanize,e={};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=e),c.humanize=e):("function"==typeof define&&define.amd&&define("humanize",function(){return e}),a.humanize=e),e.noConflict=function(){return a.humanize=d,this},e.pad=function(a,b,c,d){if(a+="",c?c.length>1&&(c=c.charAt(0)):c=" ",d=void 0===d?"left":"right","right"===d)for(;a.length<b;)a+=c;else for(;a.length<b;)a=c+a;return a},e.time=function(){return(new Date).getTime()/1e3};var f=[0,0,31,59,90,120,151,181,212,243,273,304,334],g=[0,0,31,60,91,121,152,182,213,244,274,305,335];e.date=function(a,b){var c=void 0===b?new Date:b instanceof Date?new Date(b):new Date(1e3*b),d=/\\?([a-z])/gi,h=function(a,b){return k[a]?k[a]():b},i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"],k={d:function(){return e.pad(k.j(),2,"0")},D:function(){return k.l().slice(0,3)},j:function(){return c.getDate()},l:function(){return i[k.w()]},N:function(){return k.w()||7},S:function(){var a=k.j();return a>4&&a<21?"th":{1:"st",2:"nd",3:"rd"}[a%10]||"th"},w:function(){return c.getDay()},z:function(){return(k.L()?g[k.n()]:f[k.n()])+k.j()-1},W:function(){var a=k.z()-k.N()+1.5;return e.pad(1+Math.floor(Math.abs(a)/7)+(a%7>3.5?1:0),2,"0")},F:function(){return j[c.getMonth()]},m:function(){return e.pad(k.n(),2,"0")},M:function(){return k.F().slice(0,3)},n:function(){return c.getMonth()+1},t:function(){return new Date(k.Y(),k.n(),0).getDate()},L:function(){return 1===new Date(k.Y(),1,29).getMonth()?1:0},o:function(){var a=k.n(),b=k.W();return k.Y()+(12===a&&b<9?-1:1===a&&b>9)},Y:function(){return c.getFullYear()},y:function(){return String(k.Y()).slice(-2)},a:function(){return c.getHours()>11?"pm":"am"},A:function(){return k.a().toUpperCase()},B:function(){var a=c.getTime()/1e3,b=a%86400+3600;b<0&&(b+=86400);var d=b/86.4%1e3;return a<0?Math.ceil(d):Math.floor(d)},g:function(){return k.G()%12||12},G:function(){return c.getHours()},h:function(){return e.pad(k.g(),2,"0")},H:function(){return e.pad(k.G(),2,"0")},i:function(){return e.pad(c.getMinutes(),2,"0")},s:function(){return e.pad(c.getSeconds(),2,"0")},u:function(){return e.pad(1e3*c.getMilliseconds(),6,"0")},O:function(){var a=c.getTimezoneOffset(),b=Math.abs(a);return(a>0?"-":"+")+e.pad(100*Math.floor(b/60)+b%60,4,"0")},P:function(){var a=k.O();return a.substr(0,3)+":"+a.substr(3,2)},Z:function(){return 60*-c.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(d,h)},r:function(){return"D, d M Y H:i:s O".replace(d,h)},U:function(){return c.getTime()/1e3||0}};return a.replace(d,h)},e.numberFormat=function(a,b,c,d){b=isNaN(b)?2:Math.abs(b),c=void 0===c?".":c,d=void 0===d?",":d;var e=a<0?"-":"";a=Math.abs(+a||0);var f=parseInt(a.toFixed(b),10)+"",g=f.length>3?f.length%3:0;return e+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")},e.naturalDay=function(a,b){a=void 0===a?e.time():a,b=void 0===b?"Y-m-d":b;var c=86400,d=new Date,f=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime()/1e3;return a<f&&a>=f-c?"yesterday":a>=f&&a<f+c?"today":a>=f+c&&a<f+2*c?"tomorrow":e.date(b,a)},e.relativeTime=function(a){a=void 0===a?e.time():a;var b=e.time(),c=b-a;if(c<2&&c>-2)return(c>=0?"just ":"")+"now";if(c<60&&c>-60)return c>=0?Math.floor(c)+" seconds ago":"in "+Math.floor(-c)+" seconds";if(c<120&&c>-120)return c>=0?"about a minute ago":"in about a minute";if(c<3600&&c>-3600)return c>=0?Math.floor(c/60)+" minutes ago":"in "+Math.floor(-c/60)+" minutes";if(c<7200&&c>-7200)return c>=0?"about an hour ago":"in about an hour";if(c<86400&&c>-86400)return c>=0?Math.floor(c/3600)+" hours ago":"in "+Math.floor(-c/3600)+" hours";var d=172800;if(c<d&&c>-d)return c>=0?"1 day ago":"in 1 day";var f=2505600;if(c<f&&c>-f)return c>=0?Math.floor(c/86400)+" days ago":"in "+Math.floor(-c/86400)+" days";var g=5184e3;if(c<g&&c>-g)return c>=0?"about a month ago":"in about a month";var h=parseInt(e.date("Y",b),10),i=parseInt(e.date("Y",a),10),j=12*h+parseInt(e.date("n",b),10),k=12*i+parseInt(e.date("n",a),10),l=j-k;if(l<12&&l>-12)return l>=0?l+" months ago":"in "+-l+" months";var m=h-i;return m<2&&m>-2?m>=0?"a year ago":"in a year":m>=0?m+" years ago":"in "+-m+" years"},e.ordinal=function(a){a=parseInt(a,10),a=isNaN(a)?0:a;var b=a<0?"-":"";a=Math.abs(a);var c=a%100;return b+a+(c>4&&c<21?"th":{1:"st",2:"nd",3:"rd"}[a%10]||"th")},e.filesize=function(a,b,c,d,f,g){return b=void 0===b?1024:b,a<=0?"0 bytes":(a<b&&void 0===c&&(c=0),void 0===g&&(g=" "),e.intword(a,["bytes","KB","MB","GB","TB","PB"],b,c,d,f,g))},e.intword=function(a,b,c,d,f,g,h){var i,j;b=b||["","K","M","B","T"],j=b.length-1,c=c||1e3,d=isNaN(d)?2:Math.abs(d),f=f||".",g=g||",",h=h||"";for(var k=0;k<b.length;k++)if(a<Math.pow(c,k+1)){j=k;break}i=a/Math.pow(c,j);var l=b[j]?h+b[j]:"";return e.numberFormat(i,d,f,g)+l},e.linebreaks=function(a){return a=a.replace(/^([\n|\r]*)/,""),a=a.replace(/([\n|\r]*)$/,""),a=a.replace(/(\r\n|\n|\r)/g,"\n"),a=a.replace(/(\n{2,})/g,"</p><p>"),a=a.replace(/\n/g,"<br />"),"<p>"+a+"</p>"},e.nl2br=function(a){return a.replace(/(\r\n|\n|\r)/g,"<br />")},e.truncatechars=function(a,b){return a.length<=b?a:a.substr(0,b)+""},e.truncatewords=function(a,b){var c=a.split(" ");return c.length<b?a:c.slice(0,b).join(" ")+""}}).call(this)},{}],17:[function(a,b,c){(function(c){function d(a,b,c){return a.hasOwnProperty(b)?a[b]:"string"==typeof b?d(a,b.split("."),c):1===b.length&&void 0!==c?a[b[0]]=c:0===b.length?a:a.hasOwnProperty(b[0])?d(a[b[0]],b.slice(1),c):a[b.join(".")]=b.join(".")}var e=a("sprintf").vsprintf,f=a("fs"),g=a("path"),h=b.exports=function(a){var b=this;this.devMode="production"!==c.env.NODE_ENV;for(var d in a)this[d]=a[d];"object"==typeof this.register&&h.resMethods.forEach(function(a){b.register[a]=b[a].bind(b)}),a.locales&&a.locales.forEach&&(this.locales={},a.locales.forEach(function(a){b.readFile(a)}),this.defaultLocale=a.locales[0]),this.setLocale(this.defaultLocale),this.locales[this.defaultLocale]||console.error("Not a valid default locale."),this.request&&(this.subdomain&&this.setLocaleFromSubdomain(this.request),this.query!==!1&&this.setLocaleFromQuery(this.request),this.session!==!1&&this.setLocaleFromSessionVar(this.request),this.prefLocale=this.preferredLocale(),this.prefLocale!==!1&&this.prefLocale!==this.locale&&this.setLocale(this.prefLocale))};h.version="0.4.7",h.localeCache={},h.resMethods=["__","__n","getLocale","isPreferredLocale"],h.expressBind=function(a,b){a&&(a.use(function(a,c,d){b.request=a,a.i18n=new h(b),c.locals&&h.registerMethods(c.locals,a),d()}),a.dynamicHelpers&&a.dynamicHelpers(h.registerMethods({})))},h.registerMethods=function(a,b){return h.resMethods.forEach(function(c){b?a[c]=b.i18n[c].bind(b.i18n):a[c]=function(a){return a.i18n[c].bind(a.i18n)}}),a},h.prototype={defaultLocale:"en",extension:".js",directory:"./locales",cookieName:"lang",sessionVarName:"locale",indent:"\t",parse:JSON.parse,dump:function(a,b){return JSON.stringify(a,null,b)},__:function(){var a=this.translate(this.locale,arguments[0]);return arguments.length>1&&(a=e(a,Array.prototype.slice.call(arguments,1))),a},__n:function(a,b,c){var d;if("number"==typeof b){var f=a,g=b;d=this.translate(this.locale,f),d=e(parseInt(g,10)>1?d.other:d.one,Array.prototype.slice.call(arguments,1))}else{var h=a,i=b,g=c;d=this.translate(this.locale,h,i),d=e(parseInt(g,10)>1?d.other:d.one,[g]),arguments.length>3&&(d=e(d,Array.prototype.slice.call(arguments,3)))}return d},setLocale:function(a){if(a)return this.locales[a]||(this.devMode&&console.warn("Locale ("+a+") not found."),a=this.defaultLocale),this.locale=a},getLocale:function(){return this.locale},isPreferredLocale:function(){return!this.prefLocale||this.prefLocale===this.getLocale()},setLocaleFromSessionVar:function(a){if(a=a||this.request,a&&a.session&&a.session[this.sessionVarName]){var b=a.session[this.sessionVarName];this.locales[b]&&(this.devMode&&console.log("Overriding locale from query: "+b),this.setLocale(b))}},setLocaleFromQuery:function(a){if(a=a||this.request,a&&a.query&&a.query.lang){var b=(a.query.lang+"").toLowerCase();this.locales[b]&&(this.devMode&&console.log("Overriding locale from query: "+b),this.setLocale(b))}},setLocaleFromSubdomain:function(a){a=a||this.request,a&&a.headers&&a.headers.host&&/^([^.]+)/.test(a.headers.host)&&this.locales[RegExp.$1]&&(this.devMode&&console.log("Overriding locale from host: "+RegExp.$1),this.setLocale(RegExp.$1))},setLocaleFromCookie:function(a){if(a=a||this.request,a&&a.cookies&&this.cookieName&&a.cookies[this.cookieName]){var b=a.cookies[this.cookieName].toLowerCase();this.locales[b]&&(this.devMode&&console.log("Overriding locale from cookie: "+b),this.setLocale(b))}},setLocaleFromEnvironmentVariable:function(){if(c.env.LANG){var a=c.env.LANG.split("_")[0];this.locales[a]&&(this.devMode&&console.log("Overriding locale from environment variable: "+a),this.setLocale(a))}},preferredLocale:function(a){if(a=a||this.request,a&&a.headers){for(var b,c=a.headers["accept-language"]||"",d=/(^|,\s*)([a-z0-9-]+)/gi,e=this;!b&&(match=d.exec(c));){var f=match[2].toLowerCase(),g=f.split("-");e.locales[f]?b=f:g.length>1&&e.locales[g[0]]&&(b=g[0])}return b||this.defaultLocale}},translate:function(a,b,c){return a&&this.locales[a]||(this.devMode&&console.warn("WARN: No locale found. Using the default ("+this.defaultLocale+") as current locale"),a=this.defaultLocale,this.initLocale(a,{})),this.locales[a][b]||this.devMode&&(d(this.locales[a],b,c?{one:b,other:c}:void 0),this.writeFile(a)),d(this.locales[a],b,c?{one:b,other:c}:void 0)},readFile:function(a){var b=this.locateFile(a);if(!this.devMode&&h.localeCache[b])return void this.initLocale(a,h.localeCache[b]);try{var c,d=f.readFileSync(b);if("function"==typeof this.base){var e;try{e=this.base(a)}catch(b){console.error("base function threw exception for locale %s",a,b)}if("string"==typeof e)try{c=this.parse(f.readFileSync(this.locateFile(e)))}catch(b){console.error("unable to read or parse base file %s for locale %s",e,a,b)}}try{var g=this.parse(d);if(c){for(var i in g)c[i]=g[i];g=c}this.initLocale(a,g)}catch(a){console.error("unable to parse locales from file (maybe "+b+" is empty or invalid "+this.extension+"?): ",a)}}catch(c){f.existsSync(b)||this.writeFile(a)}},writeFile:function(a){if(!this.devMode)return void this.initLocale(a,{});try{f.lstatSync(this.directory)}catch(a){this.devMode&&console.log("creating locales dir in: "+this.directory),f.mkdirSync(this.directory,493)}this.initLocale(a,{});try{var b=this.locateFile(a),c=b+".tmp";f.writeFileSync(c,this.dump(this.locales[a],this.indent),"utf8"),f.statSync(c).isFile()?f.renameSync(c,b):console.error("unable to write locales to file (either "+c+" or "+b+" are not writeable?): ")}catch(a){console.error("unexpected error writing files (either "+c+" or "+b+" are not writeable?): ",a)}},locateFile:function(a){return g.normalize(this.directory+"/"+a+this.extension)},initLocale:function(a,b){if(!this.locales[a]&&(this.locales[a]=b,!this.devMode)){var c=this.locateFile(a);h.localeCache[c]||(h.localeCache[c]=b)}}}}).call(this,a("_process"))},{_process:20,fs:1,path:19,sprintf:21}],18:[function(a,b,c){b.exports=a("./i18n")},{"./i18n":17}],19:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:20}],20:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],21:[function(a,b,c){var d=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.object_stringify=function(a,b,d,e){var f="";if(null!=a)switch(typeof a){case"function":return"[Function"+(a.name?": "+a.name:"")+"]";case"object":if(a instanceof Error)return"["+a.toString()+"]";if(b>=d)return"[Object]";if(e&&(e=e.slice(0),e.push(a)),null!=a.length){f+="[";var g=[];for(var h in a)e&&e.indexOf(a[h])>=0?g.push("[Circular]"):g.push(c.object_stringify(a[h],b+1,d,e));f+=g.join(", ")+"]"}else{if("getMonth"in a)return"Date("+a+")";f+="{";var g=[];for(var i in a)a.hasOwnProperty(i)&&(e&&e.indexOf(a[i])>=0?g.push(i+": [Circular]"):g.push(i+": "+c.object_stringify(a[i],b+1,d,e)));f+=g.join(", ")+"}"}return f;case"string":return'"'+a+'"'}return""+a},c.format=function(e,f){var g,h,i,j,k,l,m,n=1,o=e.length,p="",q=[];for(h=0;h<o;h++)if(p=a(e[h]),"string"===p)q.push(e[h]);else if("array"===p){if(j=e[h],j[2])for(g=f[n],i=0;i<j[2].length;i++){if(!g.hasOwnProperty(j[2][i]))throw new Error(d('[sprintf] property "%s" does not exist',j[2][i]));g=g[j[2][i]]}else g=j[1]?f[j[1]]:f[n++];if(/[^sO]/.test(j[8])&&"number"!=a(g))throw new Error(d('[sprintf] expecting number but found %s "'+g+'"',a(g)));switch(j[8]){case"b":g=g.toString(2);break;case"c":g=String.fromCharCode(g);break;case"d":g=parseInt(g,10);break;case"e":g=j[7]?g.toExponential(j[7]):g.toExponential();break;case"f":g=j[7]?parseFloat(g).toFixed(j[7]):parseFloat(g);break;case"O":g=c.object_stringify(g,0,parseInt(j[7])||5);break;case"o":g=g.toString(8);break;case"s":g=(g=String(g))&&j[7]?g.substring(0,j[7]):g;break;case"u":g=Math.abs(g);break;case"x":g=g.toString(16);break;case"X":g=g.toString(16).toUpperCase()}g=/[def]/.test(j[8])&&j[3]&&g>=0?"+"+g:g,l=j[4]?"0"==j[4]?"0":j[4].charAt(1):" ",m=j[6]-String(g).length,k=j[6]?b(l,m):"",q.push(j[5]?g+k:k+g)}return q.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(b)))throw new Error("[sprintf] "+b);if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw new Error("[sprintf] "+g);for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw new Error("[sprintf] "+g);f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push(c)}b=b.substring(c[0].length)}return d},c}(),e=function(a,b){var c=b.slice();return c.unshift(a),d.apply(null,c)};b.exports=d,d.sprintf=d,d.vsprintf=e},{}],22:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&b<=A};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;if(d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&d!==-1)return a[d]},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},
u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);g<h;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);d<e;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;g<c&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;d<b;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a||(C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length)},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,u)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}],23:[function(a,b,c){var d=a("underscore"),e=a("geocrunch"),f=function(a){return a<10?"0"+a.toString():a.toString()},g=function(a,b,c){var d=Math.abs(a),e=Math.floor(d),g=Math.floor(60*(d-e)),h=Math.round(3600*(d-e-g/60)*100)/100,i=d===a?b:c;return f(e)+"&deg; "+f(g)+"' "+f(h)+'" '+i},h=function(a){var b=d.last(a),c=e.path(d.map(a,function(a){return[a.lng,a.lat]})),f=c.distance({units:"meters"}),h=c.area({units:"sqmeters"});return{lastCoord:{dd:{x:b.lng,y:b.lat},dms:{x:g(b.lng,"E","W"),y:g(b.lat,"N","S")}},length:f,area:h}};b.exports={measure:h}},{geocrunch:7,underscore:22}],24:[function(a,b,c){var d=function(a,b){return b||(b=document),b.querySelector(a)},e=function(a,b){return b||(b=document),Array.prototype.slice.call(b.querySelectorAll(a))},f=function(a){if(a)return a.setAttribute("style","display:none;"),a},g=function(a){if(a)return a.removeAttribute("style"),a};b.exports={$:d,$$:e,hide:f,show:g}},{}],25:[function(a,b,c){b.exports={measure:"Medir",measureDistancesAndAreas:"Medeix distancies i reas",createNewMeasurement:"Crear nova medicio",startCreating:"Comeni a crear la medicio afegint punts al mapa",finishMeasurement:"Acabar la medici",lastPoint:"ltim punt",area:"rea",perimeter:"Permetre",pointLocation:"Localizaci del punt",areaMeasurement:"Medici d'rea",linearMeasurement:"Medici lineal",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en aquesta rea",centerOnLine:"Centrar en aquesta lnia",centerOnLocation:"Centrar en aquesta localizaci",cancel:"Cancellar",delete:"Eliminar",acres:"Acres",feet:"Peus",kilometers:"Quilmetres",hectares:"Hectreas",meters:"Metros",miles:"Milles",sqfeet:"Peus cuadrats",sqmeters:"Metres cuadrats",sqmiles:"Milles cuadrades",decPoint:".",thousandsSep:" "}},{}],26:[function(a,b,c){b.exports={measure:"",measureDistancesAndAreas:"",createNewMeasurement:"",startCreating:"",finishMeasurement:"",lastPoint:"",area:"",perimeter:"",pointLocation:"",areaMeasurement:"",linearMeasurement:"",pathDistance:"",centerOnArea:"",centerOnLine:"",centerOnLocation:"",cancel:"",delete:"",acres:"",feet:"",kilometers:"",hectares:"",meters:"",miles:"",sqfeet:"",sqmeters:"",sqmiles:"",decPoint:".",thousandsSep:","}},{}],27:[function(a,b,c){b.exports={measure:"Ml",measureDistancesAndAreas:"Ml afstande og arealer",createNewMeasurement:"Lav en ny mling",startCreating:"Begynd mlingen ved at tilfje punkter p kortet",finishMeasurement:"Afslut mling",lastPoint:"Sidste punkt",area:"Areal",perimeter:"Omkreds",pointLocation:"Punkt",areaMeasurement:"Areal",linearMeasurement:"Linje",pathDistance:"Sti afstand",centerOnArea:"Centrr dette omrde",centerOnLine:"Centrr denne linje",centerOnLocation:"Centrr dette punkt",cancel:"Annuller",delete:"Slet",acres:"acre",feet:"fod",kilometers:"km",hectares:"ha",meters:"m",miles:"mil",sqfeet:"kvadratfod",sqmeters:"m",sqmiles:"kvadratmil",decPoint:",",thousandsSep:"."}},{}],28:[function(a,b,c){b.exports={measure:"Messung",measureDistancesAndAreas:"Messung von Abstnden und Flchen",createNewMeasurement:"Eine neue Messung durchfhren",startCreating:"Fhren Sie die Messung durch, indem Sie der Karte Punkte hinzufgen.",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Flche",perimeter:"Rand",pointLocation:"Lage des Punkts",areaMeasurement:"Gemessene Flche",linearMeasurement:"Gemessener Abstand",pathDistance:"Abstand entlang des Pfads",centerOnArea:"Auf diese Flche zentrieren",centerOnLine:"Auf diesen Linienzug zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Lschen",acres:"Morgen",feet:"Fu",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfu",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:",",thousandsSep:"."}},{}],29:[function(a,b,c){b.exports={measure:"Messung",measureDistancesAndAreas:"Abstnde und Flchen messen",createNewMeasurement:"Eine neue Messung durchfhren",startCreating:"Messen sie, indem Sie der Karte Punkte hinzufgen",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Flche",perimeter:"Umfang",pointLocation:"Lage des Punkts",areaMeasurement:"Flche",linearMeasurement:"Abstand",pathDistance:"Umfang",centerOnArea:"Auf diese Flche zentrieren",centerOnLine:"Auf diese Linie zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Lschen",acres:"Morgen",feet:"Fu",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfu",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:".",thousandsSep:"'"}},{}],30:[function(a,b,c){b.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Center on this area",centerOnLine:"Center on this line",centerOnLocation:"Center on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:","}},{}],31:[function(a,b,c){b.exports={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Centre on this area",centerOnLine:"Centre on this line",centerOnLocation:"Centre on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometres",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:","}},{}],32:[function(a,b,c){b.exports={measure:"Medicin",measureDistancesAndAreas:"Mida distancias y reas",createNewMeasurement:"Crear nueva medicin",startCreating:"Empiece a crear la medicin aadiendo puntos al mapa",finishMeasurement:"Terminar medicin",lastPoint:"ltimo punto",area:"rea",perimeter:"Permetro",pointLocation:"Localizacin del punto",areaMeasurement:"Medicin de rea",linearMeasurement:"Medicin linear",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en este rea",centerOnLine:"Centrar en esta lnea",centerOnLocation:"Centrar en esta localizacin",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pies",kilometers:"Kilmetros",hectares:"Hectreas",meters:"Metros",miles:"Millas",sqfeet:"Pies cuadrados",sqmeters:"Metros cuadrados",sqmiles:"Millas cuadradas",decPoint:".",thousandsSep:" "}},{}],33:[function(a,b,c){b.exports={measure:" ",measureDistancesAndAreas:"    ",createNewMeasurement:"   ",startCreating:"          .",finishMeasurement:"  ",lastPoint:" ",area:"",perimeter:"",pointLocation:" ",areaMeasurement:"  ",linearMeasurement:"  ",pathDistance:" ",centerOnArea:"  ",centerOnLine:"  ",centerOnLocation:"  ",cancel:"",delete:"",acres:"",feet:"",kilometers:"",hectares:"",meters:"",miles:"",sqfeet:" ",sqmeters:" ",sqmiles:" ",decPoint:"/",thousandsSep:","}},{}],34:[function(a,b,c){b.exports={measure:"Sukat",measureDistancesAndAreas:"Kalkulahin ang tamang distansya at sukat",createNewMeasurement:"Lumikha ng isang bagong pagsukat",startCreating:"Simulan ang paglikha ng isang pagsukat sa pamamagitan ng pagdaragdag ng mga puntos sa mapa",finishMeasurement:"Tapusin ang pagsukat",lastPoint:"Huling punto sa mapa",area:"Sukat",perimeter:"Palibot",pointLocation:"Lokasyon ng punto",areaMeasurement:"Kabuuang sukat",linearMeasurement:"Pagsukat ng guhit",pathDistance:"Distansya ng daanan",centerOnArea:"I-sentro sa lugar na ito",centerOnLine:"I-sentro sa linya na ito",centerOnLocation:"I-sentro sa lokasyong ito",cancel:"Kanselahin",delete:"Tanggalin",acres:"Acres",feet:"Talampakan",kilometers:"Kilometro",hectares:"Hektarya",meters:"Metro",miles:"Milya",sqfeet:"Talampakang Kwadrado",sqmeters:"Metro Kwadrado",sqmiles:"Milya Kwadrado",decPoint:".",thousandsSep:","}},{}],35:[function(a,b,c){b.exports={measure:"Mesure",measureDistancesAndAreas:"Mesurer les distances et superficies",createNewMeasurement:"Crer une nouvelle mesure",startCreating:"Dbuter la cration d'une nouvelle mesure en ajoutant des points sur la carte",finishMeasurement:"Finir la mesure",lastPoint:"Dernier point",area:"Superficie",perimeter:"Primtre",pointLocation:"Placement du point",areaMeasurement:"Mesure de superficie",linearMeasurement:"Mesure linaire",pathDistance:"Distance du chemin",centerOnArea:"Centrer sur cette zone",centerOnLine:"Centrer sur cette ligne",centerOnLocation:"Centrer  cet endroit",cancel:"Annuler",delete:"Supprimer",acres:"Acres",feet:"Pieds",kilometers:"Kilomtres",hectares:"Hectares",meters:"Mtres",miles:"Miles",sqfeet:"Pieds carrs",sqmeters:"Mtres carrs",sqmiles:"Miles carrs",decPoint:",",thousandsSep:" "}},{}],36:[function(a,b,c){b.exports={measure:"Misura",measureDistancesAndAreas:"Misura distanze e aree",createNewMeasurement:"Crea una nuova misurazione",startCreating:"Comincia a creare una misurazione aggiungendo punti alla mappa",finishMeasurement:"Misurazione conclusa",lastPoint:"Ultimo punto",area:"Area",perimeter:"Perimetro",pointLocation:"Posizione punto",areaMeasurement:"Misura area",linearMeasurement:"Misura lineare",pathDistance:"Distanza percorso",centerOnArea:"Centra su questa area",centerOnLine:"Centra su questa linea",centerOnLocation:"Centra su questa posizione",cancel:"Annulla",delete:"Cancella",acres:"Acri",feet:"Piedi",kilometers:"Chilometri",hectares:"Ettari",meters:"Metri",miles:"Miglia",sqfeet:"Piedi quadri",sqmeters:"Metri quadri",sqmiles:"Miglia quadre",decPoint:".",thousandsSep:","}},{}],37:[function(a,b,c){b.exports={measure:"Meet",measureDistancesAndAreas:"Meet afstanden en oppervlakten",createNewMeasurement:"Maak een nieuwe meting",startCreating:"Begin een meting door punten toe te voegen aan de kaart",finishMeasurement:"Beindig meting",lastPoint:"Laatste punt",area:"Oppervlakte",perimeter:"Omtrek",pointLocation:"Locatie punt",areaMeasurement:"Oppervlakte meting",linearMeasurement:"Gemeten afstand",pathDistance:"Afstand over de lijn",centerOnArea:"Centreer op dit gebied",centerOnLine:"Centreer op deze lijn",centerOnLocation:"Centreer op deze locatie",cancel:"Annuleer",delete:"Wis",acres:"are",feet:"Voet",kilometers:"km",hectares:"ha",meters:"m",miles:"Mijl",sqfeet:"Vierkante Feet",sqmeters:"m2",sqmiles:"Vierkante Mijl",decPoint:",",thousandsSep:"."}},{}],38:[function(a,b,c){b.exports={measure:"Pomiar",measureDistancesAndAreas:"Pomiar odlegoci i powierzchni",createNewMeasurement:"Utwrz nowy pomiar",startCreating:"Rozpocznij tworzenie nowego pomiaru poprzez dodanie punktw na mapie",finishMeasurement:"Zakocz pomiar",lastPoint:"Ostatni punkt",area:"Powierzchnia",perimeter:"Obwd",pointLocation:"Punkt lokalizacji",areaMeasurement:"Pomiar powierzchni",linearMeasurement:"Pomiar liniowy",pathDistance:"Dugo cieki",centerOnArea:"rodek tego obszaru",centerOnLine:"rodek tej linii",centerOnLocation:"rodek w tej lokalizacji",cancel:"Anuluj",delete:"Skasuj",acres:"akrw",feet:"stp",kilometers:"kilometrw",hectares:"hektarw",meters:"metrw",miles:"mil",sqfeet:"stp kwadratowych",sqmeters:"metrw kwadratowych",sqmiles:"mil kwadratowych",decPoint:",",thousandsSep:"."}},{}],39:[function(a,b,c){b.exports={measure:"Medidas",measureDistancesAndAreas:"Mede distncias e reas",createNewMeasurement:"Criar nova medida",startCreating:"Comece criando uma medida, adicionando pontos no mapa",finishMeasurement:"Finalizar medida",lastPoint:"ltimo ponto",area:"rea",perimeter:"Permetro",pointLocation:"Localizao do ponto",areaMeasurement:"Medida de rea",linearMeasurement:"Medida linear",pathDistance:"Distncia",centerOnArea:"Centralizar nesta rea",centerOnLine:"Centralizar nesta linha",centerOnLocation:"Centralizar nesta localizao",cancel:"Cancelar",delete:"Excluir",acres:"Acres",feet:"Ps",kilometers:"Quilmetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Ps",sqmeters:"Metros",sqmiles:"Milhas",decPoint:",",thousandsSep:"."}},{}],40:[function(a,b,c){b.exports={measure:"Medies",measureDistancesAndAreas:"Medir distncias e reas",createNewMeasurement:"Criar uma nova medio",startCreating:"Adicione pontos no mapa, para criar uma nova medio",finishMeasurement:"Finalizar medio",lastPoint:"ltimo ponto",area:"rea",perimeter:"Permetro",pointLocation:"Localizao do ponto",areaMeasurement:"Medio da rea",linearMeasurement:"Medio linear",pathDistance:"Distncia",centerOnArea:"Centrar nesta rea",centerOnLine:"Centrar nesta linha",centerOnLocation:"Centrar nesta localizao",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Ps",kilometers:"Kilmetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Ps",sqmeters:"Metros",sqmiles:"Milhas",decPoint:",",thousandsSep:"."}},{}],41:[function(a,b,c){b.exports={measure:"",measureDistancesAndAreas:"   ",createNewMeasurement:"  ",startCreating:"      ",finishMeasurement:" ",lastPoint:" ",area:"",perimeter:"",pointLocation:" ",areaMeasurement:" ",linearMeasurement:" ",pathDistance:"",centerOnArea:"   ",centerOnLine:"   ",centerOnLocation:"   ",cancel:"",delete:"",acres:"",feet:"",kilometers:"",hectares:"",meters:"",miles:"",sqfeet:"",sqmeters:"",sqmiles:"",decPoint:".",thousandsSep:","}},{}],42:[function(a,b,c){b.exports={measure:"Mta",measureDistancesAndAreas:"Mta avstnd och yta",createNewMeasurement:"Skapa ny mtning",startCreating:"Brja mtning genom att lgga till punkter p kartan",finishMeasurement:"Avsluta mtning",lastPoint:"Sista punkt",area:"Yta",perimeter:"Omkrets",pointLocation:"Punktens Lge",areaMeasurement:"Arealmtning",linearMeasurement:"Lngdmtning",pathDistance:"Total linjelngd",centerOnArea:"Centrera p detta omrde",centerOnLine:"Centrera p denna linje",centerOnLocation:"Centrera p denna punkt",cancel:"Avbryt",delete:"Radera",acres:"Tunnland",feet:"Fot",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Miles",sqfeet:"Kvadratfot",sqmeters:"Kvadratmeter",sqmiles:"Kvadratmiles",decPoint:",",thousandsSep:" "}},{}],43:[function(a,b,c){b.exports={measure:"Hesapla",measureDistancesAndAreas:"Uzaklk ve alan hesapla",createNewMeasurement:"Yeni hesaplama",startCreating:"Yeni nokta ekleyerek hesaplamaya bala",finishMeasurement:"Hesaplamay bitir",lastPoint:"Son nokta",area:"Alan",perimeter:"evre uzunluu",pointLocation:"Nokta yeri",areaMeasurement:"Alan hesaplamas",linearMeasurement:"Dorusal hesaplama",pathDistance:"Yol uzunluu",centerOnArea:"Bu alana odaklan",centerOnLine:"Bu dotuya odaklan",centerOnLocation:"Bu yere odaklan",cancel:"k",delete:"Sil",acres:"Dnm",feet:"Feet",kilometers:"Kilometre",hectares:"Hektar",meters:"Metre",miles:"Mil",sqfeet:"Feet kare",sqmeters:"Metre kare",sqmiles:"Mil kare",decPoint:".",thousandsSep:","}},{}],44:[function(a,b,c){(function(b){var c=a("underscore"),d="undefined"!=typeof window?window.L:"undefined"!=typeof b?b.L:null,e=a("humanize"),f=a("./units"),g=a("./calc"),h=a("./dom"),i=h.$,j=a("./mapsymbology"),k=c.template('<a class="<%= model.className %>-toggle js-toggle" href="#" title="<%= i18n.__(\'measureDistancesAndAreas\') %>"><%= i18n.__(\'measure\') %></a>\n<div class="<%= model.className %>-interaction js-interaction">\n  <div class="js-startprompt startprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <ul class="tasks">\n      <a href="#" class="js-start start"><%= i18n.__(\'createNewMeasurement\') %></a>\n    </ul>\n  </div>\n  <div class="js-measuringprompt">\n    <h3><%= i18n.__(\'measureDistancesAndAreas\') %></h3>\n    <p class="js-starthelp"><%= i18n.__(\'startCreating\') %></p>\n    <div class="js-results results"></div>\n    <ul class="js-measuretasks tasks">\n      <li><a href="#" class="js-cancel cancel"><%= i18n.__(\'cancel\') %></a></li>\n      <li><a href="#" class="js-finish finish"><%= i18n.__(\'finishMeasurement\') %></a></li>\n    </ul>\n  </div>\n</div>'),l=c.template('<div class="group">\n<p class="lastpoint heading"><%= i18n.__(\'lastPoint\') %></p>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n</div>\n<% if (model.pointCount > 1) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'pathDistance\') %></span> <%= model.lengthDisplay %></p>\n</div>\n<% } %>\n<% if (model.pointCount > 2) { %>\n<div class="group">\n<p><span class="heading"><%= i18n.__(\'area\') %></span> <%= model.areaDisplay %></p>\n</div>\n<% } %>'),m=c.template('<h3><%= i18n.__(\'pointLocation\') %></h3>\n<p><%= model.lastCoord.dms.y %> <span class="coorddivider">/</span> <%= model.lastCoord.dms.x %></p>\n<p><%= humanize.numberFormat(model.lastCoord.dd.y, 6) %> <span class="coorddivider">/</span> <%= humanize.numberFormat(model.lastCoord.dd.x, 6) %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLocation\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),n=c.template('<h3><%= i18n.__(\'linearMeasurement\') %></h3>\n<p><%= model.lengthDisplay %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnLine\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),o=c.template('<h3><%= i18n.__(\'areaMeasurement\') %></h3>\n<p><%= model.areaDisplay %></p>\n<p><%= model.lengthDisplay %> <%= i18n.__(\'perimeter\') %></p>\n<ul class="tasks">\n  <li><a href="#" class="js-zoomto zoomto"><%= i18n.__(\'centerOnArea\') %></a></li>\n  <li><a href="#" class="js-deletemarkup deletemarkup"><%= i18n.__(\'delete\') %></a></li>\n</ul>'),p=new(a("i18n-2"))({devMode:!1,locales:{ca:a("./i18n/ca"),cn:a("./i18n/cn"),da:a("./i18n/da"),de:a("./i18n/de"),de_CH:a("./i18n/de_CH"),en:a("./i18n/en"),en_UK:a("./i18n/en_UK"),es:a("./i18n/es"),fa:a("./i18n/fa"),fil_PH:a("./i18n/fil_PH"),fr:a("./i18n/fr"),it:a("./i18n/it"),nl:a("./i18n/nl"),pl:a("./i18n/pl"),pt_BR:a("./i18n/pt_BR"),pt_PT:a("./i18n/pt_PT"),ru:a("./i18n/ru"),sv:a("./i18n/sv"),tr:a("./i18n/tr")}});d.Control.Measure=d.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(a){d.setOptions(this,a),this.options.units=d.extend({},f,this.options.units),this._symbols=new j(c.pick(this.options,"activeColor","completedColor")),p.setLocale(this.options.localization)},onAdd:function(a){return this._map=a,this._latlngs=[],this._initLayout(),a.on("click",this._collapse,this),this._layer=d.layerGroup().addTo(a),this._container},onRemove:function(a){a.off("click",this._collapse,this),a.removeLayer(this._layer)},_initLayout:function(){var a,b,c,e,f=this._className,g=this._container=d.DomUtil.create("div",f);g.innerHTML=k({model:{className:f},i18n:p}),g.setAttribute("aria-haspopup",!0),d.Browser.touch?d.DomEvent.on(g,"click",d.DomEvent.stopPropagation):(d.DomEvent.disableClickPropagation(g),d.DomEvent.disableScrollPropagation(g)),a=this.$toggle=i(".js-toggle",g),this.$interaction=i(".js-interaction",g),b=i(".js-start",g),c=i(".js-cancel",g),e=i(".js-finish",g),this.$startPrompt=i(".js-startprompt",g),this.$measuringPrompt=i(".js-measuringprompt",g),this.$startHelp=i(".js-starthelp",g),this.$results=i(".js-results",g),this.$measureTasks=i(".js-measuretasks",g),this._collapse(),this._updateMeasureNotStarted(),d.Browser.android||(d.DomEvent.on(g,"mouseenter",this._expand,this),d.DomEvent.on(g,"mouseleave",this._collapse,this)),d.DomEvent.on(a,"click",d.DomEvent.stop),d.Browser.touch?d.DomEvent.on(a,"click",this._expand,this):d.DomEvent.on(a,"focus",this._expand,this),d.DomEvent.on(b,"click",d.DomEvent.stop),d.DomEvent.on(b,"click",this._startMeasure,this),d.DomEvent.on(c,"click",d.DomEvent.stop),d.DomEvent.on(c,"click",this._finishMeasure,this),d.DomEvent.on(e,"click",d.DomEvent.stop),d.DomEvent.on(e,"click",this._handleMeasureDoubleClick,this);
},_expand:function(){h.hide(this.$toggle),h.show(this.$interaction)},_collapse:function(){this._locked||(h.hide(this.$interaction),h.show(this.$toggle))},_updateMeasureNotStarted:function(){h.hide(this.$startHelp),h.hide(this.$results),h.hide(this.$measureTasks),h.hide(this.$measuringPrompt),h.show(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){h.hide(this.$results),h.show(this.$startHelp),h.show(this.$measureTasks),h.hide(this.$startPrompt),h.show(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){h.hide(this.$startHelp),h.show(this.$results),h.show(this.$measureTasks),h.hide(this.$startPrompt),h.show(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureVertexes=d.featureGroup().addTo(this._layer),this._captureMarker=d.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),d.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){var a=c.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,d.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",a,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(d.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(a){function b(a,b,e,f,g){var h;return b&&d[b]?(h=c(a,d[b],f,g),e&&d[e]&&(h=h+" ("+c(a,d[e],f,g)+")")):h=c(a,null,f,g),h}function c(a,b,c,d){return b&&b.factor&&b.display?e.numberFormat(a*b.factor,b.decimals||0,c||p.__("decPoint"),d||p.__("thousandsSep"))+" "+p.__([b.display])||b.display:e.numberFormat(a,0,c||p.__("decPoint"),d||p.__("thousandsSep"))}var d=this.options.units;return{lengthDisplay:b(a.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:b(a.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)}},_updateResults:function(){var a=g.measure(this._latlngs),b=this._resultsModel=c.extend({},a,this._getMeasurementDisplayStrings(a),{pointCount:this._latlngs.length});this.$results.innerHTML=l({model:b,humanize:e,i18n:p})},_handleMeasureMove:function(a){this._measureDrag?this._measureDrag.setLatLng(a.latlng):this._measureDrag=d.circleMarker(a.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var a,b,f,h,j,k,l=this._latlngs;this._finishMeasure(),l.length&&(l.length>2&&l.push(c.first(l)),a=g.measure(l),1===l.length?(b=d.circleMarker(l[0],this._symbols.getSymbol("resultPoint")),h=m({model:a,humanize:e,i18n:p})):2===l.length?(b=d.polyline(l,this._symbols.getSymbol("resultLine")),h=n({model:c.extend({},a,this._getMeasurementDisplayStrings(a)),humanize:e,i18n:p})):(b=d.polygon(l,this._symbols.getSymbol("resultArea")),h=o({model:c.extend({},a,this._getMeasurementDisplayStrings(a)),humanize:e,i18n:p})),f=d.DomUtil.create("div",""),f.innerHTML=h,j=i(".js-zoomto",f),j&&(d.DomEvent.on(j,"click",d.DomEvent.stop),d.DomEvent.on(j,"click",function(){b.getBounds?this._map.fitBounds(b.getBounds(),{padding:[20,20],maxZoom:17}):b.getLatLng&&this._map.panTo(b.getLatLng())},this)),k=i(".js-deletemarkup",f),k&&(d.DomEvent.on(k,"click",d.DomEvent.stop),d.DomEvent.on(k,"click",function(){this._layer.removeLayer(b)},this)),b.addTo(this._layer),b.bindPopup(f,this.options.popupOptions),b.getBounds?b.openPopup(b.getBounds().getCenter()):b.getLatLng&&b.openPopup(b.getLatLng()))},_handleMeasureClick:function(a){var b=this._map.mouseEventToLatLng(a.originalEvent),d=c.last(this._latlngs),e=this._symbols.getSymbol("measureVertex");d&&b.equals(d)||(this._latlngs.push(b),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(a){a.setStyle(e),a._path.setAttribute("class",e.className)}),this._addNewVertex(b),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(a){d.circleMarker(a,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(a){return a.length<3?void(this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null)):void(this._measureArea?this._measureArea.setLatLngs(a):this._measureArea=d.polygon(a,this._symbols.getSymbol("measureArea")).addTo(this._layer))},_addMeasureBoundary:function(a){return a.length<2?void(this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null)):void(this._measureBoundary?this._measureBoundary.setLatLngs(a):this._measureBoundary=d.polyline(a,this._symbols.getSymbol("measureBoundary")).addTo(this._layer))}}),d.Map.mergeOptions({measureControl:!1}),d.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=(new d.Control.Measure).addTo(this))}),d.control.measure=function(a){return new d.Control.Measure(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./calc":23,"./dom":24,"./i18n/ca":25,"./i18n/cn":26,"./i18n/da":27,"./i18n/de":28,"./i18n/de_CH":29,"./i18n/en":30,"./i18n/en_UK":31,"./i18n/es":32,"./i18n/fa":33,"./i18n/fil_PH":34,"./i18n/fr":35,"./i18n/it":36,"./i18n/nl":37,"./i18n/pl":38,"./i18n/pt_BR":39,"./i18n/pt_PT":40,"./i18n/ru":41,"./i18n/sv":42,"./i18n/tr":43,"./mapsymbology":45,"./units":46,humanize:16,"i18n-2":18,underscore:22}],45:[function(a,b,c){var d=a("underscore"),e=a("color"),f=function(a){this.setOptions(a)};f.DEFAULTS={activeColor:"#ABE67E",completedColor:"#C8F2BE"},d.extend(f.prototype,{setOptions:function(a){return this._options=d.extend({},f.DEFAULTS,this._options,a),this},getSymbol:function(a){var b={measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:e(this._options.activeColor).darken(.15),fillOpacity:.7,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}};return b[a]}}),b.exports=f},{color:6,underscore:22}],46:[function(a,b,c){b.exports={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}}},{}]},{},[44]);} },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/rulers_@2X.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/rulers.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/start_@2X.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/start.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/toggle.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/toggle.svg" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/trash_@2X.png" },
            { loader: "asset", url: "smk/viewer-leaflet/tool/measure/lib/trash.png" },
            { loader: "style", url: "smk/viewer-leaflet/tool/measure/tool-measure-leaflet.css", load: "/* [smk/viewer-leaflet/tool/measure/tool-measure-leaflet.css] */\n.smk-map-frame .leaflet-control.leaflet-control-measure{display:none}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/measure/tool-measure-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/measure/tool-measure-leaflet.js]" ); include.module("tool-measure-leaflet",["leaflet","tool-measure","turf"],function(){"use strict";SMK.TYPE.MeasureTool.addInitializer(function(t){var n=this;function a(t){n.results=[],t.count&&(2<t.count?(n.showStatusMessage(),n.results.push({title:"Number of edges",value:t.count}),t.area&&n.results.push({title:"Area",value:t.area,dim:2}),t.length&&n.results.push({title:"Perimeter",value:t.length,dim:1})):1<t.count&&(n.showStatusMessage(),n.results.push({title:"Length",value:t.length,dim:1})))}n.viewer.leaflet=!0,t.$viewer.map.createPane("hiddenPane",t.addToContainer('<div style="display:none"></div>')),n.showStatusMessage("Select measurement method"),this.control=L.control.measure({position:"topright",primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"hectares",secondaryAreaUnit:"sqmeters",activeColor:"#38598a",completedColor:"#036",popupOptions:{pane:"hiddenPane"}}),this.control.addTo(t.$viewer.map),SMK.UTIL.wrapFunction(this.control,"_handleMeasureClick",function(e){return function(t){return null!=n.maxPoints&&this._latlngs.length+1>=n.maxPoints?(e.call(this,t),void this._handleMeasureDoubleClick()):e.call(this,t)}}),SMK.UTIL.wrapFunction(this.control,"_handleMeasureDoubleClick",function(e){return function(t){if(!(null!=n.minPoints&&this._latlngs.length<n.minPoints))return e.call(this,t)}}),SMK.UTIL.wrapFunction(this.control,"_handleMeasureMove",function(r){return function(t){r.call(this,t);var e={},n=this._latlngs.concat(this._measureDrag.getLatLng()).map(function(t){return[t.lng,t.lat]});if(e.count=n.length,2<n.length){var s=n.concat([n[0]]);e.area=turf.area(turf.polygon([s])),e.length=turf.length(turf.lineString(s),{units:"meters"})}else 1<n.length&&(e.length=turf.length(turf.lineString(n),{units:"meters"}));a(e)}}),t.$viewer.map.on({measurefinish:function(t){n.busy=!1,a({count:t.pointCount,area:t.area,length:t.length})}}),this.changedActive(function(){n.active?n.control._layer.addTo(t.$viewer.map):n.control._layer.removeFrom(t.$viewer.map)}),t.on(this.id,{"start-area":function(t){n.busy=!0,n.control._layer.clearLayers(),n.results=[],n.showStatusMessage("Click on map to set first point","progress"),n.minPoints=3,n.maxPoints=null,n.control._startMeasure()},"start-distance":function(t){n.busy=!0,n.control._layer.clearLayers(),n.results=[],n.showStatusMessage("Click on map to set starting point","progress"),n.minPoints=2,n.maxPoints=2,n.control._startMeasure()},cancel:function(t){n.busy=!1,n.results=[],n.showStatusMessage("Select measurement method"),n.control._finishMeasure()}})})});} }
        ] }
    );
    include.tag( "tool-menu",
        { loader: "group", tags: [
            { loader: "style", url: "smk/tool/menu/menu.css", load: "/* [smk/tool/menu/menu.css] */\n.smk-sidepanel .smk-menu-panel .smk-panel .smk-header{padding:0;margin:0;font-size:16px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}.smk-sidepanel .smk-menu-panel .smk-panel .smk-body .smk-header{display:none}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-header .smk-menu-title{width:100%;display:flex;justify-content:space-between}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-header .smk-menu-widgets{width:100%;display:flex;justify-content:space-between}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-header .smk-menu-widgets .smk-tool-title{flex-grow:1;justify-content:center}.smk-sidepanel .smk-menu-panel .smk-panel>.smk-body{padding:0;padding-top:5px;overflow-y:hidden;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}" },
            { loader: "template", url: "smk/tool/menu/panel-menu.html", load:"<tool-panel class=\"smk-menu-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <div class=\"smk-menu-title\">\n            <slot></slot>\n        </div>\n\n        <div class=\"smk-menu-widgets\">\n            <component class=\"smk-tool\"\n                v-for=\"w in subWidgets\"\n                v-bind:key=\"'w' + w.prop.id\"\n                v-bind:is=\"w.component\"\n                v-bind=\"w.prop\"\n                v-bind:active=\"isActivePanel( w.prop.id )\"\n            ></component>\n        </div>\n    </template>\n\n    <component class=\"smk-panel\"\n        v-for=\"p in subPanels\"\n        v-if=\"p.prop.active\"\n        v-bind:key=\"'p' + p.prop.id\"\n        v-bind:is=\"p.component\"\n        v-bind=\"p.prop\"\n    ></component>\n\n</tool-panel>" },
            { loader: "script", url: "smk/tool/menu/tool-menu.js", load: function () { console.debug( "[smk/tool/menu/tool-menu.js]" ); include.module("tool-menu",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-menu.panel-menu-html"],function(e){"use strict";return Vue.component("menu-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("menu-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-menu.panel-menu-html"],props:["subWidgets","subPanels"],methods:{isActivePanel:function(e){var t=this.getPanel(e);if(t.prop.active)return!0;for(;t;)if((t=this.getChildPanel(t.prop.id))&&t.prop.active)return!0;return!1},getPanel:function(t){return this.subPanels.find(function(e){return e.prop.id==t})},getChildPanel:function(t){return this.subPanels.find(function(e){return e.prop.parentId==t})}}}),SMK.TYPE.Tool.define("MenuTool",function(){SMK.TYPE.ToolWidget.call(this,"menu-widget"),SMK.TYPE.ToolPanel.call(this,"menu-panel"),this.defineProp("subWidgets"),this.defineProp("subPanels"),this.subWidgets=[],this.subPanels=[]},function(t){var n=this;t.on(this.id,{"previous-panel":function(e){t.getToolById(n.previousId).active=!0},"swipe-up":function(e){t.$sidepanel.setExpand(2)},"swipe-down":function(e){t.$sidepanel.incrExpand(-1)}}),this.changedActive(function(){n.active?t.getToolById(n.selectedId).active=!0:n.subPanels.forEach(function(e){t.getToolById(e.prop.id).active=!1})})},{addTool:function(t,e,n){var i=this;return t.parentId||n(t,this.id),t.makeWidgetComponent&&(this.subWidgets.push(t.makeWidgetComponent()),this.selectedId||(this.selectedId=t.id)),this.subPanels.push(t.makePanelComponent()),t.changedActive(function(){t.active&&(i.selectedId=t.id,i.hasPrevious=!t.widgetComponent,i.previousId=t.parentId)}),t.isToolInGroupActive=function(e){return e==t.id||e==i.id},!0}})});} }
        ] }
    );
    include.tag( "tool-menu-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/menu/config/tool-menu-config.js", load: function () { console.debug( "[smk/tool/menu/config/tool-menu-config.js]" ); include.module("tool-menu-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"menu",icon:"menu",position:"toolbar"}))))});} }
        ] }
    );
    include.tag( "tool-minimap",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/minimap/tool-minimap.js", load: function () { console.debug( "[smk/tool/minimap/tool-minimap.js]" ); include.module("tool-minimap",["tool.tool-js"],function(){"use strict";return SMK.TYPE.Tool.define("MinimapTool")});} }
        ] }
    );
    include.tag( "tool-minimap-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/minimap/config/tool-minimap-config.js", load: function () { console.debug( "[smk/tool/minimap/config/tool-minimap-config.js]" ); include.module("tool-minimap-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"minimap",order:1}))});} }
        ] }
    );
    include.tag( "tool-minimap-esri3d",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-minimap-leaflet",
        { loader: "group", tags: [
            { loader: "style", url: "smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.css", load: "/* [smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.css] */\n.leaflet-control-minimap{border:#fff solid;box-shadow:0 1px 5px rgba(0,0,0,.65);border-radius:3px;background:#f8f8f9;transition:all .6s}.leaflet-control-minimap a{background-color:#fff;background-repeat:no-repeat;z-index:99999;transition:all .6s}.leaflet-control-minimap a.minimized-bottomright{-webkit-transform:rotate(180deg);transform:rotate(180deg);border-radius:0}.leaflet-control-minimap a.minimized-topleft{-webkit-transform:rotate(0);transform:rotate(0);border-radius:0}.leaflet-control-minimap a.minimized-bottomleft{-webkit-transform:rotate(270deg);transform:rotate(270deg);border-radius:0}.leaflet-control-minimap a.minimized-topright{-webkit-transform:rotate(90deg);transform:rotate(90deg);border-radius:0}.leaflet-control-minimap-toggle-display{background-image:url(\"#{resource['images:toggle.svg']}\");background-size:cover;position:absolute;border-radius:3px 0 0}.leaflet-oldie .leaflet-control-minimap-toggle-display{background-image:url(\"#{resource['images:toggle.png']}\")}.leaflet-control-minimap-toggle-display-bottomright{bottom:0;right:0}.leaflet-control-minimap-toggle-display-topleft{top:0;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.leaflet-control-minimap-toggle-display-bottomleft{bottom:0;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.leaflet-control-minimap-toggle-display-topright{top:0;right:0;-webkit-transform:rotate(270deg);transform:rotate(270deg)}.leaflet-oldie .leaflet-control-minimap{border:1px solid #999}.leaflet-oldie .leaflet-control-minimap a{background-color:#fff}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/minimap/lib/Control.MiniMap.min.js]" ); (function(factory,window){if(typeof define==="function"&&define.amd){define(["leaflet"],factory)}else if(typeof exports==="object"){module.exports=factory(require("leaflet"))}if(typeof window!=="undefined"&&window.L){window.L.Control.MiniMap=factory(L);window.L.control.minimap=function(layer,options){return new window.L.Control.MiniMap(layer,options)}}})(function(L){var MiniMap=L.Control.extend({includes:L.Mixin.Events,options:{position:"bottomright",toggleDisplay:false,zoomLevelOffset:-5,zoomLevelFixed:false,centerFixed:false,zoomAnimation:false,autoToggleDisplay:false,minimized:false,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:false},shadowRectOptions:{color:"#000000",weight:1,clickable:false,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(layer,options){L.Util.setOptions(this,options);this.options.aimingRectOptions.clickable=false;this.options.shadowRectOptions.clickable=false;this._layer=layer},onAdd:function(map){this._mainMap=map;this._container=L.DomUtil.create("div","leaflet-control-minimap");this._container.style.width=this.options.width+"px";this._container.style.height=this.options.height+"px";L.DomEvent.disableClickPropagation(this._container);L.DomEvent.on(this._container,"mousewheel",L.DomEvent.stopPropagation);var mapOptions={attributionControl:false,dragging:!this.options.centerFixed,zoomControl:false,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:map.options.crs};mapOptions=L.Util.extend(this.options.mapOptions,mapOptions);this._miniMap=new L.Map(this._container,mapOptions);this._miniMap.addLayer(this._layer);this._mainMapMoving=false;this._miniMapMoving=false;this._userToggledDisplay=false;this._minimized=false;if(this.options.toggleDisplay){this._addToggleButton()}this._miniMap.whenReady(L.Util.bind(function(){this._aimingRect=L.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap);this._shadowRect=L.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap);this._mainMap.on("moveend",this._onMainMapMoved,this);this._mainMap.on("move",this._onMainMapMoving,this);this._miniMap.on("movestart",this._onMiniMapMoveStarted,this);this._miniMap.on("move",this._onMiniMapMoving,this);this._miniMap.on("moveend",this._onMiniMapMoved,this)},this));return this._container},addTo:function(map){L.Control.prototype.addTo.call(this,map);var center=this.options.centerFixed||this._mainMap.getCenter();this._miniMap.setView(center,this._decideZoom(true));this._setDisplay(this.options.minimized);return this},onRemove:function(map){this._mainMap.off("moveend",this._onMainMapMoved,this);this._mainMap.off("move",this._onMainMapMoving,this);this._miniMap.off("moveend",this._onMiniMapMoved,this);this._miniMap.removeLayer(this._layer)},changeLayer:function(layer){this._miniMap.removeLayer(this._layer);this._layer=layer;this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):undefined;this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px";this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){if(this.options.minimized){return this.options.strings.showText}else{return this.options.strings.hideText}},_createButton:function(html,title,className,container,fn,context){var link=L.DomUtil.create("a",className,container);link.innerHTML=html;link.href="#";link.title=title;var stop=L.DomEvent.stopPropagation;L.DomEvent.on(link,"click",stop).on(link,"mousedown",stop).on(link,"dblclick",stop).on(link,"click",L.DomEvent.preventDefault).on(link,"click",fn,context);return link},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=true;if(!this._minimized){this._minimize()}else{this._restore()}},_setDisplay:function(minimize){if(minimize!==this._minimized){if(!this._minimized){this._minimize()}else{this._restore()}}},_minimize:function(){if(this.options.toggleDisplay){this._container.style.width=this.options.collapsedWidth+"px";this._container.style.height=this.options.collapsedHeight+"px";this._toggleDisplayButton.className+=" minimized-"+this.options.position;this._toggleDisplayButton.title=this.options.strings.showText}else{this._container.style.display="none"}this._minimized=true;this._onToggle()},_restore:function(){if(this.options.toggleDisplay){this._container.style.width=this.options.width+"px";this._container.style.height=this.options.height+"px";this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,"");this._toggleDisplayButton.title=this.options.strings.hideText}else{this._container.style.display="block"}this._minimized=false;this._onToggle()},_onMainMapMoved:function(e){if(!this._miniMapMoving){var center=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=true;this._miniMap.setView(center,this._decideZoom(true));this._setDisplay(this._decideMinimized())}else{this._miniMapMoving=false}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(e){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(e){if(!this.options.centerFixed){var lastAimingRect=this._aimingRect.getBounds();var sw=this._miniMap.latLngToContainerPoint(lastAimingRect.getSouthWest());var ne=this._miniMap.latLngToContainerPoint(lastAimingRect.getNorthEast());this._lastAimingRectPosition={sw:sw,ne:ne}}},_onMiniMapMoving:function(e){if(!this.options.centerFixed){if(!this._mainMapMoving&&this._lastAimingRectPosition){this._shadowRect.setBounds(new L.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne)));this._shadowRect.setStyle({opacity:1,fillOpacity:.3})}}},_onMiniMapMoved:function(e){if(!this._mainMapMoving){this._miniMapMoving=true;this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(false));this._shadowRect.setStyle({opacity:0,fillOpacity:0})}else{this._mainMapMoving=false}},_isZoomLevelFixed:function(){var zoomLevelFixed=this.options.zoomLevelFixed;return this._isDefined(zoomLevelFixed)&&this._isInteger(zoomLevelFixed)},_decideZoom:function(fromMaintoMini){if(!this._isZoomLevelFixed()){if(fromMaintoMini){return this._mainMap.getZoom()+this.options.zoomLevelOffset}else{var currentDiff=this._miniMap.getZoom()-this._mainMap.getZoom();var proposedZoom=this._miniMap.getZoom()-this.options.zoomLevelOffset;var toRet;if(currentDiff>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset){if(this._miniMap.getZoom()>this._lastMiniMapZoom){toRet=this._mainMap.getZoom()+1;this._miniMap.setZoom(this._miniMap.getZoom()-1)}else{toRet=this._mainMap.getZoom()}}else{toRet=proposedZoom}this._lastMiniMapZoom=this._miniMap.getZoom();return toRet}}else{if(fromMaintoMini){return this.options.zoomLevelFixed}else{return this._mainMap.getZoom()}}},_decideMinimized:function(){if(this._userToggledDisplay){return this._minimized}if(this.options.autoToggleDisplay){if(this._mainMap.getBounds().contains(this._miniMap.getBounds())){return true}return false}return this._minimized},_isInteger:function(value){return typeof value==="number"},_isDefined:function(value){return typeof value!=="undefined"},_onToggle:function(){L.Util.requestAnimFrame(function(){L.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this);if(!L.Browser.any3d){L.Util.requestAnimFrame(this._fireToggleEvents,this)}},this)},_fireToggleEvents:function(){L.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var data={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",data);this.fire("toggle",data)}});L.Map.mergeOptions({miniMapControl:false});L.Map.addInitHook(function(){if(this.options.miniMapControl){this.miniMapControl=(new MiniMap).addTo(this)}});return MiniMap},window);} },
            { loader: "script", url: "smk/viewer-leaflet/tool/minimap/tool-minimap-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/minimap/tool-minimap-leaflet.js]" ); include.module("tool-minimap-leaflet",["leaflet","tool-minimap"],function(){"use strict";SMK.TYPE.MinimapTool.addInitializer(function(e){if("mobile"!=e.$device){e.addToStatus($('<div class="smk-spacer">').height(170).get(0));var i=e.$viewer.createBasemapLayer(this.baseMap||"Topographic");new L.Control.MiniMap(i[0],{toggleDisplay:!0}).addTo(e.$viewer.map)}})});} }
        ] }
    );
    include.tag( "tool-pan",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/pan/tool-pan.js", load: function () { console.debug( "[smk/tool/pan/tool-pan.js]" ); include.module("tool-pan",["tool.tool-js"],function(){"use strict";return SMK.TYPE.Tool.define("PanTool")});} }
        ] }
    );
    include.tag( "tool-pan-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/pan/config/tool-pan-config.js", load: function () { console.debug( "[smk/tool/pan/config/tool-pan-config.js]" ); include.module("tool-pan-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"pan"}))});} }
        ] }
    );
    include.tag( "tool-pan-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/pan/tool-pan-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/pan/tool-pan-esri3d.js]" ); include.module("tool-pan-esri3d",["tool-pan","esri3d"],function(){"use strict";SMK.TYPE.PanTool.prototype.afterInitialize.push(function(e){e.$viewer.view.ui.add([{component:new SMK.TYPE.Esri3d.widgets.NavigationToggle({view:e.$viewer.view}),position:"top-right"},{component:new SMK.TYPE.Esri3d.widgets.Compass({view:e.$viewer.view}),position:"top-right"}]),e.$viewer.panHandler.drag.remove(),e.$viewer.panHandler.keyDown.remove()})});} }
        ] }
    );
    include.tag( "tool-pan-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/tool/pan/tool-pan-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/pan/tool-pan-leaflet.js]" ); include.module("tool-pan-leaflet",["tool-pan","leaflet"],function(){"use strict";SMK.TYPE.PanTool.addInitializer(function(e){e.$viewer.map.dragging.enable()})});} }
        ] }
    );
    include.tag( "tool-query",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/query/panel-query-results.html", load:"<tool-panel class=\"smk-query-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-select\"\n            v-bind:disabled=\"busy\"\n            v-if=\"tool.select && layers.length > 1 && command.select\"\n            v-on:click=\"$$emit( 'add-all' )\"\n        >Add all to selection</command-button>\n    </template>\n\n    <feature-list\n        v-bind:layers=\"layers\"\n        v-bind:highlightId=\"highlightId\"\n        v-on:active=\"$$emit( 'active', $event )\"\n        v-on:hover=\"$$emit( 'hover', $event )\"\n    ></feature-list>\n\n</tool-panel>" },
            { loader: "template", url: "smk/tool/query/panel-query.html", load:"<tool-panel class=\"smk-query-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-search\"\n            v-bind:disabled=\"busy\"\n            v-on:click=\"$$emit( 'execute' )\"\n        >Search</command-button>\n\n        <toggle-button class=\"smk-within-extent\"\n            v-if=\"command.within\"\n            v-bind:value=\"within\"\n            v-on:change=\"$$emit( 'change', { within: $event } )\"\n        >Within View</toggle-button>\n    </template>\n\n    <div class=\"smk-parameters\">\n        <component class=\"smk-parameter\"\n            v-for=\"( parameter, i ) in parameters\"\n            v-bind:key=\"parameter.id\"\n            v-bind:is=\"parameter.component\"\n            v-bind=\"parameter.prop\"\n            v-on:input=\"$$emit( 'parameter-input',      { index: i, value: $event.value } )\"\n            v-on:mounted=\"$$emit( 'parameter-mounted',  { index: i } )\"\n            v-on:reset=\"$$emit( 'parameter-reset',      { index: i } )\"\n            v-on:change=\"$$emit( 'parameter-change',    { index: i, active: $event.active } )\"\n            v-on:pickDown=\"$emit( 'pickDown' )\"\n            v-on:pickUp=\"$emit( 'pickUp' )\"\n            v-on:execute=\"$$emit( 'execute' )\"\n        ></component>\n    </div>\n\n</tool-panel>" },
            { loader: "script", url: "smk/tool/query/tool-query-feature.js", load: function () { console.debug( "[smk/tool/query/tool-query-feature.js]" ); include.module("tool-query.tool-query-feature-js",["component-tool-panel-feature","tool.tool-panel-feature-js"],function(e){"use strict";return SMK.TYPE.Tool.define("QueryFeatureTool",function(){SMK.TYPE.ToolPanel.call(this,"tool-panel-feature"),SMK.TYPE.ToolPanelFeature.call(this,function(e){return e.$viewer.queried[this.instance]}),this.parentId="QueryResultsTool"},function(o){var i=this;this.title=o.$viewer.query[this.instance].title;var r=[];i.changedActive(function(){i.active?(i.featureSet.highlight(),Vue.nextTick(function(){!(o.getToolById(i.parentId).visible=!0)===i.command.zoom&&i.featureSet.zoomTo(r[i.resultPosition])})):i.featureSet.pick()}),o.on(this.id,{"previous-panel":function(){i.featureSet.pick()},zoom:function(e){i.featureSet.zoomTo(r[i.resultPosition])},select:function(e){var t=i.featureSet.get(r[i.resultPosition]);o.$viewer.selected.add(t.layerId,[t])},directions:console.log,"move-previous":function(e){i.featureSet.pick(r[(i.resultPosition+i.resultCount-1)%i.resultCount]),!1===i.command.zoom&&i.featureSet.zoomTo(r[i.resultPosition])},"move-next":function(e){i.featureSet.pick(r[(i.resultPosition+1)%i.resultCount]),!1===i.command.zoom&&i.featureSet.zoomTo(r[i.resultPosition])}}),i.featureSet.pickedFeature(function(e){if(!e.feature)return i.feature=null,void(i.layer=null);i.active=!0;var t=o.$viewer.layerId[e.feature.layerId];i.layer={id:e.feature.layerId,title:t.config.title,attributes:t.config.attributes&&t.config.attributes.map(function(e){return{visible:e.visible,title:e.title,name:e.name,format:e.format,value:e.value}})},i.feature={id:e.feature.id,title:e.feature.title,properties:Object.assign({},e.feature.properties)},i.setAttributeComponent(t,e.feature),i.resultCount=i.featureSet.getStats().featureCount,i.resultPosition=r.indexOf(e.feature.id),!1!==i.command.zoom&&o.$viewer.panToFeature(e.feature)}),i.featureSet.addedFeatures(function(e){r=Object.keys(i.featureSet.featureSet)})})});} },
            { loader: "script", url: "smk/tool/query/tool-query-parameters.js", load: function () { console.debug( "[smk/tool/query/tool-query-parameters.js]" ); include.module("tool-query.tool-query-parameters-js",["component-toggle-button","component-parameter","component-command-button","tool-query.panel-query-html"],function(e){"use strict";return Vue.component("query-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("query-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-query.panel-query-html"],props:["description","parameters","within","command"]}),SMK.TYPE.Tool.define("QueryParametersTool",function(){SMK.TYPE.ToolWidget.call(this,"query-widget"),SMK.TYPE.ToolPanel.call(this,"query-panel"),this.defineProp("description"),this.defineProp("parameters"),this.defineProp("within"),this.defineProp("command")},function(t){var r=this;if(!this.instance)throw new Error("query tool needs an instance");if(!(this.instance in t.$viewer.query))throw new Error('"'+this.instance+'" is not a defined query');function e(){r.parameters[0].focus()}this.featureSet=t.$viewer.queried[this.instance],this.featureSet.instance=this.instance,this.query=t.$viewer.query[this.instance],this.title=this.query.title,this.description=this.query.description,this.parameters=this.query.getParameters(t.$viewer),this.query.canUseWithExtent(t.$viewer)||(this.within=null),r.changedActive(function(){if(r.active&&(e(),SMK.UTIL.makeDelayedCall(function(){e()},{delay:100})(),r.onActivate)){switch(r.onActivate){case"execute":t.emit(r.id,"execute")}r.onActivate=null}}),r.changedGroup(function(){r.group||(r.featureSet.clear(),r.featureSet.pick())}),t.on(this.id,{"parameter-input":function(e){r.parameters[e.index].prop.value=e.value},"parameter-mounted":function(e){r.parameters[e.index].mounted()},"parameter-reset":function(e){r.parameters[e.index].prop.value=r.query.parameters[e.index].value},"parameter-change":function(e){t.setEditFocus(e.active)},reset:function(e){r.featureSet.clear(),r.showStatusMessage(),r.parameters.forEach(function(e,t){e.prop.value=r.query.parameters[t].value})},execute:function(e){r.featureSet.clear(),r.busy=!0,r.showStatusMessage("Searching for features","progress");var n={};return r.parameters.forEach(function(e,t){n[e.prop.id]=$.extend({},e.prop)}),SMK.UTIL.resolved().then(function(){return r.query.queryLayer(n,{within:r.within},t.$viewer)}).then(function(t){return r.showStatusMessage(),function t(n,r,i){return SMK.UTIL.makePromise(function(e,t){try{if(!n())return e(!1);r(),setTimeout(function(){e(!0)},i)}catch(e){return t(e)}}).then(function(e){if(e)return t(n,r)})}(function(){return 0<t.length},function(){var e=t.splice(0,50);r.featureSet.add(r.query.layerId,e)},5)}).catch(function(e){console.warn(e),r.showStatusMessage("No features found","warning")}).finally(function(){r.busy=!1})},"add-all":function(e){r.layers.forEach(function(e){t.$viewer.selected.add(e.id,e.features.map(function(e){return r.featureSet.get(e.id)}))})},change:function(e,t){Object.assign(r,e),t.$forceUpdate()}})})});} },
            { loader: "script", url: "smk/tool/query/tool-query-results.js", load: function () { console.debug( "[smk/tool/query/tool-query-results.js]" ); include.module("tool-query.tool-query-results-js",["tool.tool-base-js","tool.tool-feature-list-js","component-feature-list","component-command-button","tool-query.panel-query-results-html"],function(e){"use strict";return Vue.component("query-results-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-query.panel-query-results-html"],props:["tool","layers","highlightId","command"]}),SMK.TYPE.Tool.define("QueryResultsTool",function(){SMK.TYPE.ToolPanel.call(this,"query-results-panel"),SMK.TYPE.ToolFeatureList.call(this,function(e){return e.$viewer.queried[this.instance]}),this.defineProp("tool"),this.defineProp("command"),this.tool={},this.command={},this.parentId="QueryParametersTool"},function(e){var o=this;this.title=e.$viewer.query[this.instance].title,this.tool=e.getToolTypesAvailable(),e.on(this.id,{"previous-panel":function(){o.featureSet.clear()}}),o.featureSet.addedFeatures(function(e){var t=o.featureSet.getStats();o.active=!0,o.showStatusMessage("<div>Found "+SMK.UTIL.grammaticalNumber(t.featureCount,null,"a feature","{} features")+"</div>")})})});} },
            { loader: "style", url: "smk/tool/query/tool-query.css", load: "/* [smk/tool/query/tool-query.css] */\n.smk-sidepanel .smk-query-panel .smk-description{font-size:14px;font-style:italic;margin-top:5px;margin-bottom:5px;text-align:center}.smk-query-panel .smk-commands{order:1}.smk-query-panel .smk-commands .smk-search{order:60}.smk-query-panel .smk-commands .smk-within-extent{order:70}.smk-sidepanel .smk-query-panel .smk-parameter .smk-parameter-reset{width:20px;height:20px;font-size:20px;position:absolute;right:-8px;bottom:4px}" },
            { loader: "script", url: "smk/tool/query/tool-query.js", load: function () { console.debug( "[smk/tool/query/tool-query.js]" ); include.module("tool-query",["tool-query.tool-query-parameters-js","tool-query.tool-query-results-js","tool-query.tool-query-feature-js"],function(o){"use strict";return SMK.TYPE.Tool.defineComposite([o["tool-query.tool-query-parameters-js"],o["tool-query.tool-query-results-js"],o["tool-query.tool-query-feature-js"]])});} }
        ] }
    );
    include.tag( "tool-query-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/query/config/tool-query-config.js", load: function () { console.debug( "[smk/tool/query/config/tool-query-config.js]" ); include.module("tool-query-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js","tool-config.tool-panel-feature-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"](o["tool-config.tool-panel-feature-config-js"]({type:"query",instance:!0,order:5,within:!1,command:{within:!0,select:!0}})))))});} }
        ] }
    );
    include.tag( "tool-query-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/query/tool-query-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/query/tool-query-esri3d.js]" ); include.module("tool-query-esri3d",["esri3d","types-esri3d","util-esri3d","tool-query","feature-list-esri3d"],function(e){"use strict";SMK.TYPE.Esri3d;SMK.TYPE.QueryTool.prototype.styleFeature=function(e){return Object.assign({strokeColor:"black",strokeWidth:5,strokeOpacity:.9,fillColor:"white",fillOpacity:.5},this.style,e)},SMK.TYPE.QueryTool.prototype.afterInitialize.push(e["feature-list-esri3d"])});} }
        ] }
    );
    include.tag( "tool-query-leaflet",
        { loader: "group", tags: [
            { loader: "style", url: "smk/viewer-leaflet/tool/query/tool-query-leaflet.css", load: "/* [smk/viewer-leaflet/tool/query/tool-query-leaflet.css] */\n.smk-identify-cluster{background-color:#fff;border:1px solid #a9a9a9;box-shadow:0 3px 14px rgba(0,0,0,.4)}.smk-identify-cluster div{height:100%;display:flex;justify-content:center;align-items:center}.smk-identify-cluster-one{background-color:rgba(100%,100%,100%,.7);border-radius:20px;width:20px;height:20px;margin-top:-11px;margin-left:-11px}.smk-identify-cluster-many{border-radius:24px;width:24px;height:24px;margin-top:-13px;margin-left:-13px}" },
            { loader: "script", url: "smk/viewer-leaflet/tool/query/tool-query-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/query/tool-query-leaflet.js]" ); include.module("tool-query-leaflet",["leaflet","tool-query","tool-leaflet","tool-leaflet.tool-feature-list-clustering-leaflet-js"],function(l){"use strict";SMK.TYPE.QueryResultsTool.addInitializer(function(){this.styleFeature=function(){var l=this;return function(){return Object.assign({color:"black",weight:3,opacity:.8,fillColor:"white",fillOpacity:.5},l.style)}}}),SMK.TYPE.QueryResultsTool.addInitializer(l["tool-leaflet.tool-feature-list-clustering-leaflet-js"])});} }
        ] }
    );
    include.tag( "tool-query-place-config",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-scale",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/scale/scale.html", load:"<div class=\"smk-scale\">\n\n    <div class=\"smk-denom\"\n        v-if=\"scaleDenom\"\n    >1 : {{ scaleDenom | formatNumber( 3 ) }}<span v-if=\"zoomLevel\"> ({{ zoomLevel.toFixed( 1 ) }})</span></div>\n\n    <div class=\"smk-ruler\">\n        <div\n            class=\"smk-sections\"\n            v-if=\"rulerSectionWidth\"\n        ><span\n            class=\"smk-upper\"\n            v-bind:style=\"{ width: rulerSectionWidth + 'px' }\"\n        ></span><span\n            class=\"smk-lower\"\n            v-bind:style=\"{ width: rulerSectionWidth + 'px' }\"\n        ></span><span\n            class=\"smk-upper\"\n            v-bind:style=\"{ width: rulerSectionWidth + 'px' }\"\n        ></span><span\n            class=\"smk-lower\"\n            v-bind:style=\"{ width: rulerSectionWidth + 'px' }\"\n        ></span></div>\n\n        <div class=\"smk-labels\"\n            v-if=\"rulerLength\"\n        >\n            <span class=\"smk-first\">0</span>\n            <span class=\"smk-middle\">{{ ( rulerLength / 2 ) | formatNumber( 2 ) }}</span>\n            <span class=\"smk-last\">{{ rulerLength | formatNumber( 2 ) }}{{ rulerUnit }}</span>\n        </div>\n    </div>\n\n</div>" },
            { loader: "style", url: "smk/tool/scale/tool-scale.css", load: "/* [smk/tool/scale/tool-scale.css] */\n.smk-scale{color:#000;font-weight:700;font-size:12px;text-shadow:1px 0 0 #fff,0 -1px 0 #fff,0 1px 0 #fff,-1px 0 0 #fff;text-align:right;background-color:transparent;cursor:default;margin-top:5px}.smk-scale .smk-denom{pointer-events:all}.smk-scale .smk-ruler{display:flex;flex-direction:column}.smk-scale .smk-ruler .smk-sections{border:1px solid #000;border-radius:2px;height:10px;line-height:0}.smk-scale .smk-ruler .smk-sections span{display:inline-block;background-color:#fff;height:5px;margin:0;padding:0}.smk-scale .smk-ruler .smk-sections .smk-upper{border-top:5px solid #000}.smk-scale .smk-ruler .smk-sections .smk-lower{border-bottom:5px solid #000}.smk-scale .smk-ruler .smk-labels{display:flex;justify-content:space-between}.smk-scale .smk-ruler .smk-labels .smk-first{flex-basis:50%;text-align:left}.smk-scale .smk-ruler .smk-labels .smk-middle{text-align:center}.smk-scale .smk-ruler .smk-labels .smk-last{flex-basis:50%;text-align:right}" },
            { loader: "script", url: "smk/tool/scale/tool-scale.js", load: function () { console.debug( "[smk/tool/scale/tool-scale.js]" ); include.module("tool-scale",["tool.tool-js","tool-scale.scale-html"],function(e){"use strict";return SMK.TYPE.Tool.define("ScaleTool",function(){this.defineProp("showFactor"),this.defineProp("showBar"),this.defineProp("showZoom")},function(r){var l=this;this.model={scaleDenom:null,rulerSectionWidth:null,rulerLength:null,rulerUnit:null,zoomLevel:null},this.vm=new Vue({el:r.addToStatus(e["tool-scale.scale-html"]),data:this.model}),r.$viewer.changedView(function(e){l.refresh()}),this.refresh=function(){this.model.scaleDenom=null,this.model.rulerSectionWidth=null,this.model.rulerLength=null;var e,l,o=r.$viewer.getView();if(o&&(!1!==this.showFactor&&o.scale&&(this.model.scaleDenom=o.scale),!1!==this.showZoom&&(this.model.zoomLevel=o.zoom),!1!==this.showBar&&o.metersPerPixel)){var t=(l=200*o.metersPerPixel*1e3,s[1*(l+"")[0]]*Math.pow(10,(Math.floor(l)+"").length-1));this.model.rulerSectionWidth=t/1e3/o.metersPerPixel/4;var i=(e=t)<=5e5?{value:e/1e3,unit:"m"}:{value:e/1e3/1e3,unit:"km"};this.model.rulerLength=i.value,this.model.rulerUnit=i.unit}};var s=[null,1,2,3,5,5,5,5,10,10];l.refresh()})});} }
        ] }
    );
    include.tag( "tool-scale-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/scale/config/tool-scale-config.js", load: function () { console.debug( "[smk/tool/scale/config/tool-scale-config.js]" ); include.module("tool-scale-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"scale",order:2,showFactor:!0,showBar:!0,showZoom:!1}))});} }
        ] }
    );
    include.tag( "tool-scale-esri3d",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-scale-leaflet",
        { loader: "group", tags: [

        ] }
    );
    include.tag( "tool-search",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/search/location-address.html", load:"<div>\n    <div class=\"smk-address\" v-if=\"feature.properties\">\n        <div class=\"smk-intersection\" v-if=\"feature.properties.intersectionName\">\n            <!-- <div>Intersection:</div> -->\n            <span class=\"smk-intersection-name\">{{ feature.properties.intersectionName }}</span>\n        </div>\n        <div class=\"smk-street\" v-if=\"feature.properties.streetName\">\n            <!-- <div>Street:</div> -->\n            <span class=\"smk-civic-number\">{{ feature.properties.civicNumber }}</span>\n            <span class=\"smk-street-name\">{{ feature.properties.streetName }}</span>\n            <span class=\"smk-street-qualifier\">{{ feature.properties.streetQualifier }}</span>\n            <span class=\"smk-street-type\">{{ feature.properties.streetType }}</span>\n        </div>\n        <div class=\"smk-locality\" v-if=\"feature.properties.localityName\">\n            <span class=\"smk-locality-name\">{{ feature.properties.localityName }}</span>\n            <span class=\"smk-locality-type\" v-if=\"feature.properties.localityType != 'Unknown'\">({{ feature.properties.localityType }})</span>\n        </div>\n    </div>\n\n    <div class=\"smk-coordinate\" v-if=\"feature.geometry\">\n        <!-- <div >Location:</div> -->\n        <span class=\"smk-ordinate\">\n            <label>latitude<div>{{ feature.geometry.coordinates[ 1 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class=\"smk-ordinate\">\n            <label>longitude<div>{{ feature.geometry.coordinates[ 0 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n</div>" },
            { loader: "template", url: "smk/tool/search/location-title.html", load:"<div class=\"smk-location-title\">\n    <div class=\"smk-intersection\" v-if=\"intersectionName\">\n        <span class=\"smk-intersection-name\">{{ intersectionName }}</span>\n    </div>\n    <div class=\"smk-street\" v-else-if=\"streetName\">\n        <span class=\"smk-civic-number\">{{ civicNumber }}</span>\n        <span class=\"smk-street-name\">{{ streetName }}</span>\n        <span class=\"smk-street-qualifier\">{{ streetQualifier }}</span>\n        <span class=\"smk-street-type\">{{ streetType }}</span>\n    </div>\n    <div class=\"smk-locality\" v-else-if=\"localityName\">\n        <span class=\"smk-locality-name\">{{ localityName }}</span>\n        <!-- <span class=\"smk-locality-type\" v-if=\"localityType != 'Unknown'\">({{ localityType }})</span> -->\n    </div>\n    <div v-else>\n        (unknown)\n    </div>\n</div>" },
            { loader: "asset", url: "smk/tool/search/marker-icon-yellow.png" },
            { loader: "asset", url: "smk/tool/search/marker-shadow.png" },
            { loader: "template", url: "smk/tool/search/panel-search-location.html", load:"<tool-panel class=\"smk-search-location-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-identify\"\n            v-if=\"command.identify && tool.identify\"\n            v-on:click=\"$$emit( 'identify' )\"\n        >Identify features</command-button>\n\n        <command-button class=\"smk-measure\"\n            v-if=\"command.measure && tool.measure\"\n            v-on:click=\"$$emit( 'measure' )\"\n        >Start measurement</command-button>\n\n        <command-button class=\"smk-directions\"\n            v-if=\"command.directions && tool.directions\"\n            v-on:click=\"$$emit( 'directions' )\"\n        >Directions to here</command-button>\n    </template>\n\n    <component class=\"smk-address\"\n        v-bind:is=\"locationComponent\"\n    ></component>\n</tool-panel>\n" },
            { loader: "template", url: "smk/tool/search/panel-search.html", load:"<tool-panel class=\"smk-search-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n    v-if=\"results && results.length > 0\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <!-- <span class=\"smk-command\"\n            v-bind:class=\"{ 'smk-disabled': isEmpty() }\"\n            v-on:click=\"$$emit( 'clear' )\"\n        >Clear results</span>\n\n        <span class=\"smk-command\"\n            v-bind:class=\"{ 'smk-disabled': isEmpty() }\"\n            v-on:click=\"$$emit( 'zoom' )\"\n        >Zoom to results</span> -->\n    </template>\n\n    <div class=\"smk-search-result smk-item\"\n        v-if=\"!isEmpty()\"\n        v-for=\"result in results\"\n        v-on:mouseenter=\"$$emit( 'hover', { result: result } )\"\n        v-on:mouseleave=\"$$emit( 'hover', { result: null } )\"\n        v-on:click=\"$$emit( 'pick', { result: result } )\"\n        v-bind:class=\"{ 'smk-highlighted': result.id == highlightId }\"\n    >\n        <div class=\"smk-address\" v-if=\"result.properties.fullAddress\">\n            <div v-bind:class=\"'smk-precision-' + result.properties.matchPrecision.toLowerCase()\">\n                <div class=\"smk-intersection\" v-if=\"result.properties.intersectionName\">\n                    <span class=\"smk-intersection-name\">{{ result.properties.intersectionName }}</span>\n                </div>\n                <div class=\"smk-street\" v-if=\"result.properties.streetName\">\n                    <span class=\"smk-civic-number\">{{ result.properties.civicNumber }}</span>\n                    <span class=\"smk-street-name\">{{ result.properties.streetName }}</span>\n                    <span class=\"smk-street-qualifier\">{{ result.properties.streetQualifier }}</span>\n                    <span class=\"smk-street-type\">{{ result.properties.streetType }}</span>\n                </div>\n                <div class=\"smk-locality\" v-if=\"result.properties.localityName\">\n                    <span class=\"smk-locality-name\">{{ result.properties.localityName }}</span>\n                    <span class=\"smk-locality-type\" v-if=\"result.properties.localityType != 'Unknown'\">({{ result.properties.localityType }})</span>\n                </div>\n            </div>\n        </div>\n\n        <i class=\"smk-highlight material-icons smk-command smk-icon\"\n        >speaker_notes</i>\n    </div>\n</tool-panel>" },
            { loader: "template", url: "smk/tool/search/popup-search.html", load:"<div class=\"smk-search-popup\" v-if=\"feature\">\n    <div class=\"smk-address\" v-if=\"feature.properties.fullAddress\">\n        <div v-bind:class=\"'smk-precision-' + feature.properties.matchPrecision.toLowerCase()\">\n            <div class=\"smk-intersection\" v-if=\"feature.properties.intersectionName\">\n                <span class=\"smk-intersection-name\">{{ feature.properties.intersectionName }}</span>\n            </div>\n            <div class=\"smk-street\" v-if=\"feature.properties.streetName\">\n                <span class=\"smk-civic-number\">{{ feature.properties.civicNumber }}</span>\n                <span class=\"smk-street-name\">{{ feature.properties.streetName }}</span>\n                <span class=\"smk-street-qualifier\">{{ feature.properties.streetQualifier }}</span>\n                <span class=\"smk-street-type\">{{ feature.properties.streetType }}</span>\n            </div>\n            <div class=\"smk-locality\" v-if=\"feature.properties.localityName\">\n                <span class=\"smk-locality-name\">{{ feature.properties.localityName }}</span>\n                <span class=\"smk-locality-type\" v-if=\"feature.properties.localityType != 'Unknown'\">({{ feature.properties.localityType }})</span>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"smk-coordinate\" v-if=\"feature.geometry\">\n        <span class=\"smk-ordinate\">\n            <label>latitude<div>{{ feature.geometry.coordinates[ 1 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n        <span class=\"smk-ordinate\">\n            <label>longitude<div>{{ feature.geometry.coordinates[ 0 ] | formatNumber( 6, 3 ) }}</div></label>\n        </span>\n    </div>\n\n    <div class=\"smk-commands\">\n        <span class=\"smk-command\" v-if=\"tool.directions\" v-on:click=\"directionsToFeature( feature )\">Directions to here</span>\n    </div>\n</div>\n" },
            { loader: "asset", url: "smk/tool/search/star-icon-yellow.png" },
            { loader: "script", url: "smk/tool/search/tool-search-list.js", load: function () { console.debug( "[smk/tool/search/tool-search-list.js]" ); include.module("tool-search.tool-search-list-js",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-search.widget-search-html","tool-search.panel-search-html"],function(e){"use strict";var s;return Vue.component("search-widget",{extends:SMK.COMPONENT.ToolWidgetBase,template:e["tool-search.widget-search-html"],props:["initialSearch","results","highlightId","showPanel"],data:function(){return{search:null}},watch:{initialSearch:function(e){this.search=e}},computed:{classes:function(){var e={};return e["smk-"+this.type+"-tool"]=!0,Object.assign(e,{"smk-tool-active":this.active,"smk-tool-visible":this.visible,"smk-tool-enabled":this.enabled})}},methods:{widgetWidth:function(){return this.$refs.widget.clientWidth},focus:function(){var e=this.$refs["search-input"];this.active||e.focus(),e.setSelectionRange(0,0),e.setSelectionRange(0,e.value.length)},isEmpty:function(){return!this.results||0==this.results.length}}}),Vue.component("search-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-search.panel-search-html"],props:["results","highlightId"],methods:{isEmpty:function(){return!this.results||0==this.results.length}},data:function(){return{search:null}}}),SMK.TYPE.Tool.define("SearchListTool",function(){SMK.TYPE.ToolWidget.call(this,"search-widget"),SMK.TYPE.ToolPanel.call(this,"search-panel"),this.defineProp("results"),this.defineProp("highlightId"),this.defineProp("initialSearch"),this.results=[]},function(t){var i=this;t.$container.classList.add("smk-tool-search"),this.changedActive(function(){i.active?SMK.HANDLER.get(i.id,"activated")(t,i):SMK.HANDLER.get(i.id,"deactivated")(t,i)}),t.on(this.id,{activate:function(e){e.toggle||(i.active=!0)},"input-change":function(e){t.$viewer.searched.clear(),i.busy=!0,function(e){s&&s.abort();var t={ver:1.2,maxResults:10,outputSRS:4326,addressString:e,autoComplete:!0};return SMK.UTIL.resolved().then(function(){return s=$.ajax({timeout:1e4,dataType:"json",url:"https://geocoder.api.gov.bc.ca/addresses.geojson",data:t})}).then(function(e){return $.map(e.features,function(e){if(e.geometry.coordinates&&"BC"!=e.properties.fullAddress)return e.properties.intersectionName?e.title=e.properties.intersectionName:e.properties.streetName?e.title=[e.properties.civicNumber,e.properties.streetName,e.properties.streetQualifier,e.properties.streetType].filter(function(e){return!!e}).join(" "):e.properties.localityName&&(e.title=e.properties.localityName),e})})}(e.text).then(function(e){i.active=!0,t.$viewer.searched.add("search",e,"fullAddress"),i.busy=!1}).catch(function(e){console.warn("search failure:",e)})},hover:function(e){t.$viewer.searched.highlight(e.result?[e.result.id]:[])},pick:function(e){t.$viewer.searched.pick(null),t.$viewer.searched.pick(e.result.id),i.showPanel||(i.active=!1,i.initialSearch=e.result.title)},clear:function(e){t.$viewer.searched.clear(),i.initialSearch=" ",Vue.nextTick(function(){i.initialSearch=""})}}),t.$viewer.searched.addedFeatures(function(e){i.results=e.features}),t.$viewer.searched.pickedFeature(function(e){i.highlightId=e.feature&&e.feature.id}),t.$viewer.searched.clearedFeatures(function(e){i.results=[]})})});} },
            { loader: "script", url: "smk/tool/search/tool-search-location.js", load: function () { console.debug( "[smk/tool/search/tool-search-location.js]" ); include.module("tool-search.tool-search-location-js",["tool.tool-panel-js","tool-search.panel-search-location-html","tool-search.location-title-html","tool-search.location-address-html"],function(n){"use strict";return Vue.component("search-location-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:n["tool-search.panel-search-location-html"],props:["feature","tool","command","locationComponent"]}),SMK.TYPE.Tool.define("SearchLocationTool",function(){SMK.TYPE.ToolPanel.call(this,"search-location-panel"),this.defineProp("feature"),this.defineProp("tool"),this.defineProp("command"),this.defineProp("locationComponent"),this.feature={},this.tool={},this.command={},this.locationComponent={},this.parentId="SearchListTool"},function(o){var e=this;this.tool=o.getToolTypesAvailable(),e.changedActive(function(){e.active?o.$viewer.searched.highlight():o.$viewer.searched.pick()}),o.on(this.id,{directions:function(){o.$tool.directions.active=!0,o.$tool.directions.activating.then(function(){return o.$tool.directions.startAtCurrentLocation()}).then(function(){return SMK.UTIL.findNearestSite({latitude:e.feature.geometry.coordinates[1],longitude:e.feature.geometry.coordinates[0]}).then(function(t){return o.$tool.directions.addWaypoint(t)}).catch(function(t){return console.warn(t),o.$tool.directions.addWaypoint()})})}}),o.$viewer.searched.pickedFeature(function(t){e.locationComponent={name:"location",template:n["tool-search.location-address-html"],data:function(){return{feature:t.feature}}},e.titleComp={name:"location-title",template:n["tool-search.location-title-html"],data:function(){return Object.assign({intersectionName:null},t.feature.properties)}},t.feature&&e.showLocation&&(e.active=!0)})})});} },
            { loader: "style", url: "smk/tool/search/tool-search.css", load: "/* [smk/tool/search/tool-search.css] */\n.smk-tool-search .smk-toolbar{min-width:var(--panel-width)}.smk-search-panel .smk-search-result{font-size:12px;cursor:pointer;padding:5px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.smk-search-panel .smk-search-result.smk-highlighted{font-weight:700}.smk-search-panel .smk-search-result .smk-highlight{opacity:0;margin:-5px}.smk-search-panel .smk-search-result:hover .smk-highlight{opacity:.3}.smk-search-panel .smk-search-result.smk-highlighted .smk-highlight{opacity:1}.smk-tool.smk-search-tool{position:relative;width:100%;display:flex;justify-content:flex-start;align-items:stretch}.smk-tool.smk-search-tool input{border:0;align-self:stretch;padding-left:4px;margin:2px;border-radius:2px;width:100%;font-size:16px}.smk-tool.smk-search-tool input:focus{outline:0}.smk-tool.smk-search-tool .smk-clear-search{position:absolute;right:28px;top:2px}.smk-sidepanel .smk-search-location-panel .smk-body .smk-address{font-weight:700}.smk-sidepanel .smk-search-location-panel .smk-body .smk-coordinate{margin-top:5px}.smk-tool.smk-search-tool .smk-search-dropdown{position:absolute;top:calc(var(--toolbar-height) + 0px);left:0;background-color:#fff;border-radius:3px}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item{border-radius:0;padding:7px 5px}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item:last-child{border-bottom:none}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-intersection,.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-locality,.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-street{display:inline}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-precision-street .smk-street{font-weight:700}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-precision-locality .smk-locality{font-weight:700}.smk-tool.smk-search-tool .smk-search-dropdown .smk-item .smk-precision-intersection .smk-intersection{font-weight:700}" },
            { loader: "script", url: "smk/tool/search/tool-search.js", load: function () { console.debug( "[smk/tool/search/tool-search.js]" ); include.module("tool-search",["tool-search.tool-search-list-js","tool-search.tool-search-location-js"],function(o){"use strict";return SMK.TYPE.Tool.defineComposite([o["tool-search.tool-search-list-js"],o["tool-search.tool-search-location-js"]])});} },
            { loader: "template", url: "smk/tool/search/widget-search.html", load:"<div class=\"smk-tool\" ref=\"widget\"\n    v-bind:class=\"classes\" \n>\n    <input type=\"text\" placeholder=\"Search for location\" ref=\"search-input\"\n        v-model.trim=\"search\"\n        v-on:keyup=\"$$emit( 'input-change', { text: search } )\"\n        v-on:click=\"$$emit( 'activate', {} )\"\n        v-on:focus=\"focus()\"\n    >\n\n    <div class=\"smk-clear-search\"\n        v-on:click=\"$$emit( 'clear' )\"\n        v-if=\"search || !isEmpty\"\n        title=\"Clear results\"\n    >\n        <i class=\"material-icons\">clear</i>\n    </div>\n\n    <div \n        v-on:click=\"$$emit( 'activate', { toggle: true } ); focus()\"\n        v-bind:title=\"title\"\n    >\n        <i class=\"material-icons\">{{ icon }}</i>\n    </div>\n\n    <div class=\"smk-search-dropdown\"\n        v-if=\"!showPanel && active\"\n        v-bind:style=\"{ width: widgetWidth() + 'px' }\"\n    >\n        <div class=\"smk-search-result smk-item\"\n            v-if=\"!isEmpty()\"\n            v-for=\"result in results\"\n            v-on:mouseenter=\"$$emit( 'hover', { result: result } )\"\n            v-on:mouseleave=\"$$emit( 'hover', { result: null } )\"\n            v-on:click=\"$$emit( 'pick', { result: result } )\"\n            v-bind:class=\"{ 'smk-highlighted': result.id == highlightId }\"\n        >\n            <div class=\"smk-address\" v-if=\"result.properties.fullAddress\">\n                <div v-bind:class=\"'smk-precision-' + result.properties.matchPrecision.toLowerCase()\">\n                    <div class=\"smk-intersection\" v-if=\"result.properties.intersectionName\">\n                        <span class=\"smk-intersection-name\">{{ result.properties.intersectionName }}</span>\n                    </div>\n                    <div class=\"smk-street\" v-if=\"result.properties.streetName\">\n                        <span class=\"smk-civic-number\">{{ result.properties.civicNumber }}</span>\n                        <span class=\"smk-street-name\">{{ result.properties.streetName }}</span>\n                        <span class=\"smk-street-qualifier\">{{ result.properties.streetQualifier }}</span>\n                        <span class=\"smk-street-type\">{{ result.properties.streetType }}</span>\n                    </div>\n                    <div class=\"smk-locality\" v-if=\"result.properties.localityName\">\n                        <span class=\"smk-locality-name\">{{ result.properties.localityName }}</span>\n                        <span class=\"smk-locality-type\" v-if=\"result.properties.localityType != 'Unknown'\">({{ result.properties.localityType }})</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>" }
        ] }
    );
    include.tag( "tool-search-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/search/config/tool-search-config.js", load: function () { console.debug( "[smk/tool/search/config/tool-search-config.js]" ); include.module("tool-search-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"search",enabled:!0,order:2,position:"toolbar",icon:"search",title:"Search for Location",showPanel:!0,showLocation:!0,command:{identify:!0,measure:!0,directions:!0}}))))});} }
        ] }
    );
    include.tag( "tool-search-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/search/tool-search-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/search/tool-search-esri3d.js]" ); include.module("tool-search-esri3d",["esri3d","types-esri3d","util-esri3d","tool-search"],function(e){"use strict";var c={INTERSECTION:15,STREET:13,BLOCK:14,CIVIC_NUMBER:15,_OTHER_:12},s=SMK.TYPE.Esri3d,r=include.option("baseUrl")+"images/tool/search",n={type:"point-3d",symbolLayers:[{type:"icon",size:"41px",anchor:"bottom",resource:{href:r+"/marker-shadow.png"}},{type:"icon",size:"41px",anchor:"bottom",resource:{href:r+"/marker-icon-yellow.png"}}]},h={type:"point-3d",symbolLayers:[{type:"icon",size:"30px",anchor:"center",resource:{href:r+"/star-icon-yellow.png"}}]},d={type:"point-3d",symbolLayers:[{type:"icon",size:"40px",anchor:"center",resource:{href:r+"/star-icon-yellow.png"}}]};SMK.TYPE.SearchTool.prototype.afterInitialize.push(function(a){var o=this;function t(e,r){o.searchLayer["normal"==r?"add":"remove"](e.graphic.normal),o.searchLayer["highlight"==r?"add":"remove"](e.graphic.highlight),o.searchLayer["pick"==r?"add":"remove"](e.graphic.pick)}o.searchLayer=new s.layers.GraphicsLayer({visible:!1}),a.$viewer.map.add(o.searchLayer),this.changedActive(function(){o.visible=o.active}),o.changedVisible(function(){o.searchLayer.visible=o.visible}),a.on(this.id,{zoom:function(){a.$viewer.view.goTo(o.searchLayer.graphics)}}),a.$viewer.handlePick(3,function(e){if(o.active)return a.$viewer.view.hitTest(e.screen).then(function(e){if(0!=e.results.length&&e.results[0].graphic)return a.$viewer.searched.pick(e.results[0].graphic.attributes.id),!0})}),a.$viewer.searched.addedFeatures(function(e){e.features.forEach(function(e){var r={type:"point",latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0]},i=new s.Graphic({geometry:r,symbol:h,attributes:{id:e.id}});o.searchLayer.add(i);var a=new s.Graphic({geometry:r,symbol:d}),t=new s.Graphic({geometry:r,symbol:n});e.graphic={normal:i,highlight:a,pick:t}})}),a.$viewer.searched.pickedFeature(function(e){if(e.was&&t(e.was,"normal"),e.feature){t(e.feature,"pick");var r=e.feature.graphic.normal.geometry,i=c[e.feature.properties.matchPrecision]||c._OTHER_;a.$viewer.view.goTo({target:r,zoom:i})}}),a.$viewer.searched.highlightedFeatures(function(e){e.features&&e.features.forEach(function(e){t(e,a.$viewer.searched.isPicked(e.id)?"pick":"highlight")}),e.was&&e.was.forEach(function(e){t(e,a.$viewer.searched.isPicked(e.id)?"pick":"normal")})}),a.$viewer.searched.clearedFeatures(function(e){o.searchLayer.removeAll()})})});} }
        ] }
    );
    include.tag( "tool-search-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/tool/search/tool-search-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/search/tool-search-leaflet.js]" ); include.module("tool-search-leaflet",["leaflet","tool-search","tool-search.marker-icon-yellow-png","tool-search.marker-shadow-png","tool-search.star-icon-yellow-png"],function(e){"use strict";var s={INTERSECTION:15,STREET:13,BLOCK:14,CIVIC_NUMBER:15,_OTHER_:12},d=new L.Icon({iconUrl:e["tool-search.marker-icon-yellow-png"],shadowUrl:e["tool-search.marker-shadow-png"],iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),h=new L.Icon({iconUrl:e["tool-search.star-icon-yellow-png"],shadowUrl:e["tool-search.marker-shadow-png"],iconSize:[20,19],iconAnchor:[10,9],popupAnchor:[1,-24],shadowSize:[21,21]}),l=new L.Icon({iconUrl:e["tool-search.star-icon-yellow-png"],shadowUrl:e["tool-search.marker-shadow-png"],iconSize:[40,36],iconAnchor:[20,18],popupAnchor:[1,-24],shadowSize:[31,31]});SMK.TYPE.SearchListTool.addInitializer(function(n){var c=this,r=n.$viewer,a=L.featureGroup({pane:"markerPane"}),o=L.featureGroup({pane:"markerPane"});function i(e,o,r,a){if(e.setIcon(r?d:o?l:h),r&&"search-popup"!=c.showFeatures){var i=n.$viewer.getPanelPadding(!0),t=e.getLatLng();n.$viewer.map.fitBounds(L.latLngBounds([t,t]),{paddingTopLeft:i.topLeft,paddingBottomRight:i.bottomRight,maxZoom:s[a.properties.matchPrecision]||s._OTHER_})}}c.changedGroup(function(){c.visible=c.group}),c.changedVisible(function(){c.visible?(r.map.addLayer(a),r.map.removeLayer(o)):(r.map.removeLayer(a),r.map.addLayer(o))}),n.on(this.id,{zoom:function(){var e=n.$viewer.getPanelPadding(!0);n.$viewer.map.fitBounds(a.getBounds().pad(.25),{paddingTopLeft:e.topLeft,paddingBottomRight:e.bottomRight})}}),r.searched.addedFeatures(function(e){n.$viewer.getPanelPadding(!0);e.features.forEach(function(o){var e=L.marker({lat:o.geometry.coordinates[1],lng:o.geometry.coordinates[0]},{title:o.properties.fullAddress,riseOnHover:!0,icon:h});a.addLayer(e),o.highlightLayer=e,o.pickMarker=L.marker({lat:o.geometry.coordinates[1],lng:o.geometry.coordinates[0]},{title:o.properties.fullAddress,riseOnHover:!0,icon:d}),e.on({click:function(e){r.searched.pick(o.id,{popupopen:!0})}})})}),r.searched.pickedFeature(function(e){e.was&&i(e.was.highlightLayer,r.searched.isHighlighted(e.was.id),!1);e.feature&&(i(e.feature.highlightLayer,!0,!0,e.feature),o.clearLayers(),o.addLayer(e.feature.pickMarker))}),r.searched.highlightedFeatures(function(e){e.features&&e.features.forEach(function(e){i(e.highlightLayer,!0,r.searched.isPicked(e.id),e)}),e.was&&e.was.forEach(function(e){i(e.highlightLayer,!1,r.searched.isPicked(e.id),e)})}),r.searched.clearedFeatures(function(e){a.clearLayers(),o.clearLayers()})})});} }
        ] }
    );
    include.tag( "tool-select",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/select/panel-select.html", load:"<tool-panel class=\"smk-selected-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <template slot=\"commands\">\n        <command-button class=\"smk-clear\"\n            v-if=\"command.clear\"\n            v-bind:disabled=\"layers.length == 0\"\n            v-on:click=\"$$emit( 'clear' )\"\n        >Clear</command-button>\n    </template>\n\n    <feature-list\n        v-bind:layers=\"layers\"\n        v-bind:highlightId=\"highlightId\"\n        v-on:active=\"$$emit( 'active', $event )\"\n        v-on:hover=\"$$emit( 'hover', $event )\"\n    >\n        <template slot=\"item\" slot-scope=\"item\">\n            <command-button class=\"smk-remove\"\n                v-bind:key=\"item.feature.id\"\n                title=\"Remove item\"\n                icon=\"delete\"\n                v-if=\"command.remove\"\n                v-on:click=\"$$emit( 'remove', { layerId: item.layer.id, featureId: item.feature.id } )\"\n            ></command-button>\n        </template>\n    </feature-list>\n\n    <div v-if=\"layers.length == 0\">\n        Click on the map to select features under the clicked point.\n    </div>\n</tool-panel>" },
            { loader: "script", url: "smk/tool/select/tool-select-feature.js", load: function () { console.debug( "[smk/tool/select/tool-select-feature.js]" ); include.module("tool-select.tool-select-feature-js",["component-tool-panel-feature","tool.tool-panel-feature-js"],function(e){"use strict";return SMK.TYPE.Tool.define("SelectFeatureTool",function(){SMK.TYPE.ToolPanel.call(this,"tool-panel-feature"),SMK.TYPE.ToolPanelFeature.call(this,function(e){return e.$viewer.selected}),this.parentId="SelectListTool"},function(u){var o,r=this;r.changedActive(function(){r.active?(u.getToolById("SelectListTool").visible=!0,r.featureSet.highlight()):u.getToolById("SelectListTool").visible=!1}),u.on(this.id,{zoom:function(){r.featureSet.zoomTo(o[r.resultPosition])},"move-previous":function(){r.featureSet.pick(o[(r.resultPosition+r.resultCount-1)%r.resultCount])},"move-next":function(){r.featureSet.pick(o[(r.resultPosition+1)%r.resultCount])}}),r.featureSet.addedFeatures(function(e){r.resultCount=r.featureSet.getStats().featureCount,o=Object.keys(r.featureSet.featureSet)}),r.featureSet.removedFeatures(function(e){r.resultCount=r.featureSet.getStats().featureCount,o=Object.keys(r.featureSet.featureSet)}),r.featureSet.clearedFeatures(function(e){r.resultCount=0}),r.featureSet.pickedFeature(function(e){if(!e.feature)return r.feature=null,void(r.layer=null);r.active=!0;var t=u.$viewer.layerId[e.feature.layerId];r.layer={id:e.feature.layerId,title:t.config.title,attributes:t.config.attributes&&t.config.attributes.map(function(e){return{visible:e.visible,title:e.title,name:e.name,format:e.format,value:e.value}})},r.feature={id:e.feature.id,title:e.feature.title,properties:Object.assign({},e.feature.properties)},r.setAttributeComponent(t,e.feature),r.resultPosition=o.indexOf(e.feature.id)})})});} },
            { loader: "script", url: "smk/tool/select/tool-select-list.js", load: function () { console.debug( "[smk/tool/select/tool-select-list.js]" ); include.module("tool-select.tool-select-list-js",["tool.tool-base-js","tool.tool-widget-js","tool.tool-feature-list-js","component-feature-list","component-command-button","tool-select.panel-select-html"],function(e){"use strict";return Vue.component("select-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("select-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:e["tool-select.panel-select-html"],props:["layers","highlightId","command"]}),SMK.TYPE.Tool.define("SelectListTool",function(){SMK.TYPE.ToolWidget.call(this,"select-widget"),SMK.TYPE.ToolPanel.call(this,"select-panel"),SMK.TYPE.ToolFeatureList.call(this,function(e){return e.$viewer.selected}),this.defineProp("command")},function(t){var o=this;function e(){var e=t.$viewer.selected.getStats();if(0!=e.featureCount){o.showStatusMessage("<div>Selection contains "+SMK.UTIL.grammaticalNumber(e.featureCount,null,"a feature","{} features")+"</div>")}else o.showStatusMessage()}o.showStatusMessage("Click on map to identify features and then add them to the selection."),o.changedActive(function(){o.active&&t.$viewer.selected.pick()}),t.on(this.id,{clear:function(e){o.showStatusMessage("Click on map to identify features and then add them to the selection.")}}),o.featureSet.addedFeatures(e).removedFeatures(e)})});} },
            { loader: "script", url: "smk/tool/select/tool-select.js", load: function () { console.debug( "[smk/tool/select/tool-select.js]" ); include.module("tool-select",["tool-select.tool-select-list-js","tool-select.tool-select-feature-js"],function(e){"use strict";return SMK.TYPE.Tool.defineComposite([e["tool-select.tool-select-list-js"],e["tool-select.tool-select-feature-js"]])});} }
        ] }
    );
    include.tag( "tool-select-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/select/config/tool-select-config.js", load: function () { console.debug( "[smk/tool/select/config/tool-select-config.js]" ); include.module("tool-select-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js","tool-config.tool-panel-feature-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"](o["tool-config.tool-panel-feature-config-js"]({type:"select",enabled:!1,order:6,position:"list-menu",icon:"select_all",title:"Selected Features",command:{clear:!0,remove:!0}})))))});} }
        ] }
    );
    include.tag( "tool-select-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/select/tool-select-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/select/tool-select-esri3d.js]" ); include.module("tool-select-esri3d",["esri3d","types-esri3d","util-esri3d","tool-select","feature-list-esri3d"],function(e){"use strict";SMK.TYPE.Esri3d;SMK.TYPE.SelectTool.prototype.styleFeature=function(e){return Object.assign({strokeColor:"blue",strokeWidth:5,strokeOpacity:.9,fillColor:"white",fillOpacity:0},this.style,e)},SMK.TYPE.SelectTool.prototype.afterInitialize.push(e["feature-list-esri3d"])});} }
        ] }
    );
    include.tag( "tool-select-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/tool/select/tool-select-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/select/tool-select-leaflet.js]" ); include.module("tool-select-leaflet",["leaflet","tool-select","tool-leaflet","tool-leaflet.tool-feature-list-leaflet-js"],function(l){"use strict";SMK.TYPE.SelectListTool.addInitializer(function(){this.styleFeature=function(){var e=this;return function(){return Object.assign({color:"blue",weight:3,opacity:.7,dashArray:"6,6",lineCap:"butt",fillOpacity:0},e.style)}}}),SMK.TYPE.SelectListTool.addInitializer(function(e){var t=this;l["tool-leaflet.tool-feature-list-leaflet-js"].call(this,e),t.featureSet.addedFeatures(function(e){e.features.forEach(function(e){switch(turf.getType(e)){case"Point":t.highlight[e.id]=L.circleMarker(L.GeoJSON.coordsToLatLng(e.geometry.coordinates),{radius:20}).setStyle(t.styleFeature()());break;case"MultiPoint":break;default:t.highlight[e.id]=L.geoJSON(e.geometry,{style:t.styleFeature()})}})})})});} }
        ] }
    );
    include.tag( "tool-shortcut-menu",
        { loader: "group", tags: [
            { loader: "style", url: "smk/tool/shortcut-menu/shortcut-menu.css", load: "/* [smk/tool/shortcut-menu/shortcut-menu.css] */\n.smk-overlay .smk-shortcut-menu{pointer-events:auto;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.smk-overlay .smk-shortcut-menu .smk-tool{background-color:#fff;border-radius:26px;box-shadow:0 1px 5px rgba(0,0,0,.65);margin:0;padding:2px;height:26px;margin-left:5px;text-align:center}" },
            { loader: "template", url: "smk/tool/shortcut-menu/shortcut-menu.html", load:"<div class=\"smk-shortcut-menu\">\n    <component class=\"smk-tool\"\n        v-for=\"w in widgets\"\n        v-bind:key=\"w.prop.id\"\n        v-bind:is=\"w.component\"\n        v-bind=\"w.prop\"\n    ></component>\n</div>" },
            { loader: "script", url: "smk/tool/shortcut-menu/tool-shortcut-menu.js", load: function () { console.debug( "[smk/tool/shortcut-menu/tool-shortcut-menu.js]" ); include.module("tool-shortcut-menu",["tool.tool-js","tool-shortcut-menu.shortcut-menu-html"],function(t){"use strict";return SMK.TYPE.Tool.define("ShortcutMenuTool",function(){this.model={widgets:[]}},function(n){this.vm=new Vue({el:n.addToStatus(t["tool-shortcut-menu.shortcut-menu-html"]),data:this.model,methods:{trigger:function(t,o,e,u){n.emit(t,o,e,u)}}})},{addTool:function(t,o){return o.getSidepanel().addTool(t,o),this.model.widgets.push(t.makeWidgetComponent()),!0}})});} }
        ] }
    );
    include.tag( "tool-shortcut-menu-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/shortcut-menu/config/tool-shortcut-menu-config.js", load: function () { console.debug( "[smk/tool/shortcut-menu/config/tool-shortcut-menu-config.js]" ); include.module("tool-shortcut-menu-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"shortcut-menu",order:10}))});} }
        ] }
    );
    include.tag( "tool-toolbar",
        { loader: "group", tags: [
            { loader: "style", url: "smk/tool/toolbar/tool-toolbar.css", load: "/* [smk/tool/toolbar/tool-toolbar.css] */\n.smk-toolbar{position:absolute;top:0;left:0;height:var(--toolbar-height);z-index:10;background-color:#fff;border-radius:3px;box-shadow:0 1px 5px rgba(0,0,0,.65);pointer-events:auto;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;display:flex;justify-content:flex-start;align-items:center}.smk-tool{display:inline-block;opacity:.5;border-radius:3px;border:1px solid transparent;padding:0;margin:1px;cursor:default}.smk-tool:hover{border:1px solid #7e7e7e}.smk-tool:focus{outline:0;background-color:#fff}.smk-tool.smk-tool-enabled{opacity:1}" },
            { loader: "script", url: "smk/tool/toolbar/tool-toolbar.js", load: function () { console.debug( "[smk/tool/toolbar/tool-toolbar.js]" ); include.module("tool-toolbar",["tool.tool-js","tool-toolbar.toolbar-html"],function(o){"use strict";return SMK.TYPE.Tool.define("ToolBarTool",function(){this.model={widgets:[]}},function(n){this.vm=new Vue({el:n.addToOverlay(o["tool-toolbar.toolbar-html"]),data:this.model,methods:{trigger:function(o,t,e,l){n.emit(o,t,e,l)}}})},{addTool:function(o,t){return o.makeWidgetComponent&&this.model.widgets.push(o.makeWidgetComponent()),t.getSidepanel().addTool(o,t),!0}})});} },
            { loader: "template", url: "smk/tool/toolbar/toolbar.html", load:"<div class=\"smk-toolbar\"\n    v-bind:class=\"{ 'smk-hidden': widgets.length == 0 }\"\n>\n    <component\n        v-for=\"w in widgets\"\n        v-bind:key=\"w.prop.id\"\n        v-bind:is=\"w.component\"\n        v-bind=\"w.prop\"\n        v-bind:active=\"w.prop.group\"\n    ></component>\n</div>\n" }
        ] }
    );
    include.tag( "tool-toolbar-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/toolbar/config/tool-toolbar-config.js", load: function () { console.debug( "[smk/tool/toolbar/config/tool-toolbar-config.js]" ); include.module("tool-toolbar-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"toolbar",enabled:!0}))});} }
        ] }
    );
    include.tag( "tool-version",
        { loader: "group", tags: [
            { loader: "template", url: "smk/tool/version/panel-version.html", load:"<tool-panel class=\"smk-version-panel\"\n    v-bind=\"$$projectProps( 'tool-panel' )\"\n>\n    <template slot=\"header\">\n        <slot></slot>\n    </template>\n\n    <dl>\n        <dt>SMK Version</dt>\n        <dd>{{ build.version }}</dd>\n\n        <dt>Last commit on</dt>\n        <dd>{{ build.lastCommit | formatDate }}</dd>\n\n        <dt>Commit</dt>\n        <dd>{{ build.commit }}</dd>\n\n        <dt>Branch</dt>\n        <dd>{{ build.branch }}</dd>\n\n        <dt>Origin</dt>\n        <dd>{{ build.origin }}</dd>\n\n        <!-- <template v-if=\"config.lmfId\">\n            <dt>Map Identifier</dt>\n            <dd>{{ config.lmfId }}</dd>\n        </template> -->\n\n        <!-- <template v-if=\"config.lmfRevision\">\n            <dt>Map Version</dt>\n            <dd>{{ config.lmfRevision }}.{{ config._rev.substr( 0, config._rev.indexOf( '-')) - 1 }}{{ config.published ? ' (Published)' : '' }}</dd>\n        </template> -->\n\n        <template v-if=\"config.createdBy\">\n            <dt>Map Created By</dt>\n            <dd>{{ config.createdBy }}</dd>\n        </template>\n\n        <template v-if=\"config.enabledTools\">\n            <dt>Enabled Tools</dt>\n            <dd>{{ config.enabledTools.join( ', ' ) }}</dd>\n        </template>\n\n        <dt>SMK Built by</dt>\n        <dd>\n            <div><a href=\"http://www.vividsolutions.com/\">Vivid Solutions</a> for <a href=\"https://data.gov.bc.ca/\">Data BC</a></div>\n            <div><a href=\"mailto:bjubb@vividsolutions.com\">Ben Jubb</a></div>\n            <div><a href=\"mailto:dhemsworth@vividsolutions.com\">Dylan Hemsworth</a></div>\n        </dd>\n    </dl>\n</tool-panel>\n" },
            { loader: "style", url: "smk/tool/version/tool-version.css", load: "/* [smk/tool/version/tool-version.css] */\n.smk-version-panel dt{font-size:12px}.smk-version-panel dd{margin-left:20px;margin-bottom:10px;overflow-wrap:break-word}.smk-version-panel dd ul{margin:0;padding-left:15px}" },
            { loader: "script", url: "smk/tool/version/tool-version.js", load: function () { console.debug( "[smk/tool/version/tool-version.js]" ); include.module("tool-version",["tool.tool-base-js","tool.tool-widget-js","tool.tool-panel-js","tool-version.panel-version-html"],function(o){"use strict";return Vue.component("version-widget",{extends:SMK.COMPONENT.ToolWidgetBase}),Vue.component("version-panel",{extends:SMK.COMPONENT.ToolPanelBase,template:o["tool-version.panel-version-html"],props:["build","config"]}),SMK.TYPE.Tool.define("VersionTool",function(){SMK.TYPE.ToolWidget.call(this,"version-widget"),SMK.TYPE.ToolPanel.call(this,"version-panel"),this.defineProp("build"),this.defineProp("config")},function(o){this.config=SMK.UTIL.projection("lmfId","lmfRevision","createdBy","_rev","published")(o),this.config.enabledTools=Object.keys(o.$toolType).sort()})});} }
        ] }
    );
    include.tag( "tool-version-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/version/config/tool-version-config.js", load: function () { console.debug( "[smk/tool/version/config/tool-version-config.js]" ); include.module("tool-version-config",["tool-config.tool-base-config-js","tool-config.tool-widget-config-js","tool-config.tool-panel-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"](o["tool-config.tool-widget-config-js"](o["tool-config.tool-panel-config-js"]({type:"version",title:"Version Info",position:"list-menu",order:99,icon:"build",build:SMK.BUILD}))))});} }
        ] }
    );
    include.tag( "tool-zoom",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/zoom/tool-zoom.js", load: function () { console.debug( "[smk/tool/zoom/tool-zoom.js]" ); include.module("tool-zoom",["tool.tool-js"],function(){"use strict";return SMK.TYPE.Tool.define("ZoomTool")});} }
        ] }
    );
    include.tag( "tool-zoom-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/tool/zoom/config/tool-zoom-config.js", load: function () { console.debug( "[smk/tool/zoom/config/tool-zoom-config.js]" ); include.module("tool-zoom-config",["tool-config.tool-base-config-js"],function(o){"use strict";SMK.CONFIG.tools.push(o["tool-config.tool-base-config-js"]({type:"zoom",enabled:!1,order:1,mouseWheel:!0,doubleClick:!0,box:!0,control:!0}))});} }
        ] }
    );
    include.tag( "tool-zoom-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/tool/zoom/tool-zoom-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/tool/zoom/tool-zoom-esri3d.js]" ); include.module("tool-zoom-esri3d",["tool-zoom","esri3d"],function(){"use strict";SMK.TYPE.ZoomTool.prototype.afterInitialize.push(function(e){"mobile"!=e.$device&&(!1!==this.mouseWheel&&e.$viewer.zoomHandler.mouseWheel.remove(),!1!==this.doubleClick&&(e.$viewer.zoomHandler.doubleClick1.remove(),e.$viewer.zoomHandler.doubleClick2.remove()),!1!==this.box&&(e.$viewer.zoomHandler.drag1.remove(),e.$viewer.zoomHandler.drag2.remove()),!1!==this.control&&(e.$viewer.zoomHandler.keyDown.remove(),e.$viewer.view.ui.add([{component:new SMK.TYPE.Esri3d.widgets.Zoom({view:e.$viewer.view}),position:"top-right"}])))})});} }
        ] }
    );
    include.tag( "tool-zoom-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/tool/zoom/tool-zoom-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/tool/zoom/tool-zoom-leaflet.js]" ); include.module("tool-zoom-leaflet",["tool-zoom","leaflet"],function(){"use strict";SMK.TYPE.ZoomTool.addInitializer(function(o){!1!==this.mouseWheel&&o.$viewer.map.scrollWheelZoom.enable(),!1!==this.doubleClick&&o.$viewer.map.doubleClickZoom.enable(),!1!==this.box&&o.$viewer.map.boxZoom.enable(),!1!==this.control&&(L.control.zoom({position:"topright"}).addTo(o.$viewer.map),o.addToStatus($('<div class="smk-spacer" style="order: 1; height: 70px; flex-shrink: 0">').get(0)))})});} }
        ] }
    );
    include.tag( "turf",
        { loader: "script", url: "lib/turf-5.1.6.min.js", load: function () { console.debug( "[lib/turf-5.1.6.min.js]" ); !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.turf={})}(this,function(t){"use strict";function e(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&N(r),i&&C(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");i&&N(i);var s;switch(t){case"Point":s=r(e).geometry;break;case"LineString":s=a(e).geometry;break;case"Polygon":s=o(e).geometry;break;case"MultiPoint":s=l(e).geometry;break;case"MultiLineString":s=h(e).geometry;break;case"MultiPolygon":s=p(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(s.bbox=i),s}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(t[0])||!b(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===i&&0===s&&!b(o[0][0])||!b(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return o(t,e)}),n)}function a(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!b(t[0][1])||!b(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return a(t,e)}),n)}function c(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&N(n),r&&C(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function g(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=qo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=qo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function _(t,e){return v(y(t,e))}function m(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function v(t){if(null===t||void 0===t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function x(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function E(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return d(y(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Bo[e||"meters"];if(!r)throw new Error("invalid original units");var i=Bo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function b(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function I(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!b(t))throw new Error("bbox must only contain numbers")})}function C(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function S(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,h,l=0,p=0,f=t.type,g="FeatureCollection"===f,d="Feature"===f,y=g?t.features.length:1,_=0;_<y;_++){a=(h=!!(c=g?t.features[_].geometry:d?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var v=0,x=0;if(null!==(s=h?c.geometries[m]:c)){u=s.coordinates;var E=s.type;switch(l=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":e(u,p,_,v,x),p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,_,v,x),p++,"MultiPoint"===E&&v++;"LineString"===E&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-l;i++)e(u[r][i],p,_,v,x),p++;"MultiLineString"===E&&v++,"Polygon"===E&&x++}"Polygon"===E&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===E&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-l;o++)e(u[r][i][o],p,_,v,x),p++;x++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)S(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,n,r){var i=n;return S(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function L(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function P(t,e,n){var r=n;return L(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function O(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function R(t,e,n){var r=n;return O(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function T(t){var e=[];return S(t,function(t){e.push(t)}),e}function A(t,e){var n,r,i,o,s,a,u,c,h,l,p=0,f="FeatureCollection"===t.type,g="Feature"===t.type,d=f?t.features.length:1;for(n=0;n<d;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,c=f?t.features[n].properties:g?t.properties:{},h=f?t.features[n].bbox:g?t.bbox:void 0,l=f?t.features[n].id:g?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,h,l);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,h,l);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,h,l);p++}}function D(t,e,n){var r=n;return A(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function F(t,n){A(t,function(t,r,i,o,s){var a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:s}),r,0)}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:u,coordinates:t},i),r,o)})})}function q(t,e,n){var r=n;return F(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function G(t,e){F(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&M(t,function(o,s,u,c,h,l){var p=a([o,s],t.properties);return e(p,n,r,l,i),i++,s})}})}function B(t,e,n){var r=n,i=!1;return G(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function k(t,e){if(!t)throw new Error("geojson is required");F(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var s=0;s<o.length;s++)e(a(o[s],t.properties),n,r,s)}}})}function z(t,e,n){var r=n;return k(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function j(t){var e=[1/0,1/0,-1/0,-1/0];return S(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function X(t){if(!t)throw new Error("obj is required");var e=U(t);if(e.length>1&&b(e[0])&&b(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function U(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return Y(e),e;throw new Error("No valid coordinates")}function Y(t){if(t.length>1&&b(t[0])&&b(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Y(t[0]);throw new Error("coordinates must only contain numbers")}function V(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function H(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function W(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function J(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function K(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var r=Object.keys(Xo),i=0;i<r.length;i++){var o=r[i],s=n[o];s=void 0!==s&&null!==s?s:Xo[o],Uo[o]=s}Uo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;t.rows,t.cols;return t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var s=function(t,e,n){var r,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],h=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],l=(t[e][n],t[e][n]),p=l.cval,f=nt(l,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);a.push([n+f[0],e+f[1]]),f=nt(l,o=h[p]),a.push([n+f[0],e+f[1]]),et(l);for(var g=n+u[p],d=e+c[p],y=p;g>=0&&d>=0&&d<s&&(g!=n||d!=e)&&void 0!==(l=t[d][g]);){if(0===(p=l.cval)||15===p)return{path:a,info:"mergeable"};o=h[p],r=u[p],i=c[p],5!==p&&10!==p||(5===p?l.flipped?-1===c[y]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[y]&&(o="bottom",r=0,i=-1):10===p&&(l.flipped?-1===u[y]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===c[y]&&(o="left",r=-1,i=0))),f=nt(l,o),a.push([g+f[0],d+f[1]]),et(l),g+=r,d+=i,y=p}return{path:a,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],c=s.path[s.path.length-1][1],h=n-1;h>=0;h--)if(Math.abs(e[h][0][0]-u)<=1e-7&&Math.abs(e[h][0][1]-c)<=1e-7){for(var l=s.path.length-2;l>=0;--l)e[h].unshift(s.path[l]);a=!0;break}a||(e[n++]=s.path)}})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],c=t[o+1][s+1],h=t[o][s+1],l=t[o][s];if(!(isNaN(u)||isNaN(c)||isNaN(h)||isNaN(l))){a|=u>=e?8:0,a|=c>=e?4:0,a|=h>=e?2:0;var p=!1;if(5===(a|=l>=e?1:0)||10===a){var f=(u+c+h+l)/4;5===a&&f<e?(a=10,p=!0):10===a&&f<e&&(a=5,p=!0)}if(0!==a&&15!==a){var g,d,y,_;g=d=y=_=.5,1===a?(y=1-$(e,u,l),d=1-$(e,h,l)):2===a?(d=$(e,l,h),_=1-$(e,c,h)):3===a?(y=1-$(e,u,l),_=1-$(e,c,h)):4===a?(g=$(e,u,c),_=$(e,h,c)):5===a?(g=$(e,u,c),_=$(e,h,c),d=1-$(e,h,l),y=1-$(e,u,l)):6===a?(d=$(e,l,h),g=$(e,u,c)):7===a?(y=1-$(e,u,l),g=$(e,u,c)):8===a?(y=$(e,l,u),g=1-$(e,c,u)):9===a?(d=1-$(e,h,l),g=1-$(e,c,u)):10===a?(g=1-$(e,c,u),_=1-$(e,c,h),d=$(e,l,h),y=$(e,l,u)):11===a?(g=1-$(e,c,u),_=1-$(e,c,h)):12===a?(y=$(e,l,u),_=$(e,h,c)):13===a?(d=1-$(e,h,l),_=$(e,h,c)):14===a?(y=$(e,l,u),d=$(e,l,h)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:p,top:g,right:_,bottom:d,left:y}}}}}return i}(t,e));return"function"==typeof Uo.successCallback&&Uo.successCallback(a),a}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};O(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)});return Object.keys(n).map(function(t){var e=n[t],r=e.sort(function(t,e){return U(t)[0]-U(e)[0]});return r}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],h=0;h<u.length;h++){var l=u[h];l.properties[n]?c.push(l.properties[n]):c.push(0),!0===i&&(l.properties.matrixPosition=[a,h])}s.push(c)}return s}function it(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||function(t,e){return t<e?-1:t>e?1:0};r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);it(t,e,Math.max(n,Math.floor(e-s*u/o+c)),Math.min(r,Math.floor(e+(o-s)*u/o+c)),i)}var h=t[e],l=n,p=r;for(ot(t,n,e),i(t[r],h)>0&&ot(t,n,r);l<p;){for(ot(t,l,p),l++,p--;i(t[l],h)<0;)l++;for(;i(t[p],h)>0;)p--}0===i(t[n],h)?ot(t,n,p):ot(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function st(t,e){if(!(this instanceof st))return new st(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function at(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,n,r,i){i||(i=yt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],ct(i,t.leaf?r(o):o);return i}function ct(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ht(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function pt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ft(t){return t.maxX-t.minX+(t.maxY-t.minY)}function gt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function dt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function yt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _t(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Yo(t,o,e,n,i),s.push(e,o,o,n))}function mt(t,e){return e={exports:{}},t(e,e.exports),e.exports}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function xt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)is(t[o],a)||u.push(t[o]);var c=ts(u),h=[];for(o=0;o<c.length;o++)h.push(u[c[o]]);return h}(t),o=Vo(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=Nt(u,r),s.push(r)}var c=Vo(16);for(a=0;a<s.length;a++)c.insert(It(s[a]));for(var h=e*e,l=n*n;s.length;){var p=s.shift(),f=p.p,g=p.next.p,d=Ct(f,g);if(!(d<l)){var y=d/h;(u=function(t,e,n,r,i,o,s){var a=new ns(null,Et),u=t.data;for(;u;){for(var c=0;c<u.children.length;c++){var h=u.children[c],l=u.leaf?St(h,n,r):function(t,e,n){if(wt(t,n)||wt(e,n))return 0;var r=Mt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Mt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Mt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=Mt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}(n,r,h);l>o||a.push({node:h,dist:l})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,g=St(f,e,n),d=St(f,r,i);if(p.dist<g&&p.dist<d&&bt(n,f,s)&&bt(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}(o,p.prev.p,f,g,p.next.next.p,y,c))&&Math.min(Ct(u,f),Ct(u,g))<=y&&(s.push(p),s.push(Nt(u,p)),o.remove(u),c.remove(p),c.insert(It(p)),c.insert(It(p.next)))}}p=r;var _=[];do{_.push(p.p),p=p.next}while(p!==r);return _.push(p.p),_}function Et(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function bt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&os(t,e,n)>0!=os(t,e,r)>0&&os(n,r,t)>0!=os(n,r,e)>0}(a[u].p,a[u].next.p,t,e))return!1;return!0}function It(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Nt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ct(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function St(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return o=t[0]-r,s=t[1]-i,o*o+s*s}function Mt(t,e,n,r,i,o,s,a){var u,c,h,l,p=n-t,f=r-e,g=s-i,d=a-o,y=t-i,_=e-o,m=p*p+f*f,v=p*g+f*d,x=g*g+d*d,E=p*y+f*_,w=g*y+d*_,b=m*x-v*v,I=b,N=b;0===b?(c=0,I=1,l=w,N=x):(l=m*w-v*E,(c=v*w-x*E)<0?(c=0,l=w,N=x):c>I&&(c=I,l=w+v,N=x)),l<0?(l=0,-E<0?c=0:-E>m?c=I:(c=-E,I=m)):l>N&&(l=N,-E+v<0?c=0:-E+v>m?c=I:(c=-E+v,I=m)),u=0===c?0:c/I;var C=(1-(h=0===l?0:l/N))*i+h*s-((1-u)*t+u*n),S=(1-h)*o+h*a-((1-u)*e+u*r);return C*C+S*S}function Lt(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(S(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=ss(r,n);return i.length>3?o([i]):null}function Pt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=X(t),o=U(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,a))return!1;"Polygon"===s&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(Ot(i,o[u][0],r)){for(var h=!1,l=1;l<o[u].length&&!h;)Ot(i,o[u][l],!r)&&(h=!0),l++;h||(c=!0)}return c}function Ot(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(r=!r)}return r}function Rt(t,e){var n=[];return A(e,function(e){O(t,function(t){Pt(t,e)&&n.push(t)})}),c(n)}function Tt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(function(t){if(t.length<3)return[];t.sort(Dt);var e,n,r,i,o,s,a=t.length-1,u=t[a].x,c=t[0].x,h=t[a].y,l=h;for(;a--;)t[a].y<h&&(h=t[a].y),t[a].y>l&&(l=t[a].y);var p,f=c-u,g=l-h,d=f>g?f:g,y=.5*(c+u),_=.5*(l+h),m=[new At({x:y-20*d,y:_-d,__sentinel:!0},{x:y,y:_+20*d,__sentinel:!0},{x:y+20*d,y:_-d,__sentinel:!0})],v=[],x=[];a=t.length;for(;a--;){for(x.length=0,p=m.length;p--;)(f=t[a].x-m[p].x)>0&&f*f>m[p].r?(v.push(m[p]),m.splice(p,1)):(g=t[a].y-m[p].y,f*f+g*g>m[p].r||(x.push(m[p].a,m[p].b,m[p].b,m[p].c,m[p].c,m[p].a),m.splice(p,1)));for(Ft(x),p=x.length;p;)n=x[--p],e=x[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>1e-12&&m.push(new At(e,n,r))}Array.prototype.push.apply(v,m),a=v.length;for(;a--;)(v[a].a.__sentinel||v[a].b.__sentinel||v[a].c.__sentinel)&&v.splice(a,1);return v}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],s)}))}function At(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+n.x)+u*(t.y+n.y),l=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*c-s*h)/l,this.y=(o*h-a*c)/l,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Dt(t,e){return e.x-t.x}function Ft(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function qt(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units,i=X(t),o=X(e),s=x(o[1]-i[1]),a=x(o[0]-i[0]),u=x(i[1]),c=x(o[1]),h=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return d(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),r)}function Gt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return Bt(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return zt(t);default:throw new Error("unknown GeoJSON type")}}function Bt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=kt(t.properties),e.geometry=zt(t.geometry),e}function kt(t){var e={};return t?(Object.keys(t).forEach(function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map(function(t){return t}):e[n]=kt(r):e[n]=r}),e):e}function zt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return zt(t)}),e):(e.coordinates=jt(t.coordinates),e)}function jt(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return jt(t)})}function Xt(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&hs(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}function a(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(a)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=s(t.arcs);break;case"MultiPolygon":e=t.arcs.map(s);break;default:return null}return{type:n,coordinates:e}}var u=cs(t.transform),c=t.arcs;return a(e)}function Ut(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),s.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Xt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},s=[],a=[];return e.forEach(n),s.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&r.push(t)})})}),r=ls(t,r),(n=r.length)>1)for(var s,a,u=1,c=i(r[0]);u<n;++u)(s=i(r[u]))>c&&(a=r[0],r[0]=r[u],r[u]=a,c=s);return r})}}function Yt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Vt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Ht)};null!=t.bbox&&(e.bbox=t.bbox);return e}:"Feature"===t.type?Ht:Wt)(t)}function Ht(t){var e,n=Wt(t.geometry);null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox);for(e in t.properties){n.properties=t.properties;break}return n}function Wt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Wt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Jt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Zt(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Kt(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Gt(t));var r=[],i=z(t,function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Qt(r[0]),s=Qt(r[r.length-1]),u=Qt(i[0]),c=Qt(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===s)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(s!==c)return null;n=r.concat(i.reverse().slice(1))}return a(n)}(t,e);return n||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:h(r.map(function(t){return t.coordinates})):null}function Qt(t){return t[0].toString()+","+t[1].toString()}function $t(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Gt(t));var r=function(t){var e={};F(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return Kt(t,e);case"Polygon":return function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Gt(t));var r=[];F(t,function(t){r.push(t.geometry)});var i=ws({geoms:f(r).geometry});return ps(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=K(t),o=[];switch(i){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":U(t).forEach(function(t){o.push(ee(t))});break;case"MultiPolygon":U(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(ee(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var s={};U(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=U(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)n=e[a-1],r=e[a],function(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],c=a-o,h=u-s;return(r-o)*h-(i-s)*c==0&&(Math.abs(c)>=Math.abs(h)?c>0?o<=r&&r<=a:a<=r&&r<=o:h>0?s<=i&&i<=u:u<=i&&i<=s)}(n,i=e[a+1],r)||o.push(r);return o.push(i),o}function ne(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function re(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return o=t.x-r,s=t.y-i,o*o+s*s}function ie(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=re(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&ie(t,e,o,r,i),i.push(t[o]),n-o>1&&ie(t,o,n,r,i))}function oe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,s=t.length;o<s;o++)ne(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),t=function(t,e){var n=t.length-1,r=[t[0]];return ie(t,0,n,e,r),r.push(t[n]),r}(t,r)}function se(t,e,n){return oe(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function ae(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=oe(r,e,n).map(function(t){return[t.x,t.y]});!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=oe(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function ue(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!b(n))throw new Error("resolution must be an number");if(!b(r))throw new Error("sharpness must be an number");for(var i=[],o=new bs({points:J(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2==0&&i.push([u.x,u.y])}return a(i,t.properties)}function ce(t){N(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,n];return o([[s,[r,n],[r,i],[e,i],s]])}function he(t){return ce(j(t))}function le(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(qt(t.slice(0,2),[r,n])>=qt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function pe(t,e,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.units,s=i.properties,a=X(t),u=x(a[0]),c=x(a[1]),h=x(n),l=y(e,o),p=Math.asin(Math.sin(c)*Math.cos(l)+Math.cos(c)*Math.sin(l)*Math.cos(h));return r([v(u+Math.atan2(Math.sin(h)*Math.sin(l)*Math.cos(c),Math.cos(l)-Math.sin(c)*Math.sin(p))),v(p)],s)}function fe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var s=[],a=0;a<r;a++)s.push(pe(t,e,-360*a/r,n).geometry.coordinates);return s.push(s[0]),o([s],i)}function ge(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=ge(e,t);return n=(n+180)%360}(t,e);var r=X(t),i=X(e),o=x(r[0]),s=x(i[0]),a=x(r[1]),u=x(i[1]),c=Math.sin(s-o)*Math.cos(u),h=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return v(Math.atan2(c,h))}function de(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=j(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ye(t,e){var n=0,i=0,o=0;return S(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function _e(t,e){switch(K(t)){case"Point":return t;case"Polygon":var n=[];S(t,function(t){n.push(t)});var i,o,s,a,u,c,h,l,p=ye(t,e),f=p.geometry.coordinates,g=0,d=0,y=0,_=n.map(function(t){return[t[0]-f[0],t[1]-f[1]]});for(i=0;i<n.length-1;i++)a=(o=_[i])[0],c=o[1],u=(s=_[i+1])[0],y+=l=a*(h=s[1])-u*c,g+=(a+u)*l,d+=(c+h)*l;if(0===y)return p;var m=1/(6*(.5*y));return r([f[0]+m*g,f[1]+m*d],e);default:var v=Lt(t);return v?_e(v,e):ye(t,e)}}function me(t){var e=[];return"FeatureCollection"===t.type?O(t,function(t){S(t,function(n){e.push(r(n,t.properties))})}):S(t,function(n){e.push(r(n,t.properties))}),c(e)}function ve(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=xe(t,0,i,n,!0),s=[];if(!o)return s;var a,u,c,h,l,p,f;if(r&&(o=function(t,e,n,r){var i,o,s,a,u,c=[];for(i=0,o=e.length;i<o;i++)s=e[i]*r,a=i<o-1?e[i+1]*r:t.length,(u=xe(t,s,a,r,!1))===u.next&&(u.steiner=!0),c.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(u));for(c.sort(be),i=0;i<c.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,c=n,h=n.x,l=n.y,p=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=h&&i!==r.x&&Ne(o<l?i:s,o,h,l,o<l?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Le(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=Pe(e,t);Ee(n,n.next)}}(c[i],n),n=Ee(n,n.next);return n}(t,e,o,n)),t.length>80*n){a=c=t[0],u=h=t[1];for(var g=n;g<i;g+=n)l=t[g],p=t[g+1],l<a&&(a=l),p<u&&(u=p),l>c&&(c=l),p>h&&(h=p);f=0!==(f=Math.max(c-a,h-u))?1/f:0}return we(o,s,n,a,u,f),s}function xe(t,e,n,r,i){var o,s;if(i===Ae(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Oe(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Oe(o,t[o],t[o+1],s);return s&&Se(s,s.next)&&(Re(s),s=s.next),s}function Ee(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Se(r,r.next)&&0!==Ce(r.prev,r,r.next))r=r.next;else{if(Re(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function we(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Ie(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,c=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,s=t.next;if(Ce(i,o,s)>=0)return!1;var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=Ie(a,u,e,n,r),p=Ie(c,h,e,n,r),f=t.nextZ;for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Ne(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Ce(f.prev,f,f.next)>=0)return!1;f=f.nextZ}f=t.prevZ;for(;f&&f.z>=l;){if(f!==t.prev&&f!==t.next&&Ne(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Ce(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(Ce(e,n,r)>=0)return!1;var i=t.next.next;for(;i!==t.prev;){if(Ne(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ce(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Re(t),t=u.next,c=u.next;else if((t=u)===c){s?1===s?we(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Se(i,o)&&Me(i,r,r.next,o)&&Le(i,o)&&Le(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Re(r),Re(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===s&&function(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Me(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Le(t,e)&&Le(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(s,a)){var u=Pe(s,a);return s=Ee(s,s.next),u=Ee(u,u.next),we(s,e,n,r,i,o),void we(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}(t,e,n,r,i,o):we(Ee(t),e,n,r,i,o,1);break}}}function be(t,e){return t.x-e.x}function Ie(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Ne(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Ce(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Se(t,e){return t.x===e.x&&t.y===e.y}function Me(t,e,n,r){return!!(Se(t,e)&&Se(n,r)||Se(t,r)&&Se(n,e))||Ce(t,e,n)>0!=Ce(t,e,r)>0&&Ce(n,r,t)>0!=Ce(n,r,e)>0}function Le(t,e){return Ce(t.prev,t,t.next)<0?Ce(t,e,t.next)>=0&&Ce(t,t.prev,e)>=0:Ce(t,e,t.prev)<0||Ce(t,t.next,e)<0}function Pe(t,e){var n=new Te(t.i,t.x,t.y),r=new Te(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Oe(t,e,n,r){var i=new Te(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Re(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Te(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ae(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function De(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Is(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var s=0;s<i.length;s+=3){var a=i.slice(s,s+3);a.push(i[s]),r.push(o([a]))}return r}function Fe(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return O(e,function(e,i){var o=qt(t,e);o<r&&((n=Gt(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function qe(t,e,n,r,i){Ge(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Ge(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);Ge(t,e,Math.max(n,Math.floor(e-s*u/o+c)),Math.min(r,Math.floor(e+(o-s)*u/o+c)),i)}var h=t[e],l=n,p=r;for(Be(t,n,e),i(t[r],h)>0&&Be(t,n,r);l<p;){for(Be(t,l,p),l++,p--;i(t[l],h)<0;)l++;for(;i(t[p],h)>0;)p--}0===i(t[n],h)?Be(t,n,p):Be(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function Be(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ke(t,e){if(!(this instanceof ke))return new ke(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ze(t,e){je(t,0,t.children.length,e,t)}function je(t,e,n,r,i){i||(i=Ze(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Xe(i,t.leaf?r(o):o);return i}function Xe(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ue(t,e){return t.minX-e.minX}function Ye(t,e){return t.minY-e.minY}function Ve(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function He(t){return t.maxX-t.minX+(t.maxY-t.minY)}function We(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Je(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(qe(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function Qe(t){var e=ke(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tn(t);return ke.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=$e(t);n.bbox=t,e.push(n)}):O(t,function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)}),ke.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=$e(e)).bbox=e}return ke.prototype.remove.call(this,t)},e.clear=function(){return ke.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:ke.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return ke.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:ke.prototype.all.call(this)}},e.toJSON=function(){return ke.prototype.toJSON.call(this)},e.fromJSON=function(t){return ke.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t),{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function $e(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return S(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=U(r);break;case"LineString":n=[U(r)]}n.forEach(function(n){var r=function(t,e){var n=[];return t.reduce(function(t,r){var i=a([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n}(n,t.properties);r.forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),c(e)}function nn(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&i.push(o),c(i)}var s=Qe();return s.load(en(n)),O(en(t),function(t){O(s.search(t),function(e){var n=rn(t,e);if(n){var o=U(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),c(i)}function rn(t,e){var n=U(t),i=U(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],c=i[0][0],h=i[0][1],l=i[1][0],p=i[1][1],f=(p-h)*(a-o)-(l-c)*(u-s),g=(l-c)*(s-h)-(p-h)*(o-c),d=(a-o)*(s-h)-(u-s)*(o-c);if(0===f)return null;var y=g/f,_=d/f;if(y>=0&&y<=1&&_>=0&&_<=1){return r([o+y*(a-o),s+y*(u-s)])}return null}function on(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),s=0;return F(t,function(t){for(var i=U(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=qt(e,c,n);var h=r(i[u+1]);h.properties.dist=qt(e,h,n);var l=qt(c,h,n),p=Math.max(c.properties.dist,h.properties.dist),f=ge(c,h),g=pe(e,p,f+90,n),d=pe(e,p,f-90,n),y=nn(a([g.geometry.coordinates,d.geometry.coordinates]),a([c.geometry.coordinates,h.geometry.coordinates])),_=null;y.features.length>0&&((_=y.features[0]).properties.dist=qt(e,_,n),_.properties.location=s+qt(c,_,n)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=s),h.properties.dist<o.properties.dist&&((o=h).properties.index=u+1,o.properties.location=s+l),_&&_.properties.dist<o.properties.dist&&((o=_).properties.index=u),s+=l}}),o}function sn(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");var i;return(i=r?an(X(e),X(t)):an(X(t),X(e)))>180?-(360-i):i}function an(t,e){var n=x(t[1]),r=x(e[1]),i=x(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(v(Math.atan2(i,o))+360)%360}function un(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=X(t),o=X(e);o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0;return E(function(t,e,n){var r=n=void 0===n?Fo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+c*c*a*a)*r}(i,o),"meters",r)}function cn(t,e){return ln(t,"mercator",e)}function hn(t,e){return ln(t,"wgs84",e)}function ln(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&b(t[0])?t="mercator"===e?pn(t):fn(t):(!0!==r&&(t=Gt(t)),S(t,function(t){var n="mercator"===e?pn(t):fn(t);t[0]=n[0],t[1]=n[1]})),t}function pn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function fn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function gn(t,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):H(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=a(n):"LineString"===n.type?n=e(n):H(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return G(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],a=function(t,e,n,i){var o=i.mercator,s=!0!==o?qt(e,t,i):dn(e,t,i),a=m(!0!==o?ge(e,t):sn(e,t)),u=m(!0!==o?ge(e,n):sn(e,n)),c=Math.abs(a-u);if(c>90)return s;var h=(u+180)%360,l=m(!0!==o?ge(n,t):sn(n,t)),p=Math.abs(l-h);p>180&&(p=Math.abs(p-360));return p>90?!0!==o?qt(t,n,i):dn(t,n,i):!0!==o?s*Math.sin(x(c)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var s=r(n),a=cn([t[0]+o,t[1]]),u=cn([e[0]+o,e[1]]),c=cn([n[0]+o,n[1]]),h=hn(function(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1],a=n[0],u=n[1],c=o-r,h=s-i,l=((a-r)*c+(u-i)*h)/(c*c+h*h);return[r+l*c,i+l*h]}(a,u,c));return 0!==o&&(h[0]-=o),un(s,h,i)}(e,n,t,i)}(s,e,n,i);o>a&&(o=a)}),o}function dn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=cn([t[0]+i,t[1]]),s=cn([e[0]+i,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return E(Math.sqrt(u),"meters",r)}function yn(t){for(var n=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?c([e(t)]):c([t]);return t}(t),i=de(n),o=!1,s=0;!o&&s<n.features.length;){var a,u=n.features[s].geometry,h=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var l=!1;for(a=0;!l&&a<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[a][0]&&i.geometry.coordinates[1]===u.coordinates[a][1]&&(o=!0,l=!0),a++}else if("LineString"===u.type)for(a=0;!h&&a<u.coordinates.length-1;)_n(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[a][0],u.coordinates[a][1],u.coordinates[a+1][0],u.coordinates[a+1][1])&&(h=!0,o=!0),a++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){h=!1,a=0;for(var f=u.coordinates[p];!h&&a<f.length-1;)_n(i.geometry.coordinates[0],i.geometry.coordinates[1],f[a][0],f[a][1],f[a+1][0],f[a+1][1])&&(h=!0,o=!0),a++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Pt(i,u)&&(o=!0);s++}if(o)return i;var g=c([]);for(s=0;s<n.features.length;s++)g.features=g.features.concat(me(n.features[s]).features);return r(Fe(i,g).geometry.coordinates)}function _n(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function mn(t){return D(t,function(t,e){return t+vn(e)},0)}function vn(t){var e,n=0;switch(t.type){case"Polygon":return xn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=xn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=vn(t.geometries[e]);return n}}function xn(t){var e=0;if(t&&t.length>0){e+=Math.abs(En(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(En(t[n]))}return e}function En(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(wn(t[o][0])-wn(e[0]))*Math.sin(wn(n[1]));a=a*Ss*Ss/2}return a}function wn(t){return t*Math.PI/180}function bn(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,function(t,n){var r=n.geometry.coordinates;return t+qt(r[0],r[1],e)},0)}function In(t,e,n,r){if(r=r||{},!I(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,u,c,h=0,l=0;l<i.length&&!(e>=h&&l===i.length-1);l++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(i[l]),a(o);u=ge(i[l],i[l-1])-180,c=pe(i[l],s,u,r),o.push(c.geometry.coordinates)}if(h>=n)return(s=n-h)?(u=ge(i[l],i[l-1])-180,c=pe(i[l],s,u,r),o.push(c.geometry.coordinates),a(o)):(o.push(i[l]),a(o));if(h>=e&&o.push(i[l]),l===i.length-1)return a(o);h+=qt(i[l],i[l+1],r)}return a(i[i.length-1])}function Nn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!I(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=X(t),o=U(e),s=0;s<o.length-1;s++){var a=!1;if(r&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],c=e[1],h=n[0]-s,l=n[1]-a,p=u-s,f=c-a;if(h*f-l*p!=0)return!1;{if(!r)return Math.abs(p)>=Math.abs(f)?p>0?s<=i&&i<=u:u<=i&&i<=s:f>0?a<=o&&o<=c:c<=o&&o<=a;if("start"===r)return Math.abs(p)>=Math.abs(f)?p>0?s<i&&i<=u:u<=i&&i<s:f>0?a<o&&o<=c:c<=o&&o<a;if("end"===r)return Math.abs(p)>=Math.abs(f)?p>0?s<=i&&i<u:u<i&&i<=s:f>0?a<=o&&o<c:c<o&&o<=a;if("both"===r)return Math.abs(p)>=Math.abs(f)?p>0?s<i&&i<u:u<i&&i<s:f>0?a<o&&o<c:c<o&&o<a}}(o[s],o[s+1],i,a))return!0}return!1}function Cn(t,e){var n=K(t),r=K(e),i=J(t),o=J(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Mn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return Nn(i,o,{ignoreEndVertices:!0});case"Polygon":return Pt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Mn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Nn(t.coordinates[r],e))return!1;n||(n=Nn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Pt(t.coordinates[1],e);if(!i){n=!1;break}i=Pt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Nn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n=j(e),r=j(t);if(!Sn(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!Pt(t.coordinates[o],e))return!1;if(i||(i=Pt(t.coordinates[o],e,{ignoreBoundary:!0})),!i){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);i=Pt(s,e,{ignoreBoundary:!0})}}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=j(t);if(!Sn(j(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Pt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Sn(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ln(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i=n.mask,o=n.properties,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],h=t[2],l=t[3],p=e/qt([a,u],[h,u],n)*(h-a),f=e/qt([a,u],[a,l],n)*(l-u),g=h-a,d=l-u,y=Math.floor(g/p),_=(d-Math.floor(d/f)*f)/2,m=a+(g-y*p)/2;m<=h;){for(var v=u+_;v<=l;){var x=r([m,v],o);i?Cn(x,i)&&s.push(x):s.push(x),v+=f}m+=p}return c(s)}function Pn(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return S(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function On(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!On(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Rn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Tn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Tn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function An(t,e){var n=[],r=Qe();return F(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Fn(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),O(Dn(o,e),function(t){n.push(t),r.insert(t)})}}else(n=Dn(t,e).features).forEach(function(t){t.bbox||(t.bbox=le(j(t)))}),r.load(c(n))}),c(n)}function Dn(t,e){var n=[],r=U(t)[0],i=U(t)[t.geometry.coordinates.length-1];if(qn(r,X(e))||qn(i,X(e)))return c([t]);var o=Qe(),s=en(t);o.load(s);var u=o.search(e);if(!u.features.length)return c([t]);var h=Fn(e,u),l=R(s,function(t,r,i){var o=U(r)[1],s=X(e);return i===h.id?(t.push(s),n.push(a(t)),qn(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return l.length>1&&n.push(a(l)),c(n)}function Fn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return O(e,function(e){var i=on(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function qn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Gn(t,e,n,r,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Bn(n),c=Bn(r),h=t.properties;if(u===c)return a(fe(t,e,i).geometry.coordinates[0],h);for(var l=u,p=u<c?c:c+360,f=l,g=[],d=0;f<p;)g.push(pe(t,e,f,s).geometry.coordinates),f=l+360*++d/o;return f>p&&g.push(pe(t,e,p,s).geometry.coordinates),a(g,h)}function Bn(t){var e=t%360;return e<0&&(e+=360),e}function kn(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties,r=K(t),i=U(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return zn(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(zn(t,n))}),c(o);default:throw new Error("geom "+r+" not supported")}}function zn(t,e){return t.length>1?h(t,e):a(t[0],e)}function jn(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");r=void 0===r||r,i=void 0===i||i;switch(K(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(U(Xn(t,{},r,i)))}),p(o,n)}return Xn(t,n,r,i)}function Xn(t,e,n,r){e=e||t.properties||{};var i=U(t),s=K(t);if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(i=Un(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach(function(t){if(n&&(t=Un(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(j(a(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function Un(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Yn(t,e,n){var r,i,o,s,a,u=t.length,c=Hn(t[0],e),h=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],s=a=Hn(o=t[r],e);;){if(!(c|s)){h.push(i),s!==a?(h.push(o),r<u-1&&(n.push(h),h=[])):r===u-1&&h.push(o);break}if(c&s)break;c?c=Hn(i=Vn(i,o,c,e),e):s=Hn(o=Vn(i,o,s,e),e)}c=a}return h.length&&n.push(h),n}function Vn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Hn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Wn(t,e){for(var n=[],r=0;r<t.length;r++){var i=Gs.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function Jn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Zn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Kn(t)||Kn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Jn(t))return!!Jn(e)&&(t=Bs.call(t),e=Bs.call(e),Zn(t,e,n));if(Qn(t)){if(!Qn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;r>=0;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;r>=0;r--)if(i=o[r],!Zn(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Kn(t){return null===t||void 0===t}function Qn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function $n(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.tolerance||0,i=[],o=Qe();o.load(en(t));var s;return G(e,function(t){var e=!1;O(o.search(t),function(n){if(!1===e){var i=U(t).sort(),o=U(n).sort();Zn(i,o)?(e=!0,s=s?tr(s,t):t):(0===r?Nn(i[0],n)&&Nn(i[1],n):on(n,i[0]).properties.dist<=r&&on(n,i[1]).properties.dist<=r)?(e=!0,s=s?tr(s,t):t):(0===r?Nn(o[0],t)&&Nn(o[1],t):on(t,o[0]).properties.dist<=r&&on(t,o[1]).properties.dist<=r)&&(s=s?tr(s,n):n)}}),!1===e&&s&&(i.push(s),s=void 0)}),s&&i.push(s),c(i)}function tr(t,e){var n=U(e),r=U(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Zn(n[0],i)?s.unshift(n[1]):Zn(n[0],o)?s.push(n[1]):Zn(n[1],i)?s.unshift(n[0]):Zn(n[1],o)&&s.push(n[0]),t}function er(t){var e=t%360;return e<0&&(e+=360),e}function nr(t,e,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.units,s=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var a=E(e,o,"meters"),u=X(t),c=function(t,e,n,r){r=void 0===r?Fo:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=x(t[1]),a=x(n),u=i*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),l=Math.abs(h)>1e-11?u/h:Math.cos(s),p=i*Math.sin(a)/l;return[(180*(o+p)/Math.PI+540)%360-180,180*c/Math.PI]}(u,a,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,r(c,s)}function rr(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=ir(a,u,e),n<=0&&r>0?function(t,e,n){return ir(t,e,n)<0}(e,a,i)||(i=a):n>0&&r<=0&&(function(t,e,n){return ir(t,e,n)>0}(e,a,o)||(o=a)),n=r}return[i,o]}function ir(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function or(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=U(t),o=0,s=1;s<i.length;)n=r||i[0],o+=((r=i[s])[0]-n[0])*(r[1]+n[1]),s++;return o>0}function sr(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return A(t,function(t){sr(t,e)}),t;case"LineString":return ar(U(t),e),t;case"Polygon":return ur(U(t),e),t;case"MultiLineString":return U(t).forEach(function(t){ar(t,e)}),t;case"MultiPolygon":return U(t).forEach(function(t){ur(t,e)}),t;case"Point":case"MultiPoint":return t}}function ar(t,e){or(t)===e&&t.reverse()}function ur(t,e){or(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)or(t[n])===e&&t[n].reverse()}function cr(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};O(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)});return Object.keys(n).map(function(t){var e=n[t],r=e.sort(function(t,e){return U(t)[0]-U(e)[0]});return r}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],h=0;h<u.length;h++){var l=u[h];l.properties[n]?c.push(l.properties[n]):c.push(0),!0===i&&(l.properties.matrixPosition=[a,h])}s.push(c)}return s}function hr(t,e,n,r){r=r||{};for(var i=Object.keys(ks),o=0;o<i.length;o++){var s=i[o],a=r[s];a=void 0!==a&&null!==a?a:ks[s],zs[s]=a}zs.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var c=0,h=t[a+1][u],l=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(h)||isNaN(l)||isNaN(p)||isNaN(f))){c|=h<e?0:h>s?128:64,c|=l<e?0:l>s?32:16,c|=p<e?0:p>s?8:4;var g=+(c|=f<e?0:f>s?2:1),d=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var y=(h+l+p+f)/4;d=y>s?2:y<e?0:1,34===c?1===d?c=35:0===d&&(c=136):136===c?1===d?(c=35,d=4):0===d&&(c=34):17===c?1===d?(c=155,d=4):0===d&&(c=153):68===c?1===d?(c=103,d=4):0===d&&(c=102):153===c?1===d&&(c=155):102===c?1===d&&(c=103):152===c?d<2&&(c=156,d=1):137===c?d<2&&(c=139,d=1):98===c?d<2&&(c=99,d=1):38===c?d<2&&(c=39,d=1):18===c?d>0?(c=156,d=4):c=152:33===c?d>0?(c=139,d=4):c=137:72===c?d>0?(c=99,d=4):c=98:132===c&&(d>0?(c=39,d=4):c=38)}if(0!=c&&170!=c){var _,m,v,x,E,w,b,I;_=m=v=x=E=w=b=I=.5;var N=[];1===c?(v=1-lr(e,p,f),I=1-lr(e,h,f),N.push(Sa[c])):169===c?(v=lr(s,f,p),I=lr(s,f,h),N.push(Sa[c])):4===c?(w=1-lr(e,l,p),x=lr(e,f,p),N.push(Na[c])):166===c?(w=lr(s,p,l),x=1-lr(s,p,f),N.push(Na[c])):16===c?(E=lr(e,p,l),m=lr(e,h,l),N.push(Ia[c])):154===c?(E=1-lr(s,l,p),m=1-lr(s,l,h),N.push(Ia[c])):64===c?(b=lr(e,f,h),_=1-lr(e,l,h),N.push(La[c])):106===c?(b=1-lr(s,h,f),_=lr(s,h,l),N.push(La[c])):168===c?(x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),N.push(Ca[c]),N.push(Sa[c])):2===c?(x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),N.push(Ca[c]),N.push(Sa[c])):162===c?(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),N.push(Ca[c]),N.push(Sa[c])):8===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),N.push(Ia[c]),N.push(Na[c])):138===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Ia[c]),N.push(Na[c])):32===c?(E=lr(s,p,l),w=lr(e,p,l),_=lr(e,h,l),m=lr(s,h,l),N.push(Ia[c]),N.push(Na[c])):42===c?(I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l),N.push(Ma[c]),N.push(La[c])):128===c&&(I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Ma[c]),N.push(La[c])),5===c?(w=1-lr(e,l,p),I=1-lr(e,h,f),N.push(Na[c])):165===c?(w=lr(s,p,l),I=lr(s,f,h),N.push(Na[c])):20===c?(x=lr(e,f,p),m=lr(e,h,l),N.push(Ca[c])):150===c?(x=1-lr(s,p,f),m=1-lr(s,l,h),N.push(Ca[c])):80===c?(E=lr(e,p,l),b=lr(e,f,h),N.push(Ia[c])):90===c?(E=1-lr(s,l,p),b=1-lr(s,h,f),N.push(Ia[c])):65===c?(v=1-lr(e,p,f),_=1-lr(e,l,h),N.push(Sa[c])):105===c?(v=lr(s,f,p),_=lr(s,h,l),N.push(Sa[c])):160===c?(E=lr(s,p,l),w=lr(e,p,l),I=lr(e,f,h),b=lr(s,f,h),N.push(Ia[c]),N.push(Na[c])):10===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),I=1-lr(s,h,f),b=1-lr(e,h,f),N.push(Ia[c]),N.push(Na[c])):130===c?(x=1-lr(e,p,f),v=1-lr(s,p,f),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Ca[c]),N.push(Sa[c])):40===c?(x=lr(s,f,p),v=lr(e,f,p),_=lr(e,h,l),m=lr(s,h,l),N.push(Ca[c]),N.push(Sa[c])):101===c?(w=lr(s,p,l),_=lr(s,h,l),N.push(Na[c])):69===c?(w=1-lr(e,l,p),_=1-lr(e,l,h),N.push(Na[c])):149===c?(I=lr(s,f,h),m=1-lr(s,l,h),N.push(Ma[c])):21===c?(I=1-lr(e,h,f),m=lr(e,h,l),N.push(Ma[c])):86===c?(x=1-lr(s,p,f),b=1-lr(s,h,f),N.push(Ca[c])):84===c?(x=lr(e,f,p),b=lr(e,f,h),N.push(Ca[c])):89===c?(E=1-lr(s,l,p),v=lr(s,f,p),N.push(Sa[c])):81===c?(E=lr(e,p,l),v=1-lr(e,p,f),N.push(Sa[c])):96===c?(E=lr(s,p,l),w=lr(e,p,l),b=lr(e,f,h),_=lr(s,h,l),N.push(Ia[c]),N.push(Na[c])):74===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),b=1-lr(s,h,f),_=1-lr(e,l,h),N.push(Ia[c]),N.push(Na[c])):24===c?(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),m=lr(e,h,l),N.push(Ia[c]),N.push(Sa[c])):146===c?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),m=1-lr(s,l,h),N.push(Ia[c]),N.push(Sa[c])):6===c?(w=1-lr(e,l,p),x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),N.push(Na[c]),N.push(Ca[c])):164===c?(w=lr(s,p,l),x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),N.push(Na[c]),N.push(Ca[c])):129===c?(v=1-lr(e,p,f),I=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Sa[c]),N.push(Ma[c])):41===c?(v=lr(s,f,p),I=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l),N.push(Sa[c]),N.push(Ma[c])):66===c?(x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),_=1-lr(e,l,h),N.push(Ca[c]),N.push(Sa[c])):104===c?(x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),_=lr(s,h,l),N.push(Sa[c]),N.push(Pa[c])):144===c?(E=lr(e,p,l),I=lr(e,f,h),b=lr(s,f,h),m=1-lr(s,l,h),N.push(Ia[c]),N.push(La[c])):26===c?(E=1-lr(s,l,p),I=1-lr(s,h,f),b=1-lr(e,h,f),m=lr(e,h,l),N.push(Ia[c]),N.push(La[c])):36===c?(w=lr(s,p,l),x=lr(e,f,p),_=lr(e,h,l),m=lr(s,h,l),N.push(Na[c]),N.push(Ca[c])):134===c?(w=1-lr(e,l,p),x=1-lr(s,p,f),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Na[c]),N.push(Ca[c])):9===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),I=1-lr(e,h,f),N.push(Ia[c]),N.push(Na[c])):161===c?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),I=lr(s,f,h),N.push(Ia[c]),N.push(Na[c])):37===c?(w=lr(s,p,l),I=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l),N.push(Na[c]),N.push(Ma[c])):133===c?(w=1-lr(e,l,p),I=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Na[c]),N.push(Ma[c])):148===c?(x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),m=1-lr(s,l,h),N.push(Ca[c]),N.push(La[c])):22===c?(x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),m=lr(e,h,l),N.push(Ca[c]),N.push(La[c])):82===c?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),N.push(Ia[c]),N.push(Sa[c])):88===c?(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),N.push(Ia[c]),N.push(Sa[c])):73===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),_=1-lr(e,l,h),N.push(Ia[c]),N.push(Na[c])):97===c?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),_=lr(s,h,l),N.push(Ia[c]),N.push(Na[c])):145===c?(E=lr(e,p,l),v=1-lr(e,p,f),I=lr(s,f,h),m=1-lr(s,l,h),N.push(Ia[c]),N.push(Ma[c])):25===c?(E=1-lr(s,l,p),v=lr(s,f,p),I=1-lr(e,h,f),m=lr(e,h,l),N.push(Ia[c]),N.push(Ma[c])):70===c?(w=1-lr(e,l,p),x=1-lr(s,p,f),b=1-lr(s,h,f),_=1-lr(e,l,h),N.push(Na[c]),N.push(Ca[c])):100===c?(w=lr(s,p,l),x=lr(e,f,p),b=lr(e,f,h),_=lr(s,h,l),N.push(Na[c]),N.push(Ca[c])):34===c?(0===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(Ma[c]),N.push(La[c])):35===c?(4===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(Sa[c]),N.push(La[c])):136===c?(0===d?(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)):(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)),N.push(Ia[c]),N.push(Na[c]),N.push(Ma[c]),N.push(La[c])):153===c?(0===d?(E=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),m=lr(e,h,l)):(E=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),m=1-lr(s,l,h)),N.push(Ia[c]),N.push(Sa[c])):102===c?(0===d?(w=1-lr(e,l,p),x=lr(e,f,p),b=lr(e,f,h),_=1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),b=1-lr(s,h,f),_=lr(s,h,l)),N.push(Na[c]),N.push(La[c])):155===c?(4===d?(E=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),m=lr(e,h,l)):(E=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),m=1-lr(s,l,h)),N.push(Ia[c]),N.push(Ma[c])):103===c?(4===d?(w=1-lr(e,l,p),x=lr(e,f,p),b=lr(e,f,h),_=1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),b=1-lr(s,h,f),_=lr(s,h,l)),N.push(Na[c]),N.push(Ca[c])):152===c?(0===d?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),m=lr(e,h,l)):(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),m=1-lr(s,l,h)),N.push(Ia[c]),N.push(Ca[c]),N.push(Sa[c])):156===c?(4===d?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),m=lr(e,h,l)):(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),m=1-lr(s,l,h)),N.push(Ia[c]),N.push(Sa[c]),N.push(La[c])):137===c?(0===d?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)):(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)),N.push(Ia[c]),N.push(Na[c]),N.push(Sa[c])):139===c?(4===d?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)):(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)),N.push(Ia[c]),N.push(Na[c]),N.push(Ma[c])):98===c?(0===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),_=1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),_=lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(La[c])):99===c?(4===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),_=1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),_=lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(Sa[c])):38===c?(0===d?(w=1-lr(e,l,p),x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)),N.push(Na[c]),N.push(Ma[c]),N.push(La[c])):39===c?(4===d?(w=1-lr(e,l,p),x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l)),N.push(Na[c]),N.push(Ca[c]),N.push(La[c])):85===c&&(E=1,w=0,x=1,v=0,I=0,b=1,_=0,m=1),(_<0||_>1||m<0||m>1||E<0||E>1||x<0||x>1||I<0||I>1||b<0||b>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+g+" "+h+","+l+","+p+","+f+" "+d+" "+_+" "+m+" "+E+" "+w+" "+x+" "+v+" "+I+" "+b),o.cells[a][u]={cval:c,cval_real:g,flipped:d,topleft:_,topright:m,righttop:E,rightbottom:w,bottomright:x,bottomleft:v,leftbottom:I,lefttop:b,edges:N}}}}}return o}(t,e,n);return zs.polygons?(zs.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=Ra[t.cval](t);"object"==typeof o&&pr(o)?"object"==typeof o[0]&&pr(o[0])?"object"==typeof o[0][0]&&pr(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(c)):(zs.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=t.cells[o][s],u=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Xs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Us?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Ys?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Xs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Us?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Ys?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Ys?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&js?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Ys?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&js?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&js?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&js?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&js?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Xs?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&js?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Xs?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(a),c=null,h=s,l=o;null!==u&&i.push([u.p[0]+h,u.p[1]+l]);do{if(null===(c=function(t,e,n,r){var i,o,s,a,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=Na[c],s=ea[c],a=na[c],u=ra[c];break;default:i=Ia[c],s=Qs[c],a=$s[c],u=ta[c]}break;case 1:switch(r){case 0:i=Ma[c],s=fa[c],a=ga[c],u=da[c];break;default:i=La[c],s=ha[c],a=la[c],u=pa[c]}break;default:switch(n){case-1:switch(r){case 0:i=Pa[c],s=Vs[c],a=Hs[c],u=Ws[c];break;default:i=Oa[c],s=Js[c],a=Zs[c],u=Ks[c]}break;case 1:switch(r){case 0:i=Sa[c],s=ia[c],a=oa[c],u=sa[c];break;default:i=Ca[c],s=aa[c],a=ua[c],u=ca[c]}}}{if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;!function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o)}switch(c=t.cval_real,i){case 0:c&Xs?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:c&Us?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:c&Us?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:c&Ys?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&Xs?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:c&Us?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:c&Us?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:c&Ys?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:c&Us?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:c&Ys?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:c&Ys?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&js?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:c&Us?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:c&Ys?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:c&Ys?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&js?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:c&Us?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&js?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:c&Ys?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&js?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&js?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&Xs?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&js?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&Xs?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u));return{p:[e,n],x:s,y:a,o:u}}(t.cells[l][h],u.x,u.y,u.o)))break;if(i.push([c.p[0]+h,c.p[1]+l]),h+=c.x,l+=c.y,u=c,l<0||l>=n||h<0||h>=r||void 0===t.cells[l][h]){h-=c.x,l-=c.y;var p=function(t,e,n,r,i,o){var s=t.cells[n][e],a=s.cval_real,u=e+r,c=n+i,h=[],l=!1;for(;!l;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,s=t.cells[c][u],a=s.cval_real,-1===i)if(0===o)if(a&Ys)h.push([u,c]),r=-1,i=0,o=0;else{if(!(a&Us)){h.push([u+s.bottomright,c]),r=0,i=1,o=1,l=!0;break}h.push([u+1,c]),r=1,i=0,o=0}else{if(!(a&Ys)){if(a&Us){h.push([u+s.bottomright,c]),r=0,i=1,o=1,l=!0;break}h.push([u+s.bottomleft,c]),r=0,i=1,o=0,l=!0;break}h.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&Xs)){if(a&js){h.push([u+s.topleft,c+1]),r=0,i=-1,o=0,l=!0;break}h.push([u+s.topright,c+1]),r=0,i=-1,o=1,l=!0;break}h.push([u+1,c+1]),r=1,i=0,o=1}else h.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&js)){if(a&Ys){h.push([u,c+s.leftbottom]),r=1,i=0,o=0,l=!0;break}h.push([u,c+s.lefttop]),r=1,i=0,o=1,l=!0;break}h.push([u,c+1]),r=0,i=1,o=0}else{if(!(a&js)){console.log("MarchingSquaresJS-isoBands: wtf");break}h.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&Us)){h.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,l=!0;break}h.push([u+1,c]),r=0,i=-1,o=1}else{if(!(a&Us)){if(a&Xs){h.push([u+1,c+s.righttop]),r=-1,i=0,o=1;break}h.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,l=!0;break}h.push([u+1,c]),r=0,i=-1,o=1}}else if(s=t.cells[c][u],a=s.cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(a&Ys)){h.push([u+s.bottomright,c]),r=0,i=1,o=1,l=!0;break}h.push([u,c])}else{if(!(a&js)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(a&Xs)){h.push([u+s.topleft,c+1]),r=0,i=-1,o=0,l=!0;break}h.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(a&Us)){h.push([u+1,c+s.righttop]),r=-1,i=0,o=1,l=!0;break}h.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(a&js)){h.push([u,c+s.leftbottom]),r=1,i=0,o=0,l=!0;break}h.push([u,c+1]),r=0,i=1,o=0}}if(u+=r,c+=i,u===e&&c===n)break}return{path:h,i:u,j:c,x:r,y:i,o:o}}(t,h,l,c.x,c.y,c.o);if(null===p)break;p.path.forEach(function(t){i.push(t)}),h=p.i,l=p.j,u=p}}while(void 0!==t.cells[l][h]&&t.cells[l][h].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(c)),"function"==typeof zs.successCallback&&zs.successCallback(u),u}function lr(t,e,n){return(t-e)/(n-e)}function pr(t){return t.constructor.toString().indexOf("Array")>-1}function fr(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=ye(t)),!1!==i&&void 0!==i||(t=Gt(t)),S(t,function(t){var n=sn(r,t)+e,i=un(r,t),o=U(nr(r,i,n));t[0]=o[0],t[1]=o[1]}),t)}function gr(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Gt(t)),"FeatureCollection"!==t.type||o?dr(t,e,r):(O(t,function(n,i){t.features[i]=dr(n,e,r)}),t)}function dr(t,e,n){var i="Point"===K(t);return n=function(t,e){void 0!==e&&null!==e||(e="centroid");if(Array.isArray(e)||"object"==typeof e)return X(e);var n=t.bbox?t.bbox:j(t),i=n[0],o=n[1],s=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,a]);case"ne":case"northeast":case"eastnorth":case"topright":return r([s,a]);case"center":return de(t);case void 0:case null:case"centroid":return ye(t);default:throw new Error("invalid origin")}}(t,n),1===e||i?t:(S(t,function(t){var r=un(n,t),i=sn(n,t),o=U(nr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function yr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function _r(t,e){return t[0]*e[1]-e[0]*t[1]}function mr(t,e){return!function(t,e){return 0===_r(yr(t),yr(e))}(t,e)&&function(t,e){var n=t[0],r=yr(t),i=e[0],o=yr(e),s=_r(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(_r(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/s,r))}(t,e)}function vr(t,e,n){var r=[],i=_(e,n),o=U(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,s=t[1]+n*(t[0]-e[0])/r,a=e[1]+n*(t[0]-e[0])/r;return[[i,s],[o,a]]}(t,o[e+1],i);if(r.push(n),e>0){var a=r[e-1],u=mr(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}}),a(s,t.properties)}function xr(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(r*s-o*i)}function Er(t,e){return e.geometry.coordinates[0].every(function(e){return Pt(r(e),t)})}function wr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];if(r*s-i*o!=0)return!1;return Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function br(t,e){return nn(e,kn(t)).features.length>0}function Ir(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function Nr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Cr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Lr(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function Sr(t,e){return nn(t,kn(e)).features.length>0}function Mr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,s=0;s<o&&n&&i;)Pt(r(t.coordinates[0][s]),e)?n=!0:i=!0,s++;return i&&i}function Lr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Pr(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Or(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Rr(t,e){return ka(t,e,{strict:!0})}function Tr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=K(t);if(n!==K(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new ja({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=T(t),o=T(e);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":G(t,function(t){G(e,function(e){$n(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":G(t,function(t){G(e,function(e){nn(t,e).features.length&&r++})})}return r>0}function Ar(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Dr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Fr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function qr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Gr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Gr(t,e,n){this.x=t,this.y=e,this.weight=n}function Br(t){this.content=[],this.scoreFunction=t}function kr(t){return t[0]}function zr(t){return t[1]}function jr(){this._=null}function Xr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ur(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Yr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Vr(t){for(;t.L;)t=t.L;return t}function Hr(t,e,n,r){var i=[null,null],o=uu.push(i)-1;return i.left=t,i.right=e,n&&Jr(i,t,e,n),r&&Jr(i,e,t,r),su[t.index].halfedges.push(o),su[e.index].halfedges.push(o),i}function Wr(t,e,n){var r=[e,n];return r.left=t,r}function Jr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Zr(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],h=0,l=1,p=a[0]-u,f=a[1]-c;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<l&&(l=o)}else if(p>0){if(o>l)return;o>h&&(h=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>l)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<l&&(l=o)}if(o=n-c,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>h&&(h=o)}if(o=i-c,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<l&&(l=o)}return!(h>0||l<1)||(h>0&&(t[0]=[u+h*p,c+h*f]),l<1&&(t[1]=[u+l*p,c+l*f]),!0)}}}}}function Kr(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,h=t.right,l=c[0],p=c[1],f=h[0],g=h[1],d=(l+f)/2,y=(p+g)/2;if(g===p){if(d<e||d>=r)return;if(l>f){if(u){if(u[1]>=i)return}else u=[d,n];o=[d,i]}else{if(u){if(u[1]<n)return}else u=[d,i];o=[d,n]}}else if(s=(l-f)/(g-p),a=y-s*d,s<-1||s>1)if(l>f){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<g){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Qr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function $r(t,e){return e[+(e.left!==t.site)]}function ti(t,e){return e[+(e.left===t.site)]}function ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,h=o[0]-s,l=o[1]-a,p=2*(u*l-c*h);if(!(p>=-pu)){var f=u*u+c*c,g=h*h+l*l,d=(l*f-c*g)/p,y=(u*g-h*f)/p,_=cu.pop()||new function(){Xr(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=i,_.x=d+s,_.y=(_.cy=y+a)+Math.sqrt(d*d+y*y),t.circle=_;for(var m=null,v=au._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x){if(!v.L){m=v.P;break}v=v.L}else{if(!v.R){m=v;break}v=v.R}au.insert(m,_),m||(iu=_)}}}}function ni(t){var e=t.circle;e&&(e.P||(iu=e.N),au.remove(e),cu.push(e),Xr(e),t.circle=null)}function ri(t){var e=hu.pop()||new function(){Xr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ii(t){ni(t),ou.remove(t),hu.push(t),Xr(t)}function oi(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];ii(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<lu&&Math.abs(r-u.circle.cy)<lu;)o=u.P,a.unshift(u),ii(u),u=o;a.unshift(u),ni(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<lu&&Math.abs(r-c.circle.cy)<lu;)s=c.N,a.push(c),ii(c),c=s;a.push(c),ni(c);var h,l=a.length;for(h=1;h<l;++h)c=a[h],u=a[h-1],Jr(c.edge,u.site,c.site,i);u=a[0],(c=a[l-1]).edge=Hr(u.site,c.site,null,i),ei(u),ei(c)}function si(t){for(var e,n,r,i,o=t[0],s=t[1],a=ou._;a;)if((r=ai(a,s)-o)>lu)a=a.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return ai(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(a,s))>lu)){r>-lu?(e=a.P,n=a):i>-lu?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){su[t.index]={site:t,halfedges:[]}}(t);var u=ri(t);if(ou.insert(e,u),e||n){if(e===n)return ni(e),n=ri(e.site),ou.insert(u,n),u.edge=n.edge=Hr(e.site,u.site),ei(e),void ei(n);if(n){ni(e),ni(n);var c=e.site,h=c[0],l=c[1],p=t[0]-h,f=t[1]-l,g=n.site,d=g[0]-h,y=g[1]-l,_=2*(p*y-f*d),m=p*p+f*f,v=d*d+y*y,x=[(y*m-f*v)/_+h,(p*v-d*m)/_+l];Jr(n.edge,c,g,x),u.edge=Hr(c,t,null,x),n.edge=Hr(t,g,null,x),ei(e),ei(n)}else u.edge=Hr(e.site,u.site)}}function ai(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],c=u-e;if(!c)return a;var h=a-r,l=1/o-1/c,p=h/c;return l?(-p+Math.sqrt(p*p-2*l*(h*h/(-2*c)-u+c/2+i-o/2)))/l+r:(r+a)/2}function ui(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ci(t,e){return e[1]-t[1]||e[0]-t[0]}function hi(t,e){var n,r,i,o=t.sort(ci).pop();for(uu=[],su=new Array(t.length),ou=new jr,au=new jr;;)if(i=iu,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(si(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;oi(i.arc)}if(function(){for(var t,e,n,r,i=0,o=su.length;i<o;++i)if((t=su[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Qr(t,uu[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=uu.length;o--;)Kr(i=uu[o],t,e,n,r)&&Zr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>lu||Math.abs(i[0][1]-i[1][1])>lu)||delete uu[o]}(s,a,u,c),function(t,e,n,r){var i,o,s,a,u,c,h,l,p,f,g,d,y=su.length,_=!0;for(i=0;i<y;++i)if(o=su[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)uu[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)g=(f=ti(o,uu[u[a]]))[0],d=f[1],l=(h=$r(o,uu[u[++a%c]]))[0],p=h[1],(Math.abs(g-l)>lu||Math.abs(d-p)>lu)&&(u.splice(a,0,uu.push(Wr(s,f,Math.abs(g-t)<lu&&r-d>lu?[t,Math.abs(l-t)<lu?p:r]:Math.abs(d-r)<lu&&n-g>lu?[Math.abs(p-r)<lu?l:n,r]:Math.abs(g-n)<lu&&d-e>lu?[n,Math.abs(l-n)<lu?p:e]:Math.abs(d-e)<lu&&g-t>lu?[Math.abs(p-e)<lu?l:t,e]:null))-1),++c);c&&(_=!1)}if(_){var m,v,x,E=1/0;for(i=0,_=null;i<y;++i)(o=su[i])&&(x=(m=(s=o.site)[0]-t)*m+(v=s[1]-e)*v)<E&&(E=x,_=o);if(_){var w=[t,e],b=[t,r],I=[n,r],N=[n,e];_.halfedges.push(uu.push(Wr(s=_.site,w,b))-1,uu.push(Wr(s,b,I))-1,uu.push(Wr(s,I,N))-1,uu.push(Wr(s,N,w))-1)}}for(i=0;i<y;++i)(o=su[i])&&(o.halfedges.length||delete su[i])}(s,a,u,c)}this.edges=uu,this.cells=su,ou=au=uu=su=null}function li(t){return(t=t.slice()).push(t[0]),o([t])}function pi(t,e,n,r){var i=(r=r||{}).steps||64,s=r.units||"kilometers",a=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!I(r))throw new Error("options must be an object");if(!b(i))throw new Error("steps must be a number");if(!b(a))throw new Error("angle must be a number");var h=X(t);if("degrees"===s)var l=x(a);else e=nr(t,e,90,{units:s}),n=nr(t,n,0,{units:s}),e=X(e)[0]-h[0],n=X(n)[1]-h[1];for(var p=[],f=0;f<i;f+=1){var g=-360*f/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(fi(g),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(fi(g),2));if(g<-90&&g>=-270&&(d=-d),g<-180&&g>=-360&&(y=-y),"degrees"===s){var _=d*Math.cos(l)+y*Math.sin(l),m=y*Math.cos(l)-d*Math.sin(l);d=_,y=m}p.push([d+h[0],y+h[1]])}return p.push(p[0]),"degrees"===s?o([p],c):fr(o([p],c),a,{pivot:u})}function fi(t){var e=t*Math.PI/180;return Math.tan(e)}function gi(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return A(t,function(t,e,n){var r=n[i];if(r=void 0===r||null===r?1:r,!b(r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&S(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),r([o/a,s/a],n)}function di(t,e,n,i){var o=n.properties.tolerance||.001,s=0,a=0,u=0,c=0;if(O(n,function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(r=Number(r),!b(r))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*qt(e,t);0===i&&(i=1);var o=r/i;s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o}}),c<1)throw new Error("no features to measure");var h=s/u,l=a/u;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(l-e[1])<o?r([h,l],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([h,l]),di([h,l],t,n,i-1))}function yi(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function _i(t){if(I(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*Ei(),180*Ei()]}function mi(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(_i(n)));return c(i)}function vi(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),b(r)||(r=10),b(i)||(i=10);for(var s=[],a=0;a<t;a++){var u=[],h=Array.apply(null,new Array(r+1)).map(Math.random);h.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),h.forEach(function(t){t=2*t*Math.PI/h[h.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(_i(n))),s.push(o([u]))}return c(s)}function xi(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!b(r)||r<2)&&(r=10),b(i)||(i=1e-4),b(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var h=[_i(n)],l=0;l<r-1;l++){var p=(0===l?2*Math.random()*Math.PI:Math.tan((h[l][1]-h[l-1][1])/(h[l][0]-h[l-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;h.push([h[l][0]+f*Math.cos(p),h[l][1]+f*Math.sin(p)])}s.push(a(h))}return c(s)}function Ei(){return Math.random()-.5}function wi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return O(t,function(t){Ci(t.properties,e)&&n.push(t)}),c(n)}function bi(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=Ni(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],h=0;h<a.length;h++)u.push(t.features[a[h]]);n(c(u),s,o)}}function Ii(t,e,n,r){var i=r;return bi(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function Ni(t,e){var n={};return O(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function Ci(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ci(t,e[r]))return!1;return!0}return Si(t,e)}function Si(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Mi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function Li(){}function Pi(t){this.message=t||""}function Oi(t){this.message=t||""}function Ri(){}function Ti(t){return null===t?Ac:t.color}function Ai(t){return null===t?null:t.parent}function Di(t,e){null!==t&&(t.color=e)}function Fi(t){return null===t?null:t.left}function qi(t){return null===t?null:t.right}function Gi(){this.root_=null,this.size_=0}function Bi(){}function ki(){this.array_=[],arguments[0]instanceof vc&&this.addAll(arguments[0])}function zi(){}function ji(t){this.message=t||""}function Xi(){this.array_=[]}function Ui(t){switch(t.type){case"Polygon":return mn(t)>1?t:null;case"MultiPolygon":var e=[];if(F(t,function(t){mn(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Yi(){this.reset()}function Vi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Hi(t){return t>1?kf:t<-1?-kf:Math.asin(t)}function Wi(){}function Ji(t,e){t&&eg.hasOwnProperty(t.type)&&eg[t.type](t,e)}function Zi(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ki(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Zi(t[n],e,1);e.polygonEnd()}function Qi(t){return[Hf(t[1],t[0]),Hi(t[2])]}function $i(t){var e=t[0],n=t[1],r=Wf(n);return[r*Wf(e),r*Kf(e),Kf(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function io(t){var e=Qf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>Bf?t-jf:t<-Bf?t+jf:t,e]}function so(t,e,n){return(t%=jf)?e||n?rg(uo(t),co(e,n)):uo(t):e||n?co(e,n):oo}function ao(t){return function(e,n){return e+=t,[e>Bf?e-jf:e<-Bf?e+jf:e,n]}}function uo(t){var e=ao(t);return e.invert=ao(-t),e}function co(t,e){function n(t,e){var n=Wf(e),a=Wf(t)*n,u=Kf(t)*n,c=Kf(e),h=c*r+a*i;return[Hf(u*o-h*s,a*r-c*i),Hi(h*o+u*s)]}var r=Wf(t),i=Kf(t),o=Wf(e),s=Kf(e);return n.invert=function(t,e){var n=Wf(e),a=Wf(t)*n,u=Kf(t)*n,c=Kf(e),h=c*o-u*s;return[Hf(u*o+c*s,a*r+h*i),Hi(h*r-a*i)]},n}function ho(t,e){(e=$i(e))[0]-=t,io(e);var n=function(t){return t>1?0:t<-1?Bf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+jf-Gf)%jf}function lo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function po(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function fo(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,c){var h=0,l=0;if(null==i||(h=s(i,a))!==(l=s(o,a))||u(i,o)<0^a>0)do{c.point(0===h||3===h?t:n,h>1?r:e)}while((h=(h+a+4)%4)!==l);else c.point(o[0],o[1])}function s(r,i){return Yf(r[0]-t)<Gf?i>0?0:3:Yf(r[0]-n)<Gf?i>0?2:1:Yf(r[1]-e)<Gf?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){i(t,e)&&E.point(t,e)}function c(o,s){var a=i(o,s);if(l&&p.push([o,s]),v)f=o,g=s,d=a,v=!1,a&&(E.lineStart(),E.point(o,s));else if(a&&m)E.point(o,s);else{var u=[y=Math.max(pg,Math.min(lg,y)),_=Math.max(pg,Math.min(lg,_))],c=[o=Math.max(pg,Math.min(lg,o)),s=Math.max(pg,Math.min(lg,s))];sg(u,c,t,e,n,r)?(m||(E.lineStart(),E.point(u[0],u[1])),E.point(c[0],c[1]),a||E.lineEnd(),x=!1):a&&(E.lineStart(),E.point(o,s),x=!1)}y=o,_=s,m=a}var h,l,p,f,g,d,y,_,m,v,x,E=s,w=og(),b={point:u,lineStart:function(){b.point=c,l&&l.push(p=[]),v=!0,m=!1,y=_=NaN},lineEnd:function(){h&&(c(f,g),d&&m&&w.rejoin(),h.push(w.result())),b.point=u,m&&E.lineEnd()},polygonStart:function(){E=w,h=[],l=[],x=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,c=a.length,h=a[0],p=h[0],f=h[1];u<c;++u)o=p,s=f,p=(h=a[u])[0],f=h[1],s<=r?f>r&&(p-o)*(r-s)>(f-s)*(t-o)&&++e:f<=r&&(p-o)*(r-s)<(f-s)*(t-o)&&--e;return e}(),n=x&&e,i=(h=hg(h)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&ug(h,a,e,o,s),s.polygonEnd()),E=s,h=l=p=null}};return b}}function go(t){return t.length>1}function yo(t,e){return((t=t.x)[0]<0?t[1]-kf-Gf:kf-t[1])-((e=e.x)[0]<0?e[1]-kf-Gf:kf-e[1])}function _o(t){return function(e){var n=new mo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function mo(){}function vo(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ng(n,t.stream(vg));var s=vg.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,c])}function xo(t){return function(t){function e(t){return t=c(t[0]*Uf,t[1]*Uf),[t[0]*d+s,a-t[1]*d]}function n(t,e){return t=o(t,e),[t[0]*d+s,a-t[1]*d]}function r(){c=rg(u=so(x,E,w),o);var t=o(m,v);return s=y-t[0]*d,a=_+t[1]*d,i()}function i(){return f=g=null,e}var o,s,a,u,c,h,l,p,f,g,d=150,y=480,_=250,m=0,v=0,x=0,E=0,w=0,b=null,I=Eg,N=null,C=gg,S=.5,M=Ng(n,S);e.stream=function(t){return f&&g===t?f:f=Cg(I(u,M(C(g=t))))},e.clipAngle=function(t){return arguments.length?(I=+t?wg(b=t*Uf,6*Uf):(b=null,Eg),i()):b*Xf},e.clipExtent=function(t){return arguments.length?(C=null==t?(N=h=l=p=null,gg):fo(N=+t[0][0],h=+t[0][1],l=+t[1][0],p=+t[1][1]),i()):null==N?null:[[N,h],[l,p]]},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(y=+t[0],_=+t[1],r()):[y,_]},e.center=function(t){return arguments.length?(m=t[0]%360*Uf,v=t[1]%360*Uf,r()):[m*Xf,v*Xf]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Uf,E=t[1]%360*Uf,w=t.length>2?t[2]%360*Uf:0,r()):[x*Xf,E*Xf,w*Xf]},e.precision=function(t){return arguments.length?(M=Ng(n,S=t*t),i()):Qf(S)},e.fitExtent=function(t,n){return vo(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return vo(t,[[0,0],e],n)}(e,t,n)};return function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-s)/d,(a-t[1])/d))&&[t[0]*Xf,t[1]*Xf]},r()}}(function(){return t})()}function Eo(t,e){return[t,Zf($f((kf+e)/2))]}function wo(t,e){return[Zf($f((kf+e)/2)),-t]}function bo(t,n,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return A(t,function(t){var e=bo(t,n,r,i);e&&a.push(e)}),c(a)}var u,h=j(t),l=h[1]>50&&h[3]>50;u=l?{type:s.type,coordinates:No(s.coordinates,So(s))}:cn(s);var p=(new bh).read(u),f=d(y(n,r),"meters"),g=gp.bufferOp(p,f);if(g=(new Ih).write(g),!Io(g.coordinates)){var _;return(_=l?{type:g.type,coordinates:Co(g.coordinates,So(s))}:hn(g)).geometry?_:e(_,o)}}function Io(t){return Array.isArray(t[0])?Io(t[0]):isNaN(t[0])}function No(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return No(t,e)})}function Co(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return Co(t,e)})}function So(t){var e=de(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Sg().center(e).rotate(n).scale(Fo)}function Mo(){for(var t=new bh,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Df.union(e,t.read(JSON.stringify(arguments[n].geometry)));return e=(new Ih).write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}function Lo(t,n){var r=J(t),i=J(n);if(te(Pn(i,{precision:4})).coordinates[0].length<4)return null;if(te(Pn(r,{precision:4})).coordinates[0].length<4)return null;var o=new bh,s=o.read(Pn(r)),a=o.read(Pn(i)),u=Cf.intersection(s,a);if(u.isEmpty())return null;return e((new Ih).write(u))}function Po(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,o){var s=n(e,t);s>=0&&(void 0===i||s<i)&&(i=s,r=o)}),r}(t,e,function(t,e){return t-e})}function Oo(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,s=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(K(s)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],u=t[1],h=t[2],l=t[3],p=(u+l)/2,f=(a+h)/2,g=2*e/qt([a,p],[h,p],n)*(h-a),d=2*e/qt([f,u],[f,l],n)*(l-u),y=g/2,_=2*y,m=Math.sqrt(3)/2*d,v=h-a,x=l-u,E=.75*_,w=m,N=(v-_)/(_-y/2),C=Math.floor(N),S=(C*E-y/2-v)/2-y/2+E/2,M=Math.floor((x-m)/m),L=(x-M*m)/2,P=M*m-x>m/2;P&&(L-=m/4);for(var O=[],R=[],T=0;T<6;T++){var A=2*Math.PI/6*T;O.push(Math.cos(A)),R.push(Math.sin(A))}for(var D=[],F=0;F<=C;F++)for(var q=0;q<=M;q++){var G=F%2==1;if((0!==q||!G)&&(0!==q||!P)){var B=F*E+a-S,k=q*w+u+L;if(G&&(k-=m/2),!0===i)(function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*s[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*s[(u+1)%6]]),c.push(t),a.push(o([c],r))}return a})([B,k],g/2,d/2,r,O,R).forEach(function(t){s?Lo(s,t)&&D.push(t):D.push(t)});else{var z=function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=t[0]+e*i[u],h=t[1]+n*s[u];a.push([c,h])}return a.push(a[0].slice()),o([a],r)}([B,k],g/2,d/2,r,O,R);s?Lo(s,z)&&D.push(z):D.push(z)}}}return c(D)}function Ro(t){if(t.features.length<=1)return t;var e=function(t){var e=Vo(),n=[];return F(t,function(t,e){var r=j(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return F(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},To),r[i]=!0;;){var o=j(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0){var a=s.map(function(t){return r[t.index]=!0,e.remove({index:t.index},To),t.geojson});a.push(t),t=Mo.apply(this,a)}if(0===s.length)break}n.push(t)}),c(n)}function To(t,e){return t.index===e.index}function Ao(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],h=t[2],l=t[3],p=e/qt([a,u],[h,u],n)*(h-a),f=e/qt([a,u],[a,l],n)*(l-u),g=h-a,d=l-u,y=Math.floor(g/p),_=Math.floor(d/f),m=(d-_*f)/2,v=a+(g-y*p)/2,x=0;x<y;x++){for(var E=u+m,w=0;w<_;w++){var N=o([[[v,E],[v,E+f],[v+p,E+f],[v+p,E],[v,E]]],r);i?Lo(i,N)&&s.push(N):s.push(N),E+=f}v+=p}return c(s)}function Do(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/qt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/qt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),h=0,l=t[0];l<=t[2];){for(var p=0,f=t[1];f<=t[3];){var g=null,d=null;h%2==0&&p%2==0?(g=o([[[l,f],[l,f+u],[l+a,f],[l,f]]],r),d=o([[[l,f+u],[l+a,f+u],[l+a,f],[l,f+u]]],r)):h%2==0&&p%2==1?(g=o([[[l,f],[l+a,f+u],[l+a,f],[l,f]]],r),d=o([[[l,f],[l,f+u],[l+a,f+u],[l,f]]],r)):p%2==0&&h%2==1?(g=o([[[l,f],[l,f+u],[l+a,f+u],[l,f]]],r),d=o([[[l,f],[l+a,f+u],[l+a,f],[l,f]]],r)):p%2==1&&h%2==1&&(g=o([[[l,f],[l,f+u],[l+a,f],[l,f]]],r),d=o([[[l,f+u],[l+a,f+u],[l+a,f],[l,f+u]]],r)),i?(Lo(i,g)&&s.push(g),Lo(i,d)&&s.push(d)):(s.push(g),s.push(d)),f+=u,p++}h++,l+=a}return c(s)}var Fo=6371008.8,qo={meters:Fo,metres:Fo,millimeters:1e3*Fo,millimetres:1e3*Fo,centimeters:100*Fo,centimetres:100*Fo,kilometers:Fo/1e3,kilometres:Fo/1e3,miles:Fo/1609.344,nauticalmiles:Fo/1852,inches:39.37*Fo,yards:Fo/1.0936,feet:3.28084*Fo,radians:1,degrees:Fo/111325},Go={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Fo,degrees:1/111325},Bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},ko=Object.freeze({earthRadius:Fo,factors:qo,unitsFactors:Go,areaFactors:Bo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:c,multiLineString:h,multiPoint:l,multiPolygon:p,geometryCollection:f,round:g,radiansToLength:d,lengthToRadians:y,lengthToDegrees:_,bearingToAzimuth:m,radiansToDegrees:v,degreesToRadians:x,convertLength:E,convertArea:w,isNumber:b,isObject:I,validateBBox:N,validateId:C,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),zo=Object.freeze({coordEach:S,coordReduce:M,propEach:L,propReduce:P,featureEach:O,featureReduce:R,coordAll:T,geomEach:A,geomReduce:D,flattenEach:F,flattenReduce:q,segmentEach:G,segmentReduce:B,lineEach:k,lineReduce:z}),jo=Object.freeze({getCoord:X,getCoords:U,containsNumber:Y,geojsonType:V,featureOf:H,collectionOf:W,getGeom:J,getGeomType:Z,getType:K}),Xo={successCallback:null,verbose:!1},Uo={},Yo=it,Vo=st;st.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!dt(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],dt(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):gt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!dt(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,dt(t,s)){if(e.leaf||gt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=yt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!gt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:ht,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return i=yt(t.slice(e,n+1)),at(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=yt([])).leaf=!1,i.height=r;var a,u,c,h,l=Math.ceil(o/s),p=l*Math.ceil(Math.sqrt(s));for(_t(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(_t(t,a,c=Math.min(a+p-1,n),l,this.compareMinY),u=a;u<=c;u+=l)h=Math.min(u+l-1,c),i.children.push(this._build(t,u,h,r-1));return at(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,h,l;r.push(e),!e.leaf&&r.length-1!==n;){for(h=l=1/0,i=0,o=e.children.length;i<o;i++)u=pt(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<l?(l=c,h=u<h?u:h,a=s):c===l&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),ct(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=yt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,at(n,this.toBBox),at(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=yt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,at(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,h;for(u=c=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ut(t,0,r,this.toBBox),o=ut(t,r,n,this.toBBox)),a=pt(i)+pt(o),s<u?(u=s,h=r,c=a<c?a:c):s===u&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ht,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=ut(t,0,e,s),u=ut(t,n-e,n,s),c=ft(a)+ft(u);for(i=e;i<n-e;i++)o=t.children[i],ct(a,t.leaf?s(o):o),c+=ft(a);for(i=n-e-1;i>=e;i--)o=t.children[i],ct(u,t.leaf?s(o):o),c+=ft(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)ct(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():at(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ho=function(t,e,n){var r=t*e,i=Wo*t,o=i-(i-t),s=t-o,a=Wo*e,u=a-(a-e),c=e-u,h=s*c-(r-o*u-s*u-o*c);return n?(n[0]=h,n[1]=r,n):[h,r]},Wo=+(Math.pow(2,27)+1),Jo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=n+r,a=new Array(s),u=0,c=0,h=0,l=Math.abs,p=t[c],f=l(p),g=e[h],d=l(g);f<d?(o=p,(c+=1)<n&&(f=l(p=t[c]))):(o=g,(h+=1)<r&&(d=l(g=e[h]))),c<n&&f<d||h>=r?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=e[h])));for(var y,_,m=i+o,v=m-i,x=o-v,E=x,w=m;c<n&&h<r;)f<d?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=e[h]))),(x=(o=E)-(v=(m=i+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y;for(;c<n;)(x=(o=E)-(v=(m=(i=p)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(c+=1)<n&&(p=t[c]);for(;h<r;)(x=(o=E)-(v=(m=(i=g)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(h+=1)<r&&(g=e[h]);return E&&(a[u++]=E),w&&(a[u++]=w),u||(a[u++]=0),a.length=u,a},Zo=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},Ko=function(t,e){var n=t.length;if(1===n){var r=Ho(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Ho(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Ho(t[u],e,s);var c=o[1];Zo(c,s[0],o),o[0]&&(i[a++]=o[0]);var h=s[1],l=o[1],p=h+l,f=l-(p-h);o[1]=p,f&&(i[a++]=f)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},Qo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=n+r,a=new Array(s),u=0,c=0,h=0,l=Math.abs,p=t[c],f=l(p),g=-e[h],d=l(g);f<d?(o=p,(c+=1)<n&&(f=l(p=t[c]))):(o=g,(h+=1)<r&&(d=l(g=-e[h]))),c<n&&f<d||h>=r?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=-e[h])));for(var y,_,m=i+o,v=m-i,x=o-v,E=x,w=m;c<n&&h<r;)f<d?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=-e[h]))),(x=(o=E)-(v=(m=i+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y;for(;c<n;)(x=(o=E)-(v=(m=(i=p)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(c+=1)<n&&(p=t[c]);for(;h<r;)(x=(o=E)-(v=(m=(i=g)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(h+=1)<r&&(g=-e[h]);return E&&(a[u++]=E),w&&(a[u++]=w),u||(a[u++]=0),a.length=u,a},$o=mt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",r(i(e(t,s))),",",n(s),t[0][s],")"].join(""));return o}function o(t){for(var n=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var c=r(n),h=r(o),l="orientation"+t+"Exact",p=["function ",l,"(",a.join(),"){var p=",c,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",p)(Jo,Ho,Ko,Qo)}var s=5,a=o(3),u=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var u=3.3306690738754716e-16*r;return s>=u||s<=-u?s:a(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],c=e[1]-r[1],h=n[1]-r[1],l=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],g=o*h,d=s*c,y=s*a,_=i*h,m=i*c,v=o*a,x=l*(g-d)+p*(y-_)+f*(m-v),E=7.771561172376103e-16*((Math.abs(g)+Math.abs(d))*Math.abs(l)+(Math.abs(y)+Math.abs(_))*Math.abs(p)+(Math.abs(m)+Math.abs(v))*Math.abs(f));return x>E||-x>E?x:u(t,e,n,r)}];!function(){for(;c.length<=s;)c.push(o(c.length));for(var e=[],n=["slow"],r=0;r<=s;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=s;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=c[t.length];return e||(e=c[t.length]=o(t.length)),e.apply(void 0,t)}].concat(c)),r=0;r<=s;++r)t.exports[r]=c[r]}()}),ts=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],c=o.length;c>1&&es(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;c>1&&es(t[s[c-2]],t[s[c-1]],u)>=0;)c-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var h=0,l=(r=0,o.length);r<l;++r)n[h++]=o[r];for(var p=s.length-2;p>0;--p)n[h++]=s[p];return n},es=$o[3],ns=vt,rs=vt;vt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},ns.default=rs;var is=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],h=e[s][1];u>r!=h>r&&n<(c-a)*(r-u)/(h-u)+a&&(i=!i)}return i},os=$o[3],ss=xt,as=xt;ss.default=as;var us=function(t){return t},cs=function(t){if(null==t)return us;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,c=t.length,h=new Array(c);for(h[0]=(e+=t[0])*r+o,h[1]=(n+=t[1])*i+s;u<c;)h[u]=t[u],++u;return h}},hs=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},ls=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}var r={},i={},o={},s=[],a=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,r,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var c=r===n?n:n.concat(r);i[c.start=n.start]=o[c.end=r.end]=c}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=a,r=o[a]){delete o[r.end];var h=r===n?n:r.concat(n);i[h.start=r.start]=o[h.end=n.end]=h}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=a]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s},ps=function(t){return Xt(t,Ut.apply(this,arguments))},fs=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,c=0;c<t;++c)s[c]=i;return{set:function(r,o){for(var c=e(r)&u,h=s[c],l=0;h!=i;){if(n(h,r))return a[c]=o;if(++l>=t)throw new Error("full hashmap");h=s[c=c+1&u]}return s[c]=r,a[c]=o,o},maybeSet:function(r,o){for(var c=e(r)&u,h=s[c],l=0;h!=i;){if(n(h,r))return a[c];if(++l>=t)throw new Error("full hashmap");h=s[c=c+1&u]}return s[c]=r,a[c]=o,o},get:function(r,o){for(var c=e(r)&u,h=s[c],l=0;h!=i;){if(n(h,r))return a[c];if(++l>=t)break;h=s[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}},gs=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ds=new ArrayBuffer(16),ys=new Float64Array(ds),_s=new Uint32Array(ds),ms=function(t){ys[0]=t[0],ys[1]=t[1];var e=_s[0]^_s[1];return 2147483647&(e=e<<5^e>>7^_s[2]^_s[3])},vs=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=f[n];if(i>=0){var o=g[n];i===e&&o===r||i===r&&o===e||(++y,d[n]=1)}else f[n]=e,g[n]=r}}function n(t){return ms(u[t])}function r(t,e){return gs(u[t],u[e])}var i,o,s,a,u=t.coordinates,c=t.lines,h=t.rings,l=function(){for(var t=fs(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),g=new Int32Array(u.length),d=new Int8Array(u.length),y=0;for(i=0,o=u.length;i<o;++i)p[i]=f[i]=g[i]=-1;for(i=0,o=c.length;i<o;++i){var _=c[i],m=_[0],v=_[1];for(s=l[m],a=l[++m],++y,d[s]=1;++m<=v;)e(i,s,s=a,a=l[m]);++y,d[a]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=h.length;i<o;++i){var x=h[i],E=x[0]+1,w=x[1];for(e(i,l[w-1],s=l[E-1],a=l[E]);++E<=w;)e(i,s,s=a,a=l[E])}p=f=g=null;var b,I=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*y,ms,gs);for(i=0,o=u.length;i<o;++i)d[b=l[i]]&&I.add(u[b]);return I},xs=function(t){var e,n,r,i=vs(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],c=u[0],h=u[1];++c<h;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var l=a[n],p=l[0],f=p,g=l[1],d=i.has(o[p]);++f<g;)i.has(o[f])&&(d?(e={0:f,1:l[1]},l[1]=f,l=l.next=e):(!function(t,e,n,r){Yt(t,e,n),Yt(t,e,e+r),Yt(t,e+r,n)}(o,p,g,g-f),o[g]=o[p],d=!0,f=p));return t},Es=function(t){function e(t){var e,n,r,i,o,s,a,u;if(r=f.get(e=c[t[0]]))for(a=0,u=r.length;a<u;++a)if(i=r[a],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!gs(c[n],c[r]))return!1;return!0}(i,t))return t[0]=i[0],void(t[1]=i[1]);if(o=f.get(n=c[t[1]]))for(a=0,u=o.length;a<u;++a)if(s=o[a],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!gs(c[n],c[o]))return!1;return!0}(s,t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),g.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var s=i(t),a=i(e),u=0;u<o;++u)if(!gs(c[n+(u+s)%o],c[r+(u+a)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],s=e[1],a=o-n;if(a!==s-r)return!1;for(var u=i(t),h=a-i(e),l=0;l<a;++l)if(!gs(c[n+(l+u)%a],c[s-(l+h)%a]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var s=c[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}var o,s,a,u,c=t.coordinates,h=t.lines,l=t.rings,p=h.length+l.length;for(delete t.lines,delete t.rings,a=0,u=h.length;a<u;++a)for(o=h[a];o=o.next;)++p;for(a=0,u=l.length;a<u;++a)for(s=l[a];s=s.next;)++p;var f=fs(2*p*1.4,ms,gs),g=t.arcs=[];for(a=0,u=h.length;a<u;++a){o=h[a];do{e(o)}while(o=o.next)}for(a=0,u=l.length;a<u;++a)if((s=l[a]).next)do{e(s)}while(s=s.next);else!function(t){var e,o,s,a,u;if(o=f.get(e=c[t[0]]))for(a=0,u=o.length;a<u;++a){if(s=o[a],n(s,t))return t[0]=s[0],void(t[1]=s[1]);if(r(s,t))return t[0]=s[1],void(t[1]=s[0])}if(o=f.get(e=c[t[0]+i(t)]))for(a=0,u=o.length;a<u;++a){if(s=o[a],n(s,t))return t[0]=s[0],void(t[1]=s[1]);if(r(s,t))return t[0]=s[1],void(t[1]=s[0])}o?o.push(t):f.set(e,[t]),g.push(t)}(s);return t},ws=function(t,e){function n(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,s=1/0,a=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var h in t)e(t[h]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Vt(t[e]);return n}(t)),s=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-c)*f),Math.round((t[1]-h)*g)]}function i(t,e){for(var n,r,i,o,s,a=-1,u=0,l=t.length,p=new Array(l);++a<l;)n=t[a],o=Math.round((n[0]-c)*f),s=Math.round((n[1]-h)*g),o===r&&s===i||(p[u++]=[r=o,i=s]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&d.hasOwnProperty(t.type)&&d[t.type](t)}var c=e[0],h=e[1],l=e[2],p=e[3],f=l-c?(n-1)/(l-c):1,g=p-h?(n-1)/(p-h):1,d={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/f,1/g],translate:[c,h]}}(t,o,e),a=Es(xs(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function i(t){return t.map(r)}var o=-1,s=[],a=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)e(t[h]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,c=fs(1.4*a.arcs.length,Jt,Zt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var h={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)n(t[l]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,c=o[0],h=c[0],l=c[1];++s<u;)r=(c=o[s])[0],i=c[1],r===h&&i===l||(o[a++]=[r-h,i-l],h=r,l=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a},bs=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};bs.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},bs.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},bs.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Is=ve,Ns=ve;ve.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Ae(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Ae(t,c,h,n))}var l=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,g=r[a+2]*n;l+=Math.abs((t[p]-t[g])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[g+1]-t[p+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},ve.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Is.default=Ns,ke.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Je(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Je(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):We(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Je(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,Je(t,s)){if(e.leaf||We(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ze([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!We(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Ue,compareMinY:Ye,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return i=Ze(t.slice(e,n+1)),ze(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Ze([])).leaf=!1,i.height=r;var a,u,c,h,l=Math.ceil(o/s),p=l*Math.ceil(Math.sqrt(s));for(Ke(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Ke(t,a,c=Math.min(a+p-1,n),l,this.compareMinY),u=a;u<=c;u+=l)h=Math.min(u+l-1,c),i.children.push(this._build(t,u,h,r-1));return ze(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,h,l;r.push(e),!e.leaf&&r.length-1!==n;){for(h=l=1/0,i=0,o=e.children.length;i<o;i++)u=Ve(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<l?(l=c,h=u<h?u:h,a=s):c===l&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Xe(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Ze(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ze(n,this.toBBox),ze(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,h;for(u=c=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=je(t,0,r,this.toBBox),o=je(t,r,n,this.toBBox)),a=Ve(i)+Ve(o),s<u?(u=s,h=r,c=a<c?a:c):s===u&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Ue,i=t.leaf?this.compareMinY:Ye;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=je(t,0,e,s),u=je(t,n-e,n,s),c=He(a)+He(u);for(i=e;i<n-e;i++)o=t.children[i],Xe(a,t.leaf?s(o):o),c+=He(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Xe(u,t.leaf?s(o):o),c+=He(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Xe(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ze(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Cs=Object.freeze({toMercator:cn,toWgs84:hn}),Ss=6378137,Ms=function(t,e,n){function r(t,n,r,i){var u=o[t][n],c=o[t][n+1],h=o[r][i],l=o[r][i+1],p=function(t,e,n,r){if(On(t,n)||On(t,r)||On(e,n)||On(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],c=n[1],h=r[0],l=r[1],p=(i-s)*(c-l)-(o-a)*(u-h);return 0===p?null:[((i*a-o*s)*(u-h)-(i-s)*(u*l-c*h))/p,((i*a-o*s)*(c-l)-(o-a)*(u*l-c*h))/p]}(u,c,h,l);if(null!==p){var f,g;if(f=c[0]!==u[0]?(p[0]-u[0])/(c[0]-u[0]):(p[1]-u[1])/(c[1]-u[1]),g=l[0]!==h[0]?(p[0]-h[0])/(l[0]-h[0]):(p[1]-h[1])/(l[1]-h[1]),!(f>=1||f<=0||g>=1||g<=0)){var d=p,y=!a[d];y&&(a[d]=!0),e?s.push(e(p,t,n,u,c,f,r,i,h,l,g,y)):s.push(p)}}}function i(t,e){var n,r,i,s,a=o[t][e],u=o[t][e+1];return a[0]<u[0]?(n=a[0],r=u[0]):(n=u[0],r=a[0]),a[1]<u[1]?(i=a[1],s=u[1]):(i=u[1],s=a[1]),{minX:n,minY:i,maxX:r,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,s=[],a={};if(n){for(var u=[],c=0;c<o.length;c++)for(var h=0;h<o[c].length-1;h++)u.push(i(c,h));var l=Vo();l.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n){l.search(i(p,f)).forEach(function(t){var e=t.ring,n=t.edge;r(p,f,e,n)})}else for(var g=0;g<o.length;g++)for(var d=0;d<o[g].length-1;d++)r(p,f,g,d);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s},Ls=function(t){function e(){for(var t=[],e=0;e<g.features.length;e++)-1==g.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<g.features.length;r++)t[e]!=r&&Pt(g.features[t[e]].geometry.coordinates[0][0],g.features[r],{ignoreBoundary:!0})&&mn(g.features[r])<1/0&&(n=r);g.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<g.features.length;t++)if(-1==g.features[t].properties.parent){var e=g.features[t].properties.winding;g.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<g.features.length;n++)if(g.features[n].properties.parent==t){var i=e+g.features[n].properties.winding;g.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,s=[],a=0;a<i;a++){var u=t.geometry.coordinates[a];Tn(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var h=s.length,l=Ms(t,function(t,e,n,r,i,o,s,a,u,c,h,l){return[t,e,n,r,i,o,s,a,u,c,h,l]}),p=l.length;if(0==p){var f=[];for(a=0;a<i;a++)f.push(o([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Rn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[a])}));var g=c(f);return e(),n(),g}var d=[],y=[];for(a=0;a<i;a++){d.push([]);for(var _=0;_<t.geometry.coordinates[a].length-1;_++)d[a].push([new Ps(t.geometry.coordinates[a][(_+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,_],[a,(_+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),y.push(new Os(t.geometry.coordinates[a][_],[a,(_-1).modulo(t.geometry.coordinates[a].length-1)],[a,_],void 0,void 0,!1,!0))}for(a=0;a<p;a++)d[l[a][1]][l[a][2]].push(new Ps(l[a][0],l[a][5],[l[a][1],l[a][2]],[l[a][6],l[a][7]],void 0)),l[a][11]&&y.push(new Os(l[a][0],[l[a][1],l[a][2]],[l[a][6],l[a][7]],void 0,void 0,!0,!0));var m=y.length;for(a=0;a<d.length;a++)for(_=0;_<d[a].length;_++)d[a][_].sort(function(t,e){return t.param<e.param?-1:1});var v=[];for(a=0;a<m;a++)v.push({minX:y[a].coord[0],minY:y[a].coord[1],maxX:y[a].coord[0],maxY:y[a].coord[1],index:a});var x=Vo();x.load(v);for(a=0;a<d.length;a++)for(_=0;_<d[a].length;_++)for(var E=0;E<d[a][_].length;E++){b=E==d[a][_].length-1?d[a][(_+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:d[a][_][E+1].coord;var w=x.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];d[a][_][E].nxtIsectAlongEdgeIn=w.index}for(a=0;a<d.length;a++)for(_=0;_<d[a].length;_++)for(E=0;E<d[a][_].length;E++){var b=d[a][_][E].coord,I=(w=x.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;I<h?y[I].nxtIsectAlongRingAndEdge2=d[a][_][E].nxtIsectAlongEdgeIn:Tn(y[I].ringAndEdge1,d[a][_][E].ringAndEdgeIn)?y[I].nxtIsectAlongRingAndEdge1=d[a][_][E].nxtIsectAlongEdgeIn:y[I].nxtIsectAlongRingAndEdge2=d[a][_][E].nxtIsectAlongEdgeIn}var N=[];for(a=0,_=0;_<i;_++){var C=a;for(E=0;E<t.geometry.coordinates[_].length-1;E++)y[a].coord[0]<y[C].coord[0]&&(C=a),a++;var S=y[C].nxtIsectAlongRingAndEdge2;for(E=0;E<y.length;E++)if(y[E].nxtIsectAlongRingAndEdge1==C||y[E].nxtIsectAlongRingAndEdge2==C){var M=E;break}var L=Rn([y[M].coord,y[C].coord,y[S].coord],!0)?1:-1;N.push({isect:C,parent:-1,winding:L})}N.sort(function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1});for(f=[];N.length>0;){var P=N.pop(),O=P.isect,R=P.parent,T=P.winding,A=f.length,D=[y[O].coord],F=O;if(y[O].ringAndEdge1Walkable)var q=y[O].ringAndEdge1,G=y[O].nxtIsectAlongRingAndEdge1;else q=y[O].ringAndEdge2,G=y[O].nxtIsectAlongRingAndEdge2;for(;!Tn(y[O].coord,y[G].coord);){D.push(y[G].coord);var B=void 0;for(a=0;a<N.length;a++)if(N[a].isect==G){B=a;break}if(void 0!=B&&N.splice(B,1),Tn(q,y[G].ringAndEdge1)){if(q=y[G].ringAndEdge2,y[G].ringAndEdge2Walkable=!1,y[G].ringAndEdge1Walkable){var k={isect:G};Rn([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge2].coord],1==T)?(k.parent=R,k.winding=-T):(k.parent=A,k.winding=T),N.push(k)}F=G,G=y[G].nxtIsectAlongRingAndEdge2}else{if(q=y[G].ringAndEdge1,y[G].ringAndEdge1Walkable=!1,y[G].ringAndEdge2Walkable){k={isect:G};Rn([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge1].coord],1==T)?(k.parent=R,k.winding=-T):(k.parent=A,k.winding=T),N.push(k)}F=G,G=y[G].nxtIsectAlongRingAndEdge1}}D.push(y[G].coord),f.push(o([D],{index:A,parent:R,winding:T,netWinding:void 0}))}g=c(f);return e(),n(),g},Ps=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Os=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var Rs=Math.PI/180,Ts=180/Math.PI,As=function(t,e){this.lon=t,this.lat=e,this.x=Rs*t,this.y=Rs*e};As.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},As.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new As(e,t)};var Ds=function(){this.coords=[],this.length=0};Ds.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Fs=function(t){this.properties=t||{},this.geometries=[]};Fs.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Fs.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var qs=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new As(t.x,t.y),this.end=new As(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};qs.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Ts*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Ts*Math.atan2(i,r),s]},qs.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,h=180-c,l=-180+c,p=360-c,f=1;f<n.length;++f){var g=n[f-1][0],d=n[f][0],y=Math.abs(d-g);y>p&&(d>h&&g<l||g>h&&d<l)?a=!0:y>u&&(u=y)}var _=[];if(a&&u<c){var m=[];_.push(m);for(var v=0;v<n.length;++v){var x=parseFloat(n[v][0]);if(v>0&&Math.abs(x-n[v-1][0])>p){var E=parseFloat(n[v-1][0]),w=parseFloat(n[v-1][1]),b=parseFloat(n[v][0]),I=parseFloat(n[v][1]);if(E>-180&&E<l&&180===b&&v+1<n.length&&n[v-1][0]>-180&&n[v-1][0]<l){m.push([-180,n[v][1]]),v++,m.push([n[v][0],n[v][1]]);continue}if(E>h&&E<180&&-180===b&&v+1<n.length&&n[v-1][0]>h&&n[v-1][0]<180){m.push([180,n[v][1]]),v++,m.push([n[v][0],n[v][1]]);continue}if(E<l&&b>h){var N=E;E=b,b=N;var C=w;w=I,I=C}if(E>h&&b<l&&(b+=360),E<=180&&b>=180&&E<b){var S=(180-E)/(b-E),M=S*I+(1-S)*w;m.push([n[v-1][0]>h?180:-180,M]),(m=[]).push([n[v-1][0]>h?-180:180,M]),_.push(m)}else m=[],_.push(m);m.push([x,n[v][1]])}else m.push([n[v][0],n[v][1]])}}else{var L=[];_.push(L);for(var P=0;P<n.length;++P)L.push([n[P][0],n[P][1]])}for(var O=new Fs(this.properties),R=0;R<_.length;++R){var T=new Ds;O.geometries.push(T);for(var A=_[R],D=0;D<A.length;++D)T.move_to(A[D])}return O};var Gs=Yn;Yn.polyline=Yn,Yn.polygon=function(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Hn(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Hn(a=t[s],e)&r))!==o&&n.push(Vn(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n};var Bs=Array.prototype.slice,ks={successCallback:null,verbose:!1,polygons:!1},zs={},js=64,Xs=16,Us=4,Ys=1,Vs=[],Hs=[],Ws=[],Js=[],Zs=[],Ks=[],Qs=[],$s=[],ta=[],ea=[],na=[],ra=[],ia=[],oa=[],sa=[],aa=[],ua=[],ca=[],ha=[],la=[],pa=[],fa=[],ga=[],da=[];Qs[85]=ea[85]=-1,$s[85]=na[85]=0,ta[85]=ra[85]=1,ha[85]=fa[85]=1,la[85]=ga[85]=0,pa[85]=da[85]=1,Vs[85]=Js[85]=0,Hs[85]=Zs[85]=-1,Ws[85]=sa[85]=0,aa[85]=ia[85]=0,ua[85]=oa[85]=1,Ks[85]=ca[85]=1,fa[1]=fa[169]=0,ga[1]=ga[169]=-1,da[1]=da[169]=0,ia[1]=ia[169]=-1,oa[1]=oa[169]=0,sa[1]=sa[169]=0,ea[4]=ea[166]=0,na[4]=na[166]=-1,ra[4]=ra[166]=1,aa[4]=aa[166]=1,ua[4]=ua[166]=0,ca[4]=ca[166]=0,Qs[16]=Qs[154]=0,$s[16]=$s[154]=1,ta[16]=ta[154]=1,Js[16]=Js[154]=1,Zs[16]=Zs[154]=0,Ks[16]=Ks[154]=1,ha[64]=ha[106]=0,la[64]=la[106]=1,pa[64]=pa[106]=0,Vs[64]=Vs[106]=-1,Hs[64]=Hs[106]=0,Ws[64]=Ws[106]=1,ha[2]=ha[168]=0,la[2]=la[168]=-1,pa[2]=pa[168]=1,fa[2]=fa[168]=0,ga[2]=ga[168]=-1,da[2]=da[168]=0,ia[2]=ia[168]=-1,oa[2]=oa[168]=0,sa[2]=sa[168]=0,aa[2]=aa[168]=-1,ua[2]=ua[168]=0,ca[2]=ca[168]=1,Qs[8]=Qs[162]=0,$s[8]=$s[162]=-1,ta[8]=ta[162]=0,ea[8]=ea[162]=0,na[8]=na[162]=-1,ra[8]=ra[162]=1,ia[8]=ia[162]=1,oa[8]=oa[162]=0,sa[8]=sa[162]=1,aa[8]=aa[162]=1,ua[8]=ua[162]=0,ca[8]=ca[162]=0,Qs[32]=Qs[138]=0,$s[32]=$s[138]=1,ta[32]=ta[138]=1,ea[32]=ea[138]=0,na[32]=na[138]=1,ra[32]=ra[138]=0,Vs[32]=Vs[138]=1,Hs[32]=Hs[138]=0,Ws[32]=Ws[138]=0,Js[32]=Js[138]=1,Zs[32]=Zs[138]=0,Ks[32]=Ks[138]=1,fa[128]=fa[42]=0,ga[128]=ga[42]=1,da[128]=da[42]=1,ha[128]=ha[42]=0,la[128]=la[42]=1,pa[128]=pa[42]=0,Vs[128]=Vs[42]=-1,Hs[128]=Hs[42]=0,Ws[128]=Ws[42]=1,Js[128]=Js[42]=-1,Zs[128]=Zs[42]=0,Ks[128]=Ks[42]=0,ea[5]=ea[165]=-1,na[5]=na[165]=0,ra[5]=ra[165]=0,fa[5]=fa[165]=1,ga[5]=ga[165]=0,da[5]=da[165]=0,aa[20]=aa[150]=0,ua[20]=ua[150]=1,ca[20]=ca[150]=1,Js[20]=Js[150]=0,Zs[20]=Zs[150]=-1,Ks[20]=Ks[150]=1,Qs[80]=Qs[90]=-1,$s[80]=$s[90]=0,ta[80]=ta[90]=1,ha[80]=ha[90]=1,la[80]=la[90]=0,pa[80]=pa[90]=1,ia[65]=ia[105]=0,oa[65]=oa[105]=1,sa[65]=sa[105]=0,Vs[65]=Vs[105]=0,Hs[65]=Hs[105]=-1,Ws[65]=Ws[105]=0,Qs[160]=Qs[10]=-1,$s[160]=$s[10]=0,ta[160]=ta[10]=1,ea[160]=ea[10]=-1,na[160]=na[10]=0,ra[160]=ra[10]=0,fa[160]=fa[10]=1,ga[160]=ga[10]=0,da[160]=da[10]=0,ha[160]=ha[10]=1,la[160]=la[10]=0,pa[160]=pa[10]=1,aa[130]=aa[40]=0,ua[130]=ua[40]=1,ca[130]=ca[40]=1,ia[130]=ia[40]=0,oa[130]=oa[40]=1,sa[130]=sa[40]=0,Vs[130]=Vs[40]=0,Hs[130]=Hs[40]=-1,Ws[130]=Ws[40]=0,Js[130]=Js[40]=0,Zs[130]=Zs[40]=-1,Ks[130]=Ks[40]=1,ea[37]=ea[133]=0,na[37]=na[133]=1,ra[37]=ra[133]=1,fa[37]=fa[133]=0,ga[37]=ga[133]=1,da[37]=da[133]=0,Vs[37]=Vs[133]=-1,Hs[37]=Hs[133]=0,Ws[37]=Ws[133]=0,Js[37]=Js[133]=1,Zs[37]=Zs[133]=0,Ks[37]=Ks[133]=0,aa[148]=aa[22]=-1,ua[148]=ua[22]=0,ca[148]=ca[22]=0,fa[148]=fa[22]=0,ga[148]=ga[22]=-1,da[148]=da[22]=1,ha[148]=ha[22]=0,la[148]=la[22]=1,pa[148]=pa[22]=1,Js[148]=Js[22]=-1,Zs[148]=Zs[22]=0,Ks[148]=Ks[22]=1,Qs[82]=Qs[88]=0,$s[82]=$s[88]=-1,ta[82]=ta[88]=1,aa[82]=aa[88]=1,ua[82]=ua[88]=0,ca[82]=ca[88]=1,ia[82]=ia[88]=-1,oa[82]=oa[88]=0,sa[82]=sa[88]=1,ha[82]=ha[88]=0,la[82]=la[88]=-1,pa[82]=pa[88]=0,Qs[73]=Qs[97]=0,$s[73]=$s[97]=1,ta[73]=ta[97]=0,ea[73]=ea[97]=0,na[73]=na[97]=-1,ra[73]=ra[97]=0,ia[73]=ia[97]=1,oa[73]=oa[97]=0,sa[73]=sa[97]=0,Vs[73]=Vs[97]=1,Hs[73]=Hs[97]=0,Ws[73]=Ws[97]=1,Qs[145]=Qs[25]=0,$s[145]=$s[25]=-1,ta[145]=ta[25]=0,ia[145]=ia[25]=1,oa[145]=oa[25]=0,sa[145]=sa[25]=1,fa[145]=fa[25]=0,ga[145]=ga[25]=1,da[145]=da[25]=1,Js[145]=Js[25]=-1,Zs[145]=Zs[25]=0,Ks[145]=Ks[25]=0,ea[70]=ea[100]=0,na[70]=na[100]=1,ra[70]=ra[100]=0,aa[70]=aa[100]=-1,ua[70]=ua[100]=0,ca[70]=ca[100]=1,ha[70]=ha[100]=0,la[70]=la[100]=-1,pa[70]=pa[100]=1,Vs[70]=Vs[100]=1,Hs[70]=Hs[100]=0,Ws[70]=Ws[100]=0,ea[101]=ea[69]=0,na[101]=na[69]=1,ra[101]=ra[69]=0,Vs[101]=Vs[69]=1,Hs[101]=Hs[69]=0,Ws[101]=Ws[69]=0,fa[149]=fa[21]=0,ga[149]=ga[21]=1,da[149]=da[21]=1,Js[149]=Js[21]=-1,Zs[149]=Zs[21]=0,Ks[149]=Ks[21]=0,aa[86]=aa[84]=-1,ua[86]=ua[84]=0,ca[86]=ca[84]=1,ha[86]=ha[84]=0,la[86]=la[84]=-1,pa[86]=pa[84]=1,Qs[89]=Qs[81]=0,$s[89]=$s[81]=-1,ta[89]=ta[81]=0,ia[89]=ia[81]=1,oa[89]=oa[81]=0,sa[89]=sa[81]=1,Qs[96]=Qs[74]=0,$s[96]=$s[74]=1,ta[96]=ta[74]=0,ea[96]=ea[74]=-1,na[96]=na[74]=0,ra[96]=ra[74]=1,ha[96]=ha[74]=1,la[96]=la[74]=0,pa[96]=pa[74]=0,Vs[96]=Vs[74]=1,Hs[96]=Hs[74]=0,Ws[96]=Ws[74]=1,Qs[24]=Qs[146]=0,$s[24]=$s[146]=-1,ta[24]=ta[146]=1,aa[24]=aa[146]=1,ua[24]=ua[146]=0,ca[24]=ca[146]=1,ia[24]=ia[146]=0,oa[24]=oa[146]=1,sa[24]=sa[146]=1,Js[24]=Js[146]=0,Zs[24]=Zs[146]=-1,Ks[24]=Ks[146]=0,ea[6]=ea[164]=-1,na[6]=na[164]=0,ra[6]=ra[164]=1,aa[6]=aa[164]=-1,ua[6]=ua[164]=0,ca[6]=ca[164]=0,fa[6]=fa[164]=0,ga[6]=ga[164]=-1,da[6]=da[164]=1,ha[6]=ha[164]=1,la[6]=la[164]=0,pa[6]=pa[164]=0,ia[129]=ia[41]=0,oa[129]=oa[41]=1,sa[129]=sa[41]=1,fa[129]=fa[41]=0,ga[129]=ga[41]=1,da[129]=da[41]=0,Vs[129]=Vs[41]=-1,Hs[129]=Hs[41]=0,Ws[129]=Ws[41]=0,Js[129]=Js[41]=0,Zs[129]=Zs[41]=-1,Ks[129]=Ks[41]=0,aa[66]=aa[104]=0,ua[66]=ua[104]=1,ca[66]=ca[104]=0,ia[66]=ia[104]=-1,oa[66]=oa[104]=0,sa[66]=sa[104]=1,ha[66]=ha[104]=0,la[66]=la[104]=-1,pa[66]=pa[104]=0,Vs[66]=Vs[104]=0,Hs[66]=Hs[104]=-1,Ws[66]=Ws[104]=1,Qs[144]=Qs[26]=-1,$s[144]=$s[26]=0,ta[144]=ta[26]=0,fa[144]=fa[26]=1,ga[144]=ga[26]=0,da[144]=da[26]=1,ha[144]=ha[26]=0,la[144]=la[26]=1,pa[144]=pa[26]=1,Js[144]=Js[26]=-1,Zs[144]=Zs[26]=0,Ks[144]=Ks[26]=1,ea[36]=ea[134]=0,na[36]=na[134]=1,ra[36]=ra[134]=1,aa[36]=aa[134]=0,ua[36]=ua[134]=1,ca[36]=ca[134]=0,Vs[36]=Vs[134]=0,Hs[36]=Hs[134]=-1,Ws[36]=Ws[134]=1,Js[36]=Js[134]=1,Zs[36]=Zs[134]=0,Ks[36]=Ks[134]=0,Qs[9]=Qs[161]=-1,$s[9]=$s[161]=0,ta[9]=ta[161]=0,ea[9]=ea[161]=0,na[9]=na[161]=-1,ra[9]=ra[161]=0,ia[9]=ia[161]=1,oa[9]=oa[161]=0,sa[9]=sa[161]=0,fa[9]=fa[161]=1,ga[9]=ga[161]=0,da[9]=da[161]=1,Qs[136]=0,$s[136]=1,ta[136]=1,ea[136]=0,na[136]=1,ra[136]=0,aa[136]=-1,ua[136]=0,ca[136]=1,ia[136]=-1,oa[136]=0,sa[136]=0,fa[136]=0,ga[136]=-1,da[136]=0,ha[136]=0,la[136]=-1,pa[136]=1,Vs[136]=1,Hs[136]=0,Ws[136]=0,Js[136]=1,Zs[136]=0,Ks[136]=1,Qs[34]=0,$s[34]=-1,ta[34]=0,ea[34]=0,na[34]=-1,ra[34]=1,aa[34]=1,ua[34]=0,ca[34]=0,ia[34]=1,oa[34]=0,sa[34]=1,fa[34]=0,ga[34]=1,da[34]=1,ha[34]=0,la[34]=1,pa[34]=0,Vs[34]=-1,Hs[34]=0,Ws[34]=1,Js[34]=-1,Zs[34]=0,Ks[34]=0,Qs[35]=0,$s[35]=1,ta[35]=1,ea[35]=0,na[35]=-1,ra[35]=1,aa[35]=1,ua[35]=0,ca[35]=0,ia[35]=-1,oa[35]=0,sa[35]=0,fa[35]=0,ga[35]=-1,da[35]=0,ha[35]=0,la[35]=1,pa[35]=0,Vs[35]=-1,Hs[35]=0,Ws[35]=1,Js[35]=1,Zs[35]=0,Ks[35]=1,Qs[153]=0,$s[153]=1,ta[153]=1,ia[153]=-1,oa[153]=0,sa[153]=0,fa[153]=0,ga[153]=-1,da[153]=0,Js[153]=1,Zs[153]=0,Ks[153]=1,ea[102]=0,na[102]=-1,ra[102]=1,aa[102]=1,ua[102]=0,ca[102]=0,ha[102]=0,la[102]=1,pa[102]=0,Vs[102]=-1,Hs[102]=0,Ws[102]=1,Qs[155]=0,$s[155]=-1,ta[155]=0,ia[155]=1,oa[155]=0,sa[155]=1,fa[155]=0,ga[155]=1,da[155]=1,Js[155]=-1,Zs[155]=0,Ks[155]=0,ea[103]=0,na[103]=1,ra[103]=0,aa[103]=-1,ua[103]=0,ca[103]=1,ha[103]=0,la[103]=-1,pa[103]=1,Vs[103]=1,Hs[103]=0,Ws[103]=0,Qs[152]=0,$s[152]=1,ta[152]=1,aa[152]=-1,ua[152]=0,ca[152]=1,ia[152]=-1,oa[152]=0,sa[152]=0,fa[152]=0,ga[152]=-1,da[152]=0,ha[152]=0,la[152]=-1,pa[152]=1,Js[152]=1,Zs[152]=0,Ks[152]=1,Qs[156]=0,$s[156]=-1,ta[156]=1,aa[156]=1,ua[156]=0,ca[156]=1,ia[156]=-1,oa[156]=0,sa[156]=0,fa[156]=0,ga[156]=-1,da[156]=0,ha[156]=0,la[156]=1,pa[156]=1,Js[156]=-1,Zs[156]=0,Ks[156]=1,Qs[137]=0,$s[137]=1,ta[137]=1,ea[137]=0,na[137]=1,ra[137]=0,ia[137]=-1,oa[137]=0,sa[137]=0,fa[137]=0,ga[137]=-1,da[137]=0,Vs[137]=1,Hs[137]=0,Ws[137]=0,Js[137]=1,Zs[137]=0,Ks[137]=1,Qs[139]=0,$s[139]=1,ta[139]=1,ea[139]=0,na[139]=-1,ra[139]=0,ia[139]=1,oa[139]=0,sa[139]=0,fa[139]=0,ga[139]=1,da[139]=0,Vs[139]=-1,Hs[139]=0,Ws[139]=0,Js[139]=1,Zs[139]=0,Ks[139]=1,Qs[98]=0,$s[98]=-1,ta[98]=0,ea[98]=0,na[98]=-1,ra[98]=1,aa[98]=1,ua[98]=0,ca[98]=0,ia[98]=1,oa[98]=0,sa[98]=1,ha[98]=0,la[98]=1,pa[98]=0,Vs[98]=-1,Hs[98]=0,Ws[98]=1,Qs[99]=0,$s[99]=1,ta[99]=0,ea[99]=0,na[99]=-1,ra[99]=1,aa[99]=1,ua[99]=0,ca[99]=0,ia[99]=-1,oa[99]=0,sa[99]=1,ha[99]=0,la[99]=-1,pa[99]=0,Vs[99]=1,Hs[99]=0,Ws[99]=1,ea[38]=0,na[38]=-1,ra[38]=1,aa[38]=1,ua[38]=0,ca[38]=0,fa[38]=0,ga[38]=1,da[38]=1,ha[38]=0,la[38]=1,pa[38]=0,Vs[38]=-1,Hs[38]=0,Ws[38]=1,Js[38]=-1,Zs[38]=0,Ks[38]=0,ea[39]=0,na[39]=1,ra[39]=1,aa[39]=-1,ua[39]=0,ca[39]=0,fa[39]=0,ga[39]=-1,da[39]=1,ha[39]=0,la[39]=1,pa[39]=0,Vs[39]=-1,Hs[39]=0,Ws[39]=1,Js[39]=1,Zs[39]=0,Ks[39]=0;var ya=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},_a=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ma=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},va=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},xa=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ea=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},wa=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ba=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ia=[],Na=[],Ca=[],Sa=[],Ma=[],La=[],Pa=[],Oa=[];Sa[1]=Ma[1]=18,Sa[169]=Ma[169]=18,Ca[4]=Na[4]=12,Ca[166]=Na[166]=12,Ia[16]=Oa[16]=4,Ia[154]=Oa[154]=4,La[64]=Pa[64]=22,La[106]=Pa[106]=22,Ca[2]=La[2]=17,Sa[2]=Ma[2]=18,Ca[168]=La[168]=17,Sa[168]=Ma[168]=18,Ia[8]=Sa[8]=9,Na[8]=Ca[8]=12,Ia[162]=Sa[162]=9,Na[162]=Ca[162]=12,Ia[32]=Oa[32]=4,Na[32]=Pa[32]=1,Ia[138]=Oa[138]=4,Na[138]=Pa[138]=1,Ma[128]=Oa[128]=21,La[128]=Pa[128]=22,Ma[42]=Oa[42]=21,La[42]=Pa[42]=22,Na[5]=Ma[5]=14,Na[165]=Ma[165]=14,Ca[20]=Oa[20]=6,Ca[150]=Oa[150]=6,Ia[80]=La[80]=11,Ia[90]=La[90]=11,Sa[65]=Pa[65]=3,Sa[105]=Pa[105]=3,Ia[160]=La[160]=11,Na[160]=Ma[160]=14,Ia[10]=La[10]=11,Na[10]=Ma[10]=14,Ca[130]=Oa[130]=6,Sa[130]=Pa[130]=3,Ca[40]=Oa[40]=6,Sa[40]=Pa[40]=3,Na[101]=Pa[101]=1,Na[69]=Pa[69]=1,Ma[149]=Oa[149]=21,Ma[21]=Oa[21]=21,Ca[86]=La[86]=17,Ca[84]=La[84]=17,Ia[89]=Sa[89]=9,Ia[81]=Sa[81]=9,Ia[96]=Pa[96]=0,Na[96]=La[96]=15,Ia[74]=Pa[74]=0,Na[74]=La[74]=15,Ia[24]=Ca[24]=8,Sa[24]=Oa[24]=7,Ia[146]=Ca[146]=8,Sa[146]=Oa[146]=7,Na[6]=La[6]=15,Ca[6]=Ma[6]=16,Na[164]=La[164]=15,Ca[164]=Ma[164]=16,Sa[129]=Oa[129]=7,Ma[129]=Pa[129]=20,Sa[41]=Oa[41]=7,Ma[41]=Pa[41]=20,Ca[66]=Pa[66]=2,Sa[66]=La[66]=19,Ca[104]=Pa[104]=2,Sa[104]=La[104]=19,Ia[144]=Ma[144]=10,La[144]=Oa[144]=23,Ia[26]=Ma[26]=10,La[26]=Oa[26]=23,Na[36]=Oa[36]=5,Ca[36]=Pa[36]=2,Na[134]=Oa[134]=5,Ca[134]=Pa[134]=2,Ia[9]=Ma[9]=10,Na[9]=Sa[9]=13,Ia[161]=Ma[161]=10,Na[161]=Sa[161]=13,Na[37]=Oa[37]=5,Ma[37]=Pa[37]=20,Na[133]=Oa[133]=5,Ma[133]=Pa[133]=20,Ca[148]=Ma[148]=16,La[148]=Oa[148]=23,Ca[22]=Ma[22]=16,La[22]=Oa[22]=23,Ia[82]=Ca[82]=8,Sa[82]=La[82]=19,Ia[88]=Ca[88]=8,Sa[88]=La[88]=19,Ia[73]=Pa[73]=0,Na[73]=Sa[73]=13,Ia[97]=Pa[97]=0,Na[97]=Sa[97]=13,Ia[145]=Sa[145]=9,Ma[145]=Oa[145]=21,Ia[25]=Sa[25]=9,Ma[25]=Oa[25]=21,Na[70]=Pa[70]=1,Ca[70]=La[70]=17,Na[100]=Pa[100]=1,Ca[100]=La[100]=17,Ia[34]=Sa[34]=9,Na[34]=Ca[34]=12,Ma[34]=Oa[34]=21,La[34]=Pa[34]=22,Ia[136]=Oa[136]=4,Na[136]=Pa[136]=1,Ca[136]=La[136]=17,Sa[136]=Ma[136]=18,Ia[35]=Oa[35]=4,Na[35]=Ca[35]=12,Sa[35]=Ma[35]=18,La[35]=Pa[35]=22,Ia[153]=Oa[153]=4,Sa[153]=Ma[153]=18,Na[102]=Ca[102]=12,La[102]=Pa[102]=22,Ia[155]=Sa[155]=9,Ma[155]=Oa[155]=23,Na[103]=Pa[103]=1,Ca[103]=La[103]=17,Ia[152]=Oa[152]=4,Ca[152]=La[152]=17,Sa[152]=Ma[152]=18,Ia[156]=Ca[156]=8,Sa[156]=Ma[156]=18,La[156]=Oa[156]=23,Ia[137]=Oa[137]=4,Na[137]=Pa[137]=1,Sa[137]=Ma[137]=18,Ia[139]=Oa[139]=4,Na[139]=Sa[139]=13,Ma[139]=Pa[139]=20,Ia[98]=Sa[98]=9,Na[98]=Ca[98]=12,La[98]=Pa[98]=22,Ia[99]=Pa[99]=0,Na[99]=Ca[99]=12,Sa[99]=La[99]=19,Na[38]=Ca[38]=12,Ma[38]=Oa[38]=21,La[38]=Pa[38]=22,Na[39]=Oa[39]=5,Ca[39]=Ma[39]=16,La[39]=Pa[39]=22;var Ra=[];Ra[1]=Ra[169]=ya,Ra[4]=Ra[166]=_a,Ra[16]=Ra[154]=ma,Ra[64]=Ra[106]=va,Ra[168]=Ra[2]=xa,Ra[162]=Ra[8]=Ea,Ra[138]=Ra[32]=wa,Ra[42]=Ra[128]=ba,Ra[5]=Ra[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Ra[20]=Ra[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Ra[80]=Ra[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Ra[65]=Ra[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ra[160]=Ra[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Ra[130]=Ra[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Ra[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ra[101]=Ra[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Ra[149]=Ra[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Ra[86]=Ra[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Ra[89]=Ra[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Ra[96]=Ra[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[24]=Ra[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Ra[6]=Ra[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Ra[129]=Ra[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Ra[66]=Ra[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[144]=Ra[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ra[36]=Ra[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Ra[9]=Ra[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ra[37]=Ra[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ra[148]=Ra[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ra[82]=Ra[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Ra[73]=Ra[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ra[145]=Ra[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ra[70]=Ra[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[34]=function(t){return[ba(t),Ea(t)]},Ra[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ra[136]=function(t){return[wa(t),xa(t)]},Ra[153]=function(t){return[ma(t),ya(t)]},Ra[102]=function(t){return[_a(t),va(t)]},Ra[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ra[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[152]=function(t){return[ma(t),xa(t)]},Ra[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ra[137]=function(t){return[wa(t),ya(t)]},Ra[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ra[98]=function(t){return[Ea(t),va(t)]},Ra[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[38]=function(t){return[_a(t),ba(t)]},Ra[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Ta=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Ta.buildId=function(t){return t.join(",")},Ta.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},Ta.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},Ta.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Ta.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=xr(t.coordinates,r.coordinates,i.coordinates);if(o<0)return 1;if(o>0)return-1;return Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},Ta.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Ta.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Ta.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var Aa=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};Aa.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Aa(this.to,this.from),this.symetric.symetric=this),this.symetric},Aa.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Aa.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Aa.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Aa.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},Aa.prototype.compareTo=function(t){return xr(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Da=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Fa={length:{configurable:!0}};Da.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Da.prototype.get=function(t){return this.edges[t]},Fa.length.get=function(){return this.edges.length},Da.prototype.forEach=function(t){this.edges.forEach(t)},Da.prototype.map=function(t){return this.edges.map(t)},Da.prototype.some=function(t){return this.edges.some(t)},Da.prototype.isValid=function(){return!0},Da.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=xr(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},Da.prototype.toMultiPoint=function(){return l(this.edges.map(function(t){return t.from.coordinates}))},Da.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Da.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=he(this.toPolygon())},Da.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var s=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(s,o)&&Er(s,o)){var a=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});a&&e.inside(r(a))&&(i&&!Er(n,s)||(i=e))}}),i},Da.prototype.inside=function(t){return Pt(t,this.toPolygon())},Object.defineProperties(Da.prototype,Fa);var qa=function(){this.edges=[],this.nodes={}};qa.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new qa;return F(t,function(t){H(t,"LineString","Graph::fromGeoJson"),M(t,function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n})}),e},qa.prototype.getNode=function(t){var e=Ta.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Ta(t)),n},qa.prototype.addEdge=function(t,e){var n=new Aa(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},qa.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},qa.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},qa.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},qa.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},qa.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},qa.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},qa.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},qa.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},qa.prototype._findEdgeRing=function(t){var e=t,n=new Da;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},qa.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},qa.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var Ga=mt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Ba=(Ga.shim,mt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r})),ka=(Ba.supported,Ba.unsupported,mt(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}var r=Array.prototype.slice,i=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Ba(t))return!!Ba(o)&&(t=r.call(t),o=r.call(o),i(t,o,s));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var c=Ga(t),h=Ga(o)}catch(t){return!1}if(c.length!=h.length)return!1;for(c.sort(),h.sort(),a=c.length-1;a>=0;a--)if(c[a]!=h[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!i(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))}})),za=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Rr};za.prototype.compare=function(t,e){if(t.type!==e.type||!Or(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Pr(t),i=Pr(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},za.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},za.prototype.compareLine=function(t,e,n,r){if(!Or(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},za.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},za.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},za.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},za.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},za.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},za.prototype.removePseudo=function(t){return t};var ja=za,Xa=mt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ua=mt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(h),a=0,u=0;u<h;u++)s[u]=0;for(var c=0;c<n;c++){var h=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<h;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(u=0;u<h;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ya=mt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Va=mt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=Ya;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ha=mt(function(t){t.exports&&(t.exports={DBSCAN:Xa,KMEANS:Ua,OPTICS:Va,PriorityQueue:Ya})}),Wa=(Ha.DBSCAN,Ha.KMEANS,Ha.OPTICS,Ha.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i}),Ja=Wa,Za=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ka=Wa,Qa=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},$a=function(t,e){var n=t[0].length?Ja:Za,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];o&&s.join("_");for(r.push(s);r.length<e;){for(var a=[],u=r.length,c=0,h=[],l=0;l<i;l++){for(var p=1/0,f=0;f<u;f++){var g=n(t[l],r[f]);g<=p&&(p=g)}a[l]=p}for(var d=0;d<i;d++)c+=a[d];for(var y=0;y<i;y++)h[y]={i:y,v:t[y],pr:a[y]/c,cs:0};h.sort(function(t,e){return t.pr-e.pr}),h[0].cs=h[0].pr;for(var _=1;_<i;_++)h[_].cs=h[_-1].cs+h[_].pr;for(var m=Math.random(),v=0;v<i-1&&h[v++].cs<m;);r.push(h[v-1].v)}return r},tu=1e4,eu=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,c=r||tu,h=t.length,l=t[0].length,p=l>0,f=[];if(n)i="kmrand"==n?Qa(t,e):"kmpp"==n?$a(t,e):n;else for(var g={};i.length<e;){var d=Math.floor(Math.random()*h);g[d]||(g[d]=!0,i.push(t[d]))}do{Ar(e,0,f);for(var y=0;y<h;y++){for(var _=1/0,m=0,v=0;v<e;v++)(a=p?Ka(t[y],i[v]):Math.abs(t[y]-i[v]))<=_&&(_=a,m=v);s[y]=m,f[m]++}for(var x=[],E=(o=[],0);E<e;E++)x[E]=p?Ar(l,0,x[E]):0,o[E]=i[E];if(p){for(var w=0;w<e;w++)i[w]=[];for(var b=0;b<h;b++)for(var I=x[s[b]],N=t[b],C=0;C<l;C++)I[C]+=N[C];u=!0;for(var S=0;S<e;S++){for(var M=i[S],L=x[S],P=o[S],O=f[S],R=0;R<l;R++)M[R]=L[R]/O||0;if(u)for(var T=0;T<l;T++)if(P[T]!=M[T]){u=!1;break}}}else{for(var A=0;A<h;A++)x[s[A]]+=t[A];for(var D=0;D<e;D++)i[D]=x[D]/f[D]||0;u=!0;for(var F=0;F<e;F++)if(o[F]!=i[F]){u=!1;break}}u=u||--c<=0}while(!u);return{it:tu-c,k:e,idxs:s,centroids:i}},nu={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||nu.heuristics.manhattan,o=r.closest||!1,s=new Br(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Fr(u);u.closed=!0;for(var c=t.neighbors(u),h=0,l=c.length;h<l;++h){var p=c[h];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),g=p.visited;(!g||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),g?s.rescoreElement(p):s.push(p))}}}return o?Fr(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};qr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)nu.cleanNode(this.nodes[t])},qr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)nu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},qr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},qr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},qr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Gr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Gr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Gr.prototype.isWall=function(){return 0===this.weight},Br.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var ru=function(t){return function(){return t}};jr.prototype={constructor:jr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Vr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ur(this,n),n=(t=n).U),n.C=!1,r.C=!0,Yr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Yr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ur(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Vr(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ur(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Yr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ur(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Yr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ur(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Yr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var iu,ou,su,au,uu,cu=[],hu=[],lu=1e-6,pu=1e-12;hi.prototype={constructor:hi,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return $r(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a=n.site,u=-1,c=e[i[o-1]],h=c.left===a?c.right:c.left;++u<o;)s=h,h=(c=e[i[u]]).left===a?c.right:c.left,s&&h&&r<s.index&&r<h.index&&ui(a,s,h)<0&&t.push([a.data,s.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],h=u*u+c*c;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],c=e-a[1],l=u*u+c*c;l<h&&(h=l,s=a.index)}})}while(null!==s);return o._found=r,null==n||h<=n*n?i.site:null}};var fu=function(){function t(t){return new hi(t.map(function(r,i){var o=[Math.round(e(r,i,t)/lu)*lu,Math.round(n(r,i,t)/lu)*lu];return o.index=i,o.data=r,o}),r)}var e=kr,n=zr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:ru(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ru(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},gu=Object.freeze({randomPosition:_i,randomPoint:mi,randomPolygon:vi,randomLineString:xi}),du=Object.freeze({getCluster:wi,clusterEach:bi,clusterReduce:Ii,createBins:Ni,applyFilter:Ci,propertiesContainsFilter:Si,filterProperties:Mi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var _u=function(){},mu=function(){},vu={MAX_VALUE:{configurable:!0}};mu.isNaN=function(t){return Number.isNaN(t)},mu.doubleToLongBits=function(t){return t},mu.longBitsToDouble=function(t){return t},mu.isInfinite=function(t){return!Number.isFinite(t)},vu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(mu,vu);var xu=function(){},Eu=function(){},wu=function(){},bu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Iu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};bu.prototype.setOrdinate=function(t,e){switch(t){case bu.X:this.x=e;break;case bu.Y:this.y=e;break;case bu.Z:this.z=e;break;default:throw new _u("Invalid ordinate index: "+t)}},bu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!yu.equalsWithTolerance(this.x,e.x,n)&&!!yu.equalsWithTolerance(this.y,e.y,n)}},bu.prototype.getOrdinate=function(t){switch(t){case bu.X:return this.x;case bu.Y:return this.y;case bu.Z:return this.z}throw new _u("Invalid ordinate index: "+t)},bu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||mu.isNaN(this.z))&&mu.isNaN(t.z)},bu.prototype.equals=function(t){return t instanceof bu&&this.equals2D(t)},bu.prototype.equalInZ=function(t,e){return yu.equalsWithTolerance(this.z,t.z,e)},bu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},bu.prototype.clone=function(){},bu.prototype.copy=function(){return new bu(this)},bu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},bu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},bu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},bu.prototype.hashCode=function(){var t=17;return t=37*t+bu.hashCode(this.x),t=37*t+bu.hashCode(this.y)},bu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},bu.prototype.interfaces_=function(){return[xu,Eu,Li]},bu.prototype.getClass=function(){return bu},bu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=mu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Iu.DimensionalComparator.get=function(){return Nu},Iu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Iu.NULL_ORDINATE.get=function(){return mu.NaN},Iu.X.get=function(){return 0},Iu.Y.get=function(){return 1},Iu.Z.get=function(){return 2},Object.defineProperties(bu,Iu);var Nu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new _u("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Nu.prototype.compare=function(t,e){var n=t,r=e,i=Nu.compare(n.x,r.x);if(0!==i)return i;var o=Nu.compare(n.y,r.y);if(0!==o)return o;if(this._dimensionsToTest<=2)return 0;return Nu.compare(n.z,r.z)},Nu.prototype.interfaces_=function(){return[wu]},Nu.prototype.getClass=function(){return Nu},Nu.compare=function(t,e){return t<e?-1:t>e?1:mu.isNaN(t)?mu.isNaN(e)?0:-1:mu.isNaN(e)?1:0};var Cu=function(){};Cu.prototype.create=function(){},Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu};var Su=function(){},Mu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.toLocationSymbol=function(t){switch(t){case Su.EXTERIOR:return"e";case Su.BOUNDARY:return"b";case Su.INTERIOR:return"i";case Su.NONE:return"-"}throw new _u("Unknown location value: "+t)},Mu.INTERIOR.get=function(){return 0},Mu.BOUNDARY.get=function(){return 1},Mu.EXTERIOR.get=function(){return 2},Mu.NONE.get=function(){return-1},Object.defineProperties(Su,Mu);var Lu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Pu=function(){},Ou={LOG_10:{configurable:!0}};Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu},Pu.log10=function(t){var e=Math.log(t);return mu.isInfinite(e)?e:mu.isNaN(e)?e:e/Pu.LOG_10},Pu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Pu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Pu.wrap=function(t,e){return t<0?e- -t%e:t%e},Pu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},Pu.average=function(t,e){return(t+e)/2},Ou.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Pu,Ou);var Ru=function(t){this.str=t};Ru.prototype.append=function(t){this.str+=t},Ru.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Ru.prototype.toString=function(t){return this.str};var Tu=function(t){this.value=t};Tu.prototype.intValue=function(){return this.value},Tu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Tu.isNaN=function(t){return Number.isNaN(t)};var Au=function(){};Au.isWhitespace=function(t){return t<=32&&t>=0||127===t},Au.toUpperCase=function(t){return t.toUpperCase()};var Du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Fu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Du.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Du.magnitude(n._hi),i=Du.TEN.pow(r);(n=n.divide(i)).gt(Du.TEN)?(n=n.divide(Du.TEN),r+=1):n.lt(Du.ONE)&&(n=n.multiply(Du.TEN),r-=1);for(var o=r+1,s=new Ru,a=Du.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var h=!1,l=0;c>9?(h=!0,l="9"):l="0"+c,s.append(l),n=n.subtract(Du.valueOf(c)).multiply(Du.TEN),h&&n.selfAdd(Du.TEN);var p=!0,f=Du.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},Du.prototype.sqr=function(){return this.multiply(this)},Du.prototype.doubleValue=function(){return this._hi+this._lo},Du.prototype.subtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Du.prototype.selfSubtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Du.prototype.min=function(t){return this.le(t)?this:t},Du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,h=null,l=null;return u=this._hi/n,c=Du.SPLIT*u,i=c-u,l=Du.SPLIT*n,i=c-i,o=u-i,s=l-n,h=u*n,s=l-s,a=n-s,l=i*s-h+i*a+o*s+o*a,c=(this._hi-h-l+this._lo-u*r)/n,l=u+c,this._hi=l,this._lo=u-l+c,this}},Du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Du.prototype.divide=function(){if(arguments[0]instanceof Du){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=Du.SPLIT*o)-(e=s-o)),u=e*(r=(u=Du.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi;return new Du(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return mu.isNaN(c)?Du.createNaN():Du.copy(this).selfDivide(c,0)}},Du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Du.prototype.pow=function(t){if(0===t)return Du.valueOf(1);var e=new Du(this),n=Du.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Du.prototype.ceil=function(){if(this.isNaN())return Du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Du(t,e)},Du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Du.prototype.rint=function(){if(this.isNaN())return this;return this.add(.5).floor()},Du.prototype.setValue=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Du.prototype.max=function(t){return this.ge(t)?this:t},Du.prototype.sqrt=function(){if(this.isZero())return Du.valueOf(0);if(this.isNegative())return Du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Du.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+e,s=i-this._hi,o=i-s,o=e-s+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],h=null,l=null,p=null,f=null,g=null,d=null,y=null;f=this._hi+u,l=this._lo+c,g=f-(d=f-this._hi),p=l-(y=l-this._lo);var _=(h=f+(d=(g=u-d+(this._hi-g))+l))+(d=(p=c-y+(this._lo-p))+(d+(f-h))),m=d+(h-_);return this._hi=_,this._lo=m,this}},Du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;i=(u=Du.SPLIT*this._hi)-this._hi,c=Du.SPLIT*n,i=u-i,o=this._hi-i,s=c-n;var h=(u=this._hi*n)+(c=i*(s=c-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),l=c+(i=u-h);return this._hi=h,this._lo=l,this}},Du.prototype.selfSqr=function(){return this.selfMultiply(this)},Du.prototype.floor=function(){if(this.isNaN())return Du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Du(t,e)},Du.prototype.negate=function(){return this.isNaN()?this:new Du(-this._hi,-this._lo)},Du.prototype.clone=function(){},Du.prototype.multiply=function(){if(arguments[0]instanceof Du){var t=arguments[0];return t.isNaN()?Du.createNaN():Du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return mu.isNaN(e)?Du.createNaN():Du.copy(this).selfMultiply(e,0)}},Du.prototype.isNaN=function(){return mu.isNaN(this._hi)},Du.prototype.intValue=function(){return Math.trunc(this._hi)},Du.prototype.toString=function(){var t=Du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Du.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Du.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;e=(i=1/this._hi)-(t=(o=Du.SPLIT*i)-(t=o-i)),n=(a=Du.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(s=i*this._hi)-(a=t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new Du(u,i-u+o)},Du.prototype.toSciNotation=function(){if(this.isZero())return Du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Du.prototype.abs=function(){return this.isNaN()?Du.NaN:this.isNegative()?this.negate():new Du(this)},Du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Du.prototype.add=function(){if(arguments[0]instanceof Du){var t=arguments[0];return Du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Du.copy(this).selfAdd(e)}},Du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Du.prototype.trunc=function(){return this.isNaN()?Du.NaN:this.isPositive()?this.floor():this.ceil()},Du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Du.prototype.interfaces_=function(){return[Li,xu,Eu]},Du.prototype.getClass=function(){return Du},Du.sqr=function(t){return Du.valueOf(t).selfMultiply(t)},Du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Du.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Du(e)}},Du.sqrt=function(t){return Du.valueOf(t).sqrt()},Du.parse=function(t){for(var e=0,n=t.length;Au.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Du,s=0,a=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,Au.isDigit(c)){var h=c-"0";o.selfMultiply(Du.TEN),o.selfAdd(h),s++}else{if("."!==c){if("e"===c||"E"===c){var l=t.substring(e);try{u=Tu.parseInt(l)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+l+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var g=Du.TEN.pow(f);p=o.divide(g)}else if(f<0){var d=Du.TEN.pow(-f);p=o.multiply(d)}return r?p.negate():p},Du.createNaN=function(){return new Du(mu.NaN,mu.NaN)},Du.copy=function(t){return new Du(t)},Du.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Du.stringOfChar=function(t,e){for(var n=new Ru,r=0;r<e;r++)n.append(t);return n.toString()},Fu.PI.get=function(){return new Du(3.141592653589793,1.2246467991473532e-16)},Fu.TWO_PI.get=function(){return new Du(6.283185307179586,2.4492935982947064e-16)},Fu.PI_2.get=function(){return new Du(1.5707963267948966,6.123233995736766e-17)},Fu.E.get=function(){return new Du(2.718281828459045,1.4456468917292502e-16)},Fu.NaN.get=function(){return new Du(mu.NaN,mu.NaN)},Fu.EPS.get=function(){return 1.23259516440783e-32},Fu.SPLIT.get=function(){return 134217729},Fu.MAX_PRINT_DIGITS.get=function(){return 32},Fu.TEN.get=function(){return Du.valueOf(10)},Fu.ONE.get=function(){return Du.valueOf(1)},Fu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Fu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Du,Fu);var qu=function(){},Gu={DP_SAFE_EPSILON:{configurable:!0}};qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.orientationIndex=function(t,e,n){var r=qu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Du.valueOf(e.x).selfAdd(-t.x),o=Du.valueOf(e.y).selfAdd(-t.y),s=Du.valueOf(n.x).selfAdd(-e.x),a=Du.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},qu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},qu.intersection=function(t,e,n,r){var i=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(e.x).selfSubtract(t.x)),o=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),u=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),h=Du.valueOf(t.x).selfAdd(Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),l=Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),p=Du.valueOf(e.y).selfSubtract(t.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),f=l.subtract(p).selfDivide(s).doubleValue(),g=Du.valueOf(n.y).selfAdd(Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new bu(h,g)},qu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return qu.signum(s);r=i+o}else{if(!(i<0))return qu.signum(s);if(o>=0)return qu.signum(s);r=-i-o}var a=qu.DP_SAFE_EPSILON*r;return s>=a||-s>=a?qu.signum(s):2},qu.signum=function(t){return t>0?1:t<0?-1:0},Gu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(qu,Gu);var Bu=function(){},ku={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ku.X.get=function(){return 0},ku.Y.get=function(){return 1},ku.Z.get=function(){return 2},ku.M.get=function(){return 3},Bu.prototype.setOrdinate=function(t,e,n){},Bu.prototype.size=function(){},Bu.prototype.getOrdinate=function(t,e){},Bu.prototype.getCoordinate=function(){},Bu.prototype.getCoordinateCopy=function(t){},Bu.prototype.getDimension=function(){},Bu.prototype.getX=function(t){},Bu.prototype.clone=function(){},Bu.prototype.expandEnvelope=function(t){},Bu.prototype.copy=function(){},Bu.prototype.getY=function(t){},Bu.prototype.toCoordinateArray=function(){},Bu.prototype.interfaces_=function(){return[Eu]},Bu.prototype.getClass=function(){return Bu},Object.defineProperties(Bu,ku);var zu=function(){},ju=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zu),Xu=function(){};Xu.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Xu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Uu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof bu&&arguments[1]instanceof bu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2];this.x=u,this.y=c,this.w=h}else if(4===arguments.length){var l=arguments[0],p=arguments[1],f=arguments[2],g=arguments[3],d=l.y-p.y,y=p.x-l.x,_=l.x*p.y-p.x*l.y,m=f.y-g.y,v=g.x-f.x,x=f.x*g.y-g.x*f.y;this.x=y*x-v*_,this.y=m*_-d*x,this.w=d*v-m*y}};Uu.prototype.getY=function(){var t=this.y/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new ju;return t},Uu.prototype.getX=function(){var t=this.x/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new ju;return t},Uu.prototype.getCoordinate=function(){var t=new bu;return t.x=this.getX(),t.y=this.getY(),t},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,h=i*u-a*o,l=(o*c-u*s)/h,p=(a*s-i*c)/h;if(mu.isNaN(l)||mu.isInfinite(l)||mu.isNaN(p)||mu.isInfinite(p))throw new ju;return new bu(l,p)};var Yu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof bu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Vu={serialVersionUID:{configurable:!0}};Yu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Yu.prototype.equals=function(t){if(!(t instanceof Yu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Yu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Yu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Yu(e,r,n,i)},Yu.prototype.isNull=function(){return this._maxx<this._minx},Yu.prototype.getMaxX=function(){return this._maxx},Yu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Yu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy)}},Yu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Yu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof bu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Yu.prototype.getMinY=function(){return this._miny},Yu.prototype.getMinX=function(){return this._minx},Yu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Yu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Yu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Yu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Yu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Yu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Yu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Yu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Yu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Yu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Yu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Yu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Yu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof bu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Yu.prototype.centre=function(){return this.isNull()?null:new bu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Yu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Yu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Yu.prototype.getMaxY=function(){return this._maxy},Yu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Yu.prototype.hashCode=function(){var t=17;return t=37*t+bu.hashCode(this._minx),t=37*t+bu.hashCode(this._maxx),t=37*t+bu.hashCode(this._miny),t=37*t+bu.hashCode(this._maxy)},Yu.prototype.interfaces_=function(){return[xu,Li]},Yu.prototype.getClass=function(){return Yu},Yu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(c>u)&&(!(h<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),h=Math.max(r.y,i.y),!(c>u)&&!(h<a)))}},Vu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Yu,Vu);var Hu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Wu=function(t){this.geometryFactory=t||new _h};Wu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Hu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Hu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Zu[n]&&(e=Zu[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Wu.prototype.write=function(t){return this.extractGeometry(t)},Wu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ju[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ju[e].apply(this,[t])+")"};var Ju={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ju.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ju.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ju.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ju.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ju.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ju.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Ju.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ju.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Zu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Hu.spaces);return this.geometryFactory.createPoint(new bu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Hu.trimParens,"$1"),r.push(Zu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Hu.spaces),r.push(new bu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Hu.spaces),r.push(new bu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Hu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Hu.trimParens,"$1"),r.push(Zu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Hu.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Hu.trimParens,"$1"),n=Zu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Hu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Hu.trimParens,"$1"),r.push(Zu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Ku=function(t){this.parser=new Wu(t)};Ku.prototype.write=function(t){return this.parser.write(t)},Ku.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Qu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),$u=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qu),tc=function(){};tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.shouldNeverReachHere=function(){if(0===arguments.length)tc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new $u("Should never reach here"+(null!==t?": "+t:""))}},tc.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],tc.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new $u:new $u(e)},tc.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],tc.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new $u("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ec=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new bu,this._intPt[1]=new bu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ec.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ec.prototype.getTopologySummary=function(){var t=new Ru;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ec.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ec.prototype.getIntersectionNum=function(){return this._result},ec.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ec.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ec.prototype.setPrecisionModel=function(t){this._precisionModel=t},ec.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ec.prototype.getIntersection=function(t){return this._intPt[t]},ec.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ec.prototype.hasIntersection=function(){return this._result!==ec.NO_INTERSECTION},ec.prototype.getEdgeDistance=function(t,e){return ec.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ec.prototype.isCollinear=function(){return this._result===ec.COLLINEAR_INTERSECTION},ec.prototype.toString=function(){return Ku.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ku.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ec.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ec.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ec.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return tc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ec.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return tc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nc.DONT_INTERSECT.get=function(){return 0},nc.DO_INTERSECT.get=function(){return 1},nc.COLLINEAR.get=function(){return 2},nc.NO_INTERSECTION.get=function(){return 0},nc.POINT_INTERSECTION.get=function(){return 1},nc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ec,nc);var rc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Yu(this._inputLines[0][0],this._inputLines[0][1]),n=new Yu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Yu.intersects(n,r,e)&&0===sc.orientationIndex(n,r,e)&&0===sc.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Uu.intersection(t,n,r,i)}catch(s){if(!(s instanceof ju))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new bu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=qu.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Xu.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Xu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new bu(t),o=new bu(e),s=new bu(n),a=new bu(r),u=new bu;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Yu.intersects(e,n,r),s=Yu.intersects(e,n,i),a=Yu.intersects(r,i,e),u=Yu.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,h=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>c?o:c)+(a<l?a:l))/2,g=((s>h?s:h)+(u<p?u:p))/2;i.x=f,i.y=g,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Yu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=sc.orientationIndex(e,n,r),s=sc.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=sc.orientationIndex(r,i,e),u=sc.orientationIndex(r,i,n);if(a>0&&u>0||a<0&&u<0)return t.NO_INTERSECTION;return 0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new bu(r):0===s?this._intPt[0]=new bu(i):0===a?this._intPt[0]=new bu(e):0===u&&(this._intPt[0]=new bu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=sc.distancePointLine(t,n,r),s=sc.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=sc.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=sc.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(ec),ic=function(){};ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ic.signOfDet2x2(r,i,o,s)},ic.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,(r-=s*e)<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(t/n),t-=s*n,(e-=s*r)<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var oc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};oc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ic.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},oc.prototype.isPointInPolygon=function(){return this.getLocation()!==Su.EXTERIOR},oc.prototype.getLocation=function(){return this._isPointOnSegment?Su.BOUNDARY:this._crossingCount%2==1?Su.INTERIOR:Su.EXTERIOR},oc.prototype.isOnSegment=function(){return this._isPointOnSegment},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.locatePointInRing=function(){if(arguments[0]instanceof bu&&Lu(arguments[1],Bu)){for(var t=arguments[0],e=arguments[1],n=new oc(t),r=new bu,i=new bu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof bu&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new oc(s),c=1;c<a.length;c++){var h=a[c],l=a[c-1];if(u.countSegment(h,l),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var sc=function(){},ac={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.orientationIndex=function(t,e,n){return qu.orientationIndex(t,e,n)},sc.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Lu(arguments[0],Bu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new bu,c=new bu,h=new bu;s.getCoordinate(0,c),s.getCoordinate(1,h);var l=c.x;h.x-=l;for(var p=0,f=1;f<a-1;f++)u.y=c.y,c.x=h.x,c.y=h.y,s.getCoordinate(f+1,h),h.x-=l,p+=c.x*(u.y-h.y);return p/2}},sc.distanceLineLine=function(t,e,n,r){if(t.equals(e))return sc.distancePointLine(t,n,r);if(n.equals(r))return sc.distancePointLine(r,t,e);var i=!1;if(Yu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?Pu.min(sc.distancePointLine(t,n,r),sc.distancePointLine(e,n,r),sc.distancePointLine(n,t,e),sc.distancePointLine(r,t,e)):0},sc.isPointInRing=function(t,e){return sc.locatePointInRing(t,e)!==Su.EXTERIOR},sc.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new bu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,h=u-o;n+=Math.sqrt(c*c+h*h),i=a,o=u}return n},sc.isCCW=function(t){var e=t.length-1;if(e<3)throw new _u("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var h=sc.computeOrientation(u,n,c),l=!1;return l=0===h?u.x>c.x:h>0,l},sc.locatePointInRing=function(t,e){return oc.locatePointInRing(t,e)},sc.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},sc.computeOrientation=function(t,e,n){return sc.orientationIndex(t,e,n)},sc.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new _u("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=sc.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var h=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(h)*Math.sqrt(u)}},sc.isOnLine=function(t,e){for(var n=new rc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ac.CLOCKWISE.get=function(){return-1},ac.RIGHT.get=function(){return sc.CLOCKWISE},ac.COUNTERCLOCKWISE.get=function(){return 1},ac.LEFT.get=function(){return sc.COUNTERCLOCKWISE},ac.COLLINEAR.get=function(){return 0},ac.STRAIGHT.get=function(){return sc.COLLINEAR},Object.defineProperties(sc,ac);var uc=function(){};uc.prototype.filter=function(t){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var cc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},hc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cc.prototype.isGeometryCollection=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION},cc.prototype.getFactory=function(){return this._factory},cc.prototype.getGeometryN=function(t){return this},cc.prototype.getArea=function(){return 0},cc.prototype.isRectangle=function(){return!1},cc.prototype.equals=function(){if(arguments[0]instanceof cc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof cc))return!1;var n=e;return this.equalsExact(n)}},cc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cc.prototype.geometryChanged=function(){this.apply(cc.geometryChangedFilter)},cc.prototype.geometryChangedAction=function(){this._envelope=null},cc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cc.prototype.getLength=function(){return 0},cc.prototype.getNumGeometries=function(){return 1},cc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},cc.prototype.getUserData=function(){return this._userData},cc.prototype.getSRID=function(){return this._SRID},cc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION)throw new _u("This method does not support GeometryCollection arguments")},cc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},cc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Yu(this._envelope)},cc.prototype.setSRID=function(t){this._SRID=t},cc.prototype.setUserData=function(t){this._userData=t},cc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},cc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cc.SORTINDEX_MULTIPOINT||this.getSortIndex()===cc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cc.SORTINDEX_MULTIPOLYGON},cc.prototype.interfaces_=function(){return[Eu,xu,Li]},cc.prototype.getClass=function(){return cc},cc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},hc.serialVersionUID.get=function(){return 0x799ea46522854c00},hc.SORTINDEX_POINT.get=function(){return 0},hc.SORTINDEX_MULTIPOINT.get=function(){return 1},hc.SORTINDEX_LINESTRING.get=function(){return 2},hc.SORTINDEX_LINEARRING.get=function(){return 3},hc.SORTINDEX_MULTILINESTRING.get=function(){return 4},hc.SORTINDEX_POLYGON.get=function(){return 5},hc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},hc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},hc.geometryChangedFilter.get=function(){return lc},Object.defineProperties(cc,hc);var lc=function(){};lc.interfaces_=function(){return[uc]},lc.filter=function(t){t.geometryChangedAction()};var pc=function(){};pc.prototype.filter=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var fc=function(){},gc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};fc.prototype.isInBoundary=function(t){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},gc.Mod2BoundaryNodeRule.get=function(){return dc},gc.EndPointBoundaryNodeRule.get=function(){return yc},gc.MultiValentEndPointBoundaryNodeRule.get=function(){return _c},gc.MonoValentEndPointBoundaryNodeRule.get=function(){return mc},gc.MOD2_BOUNDARY_RULE.get=function(){return new dc},gc.ENDPOINT_BOUNDARY_RULE.get=function(){return new yc},gc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _c},gc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mc},gc.OGC_SFS_BOUNDARY_RULE.get=function(){return fc.MOD2_BOUNDARY_RULE},Object.defineProperties(fc,gc);var dc=function(){};dc.prototype.isInBoundary=function(t){return t%2==1},dc.prototype.interfaces_=function(){return[fc]},dc.prototype.getClass=function(){return dc};var yc=function(){};yc.prototype.isInBoundary=function(t){return t>0},yc.prototype.interfaces_=function(){return[fc]},yc.prototype.getClass=function(){return yc};var _c=function(){};_c.prototype.isInBoundary=function(t){return t>1},_c.prototype.interfaces_=function(){return[fc]},_c.prototype.getClass=function(){return _c};var mc=function(){};mc.prototype.isInBoundary=function(t){return 1===t},mc.prototype.interfaces_=function(){return[fc]},mc.prototype.getClass=function(){return mc};var vc=function(){};vc.prototype.add=function(){},vc.prototype.addAll=function(){},vc.prototype.isEmpty=function(){},vc.prototype.iterator=function(){},vc.prototype.size=function(){},vc.prototype.toArray=function(){},vc.prototype.remove=function(){};var xc=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),Ec=function(){};Ec.prototype.hasNext=function(){},Ec.prototype.next=function(){},Ec.prototype.remove=function(){};var wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(vc);(Pi.prototype=new Error).name="NoSuchElementException";var bc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,vc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ic(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new xc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wc),Ic=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Pi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Ec),Nc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof bu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(i))return null}t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<a.length;c++)this.add(a[c],u);else for(var h=a.length-1;h>=0;h--)this.add(a[h],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof bu){var l=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(l>0){if(this.get(l-1).equals2D(p))return null}if(l<f){if(this.get(l).equals2D(p))return null}}}t.prototype.add.call(this,l,p)}}else if(4===arguments.length){var g=arguments[0],d=arguments[1],y=arguments[2],_=arguments[3],m=1;y>_&&(m=-1);for(var v=y;v!==_;v+=m)this.add(g[v],d);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new bu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(bc),Cc=function(){},Sc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Sc.ForwardComparator.get=function(){return Mc},Sc.BidirectionalComparator.get=function(){return Lc},Sc.coordArrayType.get=function(){return new Array(0).fill(null)},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc},Cc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Cc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Cc.indexOf(r,e)<0)return r}return null},Cc.scroll=function(t,e){var n=Cc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Xu.arraycopy(t,n,r,0,t.length-n),Xu.arraycopy(t,0,r,t.length-n,n),Xu.arraycopy(r,0,t,0,t.length)},Cc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Cc.intersection=function(t,e){for(var n=new Nc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Cc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Cc.removeRepeatedPoints=function(t){if(!Cc.hasRepeatedPoints(t))return t;return new Nc(t,!1).toCoordinateArray()},Cc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Cc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Cc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new bu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new bu(r[i+u])},Cc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Cc.envelope=function(t){for(var e=new Yu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Cc.toCoordinateArray=function(t){return t.toArray(Cc.coordArrayType)},Cc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Cc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Cc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Cc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Cc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Cc.extract=function(t,e,n){e=Pu.clamp(e,0,t.length);var r=(n=Pu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Cc,Sc);var Mc=function(){};Mc.prototype.compare=function(t,e){return Cc.compare(t,e)},Mc.prototype.interfaces_=function(){return[wu]},Mc.prototype.getClass=function(){return Mc};var Lc=function(){};Lc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Cc.compare(n,r);return Cc.isEqualReversed(n,r)?0:i},Lc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Cc.increasingDirection(n),o=Cc.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},Lc.prototype.interfaces_=function(){return[wu]},Lc.prototype.getClass=function(){return Lc};var Pc=function(){};Pc.prototype.get=function(){},Pc.prototype.put=function(){},Pc.prototype.size=function(){},Pc.prototype.values=function(){},Pc.prototype.entrySet=function(){};var Oc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pc);(Oi.prototype=new Error).name="OperationNotSupported",(Ri.prototype=new vc).contains=function(){};var Rc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Tc(this)},e}(Ri),Tc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Pi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Oi},e}(Ec),Ac=0;(Gi.prototype=new Oc).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Gi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ac,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Ac,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Gi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ai(t)===Fi(Ai(Ai(t)))){var e=qi(Ai(Ai(t)));1===Ti(e)?(Di(Ai(t),Ac),Di(e,Ac),Di(Ai(Ai(t)),1),t=Ai(Ai(t))):(t===qi(Ai(t))&&(t=Ai(t),this.rotateLeft(t)),Di(Ai(t),Ac),Di(Ai(Ai(t)),1),this.rotateRight(Ai(Ai(t))))}else{var n=Fi(Ai(Ai(t)));1===Ti(n)?(Di(Ai(t),Ac),Di(n,Ac),Di(Ai(Ai(t)),1),t=Ai(Ai(t))):(t===Fi(Ai(t))&&(t=Ai(t),this.rotateRight(t)),Di(Ai(t),Ac),Di(Ai(Ai(t)),1),this.rotateLeft(Ai(Ai(t))))}this.root_.color=Ac},Gi.prototype.values=function(){var t=new bc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Gi.successor(e));)t.add(e.value);return t},Gi.prototype.entrySet=function(){var t=new Rc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Gi.successor(e));)t.add(e);return t},Gi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Gi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Gi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Gi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Gi.prototype.size=function(){return this.size_};var Dc=function(){};Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Bi.prototype=new Ri,(ki.prototype=new Bi).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},ki.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},ki.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ki.prototype.remove=function(t){throw new Oi},ki.prototype.size=function(){return this.array_.length},ki.prototype.isEmpty=function(){return 0===this.array_.length},ki.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ki.prototype.iterator=function(){return new Fc(this)};var Fc=function(t){this.treeSet_=t,this.position_=0};Fc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Pi;return this.treeSet_.array_[this.position_++]},Fc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Fc.prototype.remove=function(){throw new Oi};var qc=function(){};qc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},qc.asList=function(t){for(var e=new bc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Gc=function(){},Bc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bc.P.get=function(){return 0},Bc.L.get=function(){return 1},Bc.A.get=function(){return 2},Bc.FALSE.get=function(){return-1},Bc.TRUE.get=function(){return-2},Bc.DONTCARE.get=function(){return-3},Bc.SYM_FALSE.get=function(){return"F"},Bc.SYM_TRUE.get=function(){return"T"},Bc.SYM_DONTCARE.get=function(){return"*"},Bc.SYM_P.get=function(){return"0"},Bc.SYM_L.get=function(){return"1"},Bc.SYM_A.get=function(){return"2"},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.toDimensionSymbol=function(t){switch(t){case Gc.FALSE:return Gc.SYM_FALSE;case Gc.TRUE:return Gc.SYM_TRUE;case Gc.DONTCARE:return Gc.SYM_DONTCARE;case Gc.P:return Gc.SYM_P;case Gc.L:return Gc.SYM_L;case Gc.A:return Gc.SYM_A}throw new _u("Unknown dimension value: "+t)},Gc.toDimensionValue=function(t){switch(Au.toUpperCase(t)){case Gc.SYM_FALSE:return Gc.FALSE;case Gc.SYM_TRUE:return Gc.TRUE;case Gc.SYM_DONTCARE:return Gc.DONTCARE;case Gc.SYM_P:return Gc.P;case Gc.SYM_L:return Gc.L;case Gc.SYM_A:return Gc.A}throw new _u("Unknown dimension symbol: "+t)},Object.defineProperties(Gc,Bc);var kc=function(){};kc.prototype.filter=function(t){},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var zc=function(){};zc.prototype.filter=function(t,e){},zc.prototype.isDone=function(){},zc.prototype.isGeometryChanged=function(){},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var jc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new _u("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Yu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();qc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Gc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Gc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new ki(qc.asList(this._geometries)),n=new ki(qc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var c=this.getGeometryN(u),h=o.getGeometryN(u),l=c.compareToSameClass(h,i);if(0!==l)return l;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(Lu(arguments[0],pc))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Lu(arguments[0],zc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],kc)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Lu(arguments[0],uc)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(cc),Xc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Uc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(jc),Uc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=fc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Uc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Uc.prototype.getBoundary=function(){return this._geom instanceof Jc?this.boundaryLineString(this._geom):this._geom instanceof Xc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Uc.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){return this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Uc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Uc.prototype.computeBoundaryCoordinates=function(t){var e=new bc;this._endpointMap=new Gi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Cc.toCoordinateArray(e)},Uc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yc,this._endpointMap.put(t,e)),e.count++},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Uc(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Uc(e,n).getBoundary()}};var Yc=function(){this.count=null};Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc};var Vc=function(){},Hc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc},Vc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Vc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Vc.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Vc.NEWLINE}catch(t){if(!(t instanceof zi))throw t;tc.shouldNeverReachHere()}return o}},Vc.split=function(t,e){for(var n=e.length,r=new bc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Vc.toString=function(){if(1===arguments.length){var t=arguments[0];return Vc.SIMPLE_ORDINATE_FORMAT.format(t)}},Vc.spaces=function(t){return Vc.chars(" ",t)},Hc.NEWLINE.get=function(){return Xu.getProperty("line.separator")},Hc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Vc,Hc);var Wc=function(){};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Wc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Bu.X)===t.getOrdinate(e-1,Bu.X)&&t.getOrdinate(0,Bu.Y)===t.getOrdinate(e-1,Bu.Y))},Wc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!mu.isNaN(s)||!mu.isNaN(a)))return!1}return!0},Wc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Wc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Wc.copy(e,i-1,r,o,1);return r},Wc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Wc.swap(t,r,e-r)},Wc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Wc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Wc.copyCoord(t,e+o,n,r+o)},Wc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Ru;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Vc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Wc.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(n<=3)return Wc.createClosedRing(t,e,4);return e.getOrdinate(0,Bu.X)===e.getOrdinate(n-1,Bu.X)&&e.getOrdinate(0,Bu.Y)===e.getOrdinate(n-1,Bu.Y)?e:Wc.createClosedRing(t,e,n+1)},Wc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Wc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Wc.copy(e,0,r,o,1);return r};var Jc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Yu:this._points.expandEnvelope(new Yu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wc.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return sc.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();Wc.reverse(t);return this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Lu(arguments[0],pc))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Lu(arguments[0],zc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],kc)){arguments[0].filter(this)}else if(Lu(arguments[0],uc)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return new Uc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _u("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(cc),Zc=function(){};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Kc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Yu;var t=new Yu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Gc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Lu(arguments[0],pc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Lu(arguments[0],zc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],kc)){arguments[0].filter(this)}else if(Lu(arguments[0],uc)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(cc),Qc=function(){};Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var $c=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new _u("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new _u("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(sc.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(sc.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o===(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);qc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Xu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Cc.minCoordinate(e.getCoordinates());Cc.scroll(r,i),Xu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],sc.isCCW(e.getCoordinates())===n&&Cc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),h=o.getNumInteriorRing(),l=0;l<c&&l<h;){var p=this.getInteriorRingN(l),f=o.getInteriorRingN(l),g=p.compareToSameClass(f,i);if(0!==g)return g;l++}return l<c?1:l<h?-1:0}},e.prototype.apply=function(t){if(Lu(t,pc)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Lu(t,zc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Lu(t,kc))t.filter(this);else if(Lu(t,uc)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(cc),th=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Gc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(jc),eh=function(t){function e(e,n){e instanceof bu&&n instanceof _h&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Gc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();Wc.reverse(t);return this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new _u("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new _u("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Jc),nh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new bc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(jc),rh=function(t){this._factory=t||null,this._isUserDataCopied=!1},ih={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rh.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rh.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},rh.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jc?this.editGeometryCollection(t,e):t instanceof $c?this.editPolygon(t,e):t instanceof Kc?e.edit(t,this._factory):t instanceof Jc?e.edit(t,this._factory):(tc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rh.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new bc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===th?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Xc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===nh?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rh.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new bc,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh},rh.GeometryEditorOperation=function(){},ih.NoOpGeometryOperation.get=function(){return oh},ih.CoordinateOperation.get=function(){return sh},ih.CoordinateSequenceOperation.get=function(){return ah},Object.defineProperties(rh,ih);var oh=function(){};oh.prototype.edit=function(t,e){return t},oh.prototype.interfaces_=function(){return[rh.GeometryEditorOperation]},oh.prototype.getClass=function(){return oh};var sh=function(){};sh.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof eh?e.createLinearRing(n):t instanceof Jc?e.createLineString(n):t instanceof Kc?n.length>0?e.createPoint(n[0]):e.createPoint():t},sh.prototype.interfaces_=function(){return[rh.GeometryEditorOperation]},sh.prototype.getClass=function(){return sh};var ah=function(){};ah.prototype.edit=function(t,e){return t instanceof eh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ah.prototype.interfaces_=function(){return[rh.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new bu}else if(Lu(arguments[0],Bu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new bu}},ch={serialVersionUID:{configurable:!0}};uh.prototype.setOrdinate=function(t,e,n){switch(e){case Bu.X:this._coordinates[t].x=n;break;case Bu.Y:this._coordinates[t].y=n;break;case Bu.Z:this._coordinates[t].z=n;break;default:throw new _u("invalid ordinateIndex")}},uh.prototype.size=function(){return this._coordinates.length},uh.prototype.getOrdinate=function(t,e){switch(e){case Bu.X:return this._coordinates[t].x;case Bu.Y:return this._coordinates[t].y;case Bu.Z:return this._coordinates[t].z}return mu.NaN},uh.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},uh.prototype.getCoordinateCopy=function(t){return new bu(this._coordinates[t])},uh.prototype.getDimension=function(){return this._dimension},uh.prototype.getX=function(t){return this._coordinates[t].x},uh.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new uh(t,this._dimension)},uh.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},uh.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new uh(t,this._dimension)},uh.prototype.toString=function(){if(this._coordinates.length>0){var t=new Ru(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},uh.prototype.getY=function(t){return this._coordinates[t].y},uh.prototype.toCoordinateArray=function(){return this._coordinates},uh.prototype.interfaces_=function(){return[Bu,Li]},uh.prototype.getClass=function(){return uh},ch.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(uh,ch);var hh=function(){},lh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hh.prototype.readResolve=function(){return hh.instance()},hh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new uh(t)}if(Lu(arguments[0],Bu)){var e=arguments[0];return new uh(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new uh(n):new uh(n,r)}},hh.prototype.interfaces_=function(){return[Cu,Li]},hh.prototype.getClass=function(){return hh},hh.instance=function(){return hh.instanceObject},lh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},lh.instanceObject.get=function(){return new hh},Object.defineProperties(hh,lh);var ph=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new bc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rc;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Pc),fh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof dh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},gh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fh.prototype.equals=function(t){if(!(t instanceof fh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Tu(n).compareTo(new Tu(r))},fh.prototype.getScale=function(){return this._scale},fh.prototype.isFloating=function(){return this._modelType===fh.FLOATING||this._modelType===fh.FLOATING_SINGLE},fh.prototype.getType=function(){return this._modelType},fh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fh.FLOATING?t="Floating":this._modelType===fh.FLOATING_SINGLE?t="Floating-Single":this._modelType===fh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(mu.isNaN(t))return t;if(this._modelType===fh.FLOATING_SINGLE){return t}return this._modelType===fh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof bu){var e=arguments[0];if(this._modelType===fh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fh.FLOATING?t=16:this._modelType===fh.FLOATING_SINGLE?t=6:this._modelType===fh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fh.prototype.setScale=function(t){this._scale=Math.abs(t)},fh.prototype.interfaces_=function(){return[Li,xu]},fh.prototype.getClass=function(){return fh},fh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},gh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fh,gh);var dh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},yh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};dh.prototype.readResolve=function(){return dh.nameToTypeMap.get(this._name)},dh.prototype.toString=function(){return this._name},dh.prototype.interfaces_=function(){return[Li]},dh.prototype.getClass=function(){return dh},yh.serialVersionUID.get=function(){return-552860263173159e4},yh.nameToTypeMap.get=function(){return new ph},Object.defineProperties(dh,yh),fh.Type=dh,fh.FIXED=new dh("FIXED"),fh.FLOATING=new dh("FLOATING"),fh.FLOATING_SINGLE=new dh("FLOATING SINGLE");var _h=function t(){this._precisionModel=new fh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Lu(arguments[0],Cu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},mh={serialVersionUID:{configurable:!0}};_h.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new bu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new bu(t.getMinX(),t.getMinY()),new bu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new bu(t.getMinX(),t.getMinY()),new bu(t.getMinX(),t.getMaxY()),new bu(t.getMaxX(),t.getMaxY()),new bu(t.getMaxX(),t.getMinY()),new bu(t.getMinX(),t.getMinY())]),null)},_h.prototype.createLineString=function(t){return t?t instanceof Array?new Jc(this.getCoordinateSequenceFactory().create(t),this):Lu(t,Bu)?new Jc(t,this):void 0:new Jc(this.getCoordinateSequenceFactory().create([]),this)},_h.prototype.createMultiLineString=function(){if(0===arguments.length)return new Xc(null,this);if(1===arguments.length){var t=arguments[0];return new Xc(t,this)}},_h.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(_h.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof $c)return this.createMultiPolygon(_h.toPolygonArray(t));if(a instanceof Jc)return this.createMultiLineString(_h.toLineStringArray(t));if(a instanceof Kc)return this.createMultiPoint(_h.toPointArray(t));tc.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_h.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_h.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Lu(arguments[0],Bu)){var e=arguments[0];return new Kc(e,this)}}},_h.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_h.prototype.createPolygon=function(){if(0===arguments.length)return new $c(null,null,this);if(1===arguments.length){if(Lu(arguments[0],Bu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof eh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new $c(r,i,this)}},_h.prototype.getSRID=function(){return this._SRID},_h.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jc(null,this);if(1===arguments.length){var t=arguments[0];return new jc(t,this)}},_h.prototype.createGeometry=function(t){return new rh(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_h.prototype.getPrecisionModel=function(){return this._precisionModel},_h.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Lu(arguments[0],Bu)){var e=arguments[0];return new eh(e,this)}}},_h.prototype.createMultiPolygon=function(){if(0===arguments.length)return new nh(null,this);if(1===arguments.length){var t=arguments[0];return new nh(t,this)}},_h.prototype.createMultiPoint=function(){if(0===arguments.length)return new th(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new th(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Lu(arguments[0],Bu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Wc.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},_h.prototype.interfaces_=function(){return[Li]},_h.prototype.getClass=function(){return _h},_h.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.getDefaultCoordinateSequenceFactory=function(){return hh.instance()},_h.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},mh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_h,mh);var vh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xh=function(t){this.geometryFactory=t||new _h};xh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Eh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==vh.indexOf(n)?Eh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Eh[n].apply(this,[e.geometries]):Eh[n].apply(this,[e])},xh.prototype.write=function(t){var e=t.getGeometryType();if(!wh[e])throw new Error("Geometry is not supported");return wh[e].apply(this,[t])};var Eh={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Eh[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Eh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new bu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new bu(t[0],t[1]),new bu(t[2],t[1]),new bu(t[2],t[3]),new bu(t[0],t[3]),new bu(t[0],t[1])])},Point:function(t){var e=new bu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Eh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Eh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Eh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Eh.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(wh.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=wh.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(wh[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},bh=function(t){this.geometryFactory=t||new _h,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xh(this.geometryFactory)};bh.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fh.FIXED&&this.reducePrecision(e),e},bh.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ih=function(){this.parser=new xh(this.geometryFactory)};Ih.prototype.write=function(t){return this.parser.write(t)};var Nh=function(){},Ch={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.opposite=function(t){return t===Nh.LEFT?Nh.RIGHT:t===Nh.RIGHT?Nh.LEFT:t},Ch.ON.get=function(){return 0},Ch.LEFT.get=function(){return 1},Ch.RIGHT.get=function(){return 2},Object.defineProperties(Nh,Ch),(ji.prototype=new Error).name="EmptyStackException",(Xi.prototype=new wc).add=function(t){return this.array_.push(t),!0},Xi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Xi.prototype.push=function(t){return this.array_.push(t),t},Xi.prototype.pop=function(t){if(0===this.array_.length)throw new ji;return this.array_.pop()},Xi.prototype.peek=function(){if(0===this.array_.length)throw new ji;return this.array_[this.array_.length-1]},Xi.prototype.empty=function(){return 0===this.array_.length},Xi.prototype.isEmpty=function(){return this.empty()},Xi.prototype.search=function(t){return this.array_.indexOf(t)},Xi.prototype.size=function(){return this.array_.length},Xi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Sh=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Sh.prototype.getCoordinate=function(){return this._minCoord},Sh.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Sh.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=sc.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===sc.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===sc.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Sh.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Nh.LEFT;return n[e].y<n[e+1].y&&(r=Nh.RIGHT),r},Sh.prototype.getEdge=function(){return this._orientedDe},Sh.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Sh.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Sh.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}tc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;this.getRightmostSide(this._minDe,this._minIndex)===Nh.LEFT&&(this._orientedDe=this._minDe.getSym())},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Mh=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new bu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Qu),Lh=function(){this.array_=[]};Lh.prototype.addLast=function(t){this.array_.push(t)},Lh.prototype.removeFirst=function(){return this.array_.shift()},Lh.prototype.isEmpty=function(){return 0===this.array_.length};var Ph=function(){this._finder=null,this._dirEdgeList=new bc,this._nodes=new bc,this._rightMostCoord=null,this._env=null,this._finder=new Sh};Ph.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},Ph.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ph.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Mh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ph.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Nh.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ph.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ph.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Nh.RIGHT)>=1&&e.getDepth(Nh.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ph.prototype.computeDepths=function(t){var e=new Rc,n=new Lh,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Ph.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ph.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Yu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ph.prototype.addReachable=function(t){var e=new Xi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ph.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Nh.LEFT,t.getDepth(Nh.RIGHT)),e.setDepth(Nh.RIGHT,t.getDepth(Nh.LEFT))},Ph.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ph.prototype.getNodes=function(){return this._nodes},Ph.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ph.prototype.interfaces_=function(){return[xu]},Ph.prototype.getClass=function(){return Ph};var Oh=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Nh.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Nh.ON]=o,this.location[Nh.LEFT]=s,this.location[Nh.RIGHT]=a}};Oh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Su.NONE)return!1;return!0},Oh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Su.NONE&&(this.location[e]=t)},Oh.prototype.isLine=function(){return 1===this.location.length},Oh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Nh.ON]=this.location[Nh.ON],e[Nh.LEFT]=Su.NONE,e[Nh.RIGHT]=Su.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Su.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Oh.prototype.getLocations=function(){return this.location},Oh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Nh.LEFT];this.location[Nh.LEFT]=this.location[Nh.RIGHT],this.location[Nh.RIGHT]=t},Oh.prototype.toString=function(){var t=new Ru;return this.location.length>1&&t.append(Su.toLocationSymbol(this.location[Nh.LEFT])),t.append(Su.toLocationSymbol(this.location[Nh.ON])),this.location.length>1&&t.append(Su.toLocationSymbol(this.location[Nh.RIGHT])),t.toString()},Oh.prototype.setLocations=function(t,e,n){this.location[Nh.ON]=t,this.location[Nh.LEFT]=e,this.location[Nh.RIGHT]=n},Oh.prototype.get=function(t){return t<this.location.length?this.location[t]:Su.NONE},Oh.prototype.isArea=function(){return this.location.length>1},Oh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Su.NONE)return!0;return!1},Oh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Nh.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Oh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Su.NONE)},Oh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Rh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oh(e),this.elt[1]=new Oh(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Oh(n.elt[0]),this.elt[1]=new Oh(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Oh(Su.NONE),this.elt[1]=new Oh(Su.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Oh(o,s,a),this.elt[1]=new Oh(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2],l=arguments[3];this.elt[0]=new Oh(Su.NONE,Su.NONE,Su.NONE),this.elt[1]=new Oh(Su.NONE,Su.NONE,Su.NONE),this.elt[u].setLocations(c,h,l)}};Rh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Rh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Rh.prototype.isNull=function(t){return this.elt[t].isNull()},Rh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Rh.prototype.isLine=function(t){return this.elt[t].isLine()},Rh.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oh(t.elt[e]):this.elt[e].merge(t.elt[e])},Rh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Rh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Nh.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Rh.prototype.toString=function(){var t=new Ru;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Rh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Rh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Rh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Nh.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Rh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Rh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Rh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oh(this.elt[t].location[0]))},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Rh.toLineLabel=function(t){for(var e=new Rh(Su.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Th=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new bc,this._pts=new bc,this._label=new Rh(Su.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new bc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Th.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=sc.isCCW(this._ring.getCoordinates())},Th.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Th.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Mh("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Mh("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();tc.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Th.prototype.getLinearRing=function(){return this._ring},Th.prototype.getCoordinate=function(t){return this._pts.get(t)},Th.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Th.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Th.prototype.isHole=function(){return this._isHole},Th.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Th.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!sc.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},Th.prototype.addHole=function(t){this._holes.add(t)},Th.prototype.isShell=function(){return null===this._shell},Th.prototype.getLabel=function(){return this._label},Th.prototype.getEdges=function(){return this._edges},Th.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Th.prototype.getShell=function(){return this._shell},Th.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Nh.RIGHT);if(r===Su.NONE)return null;if(this._label.getLocation(n)===Su.NONE)return this._label.setLocation(n,r),null}},Th.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Th.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Ah=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Th),Dh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new bc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ah(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Th),Fh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fh.prototype.setVisited=function(t){this._isVisited=t},Fh.prototype.setInResult=function(t){this._isInResult=t},Fh.prototype.isCovered=function(){return this._isCovered},Fh.prototype.isCoveredSet=function(){return this._isCoveredSet},Fh.prototype.setLabel=function(t){this._label=t},Fh.prototype.getLabel=function(){return this._label},Fh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fh.prototype.updateIM=function(t){tc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fh.prototype.isInResult=function(){return this._isInResult},Fh.prototype.isVisited=function(){return this._isVisited},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var qh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Rh(0,Su.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Su.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Su.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Rh(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Rh)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===Su.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Su.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Su.BOUNDARY:n=Su.INTERIOR;break;case Su.INTERIOR:default:n=Su.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh),Gh=function(){this.nodeMap=new Gi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Gh.prototype.find=function(t){return this.nodeMap.get(t)},Gh.prototype.addNode=function(){if(arguments[0]instanceof bu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof qh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Gh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Gh.prototype.iterator=function(){return this.nodeMap.values().iterator()},Gh.prototype.values=function(){return this.nodeMap.values()},Gh.prototype.getBoundaryNodes=function(t){for(var e=new bc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Su.BOUNDARY&&e.add(r)}return e},Gh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh};var Bh=function(){},kh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.isNorthern=function(t){return t===Bh.NE||t===Bh.NW},Bh.isOpposite=function(t,e){if(t===e)return!1;return 2===(t-e+4)%4},Bh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Bh.isInHalfPlane=function(t,e){return e===Bh.SE?t===Bh.SE||t===Bh.SW:t===e||t===e+1},Bh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _u("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Bh.NE:Bh.SE:e>=0?Bh.NW:Bh.SW}if(arguments[0]instanceof bu&&arguments[1]instanceof bu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new _u("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Bh.NE:Bh.SE:r.y>=n.y?Bh.NW:Bh.SW}},kh.NE.get=function(){return 0},kh.NW.get=function(){return 1},kh.SW.get=function(){return 2},kh.SE.get=function(){return 3},Object.defineProperties(Bh,kh);var zh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};zh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:sc.computeOrientation(t._p0,t._p1,this._p1)},zh.prototype.getDy=function(){return this._dy},zh.prototype.getCoordinate=function(){return this._p0},zh.prototype.setNode=function(t){this._node=t},zh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},zh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},zh.prototype.getDirectedCoordinate=function(){return this._p1},zh.prototype.getDx=function(){return this._dx},zh.prototype.getLabel=function(){return this._label},zh.prototype.getEdge=function(){return this._edge},zh.prototype.getQuadrant=function(){return this._quadrant},zh.prototype.getNode=function(){return this._node},zh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},zh.prototype.computeLabel=function(t){},zh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Bh.quadrant(this._dx,this._dy),tc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},zh.prototype.interfaces_=function(){return[xu]},zh.prototype.getClass=function(){return zh};var jh=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Rh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Mh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Nh.LEFT)===Su.INTERIOR&&this._label.getLocation(e,Nh.RIGHT)===Su.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Nh.LEFT]+"/"+this._depth[Nh.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Su.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Su.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Nh.LEFT&&(r=-1);var i=Nh.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Su.EXTERIOR&&e===Su.INTERIOR?1:t===Su.INTERIOR&&e===Su.EXTERIOR?-1:0},e}(zh),Xh=function(){};Xh.prototype.createNode=function(t){return new qh(t,null)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Uh=function(){if(this._edges=new bc,this._nodes=null,this._edgeEndList=new bc,0===arguments.length)this._nodes=new Gh(new Xh);else if(1===arguments.length){var t=arguments[0];this._nodes=new Gh(t)}};Uh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Uh.prototype.find=function(t){return this._nodes.find(t)},Uh.prototype.addNode=function(){if(arguments[0]instanceof qh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof bu){var e=arguments[0];return this._nodes.addNode(e)}},Uh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Uh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},Uh.prototype.debugPrintln=function(t){Xu.out.println(t)},Uh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Su.BOUNDARY},Uh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},Uh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&(sc.computeOrientation(t,e,r)===sc.COLLINEAR&&Bh.quadrant(t,e)===Bh.quadrant(n,r))},Uh.prototype.getEdgeEnds=function(){return this._edgeEndList},Uh.prototype.debugPrint=function(t){Xu.out.print(t)},Uh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Uh.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Uh.prototype.insertEdge=function(t){this._edges.add(t)},Uh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Uh.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new jh(n,!0),i=new jh(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Uh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Uh.prototype.getNodes=function(){return this._nodes.values()},Uh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Uh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var Yh=function(){this._geometryFactory=null,this._shellList=new bc;var t=arguments[0];this._geometryFactory=t};Yh.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Yh.prototype.computePolygons=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Yh.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Mh("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Yh.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new bc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Yh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},Yh.prototype.buildMaximalEdgeRings=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Dh(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Yh.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Yh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Yh.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),h=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var l=!1;h.contains(r)&&sc.isPointInRing(i,c.getCoordinates())&&(l=!0),l&&(null===o||s.contains(h))&&(o=u)}return o},Yh.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return tc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Yh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Uh.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new bc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Vh=function(){};Vh.prototype.getBounds=function(){},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh};var Hh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Hh.prototype.getItem=function(){return this._item},Hh.prototype.getBounds=function(){return this._bounds},Hh.prototype.interfaces_=function(){return[Vh,Li]},Hh.prototype.getClass=function(){return Hh};var Wh=function(){this._size=null,this._items=null,this._size=0,this._items=new bc,this._items.add(null)};Wh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Wh.prototype.size=function(){return this._size},Wh.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Wh.prototype.clear=function(){this._size=0,this._items.clear()},Wh.prototype.isEmpty=function(){return 0===this._size},Wh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};var Jh=function(){};Jh.prototype.visitItem=function(t){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Zh=function(){};Zh.prototype.insert=function(t,e){},Zh.prototype.remove=function(t,e){},Zh.prototype.query=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Kh=function(){if(this._childBoundables=new bc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qh={serialVersionUID:{configurable:!0}};Kh.prototype.getLevel=function(){return this._level},Kh.prototype.size=function(){return this._childBoundables.size()},Kh.prototype.getChildBoundables=function(){return this._childBoundables},Kh.prototype.addChildBoundable=function(t){tc.isTrue(null===this._bounds),this._childBoundables.add(t)},Kh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Kh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Kh.prototype.interfaces_=function(){return[Vh,Li]},Kh.prototype.getClass=function(){return Kh},Qh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Kh,Qh);var $h=function(){};$h.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$h.min=function(t){return $h.sort(t),t.get(0)},$h.sort=function(t,e){var n=t.toArray();e?qc.sort(n,e):qc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$h.singletonList=function(t){var e=new bc;return e.add(t),e};var tl=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tl.prototype.expandToQueue=function(t,e){var n=tl.isComposite(this._boundable1),r=tl.isComposite(this._boundable2);if(n&&r)return tl.area(this._boundable1)>tl.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new _u("neither boundable is composite")},tl.prototype.isLeaves=function(){return!(tl.isComposite(this._boundable1)||tl.isComposite(this._boundable2))},tl.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tl.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tl(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tl.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tl.prototype.getDistance=function(){return this._distance},tl.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tl.prototype.interfaces_=function(){return[xu]},tl.prototype.getClass=function(){return tl},tl.area=function(t){return t.getBounds().getArea()},tl.isComposite=function(t){return t instanceof Kh};var el=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new bc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];tc.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nl={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};el.prototype.getNodeCapacity=function(){return this._nodeCapacity},el.prototype.lastNode=function(t){return t.get(t.size()-1)},el.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Kh?t+=this.size(n):n instanceof Hh&&(t+=1)}return t}},el.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Hh&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},el.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new bc:t}if(1===arguments.length){for(var e=arguments[0],n=new bc,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Kh){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Hh?n.add(i.getItem()):tc.shouldNeverReachHere()}return n.size()<=0?null:n}},el.prototype.insert=function(t,e){tc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Hh(t,e))},el.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new bc;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(tc.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Kh?this.boundablesAtLevel(n,s,i):(tc.isTrue(s instanceof Hh),-1===n&&i.add(s))}return null}},el.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new bc;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Lu(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var c=a.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Kh?this.query(i,c,s):c instanceof Hh?s.visitItem(c.getItem()):tc.shouldNeverReachHere())}else if(Lu(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh)for(var h=arguments[0],l=arguments[1],p=arguments[2],f=l.getChildBoundables(),g=0;g<f.size();g++){var d=f.get(g);this.getIntersectsOp().intersects(d.getBounds(),h)&&(d instanceof Kh?this.query(h,d,p):d instanceof Hh?p.add(d.getItem()):tc.shouldNeverReachHere())}},el.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},el.prototype.getRoot=function(){return this.build(),this._root},el.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&(u instanceof Kh&&(o=this.remove(n,u,i)))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},el.prototype.createHigherLevels=function(t,e){tc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},el.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Kh){var r=this.depth(n);r>t&&(t=r)}}return t+1}},el.prototype.createParentBoundables=function(t,e){tc.isTrue(!t.isEmpty());var n=new bc;n.add(this.createNode(e));var r=new bc(t);$h.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},el.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},el.prototype.interfaces_=function(){return[Li]},el.prototype.getClass=function(){return el},el.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nl.IntersectsOp.get=function(){return rl},nl.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nl.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(el,nl);var rl=function(){},il=function(){};il.prototype.distance=function(t,e){},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il};var ol=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){tc.isTrue(t.length>0);for(var n=new bc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new sl(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new bc;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Lu(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(Lu(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){tc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new bc(t);$h.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Lu(arguments[0],il)){var t=arguments[0],n=new tl(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof tl){var r=arguments[0];return this.nearestNeighbour(r,mu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Lu(arguments[1],il)){var i=arguments[0],o=arguments[1],s=new tl(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tl&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=null,h=new Wh;for(h.add(a);!h.isEmpty()&&u>0;){var l=h.poll(),p=l.getDistance();if(p>=u)break;l.isLeaves()?(u=p,c=l):l.expandToQueue(h,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],y=new Hh(f,g),_=new tl(this.getRoot(),y,d);return this.nearestNeighbour(_)[0]}},e.prototype.interfaces_=function(){return[Zh,Li]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return sl},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(el),sl=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Yu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kh),al=function(){};al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.relativeSign=function(t,e){return t<e?-1:t>e?1:0},al.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=al.relativeSign(e.x,n.x),i=al.relativeSign(e.y,n.y);switch(t){case 0:return al.compareValue(r,i);case 1:return al.compareValue(i,r);case 2:return al.compareValue(i,-r);case 3:return al.compareValue(-r,i);case 4:return al.compareValue(-r,-i);case 5:return al.compareValue(-i,-r);case 6:return al.compareValue(-i,r);case 7:return al.compareValue(r,-i)}return tc.shouldNeverReachHere("invalid octant value"),0},al.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ul=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new bu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ul.prototype.getCoordinate=function(){return this.coord},ul.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ul.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:al.compare(this._segmentOctant,this.coord,e.coord)},ul.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ul.prototype.isInterior=function(){return this._isInterior},ul.prototype.interfaces_=function(){return[xu]},ul.prototype.getClass=function(){return ul};var cl=function(){this._nodeMap=new Gi,this._edge=null;var t=arguments[0];this._edge=t};cl.prototype.getSplitCoordinates=function(){var t=new Nc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cl.prototype.addCollapsedNodes=function(){var t=new bc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cl.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},cl.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Tu(e+1))}},cl.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new bu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new bu(e.coord))},cl.prototype.iterator=function(){return this._nodeMap.values().iterator()},cl.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cl.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cl.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Tu(e[0])),r=i}},cl.prototype.getEdge=function(){return this._edge},cl.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cl.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new bu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new bu(e.coord)),new fl(o,this._edge.getData())},cl.prototype.add=function(t,e){var n=new ul(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(tc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cl.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Qu("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Qu("bad split edge end point at "+i)},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl};var hl=function(){};hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _u("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof bu&&arguments[1]instanceof bu){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new _u("Cannot compute the octant for two identical points "+i);return hl.octant(s,a)}};var ll=function(){};ll.prototype.getCoordinates=function(){},ll.prototype.size=function(){},ll.prototype.getCoordinate=function(t){},ll.prototype.isClosed=function(){},ll.prototype.setData=function(t){},ll.prototype.getData=function(){},ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll};var pl=function(){};pl.prototype.addIntersection=function(t,e){},pl.prototype.interfaces_=function(){return[ll]},pl.prototype.getClass=function(){return pl};var fl=function(){this._nodeList=new cl(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};fl.prototype.getCoordinates=function(){return this._pts},fl.prototype.size=function(){return this._pts.length},fl.prototype.getCoordinate=function(t){return this._pts[t]},fl.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fl.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fl.prototype.setData=function(t){this._data=t},fl.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hl.octant(t,e)},fl.prototype.getData=function(){return this._data},fl.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new bu(n.getIntersection(i));this.addIntersection(o,r)}},fl.prototype.toString=function(){return Ku.toLineString(new uh(this._pts))},fl.prototype.getNodeList=function(){return this._nodeList},fl.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},fl.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},fl.prototype.interfaces_=function(){return[pl]},fl.prototype.getClass=function(){return fl},fl.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new bc;return fl.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){i.next().getNodeList().addSplitEdges(r)}};var gl=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new bu,this.p1=new bu;else if(1===arguments.length){var t=arguments[0];this.p0=new bu(t.p0),this.p1=new bu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new bu(e,n),this.p1=new bu(r,i)}},dl={serialVersionUID:{configurable:!0}};gl.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gl.prototype.orientationIndex=function(){if(arguments[0]instanceof gl){var t=arguments[0],e=sc.orientationIndex(this.p0,this.p1,t.p0),n=sc.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof bu){var r=arguments[0];return sc.orientationIndex(this.p0,this.p1,r)}},gl.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gl.prototype.isVertical=function(){return this.p0.x===this.p1.x},gl.prototype.equals=function(t){if(!(t instanceof gl))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gl.prototype.intersection=function(t){var e=new rc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gl.prototype.project=function(){if(arguments[0]instanceof bu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new bu(t);var e=this.projectionFactor(t),n=new bu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gl){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gl(s,a)}},gl.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gl.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gl.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gl.prototype.distancePerpendicular=function(t){return sc.distancePointLinePerpendicular(t,this.p0,this.p1)},gl.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gl.prototype.midPoint=function(){return gl.midPoint(this.p0,this.p1)},gl.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(r<=0)return mu.NaN;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gl.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=mu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gl.prototype.closestPoint=function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);return this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gl.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gl.prototype.getLength=function(){return this.p0.distance(this.p1)},gl.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gl.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gl.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gl.prototype.lineIntersection=function(t){try{return Uu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof ju))throw t}return null},gl.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gl.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new bu(n-u,r+a)},gl.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gl.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||mu.isNaN(e))&&(e=1),e},gl.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gl.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gl.prototype.distance=function(){if(arguments[0]instanceof gl){var t=arguments[0];return sc.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof bu){var e=arguments[0];return sc.distancePointLine(e,this.p0,this.p1)}},gl.prototype.pointAlong=function(t){var e=new bu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gl.prototype.hashCode=function(){var t=mu.doubleToLongBits(this.p0.x);t^=31*mu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=mu.doubleToLongBits(this.p1.x);n^=31*mu.doubleToLongBits(this.p1.y);return e^(Math.trunc(n)^Math.trunc(n>>32))},gl.prototype.interfaces_=function(){return[xu,Li]},gl.prototype.getClass=function(){return gl},gl.midPoint=function(t,e){return new bu((t.x+e.x)/2,(t.y+e.y)/2)},dl.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gl,dl);var yl=function(){this.tempEnv1=new Yu,this.tempEnv2=new Yu,this._overlapSeg1=new gl,this._overlapSeg2=new gl};yl.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};var _l=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};_l.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},_l.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},_l.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},_l.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},_l.prototype.setId=function(t){this._id=t},_l.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},_l.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Yu(t,e)}return this._env},_l.prototype.getEndIndex=function(){return this._end},_l.prototype.getStartIndex=function(){return this._start},_l.prototype.getContext=function(){return this._context},_l.prototype.getId=function(){return this._id},_l.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var h=Math.trunc((t+e)/2),l=Math.trunc((r+i)/2);t<h&&(r<l&&this.computeOverlapsInternal(t,h,n,r,l,o),l<i&&this.computeOverlapsInternal(t,h,n,l,i,o)),h<e&&(r<l&&this.computeOverlapsInternal(h,e,n,r,l,o),l<i&&this.computeOverlapsInternal(h,e,n,l,i,o))},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var ml=function(){};ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml},ml.getChainStartIndices=function(t){var e=0,n=new bc;n.add(new Tu(e));do{var r=ml.findChainEnd(t,e);n.add(new Tu(r)),e=r}while(e<t.length-1);return ml.toIntArray(n)},ml.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Bh.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])){if(Bh.quadrant(t[i-1],t[i])!==r)break}i++}return i-1},ml.getChains=function(){if(1===arguments.length){var t=arguments[0];return ml.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new bc,i=ml.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new _l(e,i[o],i[o+1],n);r.add(s)}return r}},ml.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var vl=function(){};vl.prototype.computeNodes=function(t){},vl.prototype.getNodedSubstrings=function(){},vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};var xl=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xl.prototype.setSegmentIntersector=function(t){this._segInt=t},xl.prototype.interfaces_=function(){return[vl]},xl.prototype.getClass=function(){return xl};var El=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new bc,this._index=new ol,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fl.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=ml.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wl(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return wl},Object.defineProperties(e,n),e}(xl),wl=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yl),bl=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Il={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};bl.prototype.getEndCapStyle=function(){return this._endCapStyle},bl.prototype.isSingleSided=function(){return this._isSingleSided},bl.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=bl.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=bl.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==bl.JOIN_ROUND&&(this._quadrantSegments=bl.DEFAULT_QUADRANT_SEGMENTS)},bl.prototype.getJoinStyle=function(){return this._joinStyle},bl.prototype.setJoinStyle=function(t){this._joinStyle=t},bl.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},bl.prototype.getSimplifyFactor=function(){return this._simplifyFactor},bl.prototype.getQuadrantSegments=function(){return this._quadrantSegments},bl.prototype.setEndCapStyle=function(t){this._endCapStyle=t},bl.prototype.getMitreLimit=function(){return this._mitreLimit},bl.prototype.setMitreLimit=function(t){this._mitreLimit=t},bl.prototype.setSingleSided=function(t){this._isSingleSided=t},bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl},bl.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Il.CAP_ROUND.get=function(){return 1},Il.CAP_FLAT.get=function(){return 2},Il.CAP_SQUARE.get=function(){return 3},Il.JOIN_ROUND.get=function(){return 1},Il.JOIN_MITRE.get=function(){return 2},Il.JOIN_BEVEL.get=function(){return 3},Il.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Il.DEFAULT_MITRE_LIMIT.get=function(){return 5},Il.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(bl,Il);var Nl=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=sc.COUNTERCLOCKWISE,this._inputLine=t||null},Cl={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nl.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&(!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r))},Nl.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Nl.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Nl.prototype.isShallowConcavity=function(t,e,n,r){if(!(sc.computeOrientation(t,e,n)===this._angleOrientation))return!1;return sc.distancePointLine(e,t,n)<r},Nl.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Nl.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nl.prototype.isConcave=function(t,e,n){var r=sc.computeOrientation(t,e,n)===this._angleOrientation;return r},Nl.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=sc.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nl.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nl.DELETE;)e++;return e},Nl.prototype.isShallow=function(t,e,n,r){return sc.distancePointLine(e,t,n)<r},Nl.prototype.collapseLine=function(){for(var t=new Nc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nl.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.simplify=function(t,e){return new Nl(t).simplify(e)},Cl.INIT.get=function(){return 0},Cl.DELETE.get=function(){return 1},Cl.KEEP.get=function(){return 1},Cl.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nl,Cl);var Sl=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new bc},Ml={COORDINATE_ARRAY_TYPE:{configurable:!0}};Sl.prototype.getCoordinates=function(){return this._ptList.toArray(Sl.COORDINATE_ARRAY_TYPE)},Sl.prototype.setPrecisionModel=function(t){this._precisionModel=t},Sl.prototype.addPt=function(t){var e=new bu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Sl.prototype.revere=function(){},Sl.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Sl.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Sl.prototype.toString=function(){return(new _h).createLineString(this.getCoordinates()).toString()},Sl.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new bu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Sl.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl},Ml.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Sl,Ml);var Ll=function(){},Pl={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},Ll.toDegrees=function(t){return 180*t/Math.PI},Ll.normalize=function(t){for(;t>Math.PI;)t-=Ll.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ll.PI_TIMES_2;return t},Ll.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Ll.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Ll.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Ll.interiorAngle=function(t,e,n){var r=Ll.angle(e,t),i=Ll.angle(e,n);return Math.abs(i-r)},Ll.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ll.PI_TIMES_2;t>=Ll.PI_TIMES_2&&(t=0)}else{for(;t>=Ll.PI_TIMES_2;)t-=Ll.PI_TIMES_2;t<0&&(t=0)}return t},Ll.angleBetween=function(t,e,n){var r=Ll.angle(e,t),i=Ll.angle(e,n);return Ll.diff(r,i)},Ll.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ll.toRadians=function(t){return t*Math.PI/180},Ll.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ll.COUNTERCLOCKWISE:n<0?Ll.CLOCKWISE:Ll.NONE},Ll.angleBetweenOriented=function(t,e,n){var r=Ll.angle(e,t),i=Ll.angle(e,n)-r;return i<=-Math.PI?i+Ll.PI_TIMES_2:i>Math.PI?i-Ll.PI_TIMES_2:i},Pl.PI_TIMES_2.get=function(){return 2*Math.PI},Pl.PI_OVER_2.get=function(){return Math.PI/2},Pl.PI_OVER_4.get=function(){return Math.PI/4},Pl.COUNTERCLOCKWISE.get=function(){return sc.COUNTERCLOCKWISE},Pl.CLOCKWISE.get=function(){return sc.CLOCKWISE},Pl.NONE.get=function(){return sc.COLLINEAR},Object.defineProperties(Ll,Pl);var Ol=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gl,this._seg1=new gl,this._offset0=new gl,this._offset1=new gl,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===bl.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Rl={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ol.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=sc.computeOrientation(this._s0,this._s1,this._s2),r=n===sc.CLOCKWISE&&this._side===Nh.LEFT||n===sc.COUNTERCLOCKWISE&&this._side===Nh.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ol.prototype.addLineEndCap=function(t,e){var n=new gl(t,e),r=new gl;this.computeOffsetSegment(n,Nh.LEFT,this._distance,r);var i=new gl;this.computeOffsetSegment(n,Nh.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case bl.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,sc.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case bl.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case bl.CAP_SQUARE:var u=new bu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new bu(r.p1.x+u.x,r.p1.y+u.y),h=new bu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(h)}},Ol.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ol.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Uu.intersection(e.p0,e.p1,n.p0,n.p1);(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof ju))throw t;o=new bu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ol.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,h=Math.atan2(c,u);r===sc.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,r,i),this._segList.addPt(n)},Ol.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ol.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===bl.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===bl.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ol.prototype.createSquare=function(t){this._segList.addPt(new bu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new bu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new bu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new bu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ol.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ol.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ol.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ol.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ol.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Ll.angle(i,this._seg0.p0),s=Ll.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Ll.normalize(o+s),u=Ll.normalize(a+Math.PI),c=r*n,h=n-c*Math.abs(Math.sin(s)),l=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),f=new bu(l,p),g=new gl(i,f),d=g.pointAlongOffset(1,h),y=g.pointAlongOffset(1,-h);this._side===Nh.LEFT?(this._segList.addPt(d),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(d))},Ol.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Nh.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Ol.prototype.addFilletArc=function(t,e,n,r,i){var o=r===sc.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,h=new bu;c<s;){var l=e+o*c;h.x=t.x+i*Math.cos(l),h.y=t.y+i*Math.sin(l),this._segList.addPt(h),c+=u}},Ol.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ol.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new bu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new bu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ol.prototype.createCircle=function(t){var e=new bu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ol.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ol.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Sl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ol.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ol.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===bl.JOIN_BEVEL||this._bufParams.getJoinStyle()===bl.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,sc.CLOCKWISE,this._distance))},Ol.prototype.closeRing=function(){this._segList.closeRing()},Ol.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Rl.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Rl.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Rl.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Rl.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ol,Rl);var Tl=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Tl.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Cc.reverse(o),o},Tl.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Nl.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Nh.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Nl.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Nh.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Tl.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Nh.RIGHT&&(r=-r);var i=Nl.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Tl.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Nl.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Nh.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Nl.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Nh.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Tl.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case bl.CAP_ROUND:e.createCircle(t);break;case bl.CAP_SQUARE:e.createSquare(t)}},Tl.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Tl.prototype.getBufferParameters=function(){return this._bufParams},Tl.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Tl.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Tl.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Tl.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Nl.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Nh.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Nl.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Nh.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Tl.prototype.getSegGen=function(t){return new Ol(this._precisionModel,this._bufParams,t)},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Tl.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new bu(t[n]);return e};var Al=function(){this._subgraphs=null,this._seg=new gl,this._cga=new sc;var t=arguments[0];this._subgraphs=t},Dl={DepthSegment:{configurable:!0}};Al.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new bc,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Lu(arguments[2],wc)&&arguments[0]instanceof bu&&arguments[1]instanceof jh)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++){this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse();if(!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||sc.computeOrientation(this._seg.p0,this._seg.p1,o)===sc.RIGHT)){var h=s.getDepth(Nh.LEFT);this._seg.p0.equals(u[c])||(h=s.getDepth(Nh.RIGHT));var l=new Fl(this._seg,h);a.add(l)}}else if(Lu(arguments[2],wc)&&arguments[0]instanceof bu&&Lu(arguments[1],wc))for(var p=arguments[0],f=arguments[1],g=arguments[2],d=f.iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(p,y,g)}},Al.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;return $h.min(e)._leftDepth},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Dl.DepthSegment.get=function(){return Fl},Object.defineProperties(Al,Dl);var Fl=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gl(t),this._leftDepth=e};Fl.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fl.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fl.prototype.toString=function(){return this._upwardSeg.toString()},Fl.prototype.interfaces_=function(){return[xu]},Fl.prototype.getClass=function(){return Fl};var ql=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};ql.prototype.area=function(){return ql.area(this.p0,this.p1,this.p2)},ql.prototype.signedArea=function(){return ql.signedArea(this.p0,this.p1,this.p2)},ql.prototype.interpolateZ=function(t){if(null===t)throw new _u("Supplied point is null.");return ql.interpolateZ(t,this.p0,this.p1,this.p2)},ql.prototype.longestSideLength=function(){return ql.longestSideLength(this.p0,this.p1,this.p2)},ql.prototype.isAcute=function(){return ql.isAcute(this.p0,this.p1,this.p2)},ql.prototype.circumcentre=function(){return ql.circumcentre(this.p0,this.p1,this.p2)},ql.prototype.area3D=function(){return ql.area3D(this.p0,this.p1,this.p2)},ql.prototype.centroid=function(){return ql.centroid(this.p0,this.p1,this.p2)},ql.prototype.inCentre=function(){return ql.inCentre(this.p0,this.p1,this.p2)},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ql.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ql.det=function(t,e,n,r){return t*r-e*n},ql.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,h=s*c-a*u,l=t.x-i,p=t.y-o,f=(c*l-a*p)/h,g=(-u*l+s*p)/h;return e.z+f*(n.z-e.z)+g*(r.z-e.z)},ql.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},ql.isAcute=function(t,e,n){return!!Ll.isAcute(t,e,n)&&(!!Ll.isAcute(e,n,t)&&!!Ll.isAcute(n,t,e))},ql.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*ql.det(o,s,a,u),h=ql.det(s,o*o+s*s,u,a*a+u*u),l=ql.det(o,o*o+s*s,a,a*a+u*u);return new bu(r-h/c,i+l/c)},ql.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Uu(t.x+n/2,t.y+r/2,1),o=new Uu(t.x-r+n/2,t.y+n+r/2,1);return new Uu(i,o)},ql.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new bu(t.x+i*o,t.y+i*s)},ql.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,h=o*s-r*u,l=r*a-i*s,p=c*c+h*h+l*l,f=Math.sqrt(p)/2;return f},ql.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new bu(r,i)},ql.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new bu(a,u)};var Gl=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new bc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Gl.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Su.EXTERIOR,Su.INTERIOR)},Gl.prototype.addPolygon=function(t){var e=this._distance,n=Nh.LEFT;this._distance<0&&(e=-this._distance,n=Nh.RIGHT);var r=t.getExteriorRing(),i=Cc.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Su.EXTERIOR,Su.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Cc.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Nh.opposite(n),Su.INTERIOR,Su.EXTERIOR)}},Gl.prototype.isTriangleErodedCompletely=function(t,e){var n=new ql(t[0],t[1],t[2]),r=n.inCentre();return sc.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Gl.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Cc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Su.EXTERIOR,Su.INTERIOR)},Gl.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new fl(t,new Rh(0,Su.BOUNDARY,e,n));this._curveList.add(r)},Gl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Gl.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<eh.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=eh.MINIMUM_VALID_SIZE&&sc.isCCW(t)&&(o=i,s=r,n=Nh.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Gl.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $c?this.addPolygon(t):t instanceof Jc?this.addLineString(t):t instanceof Kc?this.addPoint(t):t instanceof th?this.addCollection(t):t instanceof Xc?this.addCollection(t):t instanceof nh?this.addCollection(t):t instanceof jc&&this.addCollection(t)},Gl.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Gl.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};var Bl=function(){};Bl.prototype.locate=function(t){},Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl};var kl=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};kl.prototype.next=function(){if(this._atStart)return this._atStart=!1,kl.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Pi;var t=this._parent.getGeometryN(this._index++);return t instanceof jc?(this._subcollectionIterator=new kl(t),this._subcollectionIterator.next()):t},kl.prototype.remove=function(){throw new Error(this.getClass().getName())},kl.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},kl.prototype.interfaces_=function(){return[Ec]},kl.prototype.getClass=function(){return kl},kl.isAtomic=function(t){return!(t instanceof jc)};var zl=function(){this._geom=null;var t=arguments[0];this._geom=t};zl.prototype.locate=function(t){return zl.locate(t,this._geom)},zl.prototype.interfaces_=function(){return[Bl]},zl.prototype.getClass=function(){return zl},zl.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&sc.isPointInRing(t,e.getCoordinates())},zl.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!zl.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(zl.isPointInRing(t,i))return!1}return!0},zl.containsPoint=function(t,e){if(e instanceof $c)return zl.containsPointInPolygon(t,e);if(e instanceof jc)for(var n=new kl(e);n.hasNext();){var r=n.next();if(r!==e&&zl.containsPoint(t,r))return!0}return!1},zl.locate=function(t,e){return e.isEmpty()?Su.EXTERIOR:zl.containsPoint(t,e)?Su.INTERIOR:Su.EXTERIOR};var jl=function(){this._edgeMap=new Gi,this._edgeList=null,this._ptInAreaLocation=[Su.NONE,Su.NONE]};jl.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},jl.prototype.propagateSideLabels=function(t){for(var e=Su.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Nh.LEFT)!==Su.NONE&&(e=r.getLocation(t,Nh.LEFT))}if(e===Su.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Nh.ON)===Su.NONE&&a.setLocation(t,Nh.ON,i),a.isArea(t)){var u=a.getLocation(t,Nh.LEFT),c=a.getLocation(t,Nh.RIGHT);if(c!==Su.NONE){if(c!==i)throw new Mh("side location conflict",s.getCoordinate());u===Su.NONE&&tc.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else tc.isTrue(a.getLocation(t,Nh.LEFT)===Su.NONE,"found single null side"),a.setLocation(t,Nh.RIGHT,i),a.setLocation(t,Nh.LEFT,i)}}},jl.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;return t.next().getCoordinate()},jl.prototype.print=function(t){Xu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},jl.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jl.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Nh.LEFT);tc.isTrue(r!==Su.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();tc.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Nh.LEFT),u=s.getLocation(t,Nh.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},jl.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},jl.prototype.iterator=function(){return this.getEdges().iterator()},jl.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new bc(this._edgeMap.values())),this._edgeList},jl.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Su.NONE&&(this._ptInAreaLocation[t]=zl.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},jl.prototype.toString=function(){var t=new Ru;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},jl.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},jl.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Su.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=Su.NONE;if(e[u])c=Su.EXTERIOR;else{var h=s.getCoordinate();c=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,c)}},jl.prototype.getDegree=function(){return this._edgeMap.size()},jl.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};var Xl=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Mh("no outgoing dirEdge found",this.getCoordinate());tc.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Bh.isNorthern(i)&&Bh.isNorthern(o)?n:Bh.isNorthern(i)||Bh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(tc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Xu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new bc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Nh.LEFT),r=t.getDepth(Nh.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Mh("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Nh.RIGHT,a),a=c.getDepth(Nh.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tc.isTrue(null!==e,"found null for first outgoing dirEdge"),tc.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();){i.next().getEdgeRing()===n&&r++}return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Su.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Su.INTERIOR;break}if(r.isInResult()){t=Su.EXTERIOR;break}}}if(t===Su.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Su.INTERIOR):(s.isInResult()&&(i=Su.EXTERIOR),a.isInResult()&&(i=Su.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Rh(Su.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Su.INTERIOR&&o!==Su.BOUNDARY||this._label.setLocation(i,Su.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jl),Ul=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new qh(t,new Xl)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh),Yl=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Yl.prototype.compareTo=function(t){var e=t;return Yl.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Yl.prototype.interfaces_=function(){return[xu]},Yl.prototype.getClass=function(){return Yl},Yl.orientation=function(t){return 1===Cc.increasingDirection(t)},Yl.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var h=t[u].compareTo(n[c]);if(0!==h)return h;var l=(u+=i)===s,p=(c+=o)===a;if(l&&!p)return-1;if(!l&&p)return 1;if(l&&p)return 0}};var Vl=function(){this._edges=new bc,this._ocaMap=new Gi};Vl.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Vl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Vl.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Vl.prototype.iterator=function(){return this._edges.iterator()},Vl.prototype.getEdges=function(){return this._edges},Vl.prototype.get=function(t){return this._edges.get(t)},Vl.prototype.findEqualEdge=function(t){var e=new Yl(t.getCoordinates());return this._ocaMap.get(e)},Vl.prototype.add=function(t){this._edges.add(t);var e=new Yl(t.getCoordinates());this._ocaMap.put(e,t)},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var Hl=function(){};Hl.prototype.processIntersections=function(t,e,n,r){},Hl.prototype.isDone=function(){},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var Wl=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Wl.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wl.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Wl.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wl.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wl.prototype.getLineIntersector=function(){return this._li},Wl.prototype.hasProperIntersection=function(){return this._hasProper},Wl.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Wl.prototype.hasIntersection=function(){return this._hasIntersection},Wl.prototype.isDone=function(){return!1},Wl.prototype.hasInteriorIntersection=function(){return this._hasInterior},Wl.prototype.interfaces_=function(){return[Hl]},Wl.prototype.getClass=function(){return Wl},Wl.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Jl=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new bu(t),this.segmentIndex=e,this.dist=n};Jl.prototype.getSegmentIndex=function(){return this.segmentIndex},Jl.prototype.getCoordinate=function(){return this.coord},Jl.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Jl.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Jl.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Jl.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Jl.prototype.getDistance=function(){return this.dist},Jl.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Jl.prototype.interfaces_=function(){return[xu]},Jl.prototype.getClass=function(){return Jl};var Zl=function(){this._nodeMap=new Gi,this.edge=null;var t=arguments[0];this.edge=t};Zl.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},Zl.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zl.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Zl.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Zl.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new bu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new ep(o,new Rh(this.edge._label))},Zl.prototype.add=function(t,e,n){var r=new Jl(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Zl.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Kl=function(){};Kl.prototype.getChainStartIndices=function(t){var e=0,n=new bc;n.add(new Tu(e));do{var r=this.findChainEnd(t,e);n.add(new Tu(r)),e=r}while(e<t.length-1);return Kl.toIntArray(n)},Kl.prototype.findChainEnd=function(t,e){for(var n=Bh.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(Bh.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl},Kl.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Ql=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Yu,this.env2=new Yu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kl;this.startIndex=e.getChainStartIndices(this.pts)};Ql.prototype.getCoordinates=function(){return this.pts},Ql.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Ql.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Ql.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],h=this.pts[i],l=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(h,l),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),d=Math.trunc((a+u)/2);i<g&&(a<d&&this.computeIntersectsForChain(i,g,s,a,d,c),d<u&&this.computeIntersectsForChain(i,g,s,d,u,c)),g<o&&(a<d&&this.computeIntersectsForChain(g,o,s,a,d,c),d<u&&this.computeIntersectsForChain(g,o,s,d,u,c))}},Ql.prototype.getStartIndexes=function(){return this.startIndex},Ql.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},tp={NULL_VALUE:{configurable:!0}};$l.prototype.getDepth=function(t,e){return this._depth[t][e]},$l.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},$l.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==$l.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===$l.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===$l.NULL_VALUE}},$l.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},$l.prototype.getDelta=function(t){return this._depth[t][Nh.RIGHT]-this._depth[t][Nh.LEFT]},$l.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Su.EXTERIOR:Su.INTERIOR},$l.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},$l.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Su.EXTERIOR&&r!==Su.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=$l.depthAtLocation(r):this._depth[e][n]+=$l.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Su.INTERIOR&&this._depth[i][o]++}},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.depthAtLocation=function(t){return t===Su.EXTERIOR?0:t===Su.INTERIOR?1:$l.NULL_VALUE},tp.NULL_VALUE.get=function(){return-1},Object.defineProperties($l,tp);var ep=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Zl(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $l,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];return new e(t,Rh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ql(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Yu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new bu(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new Ru;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Nh.ON),e.getLocation(1,Nh.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Nh.LEFT),e.getLocation(1,Nh.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Nh.RIGHT),e.getLocation(1,Nh.RIGHT),2))},e}(Fh),np=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Vl,this._bufParams=t||null};np.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},np.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Rh(t.getLabel())).flip(),n.merge(r);var i=np.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(np.depthDelta(t.getLabel()))},np.prototype.buildSubgraphs=function(t,e){for(var n=new bc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Al(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},np.prototype.createSubgraphs=function(t){for(var e=new bc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ph;i.create(r),e.add(i)}}return $h.sort(e,$h.reverseOrder()),e},np.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},np.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new El,n=new rc;return n.setPrecisionModel(t),e.setSegmentIntersector(new Wl(n)),e},np.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Tl(n,this._bufParams),i=new Gl(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Uh(new Ul),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Yh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();if(a.size()<=0)return this.createEmptyResultGeometry();return this._geomFact.buildGeometry(a)},np.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new ep(i.getCoordinates(),new Rh(s));this.insertUniqueEdge(a)}}},np.prototype.setNoder=function(t){this._workingNoder=t},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np},np.depthDelta=function(t){var e=t.getLocation(0,Nh.LEFT),n=t.getLocation(0,Nh.RIGHT);return e===Su.INTERIOR&&n===Su.EXTERIOR?1:e===Su.EXTERIOR&&n===Su.INTERIOR?-1:0},np.convertSegStrings=function(t){for(var e=new _h,n=new bc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var rp=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};rp.prototype.rescale=function(){if(Lu(arguments[0],vc))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Xu.out.println(n)}},rp.prototype.scale=function(){if(Lu(arguments[0],vc)){for(var t=arguments[0],e=new bc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new fl(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new bu(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Cc.removeRepeatedPoints(o)}},rp.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rp.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rp.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rp.prototype.interfaces_=function(){return[vl]},rp.prototype.getClass=function(){return rp};var ip=function(){this._li=new rc,this._segStrings=null;var t=arguments[0];this._segStrings=t},op={fact:{configurable:!0}};ip.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Qu("found endpt/interior pt intersection at index "+o+" :pt "+n)},ip.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var h=arguments[0],l=arguments[1],p=arguments[2],f=arguments[3];if(h===p&&l===f)return null;var g=h.getCoordinates()[l],d=h.getCoordinates()[l+1],y=p.getCoordinates()[f],_=p.getCoordinates()[f+1];if(this._li.computeIntersection(g,d,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,d)||this.hasInteriorIntersection(this._li,y,_)))throw new Qu("found non-noded intersection at "+g+"-"+d+" and "+y+"-"+_)}},ip.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},ip.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},ip.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},ip.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Qu("found non-noded collapse at "+ip.fact.createLineString([t,e,n]))},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},op.fact.get=function(){return new _h},Object.defineProperties(ip,op);var sp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _u("Scale factor must be non-zero");1!==e&&(this._pt=new bu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new bu,this._p1Scaled=new bu),this.initCorners(this._pt)},ap={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return tc.isTrue(!(s&&a),"Found bad envelope test"),a},sp.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new bu(this._maxx,this._maxy),this._corner[1]=new bu(this._minx,this._maxy),this._corner[2]=new bu(this._minx,this._miny),this._corner[3]=new bu(this._maxx,this._miny)},sp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sp.prototype.getCoordinate=function(){return this._originalPt},sp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Yu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!r)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},sp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},ap.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sp,ap);var up=function(){this.tempEnv1=new Yu,this.selectedSegment=new gl};up.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up};var cp=function(){this._index=null;var t=arguments[0];this._index=t},hp={HotPixelSnapAction:{configurable:!0}};cp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new lp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Jh]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},hp.HotPixelSnapAction.get=function(){return lp},Object.defineProperties(cp,hp);var lp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(up),pp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new bc};pp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pp.prototype.isDone=function(){return!1},pp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pp.prototype.interfaces_=function(){return[Hl]},pp.prototype.getClass=function(){return pp};var fp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};fp.prototype.checkCorrectness=function(t){var e=fl.getNodedSubstrings(t),n=new ip(e);try{n.checkValid()}catch(t){if(!(t instanceof zu))throw t;t.printStackTrace()}},fp.prototype.getNodedSubstrings=function(){return fl.getNodedSubstrings(this._nodedSegStrings)},fp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},fp.prototype.findInteriorIntersections=function(t,e){var n=new pp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},fp.prototype.computeVertexSnaps=function(){if(Lu(arguments[0],vc))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fl)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sp(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},fp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new El,this._pointSnapper=new cp(this._noder.getIndex()),this.snapRound(t,this._li)},fp.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sp(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},fp.prototype.interfaces_=function(){return[vl]},fp.prototype.getClass=function(){return fp};var gp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new bl,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},dp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gp.prototype.bufferFixedPrecision=function(t){var e=new rp(new fp(new fh(1)),t.getScale()),n=new np(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Mh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gp.precisionScaleFactor(this._argGeom,this._distance,n),i=new fh(r);this.bufferFixedPrecision(i)}},gp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gp.prototype.bufferOriginalPrecision=function(){try{var t=new np(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Qu))throw t;this._saveException=t}},gp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gp(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new gp(n);o.setQuadrantSegments(i);return o.getResultGeometry(r)}if(arguments[2]instanceof bl&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new gp(s,u).getResultGeometry(a)}}else if(4===arguments.length){var c=arguments[0],h=arguments[1],l=arguments[2],p=arguments[3],f=new gp(c);f.setQuadrantSegments(l),f.setEndCapStyle(p);return f.getResultGeometry(h)}},gp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Pu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},dp.CAP_ROUND.get=function(){return bl.CAP_ROUND},dp.CAP_BUTT.get=function(){return bl.CAP_FLAT},dp.CAP_FLAT.get=function(){return bl.CAP_FLAT},dp.CAP_SQUARE.get=function(){return bl.CAP_SQUARE},dp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gp,dp);var yp=function(){this._pt=[new bu,new bu],this._distance=mu.NaN,this._isNull=!0};yp.prototype.getCoordinates=function(){return this._pt},yp.prototype.getCoordinate=function(t){return this._pt[t]},yp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yp.prototype.getDistance=function(){return this._distance},yp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp};var _p=function(){};_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.computeDistance=function(){if(arguments[2]instanceof yp&&arguments[0]instanceof Jc&&arguments[1]instanceof bu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new gl,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof yp&&arguments[0]instanceof $c&&arguments[1]instanceof bu){var a=arguments[0],u=arguments[1],c=arguments[2];_p.computeDistance(a.getExteriorRing(),u,c);for(var h=0;h<a.getNumInteriorRing();h++)_p.computeDistance(a.getInteriorRingN(h),u,c)}else if(arguments[2]instanceof yp&&arguments[0]instanceof cc&&arguments[1]instanceof bu){var l=arguments[0],p=arguments[1],f=arguments[2];if(l instanceof Jc)_p.computeDistance(l,p,f);else if(l instanceof $c)_p.computeDistance(l,p,f);else if(l instanceof jc)for(var g=l,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);_p.computeDistance(y,p,f)}else f.setMinimum(l.getCoordinate(),p)}else if(arguments[2]instanceof yp&&arguments[0]instanceof gl&&arguments[1]instanceof bu){var _=arguments[0],m=arguments[1],v=arguments[2],x=_.closestPoint(m);v.setMinimum(x,m)}};var mp=function(t){this._maxPtDist=new yp,this._inputGeom=t||null},vp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};mp.prototype.computeMaxMidpointDistance=function(t){var e=new Ep(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mp.prototype.computeMaxVertexDistance=function(t){var e=new xp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},mp.prototype.getDistancePoints=function(){return this._maxPtDist},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},vp.MaxPointDistanceFilter.get=function(){return xp},vp.MaxMidpointDistanceFilter.get=function(){return Ep},Object.defineProperties(mp,vp);var xp=function(t){this._maxPtDist=new yp,this._minPtDist=new yp,this._geom=t||null};xp.prototype.filter=function(t){this._minPtDist.initialize(),_p.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xp.prototype.getMaxPointDistance=function(){return this._maxPtDist},xp.prototype.interfaces_=function(){return[pc]},xp.prototype.getClass=function(){return xp};var Ep=function(t){this._maxPtDist=new yp,this._minPtDist=new yp,this._geom=t||null};Ep.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new bu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_p.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ep.prototype.isDone=function(){return!1},Ep.prototype.isGeometryChanged=function(){return!1},Ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ep.prototype.interfaces_=function(){return[zc]},Ep.prototype.getClass=function(){return Ep};var wp=function(t){this._comps=t||null};wp.prototype.filter=function(t){t instanceof $c&&this._comps.add(t)},wp.prototype.interfaces_=function(){return[kc]},wp.prototype.getClass=function(){return wp},wp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return wp.getPolygons(t,new bc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $c?n.add(e):e instanceof jc&&e.apply(new wp(n)),n}};var bp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};bp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof eh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jc&&this._lines.add(t)},bp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},bp.prototype.interfaces_=function(){return[uc]},bp.prototype.getClass=function(){return bp},bp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(bp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(bp.getLines(e,n))}},bp.getLines=function(){if(1===arguments.length){var t=arguments[0];return bp.getLines(t,!1)}if(2===arguments.length){if(Lu(arguments[0],vc)&&Lu(arguments[1],vc)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();bp.getLines(i,n)}return n}if(arguments[0]instanceof cc&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new bc;return o.apply(new bp(a,s)),a}if(arguments[0]instanceof cc&&Lu(arguments[1],vc)){var u=arguments[0],c=arguments[1];return u instanceof Jc?c.add(u):u.apply(new bp(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Lu(arguments[0],vc)&&Lu(arguments[1],vc)){for(var h=arguments[0],l=arguments[1],p=arguments[2],f=h.iterator();f.hasNext();){var g=f.next();bp.getLines(g,l,p)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof cc&&Lu(arguments[1],vc)){var d=arguments[0],y=arguments[1],_=arguments[2];return d.apply(new bp(y,_)),y}}};var Ip=function(){if(this._boundaryRule=fc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new _u("Rule must be non-null");this._boundaryRule=t}};Ip.prototype.locateInternal=function(){if(arguments[0]instanceof bu&&arguments[1]instanceof $c){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Su.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Su.EXTERIOR)return Su.EXTERIOR;if(r===Su.BOUNDARY)return Su.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===Su.INTERIOR)return Su.EXTERIOR;if(s===Su.BOUNDARY)return Su.BOUNDARY}return Su.INTERIOR}if(arguments[0]instanceof bu&&arguments[1]instanceof Jc){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return Su.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?sc.isOnLine(a,c)?Su.INTERIOR:Su.EXTERIOR:Su.BOUNDARY}if(arguments[0]instanceof bu&&arguments[1]instanceof Kc){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?Su.INTERIOR:Su.EXTERIOR}},Ip.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?sc.locatePointInRing(t,e.getCoordinates()):Su.EXTERIOR},Ip.prototype.intersects=function(t,e){return this.locate(t,e)!==Su.EXTERIOR},Ip.prototype.updateLocationInfo=function(t){t===Su.INTERIOR&&(this._isIn=!0),t===Su.BOUNDARY&&this._numBoundaries++},Ip.prototype.computeLocation=function(t,e){if(e instanceof Kc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $c)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Xc)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof nh)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof jc)for(var u=new kl(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Ip.prototype.locate=function(t,e){return e.isEmpty()?Su.EXTERIOR:e instanceof Jc?this.locateInternal(t,e):e instanceof $c?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Su.BOUNDARY:this._numBoundaries>0||this._isIn?Su.INTERIOR:Su.EXTERIOR)},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Np=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Cp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Cp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,Cp);var Sp=function(t){this._pts=t||null};Sp.prototype.filter=function(t){t instanceof Kc&&this._pts.add(t)},Sp.prototype.interfaces_=function(){return[kc]},Sp.prototype.getClass=function(){return Sp},Sp.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kc?$h.singletonList(t):Sp.getPoints(t,new bc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kc?n.add(e):e instanceof jc&&e.apply(new Sp(n)),n}};var Mp=function(){this._locations=null;var t=arguments[0];this._locations=t};Mp.prototype.filter=function(t){(t instanceof Kc||t instanceof Jc||t instanceof $c)&&this._locations.add(new Np(t,0,t.getCoordinate()))},Mp.prototype.interfaces_=function(){return[kc]},Mp.prototype.getClass=function(){return Mp},Mp.getLocations=function(t){var e=new bc;return t.apply(new Mp(e)),e};var Lp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ip,this._minDistanceLocation=null,this._minDistance=mu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Lp.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=wp.getPolygons(this._geom[e]);if(i.size()>0){var o=Mp.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Lu(arguments[0],wc)&&Lu(arguments[1],wc)){for(var s=arguments[0],a=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var h=s.get(c),l=0;l<a.size();l++)if(this.computeContainmentDistance(h,a.get(l),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof $c){var p=arguments[0],f=arguments[1],g=arguments[2],d=p.getCoordinate();if(Su.EXTERIOR!==this._ptLocator.locate(d,f))return this._minDistance=0,g[0]=p,g[1]=new Np(f,d),null}},Lp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Lp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=bp.getLines(this._geom[0]),n=bp.getLines(this._geom[1]),r=Sp.getPoints(this._geom[0]),i=Sp.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Lp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Lp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Lp.prototype.nearestPoints=function(){this.computeMinDistance();return[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Lp.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jc&&arguments[1]instanceof Kc){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var s=sc.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gl(r[o],r[o+1]).closestPoint(i);n[0]=new Np(t,o,a),n[1]=new Np(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jc&&arguments[1]instanceof Jc){var u=arguments[0],c=arguments[1],h=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var l=u.getCoordinates(),p=c.getCoordinates(),f=0;f<l.length-1;f++)for(var g=0;g<p.length-1;g++){var d=sc.distanceLineLine(l[f],l[f+1],p[g],p[g+1]);if(d<this._minDistance){this._minDistance=d;var y=new gl(l[f],l[f+1]),_=new gl(p[g],p[g+1]),m=y.closestPoints(_);h[0]=new Np(u,f,m[0]),h[1]=new Np(c,g,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Lp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Np(i,0,i.getCoordinate()),n[1]=new Np(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Lp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new _u("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Lp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.distance=function(t,e){return new Lp(t,e).distance()},Lp.isWithinDistance=function(t,e,n){return new Lp(t,e,n).distance()<=n},Lp.nearestPoints=function(t,e){return new Lp(t,e).nearestPoints()};var Pp=function(){this._pt=[new bu,new bu],this._distance=mu.NaN,this._isNull=!0};Pp.prototype.getCoordinates=function(){return this._pt},Pp.prototype.getCoordinate=function(t){return this._pt[t]},Pp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Pp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Pp.prototype.toString=function(){return Ku.toLineString(this._pt[0],this._pt[1])},Pp.prototype.getDistance=function(){return this._distance},Pp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.computeDistance=function(){if(arguments[2]instanceof Pp&&arguments[0]instanceof Jc&&arguments[1]instanceof bu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gl,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof $c&&arguments[1]instanceof bu){var a=arguments[0],u=arguments[1],c=arguments[2];Op.computeDistance(a.getExteriorRing(),u,c);for(var h=0;h<a.getNumInteriorRing();h++)Op.computeDistance(a.getInteriorRingN(h),u,c)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof cc&&arguments[1]instanceof bu){var l=arguments[0],p=arguments[1],f=arguments[2];if(l instanceof Jc)Op.computeDistance(l,p,f);else if(l instanceof $c)Op.computeDistance(l,p,f);else if(l instanceof jc)for(var g=l,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);Op.computeDistance(y,p,f)}else f.setMinimum(l.getCoordinate(),p)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof gl&&arguments[1]instanceof bu){var _=arguments[0],m=arguments[1],v=arguments[2],x=_.closestPoint(m);v.setMinimum(x,m)}};var Rp=function(){this._g0=null,this._g1=null,this._ptDist=new Pp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Tp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Rp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Rp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new _u("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Rp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Rp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Rp.prototype.computeOrientedDistance=function(t,e,n){var r=new Ap(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Dp(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Rp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Rp(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Rp(n,r);return o.setDensifyFraction(i),o.distance()}},Tp.MaxPointDistanceFilter.get=function(){return Ap},Tp.MaxDensifiedByFractionDistanceFilter.get=function(){return Dp},Object.defineProperties(Rp,Tp);var Ap=function(){this._maxPtDist=new Pp,this._minPtDist=new Pp,this._euclideanDist=new Op,this._geom=null;var t=arguments[0];this._geom=t};Ap.prototype.filter=function(t){this._minPtDist.initialize(),Op.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ap.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ap.prototype.interfaces_=function(){return[pc]},Ap.prototype.getClass=function(){return Ap};var Dp=function(){this._maxPtDist=new Pp,this._minPtDist=new Pp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Dp.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,c=new bu(a,u);this._minPtDist.initialize(),Op.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dp.prototype.isDone=function(){return!1},Dp.prototype.isGeometryChanged=function(){return!1},Dp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dp.prototype.interfaces_=function(){return[zc]},Dp.prototype.getClass=function(){return Dp};var Fp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fp.prototype.checkMaximumDistance=function(t,e,n){var r=new Rp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ku.toLineString(i[0],i[1])+")"}},Fp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fp.VERBOSE&&Xu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fp.prototype.checkNegativeValid=function(){if(!(this._input instanceof $c||this._input instanceof nh||this._input instanceof jc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fp.prototype.getErrorIndicator=function(){return this._errorIndicator},Fp.prototype.checkMinimumDistance=function(t,e,n){var r=new Lp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ku.toLineString(i[0],i[1])+" )"}},Fp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fp.prototype.getErrorLocation=function(){return this._errorLocation},Fp.prototype.getPolygonLines=function(t){for(var e=new bc,n=new bp(e),r=wp.getPolygons(t).iterator();r.hasNext();){r.next().apply(n)}return t.getFactory().buildGeometry(e)},Fp.prototype.getErrorMessage=function(){return this._errMsg},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},qp.VERBOSE.get=function(){return!1},qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fp,qp);var Gp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Bp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Gp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Gp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Gp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Yu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Yu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Gp.prototype.checkDistance=function(){var t=new Fp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Gp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Gp.prototype.checkPolygonal=function(){this._result instanceof $c||this._result instanceof nh||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Gp.prototype.getErrorIndicator=function(){return this._errorIndicator},Gp.prototype.getErrorLocation=function(){return this._errorLocation},Gp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Gp.prototype.report=function(t){if(!Gp.VERBOSE)return null;Xu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Gp.prototype.getErrorMessage=function(){return this._errorMsg},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Gp.isValidMsg=function(t,e,n){var r=new Gp(t,e,n);return r.isValid()?null:r.getErrorMessage()},Gp.isValid=function(t,e,n){return!!new Gp(t,e,n).isValid()},Bp.VERBOSE.get=function(){return!1},Bp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Gp,Bp);var kp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};kp.prototype.getCoordinates=function(){return this._pts},kp.prototype.size=function(){return this._pts.length},kp.prototype.getCoordinate=function(t){return this._pts[t]},kp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},kp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hl.octant(this.getCoordinate(t),this.getCoordinate(t+1))},kp.prototype.setData=function(t){this._data=t},kp.prototype.getData=function(){return this._data},kp.prototype.toString=function(){return Ku.toLineString(new uh(this._pts))},kp.prototype.interfaces_=function(){return[ll]},kp.prototype.getClass=function(){return kp};var zp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new bc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zp.prototype.getIntersectionSegments=function(){return this._intSegments},zp.prototype.count=function(){return this._intersectionCount},zp.prototype.getIntersections=function(){return this._intersections},zp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly){if(!(this.isEndSegment(t,e)||this.isEndSegment(n,r)))return null}var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zp.prototype.interfaces_=function(){return[Hl]},zp.prototype.getClass=function(){return zp},zp.createAllIntersectionsFinder=function(t){var e=new zp(t);return e.setFindAllIntersections(!0),e},zp.createAnyIntersectionFinder=function(t){return new zp(t)},zp.createIntersectionCounter=function(t){var e=new zp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var jp=function(){this._li=new rc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};jp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},jp.prototype.getIntersections=function(){return this._segInt.getIntersections()},jp.prototype.isValid=function(){return this.execute(),this._isValid},jp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new El;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},jp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Mh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},jp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ku.toLineString(t[0],t[1])+" and "+Ku.toLineString(t[2],t[3])},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},jp.computeIntersections=function(t){var e=new jp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Xp=function t(){this._nv=null;var e=arguments[0];this._nv=new jp(t.toSegmentStrings(e))};Xp.prototype.checkValid=function(){this._nv.checkValid()},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.toSegmentStrings=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new kp(r.getCoordinates(),r))}return e},Xp.checkValid=function(t){new Xp(t).checkValid()};var Up=function(t){this._mapOp=t};Up.prototype.map=function(t){for(var e=new bc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(_h.toGeometryArray(e))},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Up.map=function(t,e){return new Up(e).map(t)};var Yp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new bc,this._resultLineList=new bc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Yp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Yp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Yp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Cf.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Yp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Yp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Yp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Yp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(tc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Cf.isResultOfOp(r,e)&&e===Cf.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};var Vp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new bc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Vp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Vp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Cf.INTERSECTION))){var r=n.getLabel();Cf.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Vp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp};var Hp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof eh&&!r.isEmpty()||(n=!1);for(var i=new bc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof eh||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new bc;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Hp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hp.prototype.getInputGeometry=function(){return this._inputGeom},Hp.prototype.transformMultiLineString=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hp.prototype.transformMultiPoint=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hp.prototype.transformMultiPolygon=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hp.prototype.copy=function(t){return t.copy()},Hp.prototype.transformGeometryCollection=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_h.toGeometryArray(n)):this._factory.buildGeometry(n)},Hp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kc)return this.transformPoint(t,null);if(t instanceof th)return this.transformMultiPoint(t,null);if(t instanceof eh)return this.transformLinearRing(t,null);if(t instanceof Jc)return this.transformLineString(t,null);if(t instanceof Xc)return this.transformMultiLineString(t,null);if(t instanceof $c)return this.transformPolygon(t,null);if(t instanceof nh)return this.transformMultiPolygon(t,null);if(t instanceof jc)return this.transformGeometryCollection(t,null);throw new _u("Unknown Geometry subtype: "+t.getClass().getName())},Hp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp};var Wp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gl,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jc&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Wp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new bu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new bu(o)))}},Wp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Wp.prototype.snapTo=function(t){var e=new Nc(this._srcPts);this.snapVertices(e,t),this.snapSegments(e,t);return e.toCoordinateArray()},Wp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new bu(i),!1)}},Wp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=mu.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Wp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Jp=function(t){this._srcGeom=t||null},Zp={SNAP_PRECISION_FACTOR:{configurable:!0}};Jp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Kp(e,n).transform(this._srcGeom)},Jp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Kp(t,n,!0).transform(this._srcGeom),i=r;return e&&Lu(i,Qc)&&(i=r.buffer(0)),i},Jp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Jp.prototype.extractTargetCoordinates=function(t){for(var e=new ki,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Jp.prototype.computeMinimumSegmentLength=function(t){for(var e=mu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Jp(t);r[0]=i.snapTo(e,n);var o=new Jp(e);return r[1]=o.snapTo(r[0],n),r},Jp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Jp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fh.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Jp.computeOverlaySnapTolerance(i),Jp.computeOverlaySnapTolerance(o))}},Jp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Jp.SNAP_PRECISION_FACTOR},Jp.snapToSelf=function(t,e,n){return new Jp(t).snapToSelf(e,n)},Zp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Jp,Zp);var Kp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Wp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hp),Qp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qp.prototype.getCommon=function(){return mu.longBitsToDouble(this._commonBits)},Qp.prototype.add=function(t){var e=mu.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=Qp.signExpBits(this._commonBits),this._isFirst=!1,null;if(Qp.signExpBits(e)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Qp.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=Qp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},Qp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=mu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+mu.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qp.signExpBits=function(t){return t>>52},Qp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qp.getBit(t,r)!==Qp.getBit(e,r))return n;n++}return 52};var $p=function(){this._commonCoord=null,this._ccFilter=new ef},tf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};$p.prototype.addCommonBits=function(t){var e=new nf(this._commonCoord);t.apply(e),t.geometryChanged()},$p.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new bu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new nf(e);return t.apply(n),t.geometryChanged(),t},$p.prototype.getCommonCoordinate=function(){return this._commonCoord},$p.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},tf.CommonCoordinateFilter.get=function(){return ef},tf.Translater.get=function(){return nf},Object.defineProperties($p,tf);var ef=function(){this._commonBitsX=new Qp,this._commonBitsY=new Qp};ef.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ef.prototype.getCommonCoordinate=function(){return new bu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ef.prototype.interfaces_=function(){return[pc]},ef.prototype.getClass=function(){return ef};var nf=function(){this.trans=null;var t=arguments[0];this.trans=t};nf.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},nf.prototype.isDone=function(){return!1},nf.prototype.isGeometryChanged=function(){return!0},nf.prototype.interfaces_=function(){return[zc]},nf.prototype.getClass=function(){return nf};var rf=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rf.prototype.selfSnap=function(t){return new Jp(t).snapTo(t,this._snapTolerance)},rf.prototype.removeCommonBits=function(t){this._cbr=new $p,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rf.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rf.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Cf.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rf.prototype.checkValid=function(t){t.isValid()||Xu.out.println("Snapped geometry is invalid")},rf.prototype.computeSnapTolerance=function(){this._snapTolerance=Jp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rf.prototype.snap=function(t){var e=this.removeCommonBits(t);return Jp.snap(e[0],e[1],this._snapTolerance)},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.overlayOp=function(t,e,n){return new rf(t,e).getResultGeometry(n)},rf.union=function(t,e){return rf.overlayOp(t,e,Cf.UNION)},rf.intersection=function(t,e){return rf.overlayOp(t,e,Cf.INTERSECTION)},rf.symDifference=function(t,e){return rf.overlayOp(t,e,Cf.SYMDIFFERENCE)},rf.difference=function(t,e){return rf.overlayOp(t,e,Cf.DIFFERENCE)};var of=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};of.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Cf.overlayOp(this._geom[0],this._geom[1],t);n=!0}catch(t){if(!(t instanceof Qu))throw t;r=t}if(!n)try{e=rf.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Qu?r:t}return e},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},of.overlayOp=function(t,e,n){return new of(t,e).getResultGeometry(n)},of.union=function(t,e){return of.overlayOp(t,e,Cf.UNION)},of.intersection=function(t,e){return of.overlayOp(t,e,Cf.INTERSECTION)},of.symDifference=function(t,e){return of.overlayOp(t,e,Cf.SYMDIFFERENCE)},of.difference=function(t,e){return of.overlayOp(t,e,Cf.DIFFERENCE)};var sf=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};sf.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf};var af=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},uf={INSERT:{configurable:!0},DELETE:{configurable:!0}};af.prototype.isDelete=function(){return this._eventType===af.DELETE},af.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},af.prototype.getObject=function(){return this._obj},af.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},af.prototype.getInsertEvent=function(){return this._insertEvent},af.prototype.isInsert=function(){return this._eventType===af.INSERT},af.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},af.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},af.prototype.interfaces_=function(){return[xu]},af.prototype.getClass=function(){return af},uf.INSERT.get=function(){return 1},uf.DELETE.get=function(){return 2},Object.defineProperties(af,uf);var cf=function(){};cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var hf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};hf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(hf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},hf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},hf.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},hf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},hf.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},hf.prototype.hasProperIntersection=function(){return this._hasProper},hf.prototype.hasIntersection=function(){return this._hasIntersection},hf.prototype.isDone=function(){return this._isDone},hf.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},hf.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},hf.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var lf=function(t){function e(){t.call(this),this.events=new bc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$h.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof hf&&Lu(arguments[0],wc)&&Lu(arguments[1],wc)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Lu(arguments[0],wc)&&arguments[1]instanceof hf){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new sf(n,i),s=new af(e,n.getMinX(i),o);this.events.add(s),this.events.add(new af(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cf),pf=function(){this._min=mu.POSITIVE_INFINITY,this._max=mu.NEGATIVE_INFINITY},ff={NodeComparator:{configurable:!0}};pf.prototype.getMin=function(){return this._min},pf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pf.prototype.getMax=function(){return this._max},pf.prototype.toString=function(){return Ku.toLineString(new bu(this._min,0),new bu(this._max,0))},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},ff.NodeComparator.get=function(){return gf},Object.defineProperties(pf,ff);var gf=function(){};gf.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},gf.prototype.interfaces_=function(){return[wu]},gf.prototype.getClass=function(){return gf};var df=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pf),yf=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pf),_f=function(){this._leaves=new bc,this._root=null,this._level=0};_f.prototype.buildTree=function(){$h.sort(this._leaves,new pf.NodeComparator);for(var t=this._leaves,e=null,n=new bc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_f.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new df(t,e,n))},_f.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_f.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_f.prototype.printNode=function(t){Xu.out.println(Ku.toLineString(new bu(t._min,this._level),new bu(t._max,this._level)))},_f.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_f.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yf(t.get(n),t.get(n+1));e.add(i)}}},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f};var mf=function(){this._items=new bc};mf.prototype.visitItem=function(t){this._items.add(t)},mf.prototype.getItems=function(){return this._items},mf.prototype.interfaces_=function(){return[Jh]},mf.prototype.getClass=function(){return mf};var vf=function(){this._index=null;var t=arguments[0];if(!Lu(t,Qc))throw new _u("Argument must be Polygonal");this._index=new wf(t)},xf={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vf.prototype.locate=function(t){var e=new oc(t),n=new Ef(e);return this._index.query(t.y,t.y,n),e.getLocation()},vf.prototype.interfaces_=function(){return[Bl]},vf.prototype.getClass=function(){return vf},xf.SegmentVisitor.get=function(){return Ef},xf.IntervalIndexedGeometry.get=function(){return wf},Object.defineProperties(vf,xf);var Ef=function(){this._counter=null;var t=arguments[0];this._counter=t};Ef.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Ef.prototype.interfaces_=function(){return[Jh]},Ef.prototype.getClass=function(){return Ef};var wf=function(){this._index=new _f;var t=arguments[0];this.init(t)};wf.prototype.init=function(t){for(var e=bp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wf.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gl(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wf.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mf;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};var bf=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new ph,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ip,2===arguments.length){var e=arguments[0],n=arguments[1],r=fc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;Su.NONE;r.getLocation(t,Nh.ON)===Su.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new hf(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof eh||this._parentGeom instanceof $c||this._parentGeom instanceof nh,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new hf(e,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Su.INTERIOR)}else if(arguments[0]instanceof bu){var e=arguments[0];this.insertPoint(this._argIndex,e,Su.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Su.EXTERIOR,Su.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Su.INTERIOR,Su.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Su.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Su.BOUNDARY)},e.prototype.addLineString=function(t){var e=Cc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ep(e,new Rh(this._argIndex,Su.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Su.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Cc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;sc.isCCW(r)&&(i=n,o=e);var s=new ep(r,new Rh(this._argIndex,Su.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],Su.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Rh(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new lf},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof nh&&(this._useBoundaryDeterminationRule=!1),e instanceof $c)this.addPolygon(e);else if(e instanceof Jc)this.addLineString(e);else if(e instanceof Kc)this.addPoint(e);else if(e instanceof th)this.addCollection(e);else if(e instanceof Xc)this.addCollection(e);else if(e instanceof nh)this.addCollection(e);else{if(!(e instanceof jc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Lu(this._parentGeom,Qc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vf(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Su.BOUNDARY:Su.INTERIOR},e}(Uh),If=function(){if(this._li=new rc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new bf(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=fc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bf(0,e,r),this._arg[1]=new bf(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bf(0,i,s),this._arg[1]=new bf(1,o,s)}};If.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},If.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If};var Nf=function(){};Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.map=function(){if(arguments[0]instanceof cc&&Lu(arguments[1],Nf.MapOp)){for(var t=arguments[0],e=arguments[1],n=new bc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Lu(arguments[0],vc)&&Lu(arguments[1],Nf.MapOp)){for(var o=arguments[0],s=arguments[1],a=new bc,u=o.iterator();u.hasNext();){var c=u.next(),h=s.map(c);null!==h&&a.add(h)}return a}},Nf.MapOp=function(){};var Cf=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ip,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Vl,this._resultPolyList=new bc,this._resultLineList=new bc,this._resultPointList=new bc,this._graph=new Uh(new Ul),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Rh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new bc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Su.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new bc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new bc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Xp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Yh(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Yp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Vp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Nh.RIGHT),i.getLocation(1,Nh.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(tc.isTrue(!r.isNull(i,Nh.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Nh.LEFT,r.getLocation(i,Nh.LEFT)),tc.isTrue(!r.isNull(i,Nh.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Nh.RIGHT,r.getLocation(i,Nh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(If);Cf.overlayOp=function(t,e,n){return new Cf(t,e).getResultGeometry(n)},Cf.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Cf.createEmptyResult(Cf.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Up.map(t,{interfaces_:function(){return[Nf.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.INTERSECTION)},Cf.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cf.createEmptyResult(Cf.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.SYMDIFFERENCE)},Cf.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Cf.INTERSECTION:o=Math.min(r,i);break;case Cf.UNION:o=Math.max(r,i);break;case Cf.DIFFERENCE:o=r;break;case Cf.SYMDIFFERENCE:o=Math.max(r,i)}return o},Cf.createEmptyResult=function(t,e,n,r){var i=null;switch(Cf.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Cf.difference=function(t,e){return t.isEmpty()?Cf.createEmptyResult(Cf.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.DIFFERENCE))},Cf.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Cf.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===Su.BOUNDARY&&(i=Su.INTERIOR),o===Su.BOUNDARY&&(o=Su.INTERIOR),s){case Cf.INTERSECTION:return i===Su.INTERIOR&&o===Su.INTERIOR;case Cf.UNION:return i===Su.INTERIOR||o===Su.INTERIOR;case Cf.DIFFERENCE:return i===Su.INTERIOR&&o!==Su.INTERIOR;case Cf.SYMDIFFERENCE:return i===Su.INTERIOR&&o!==Su.INTERIOR||i!==Su.INTERIOR&&o===Su.INTERIOR}return!1}},Cf.INTERSECTION=1,Cf.UNION=2,Cf.DIFFERENCE=3,Cf.SYMDIFFERENCE=4;var Sf=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ip,this._seg=new gl;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Sf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++){n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1);if(this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0}return!1},Sf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Su.BOUNDARY:this._ptLocator.locate(t,this._g)},Sf.prototype.extractLinework=function(t){var e=new Mf;t.apply(e);var n=e.getLinework(),r=_h.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf};var Mf=function(){this._linework=null,this._linework=new bc};Mf.prototype.getLinework=function(){return this._linework},Mf.prototype.filter=function(t){if(t instanceof $c){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Mf.prototype.interfaces_=function(){return[kc]},Mf.prototype.getClass=function(){return Mf};var Lf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Lf.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Lf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Lf.prototype.getPoints=function(t){for(var e=new bc,n=bp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Lf.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,h=(e.y+t.y)/2;if(this._doLeft){var l=new bu(c-u,h+a);r.add(l)}if(this._doRight){var p=new bu(c+u,h-a);r.add(p)}},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};var Pf=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new bc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Sf(this._geom[0],this._boundaryDistanceTolerance),new Sf(this._geom[1],this._boundaryDistanceTolerance),new Sf(this._geom[2],this._boundaryDistanceTolerance)]},Of={TOLERANCE:{configurable:!0}};Pf.prototype.reportResult=function(t,e,n){Xu.out.println("Overlay result invalid - A:"+Su.toLocationSymbol(e[0])+" B:"+Su.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Su.toLocationSymbol(e[2]))},Pf.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Pf.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pf.hasLocation(this._location,Su.BOUNDARY)||this.isValidResult(r,this._location)}},Pf.prototype.addTestPts=function(t){var e=new Lf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pf.prototype.isValidResult=function(t,e){var n=Cf.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Su.INTERIOR);return r||this.reportResult(t,e,n),r},Pf.prototype.getInvalidLocation=function(){return this._invalidLocation},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Pf.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Jp.computeSizeBasedSnapTolerance(t),Jp.computeSizeBasedSnapTolerance(e))},Pf.isValid=function(t,e,n,r){return new Pf(t,e,r).isValid(n)},Of.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pf,Of);var Rf=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Rf.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Rf.prototype.combine=function(){for(var t=new bc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.combine=function(){if(1===arguments.length){var t=arguments[0];return new Rf(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Rf(Rf.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Rf(Rf.createList(r,i,o)).combine()}},Rf.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Rf.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new bc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new bc;return s.add(r),s.add(i),s.add(o),s}};var Tf=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new bc)},Af={STRTREE_NODE_CAPACITY:{configurable:!0}};Tf.prototype.reduceToGeometries=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Lu(r,wc)?i=this.unionTree(r):r instanceof cc&&(i=r),e.add(i)}return e},Tf.prototype.extractByEnvelope=function(t,e,n){for(var r=new bc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Tf.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){return Rf.combine(t,e)}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Tf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ol(Tf.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Tf.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Tf.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Tf.getGeometry(e,n),Tf.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Tf.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Tf.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Tf.prototype.unionActual=function(t,e){return Tf.restrictToPolygons(t.union(e))},Tf.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Tf.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new bc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);r.add(s);return Rf.combine(r)},Tf.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Tf.restrictToPolygons=function(t){if(Lu(t,Qc))return t;var e=wp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_h.toPolygonArray(e))},Tf.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Tf.union=function(t){return new Tf(t).union()},Af.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Tf,Af);var Df=function(){};Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cf.createEmptyResult(Cf.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.UNION)};var Ff=function(){return new Yi};Yi.prototype={constructor:Yi,reset:function(){this.s=this.t=0},add:function(t){Vi(qf,t,this.t),Vi(this,qf.s,this.s),this.s?this.t+=qf.t:this.s=qf.t},valueOf:function(){return this.s}};var qf=new Yi,Gf=1e-6,Bf=Math.PI,kf=Bf/2,zf=Bf/4,jf=2*Bf,Xf=180/Bf,Uf=Bf/180,Yf=Math.abs,Vf=Math.atan,Hf=Math.atan2,Wf=Math.cos,Jf=Math.exp,Zf=Math.log,Kf=Math.sin,Qf=Math.sqrt,$f=Math.tan,tg={Feature:function(t,e){Ji(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ji(n[r].geometry,e)}},eg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Zi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Zi(n[r],e,0)},Polygon:function(t,e){Ki(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ki(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ji(n[r],e)}},ng=function(t,e){t&&tg.hasOwnProperty(t.type)?tg[t.type](t,e):Ji(t,e)},rg=(Ff(),Ff(),Ff(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});oo.invert=oo;var ig=function(t){function e(e){return e=t(e[0]*Uf,e[1]*Uf),e[0]*=Xf,e[1]*=Xf,e}return t=so(t[0]*Uf,t[1]*Uf,t.length>2?t[2]*Uf:0),e.invert=function(e){return e=t.invert(e[0]*Uf,e[1]*Uf),e[0]*=Xf,e[1]*=Xf,e},e},og=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Wi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},sg=function(t,e,n,r,i,o){var s,a=t[0],u=t[1],c=0,h=1,l=e[0]-a,p=e[1]-u;if(s=n-a,l||!(s>0)){if(s/=l,l<0){if(s<c)return;s<h&&(h=s)}else if(l>0){if(s>h)return;s>c&&(c=s)}if(s=i-a,l||!(s<0)){if(s/=l,l<0){if(s>h)return;s>c&&(c=s)}else if(l>0){if(s<c)return;s<h&&(h=s)}if(s=r-u,p||!(s>0)){if(s/=p,p<0){if(s<c)return;s<h&&(h=s)}else if(p>0){if(s>h)return;s>c&&(c=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>h)return;s>c&&(c=s)}else if(p>0){if(s<c)return;s<h&&(h=s)}return c>0&&(t[0]=a+c*l,t[1]=u+c*p),h<1&&(e[0]=a+h*l,e[1]=u+h*p),!0}}}}},ag=function(t,e){return Yf(t[0]-e[0])<Gf&&Yf(t[1]-e[1])<Gf},ug=function(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(ag(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new lo(r,t,null,!0)),u.push(n.o=new lo(r,null,n,!1)),a.push(n=new lo(s,t,null,!1)),u.push(n.o=new lo(s,null,n,!0))}}),a.length){for(u.sort(e),po(a),po(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var c,h,l=a[0];;){for(var p=l,f=!0;p.v;)if((p=p.n)===l)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((h=c[o])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((h=c[o])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}},cg=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},hg=(function(t){1===t.length&&(t=function(t){return function(e,n){return cg(t(e),n)}}(t))}(cg),function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}),lg=1e9,pg=-lg,fg=Ff(),gg=(Ff(),function(t){return t}),dg=(Ff(),Ff(),1/0),yg=dg,_g=-dg,mg=_g,vg={point:function(t,e){t<dg&&(dg=t),t>_g&&(_g=t),e<yg&&(yg=e),e>mg&&(mg=e)},lineStart:Wi,lineEnd:Wi,polygonStart:Wi,polygonEnd:Wi,result:function(){var t=[[dg,yg],[_g,mg]];return _g=mg=-(yg=dg=1/0),t}},xg=(Ff(),function(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);y.point(n[0],n[1])}function u(){E.point=a,y.lineStart()}function c(){E.point=s,y.lineEnd()}function h(t,e){d.push([t,e]);var n=i(t,e);v.point(n[0],n[1])}function l(){v.lineStart(),d=[]}function p(){h(d[0][0],d[0][1]),v.lineEnd();var t,e,n,r,i=v.clean(),s=m.result(),a=s.length;if(d.pop(),f.push(d),d=null,a)if(1&i){if(n=s[0],(e=n.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&s.push(s.pop().concat(s.shift())),g.push(s.filter(go))}var f,g,d,y=e(o),_=i.invert(r[0],r[1]),m=og(),v=e(m),x=!1,E={point:s,lineStart:u,lineEnd:c,polygonStart:function(){E.point=h,E.lineStart=l,E.lineEnd=p,g=[],f=[]},polygonEnd:function(){E.point=s,E.lineStart=u,E.lineEnd=c,g=hg(g);var t=function(t,e){var n=e[0],r=e[1],i=[Kf(n),-Wf(n),0],o=0,s=0;fg.reset();for(var a=0,u=t.length;a<u;++a)if(h=(c=t[a]).length)for(var c,h,l=c[h-1],p=l[0],f=l[1]/2+zf,g=Kf(f),d=Wf(f),y=0;y<h;++y,p=m,g=x,d=E,l=_){var _=c[y],m=_[0],v=_[1]/2+zf,x=Kf(v),E=Wf(v),w=m-p,b=w>=0?1:-1,I=b*w,N=I>Bf,C=g*x;if(fg.add(Hf(C*b*Kf(I),d*E+C*Wf(I))),o+=N?w+b*jf:w,N^p>=n^m>=n){var S=eo($i(l),$i(_));io(S);var M=eo(i,S);io(M);var L=(N^w>=0?-1:1)*Hi(M[2]);(r>L||r===L&&(S[0]||S[1]))&&(s+=N^w>=0?1:-1)}}return(o<-Gf||o<Gf&&fg<-Gf)^1&s}(f,_);g.length?(x||(o.polygonStart(),x=!0),ug(g,yo,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),g=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return E}}),Eg=xg(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Bf:-Bf,u=Yf(o-n);Yf(u-Bf)<Gf?(t.point(n,r=(r+s)/2>0?kf:-kf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Bf&&(Yf(n-i)<Gf&&(n-=i*Gf),Yf(o-a)<Gf&&(o-=a*Gf),r=function(t,e,n,r){var i,o,s=Kf(t-n);return Yf(s)>Gf?Vf((Kf(e)*(o=Wf(r))*Kf(n)-Kf(r)*(i=Wf(e))*Kf(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*kf,r.point(-Bf,i),r.point(0,i),r.point(Bf,i),r.point(Bf,0),r.point(Bf,-i),r.point(0,-i),r.point(-Bf,-i),r.point(-Bf,0),r.point(-Bf,i);else if(Yf(t[0]-e[0])>Gf){var o=t[0]<e[0]?Bf:-Bf;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Bf,-kf]),wg=function(t,e){function n(t,e){return Wf(t)*Wf(e)>o}function r(t,e,n){var r=[1,0,0],i=eo($i(t),$i(e)),s=to(i,i),a=i[0],u=s-a*a;if(!u)return!n&&t;var c=o*s/u,h=-o*a/u,l=eo(r,i),p=ro(r,c);no(p,ro(i,h));var f=l,g=to(p,f),d=to(f,f),y=g*g-d*(to(p,p)-1);if(!(y<0)){var _=Qf(y),m=ro(f,(-g-_)/d);if(no(m,p),m=Qi(m),!n)return m;var v,x=t[0],E=e[0],w=t[1],b=e[1];E<x&&(v=x,x=E,E=v);var I=E-x,N=Yf(I-Bf)<Gf;if(!N&&b<w&&(v=w,w=b,b=v),N||I<Gf?N?w+b>0^m[1]<(Yf(m[0]-x)<Gf?w:b):w<=m[1]&&m[1]<=b:I>Bf^(x<=m[0]&&m[0]<=E)){var C=ro(f,(-g+_)/d);return no(C,p),[m,Qi(C)]}}}function i(e,n){var r=s?t:Bf-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Wf(t),s=o>0,a=Yf(o)>Gf;return xg(n,function(t){var e,o,u,c,h;return{lineStart:function(){c=u=!1,h=1},point:function(l,p){var f,g=[l,p],d=n(l,p),y=s?d?0:i(l,p):d?i(l+(l<0?Bf:-Bf),p):0;if(!e&&(c=u=d)&&t.lineStart(),d!==u&&(!(f=r(e,g))||ag(e,f)||ag(g,f))&&(g[0]+=Gf,g[1]+=Gf,d=n(g[0],g[1])),d!==u)h=0,d?(t.lineStart(),f=r(g,e),t.point(f[0],f[1])):(f=r(e,g),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(a&&e&&s^d){var _;y&o||!(_=r(g,e,!0))||(h=0,s?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!d||e&&ag(e,g)||t.point(g[0],g[1]),e=g,u=d,o=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(c&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=Wf(e),a=Kf(e),u=r*n;null==i?(i=e+r*jf,o=e-u/2):(i=ho(s,i),o=ho(s,o),(r>0?i<o:i>o)&&(i+=r*jf));for(var c,h=i;r>0?h>o:h<o;h-=u)c=Qi([s,-a*Wf(h),-a*Kf(h)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)},s?[0,-t]:[-Bf,t-Bf])};mo.prototype={constructor:mo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var bg=16,Ig=Wf(30*Uf),Ng=function(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,c,h,l,p,f,g,d,y){var _=c-r,m=h-i,v=_*_+m*m;if(v>4*e&&d--){var x=s+p,E=a+f,w=u+g,b=Qf(x*x+E*E+w*w),I=Hi(w/=b),N=Yf(Yf(w)-1)<Gf||Yf(o-l)<Gf?(o+l)/2:Hf(E,x),C=t(N,I),S=C[0],M=C[1],L=S-r,P=M-i,O=m*L-_*P;(O*O/v>e||Yf((_*L+m*P)/v-.5)>.3||s*p+a*f+u*g<Ig)&&(n(r,i,o,s,a,u,S,M,N,x/=b,E/=b,w,d,y),y.point(S,M),n(S,M,N,x,E,w,c,h,l,p,f,g,d,y))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){_=NaN,w.point=o,e.lineStart()}function o(r,i){var o=$i([r,i]),s=t(r,i);n(_,m,y,v,x,E,_=s[0],m=s[1],y=r,v=o[0],x=o[1],E=o[2],bg,e),e.point(_,m)}function s(){w.point=r,e.lineEnd()}function a(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(h=t,e),l=_,p=m,f=v,g=x,d=E,w.point=o}function c(){n(_,m,y,v,x,E,l,p,h,f,g,d,bg,e),w.lineEnd=s,s()}var h,l,p,f,g,d,y,_,m,v,x,E,w={point:r,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=a},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return _o({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Cg=_o({point:function(t,e){this.stream.point(t*Uf,e*Uf)}});Eo.invert=function(t,e){return[t,2*Vf(Jf(e))-kf]},wo.invert=function(t,e){return[-e,2*Vf(Jf(t))-kf]};var Sg=function(){var t=function(t){function e(){var e=Bf*a(),s=o(ig(o.rotate()).invert([0,0]));return c(null==h?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===Eo?[[Math.max(s[0]-e,h),n],[Math.min(s[0]+e,r),i]]:[[h,Math.max(s[1]-e,n)],[r,Math.min(s[1]+e,i)]])}var n,r,i,o=xo(t),s=o.center,a=o.scale,u=o.translate,c=o.clipExtent,h=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?h=n=r=i=null:(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==h?null:[[h,n],[r,i]]},e()}(wo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.projection=Cs,t.random=gu,t.clusters=du,t.helpers=ko,t.invariant=jo,t.meta=zo,t.isolines=function(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!I(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=rt(t,{zProperty:r,flip:!0});return c(function(t,e,n){var r=j(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,h=i/u,l=o/c,p=function(t){t[0]=t[0]*h+s,t[1]=t[1]*l+a};return t.forEach(function(t){S(t,p)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},r,i[s]);u[n]=a;var c=h(Q(t,a),u);o.push(c)}return o}(s,e,r,i,o),s,t))},t.convex=Lt,t.pointsWithinPolygon=Rt,t.concave=function(t,n){if(n=n||{},!I(n))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!b(r))throw new Error("maxEdge is invalid");var i=Tt(function(t){var e=[],n={};return O(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),c(e)}(t));if(i.features=i.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=qt(e,i,n),a=qt(i,o,n),u=qt(e,o,n);return s<=r&&a<=r&&u<=r}),i.features.length<1)return null;var o=$t(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Vo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=j(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Pt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),t},t.flip=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Gt(t)),S(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Gt(t)),A(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;te(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=se(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return se(t,e,n)});break;case"Polygon":t.coordinates=ae(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return ae(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=ue,t.tag=function(t,e,n,r){return t=Gt(t),e=Gt(e),O(t,function(t){t.properties||(t.properties={}),O(e,function(e){void 0===t.properties[r]&&Pt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.envelope=he,t.square=le,t.circle=fe,t.midpoint=function(t,e){return pe(t,qt(t,e)/2,ge(t,e))},t.center=de,t.centerOfMass=_e,t.centroid=ye,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return O(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),c(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=qt,t.explode=me,t.bbox=j,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=De(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(De(t))}),e},t.bboxPolygon=ce,t.booleanPointInPolygon=Pt,t.nearestPoint=Fe,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return A(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==K(e))throw new Error("line must be a LineString");var o=1/0,s=null;return O(t,function(t){var n=gn(t,e,{units:r});n<o&&(o=n,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var n=X(t),r=J(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],c=n[1],h=r[0][0],l=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],g=r[1][1],d=void 0!==s?s:r[1][2],y=r[2][0],_=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-h)*(c-g)+p*(u-f)*(c-_)+d*(u-y)*(c-l)-d*(u-h)*(c-_)-m*(u-f)*(c-l)-p*(u-y)*(c-g))/((u-h)*(c-g)+(u-f)*(c-_)+(u-y)*(c-l)-(u-h)*(c-_)-(u-f)*(c-l)-(u-y)*(c-g))},t.tin=Tt,t.bearing=ge,t.destination=pe,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=function(t,e,n,r,i,o,s,a){var u,c,h,l,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(c=e-o,h=t-i,l=(s-i)*c-(a-o)*h,p=(n-t)*c-(r-e)*h,c=l/u,h=p/u,f.x=t+c*(n-t),f.y=e+c*(r-e),c>=0&&c<=1&&(f.onLine1=!0),h>=0&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&i.features.push(r([s[0],s[1]]))}})}),i},t.pointOnFeature=yn,t.area=mn,t.along=function(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!b(e))throw new Error("distance must be a number");for(var o=0,s=0;s<i.length&&!(e>=o&&s===i.length-1);s++){if(o>=e){var a=e-o;if(a){var u=ge(i[s],i[s-1])-180;return pe(i[s],a,u,n)}return r(i[s])}o+=qt(i[s],i[s+1],n)}return r(i[i.length-1])},t.length=bn,t.lineSlice=function(t,e,n){var r=U(n);if("LineString"!==K(n))throw new Error("line must be a LineString");for(var i,o=on(n,t),s=on(n,e),u=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),a(u,n.properties)},t.lineSliceAlong=In,t.pointGrid=Ln,t.truncate=Pn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,function(t){e.push(t)}),c(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return F(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=bn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=In(t,e*s,e*(s+1),{units:n});r(a,s)}}(t,e,r,function(t){o.push(t)})}),c(o)},t.unkinkPolygon=function(t){var e=[];return F(t,function(t){"Polygon"===t.geometry.type&&O(Ls(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),c(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=X(t),e=X(e),r=r||{},i=i||100,o=o||10,new qs({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=K(t),r=K(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Pn(e,{precision:7});switch(r){case"Point":return Dn(t,i);case"MultiPoint":return An(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return An(t,nn(t,i))}},t.lineArc=Gn,t.polygonToLine=kn,t.lineToPolygon=jn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=U(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){Gs(t,e,s)}),1===s.length?a(s[0],i):h(s,i);case"Polygon":return o(Wn(r,e),i);case"MultiPolygon":return p(r.map(function(t){return Wn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=$n,t.sector=function(t,e,n,r,i){if(i=i||{},!I(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(er(n)===er(r))return fe(t,e,i);var s=U(t),a=[[s]];return S(Gn(t,e,n,r,i),function(t){a[0].push(t)}),a[0].push(s),o(a)},t.rhumbBearing=sn,t.rhumbDistance=un,t.rhumbDestination=nr,t.polygonTangents=function(t,e){var n,i,o,s=U(t),a=U(e);switch(K(e)){case"Polygon":n=a[0][0],i=a[0][0],o=ir(a[0][0],a[0][a[0].length-1],s);var u=rr(a[0],s,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=a[0][0][0],i=a[0][0][0],o=ir(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=rr(t[0],s,o,void 0,n,i);n=e[0],i=e[1]})}return c([r(n),r(i)])},t.rewind=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Gt(t));var i=[];switch(t.type){case"GeometryCollection":return A(t,function(t){sr(t,n)}),t;case"FeatureCollection":return O(t,function(t){O(sr(t,n),function(t){i.push(t)})}),c(i)}return sr(t,n)},t.isobands=function(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},s=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!I(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(s))throw new Error("breaksProperties is not an Array");var a=cr(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var s=+e[i-1],a=+e[i],u=hr(t,s,a-s),c=function(t){var e=[],n=[];t.forEach(function(t){var r=mn(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}(u),h=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var s=o([e[r].lrCoordinates]),a=r+1;a<e.length;a++)if(!e[a].grouped){var u=o([e[a].lrCoordinates]);(function(t,e){for(var n=me(t),r=0;r<n.features.length;r++)if(!Pt(n.features[r],e))return!1;return!0})(u,s)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0)}n.push(i)}return n}(c),l={};l.groupedRings=h,l[n]=s+"-"+a,r.push(l)}return r}(a,e,r);return c((u=function(t,e,n){var r=j(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,h=i/u,l=o/c,p=function(t){t[0]=t[0]*h+s,t[1]=t[1]*l+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}(u,a,t)).map(function(t,e){if(s[e]&&!I(s[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,s[e]);return n[r]=t[r],p(t.groupedRings,n)}))},t.transformRotate=fr,t.transformScale=gr,t.transformTranslate=function(t,e,n,r){if(r=r||{},!I(r))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==s&&void 0!==s||(t=Gt(t)),S(t,function(t){var r=U(nr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=K(t),o=t.properties;switch(i){case"LineString":return vr(t,e,r);case"MultiLineString":var s=[];return F(t,function(t){s.push(vr(t,e,r).geometry.coordinates)}),h(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=qa.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){Da.findEdgeRingContaining(t,r)&&r.push(t)}),c(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return F(t,function(t){F(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!wr(e,t);case"Polygon":return!Pt(t,e)}break;case"LineString":switch(e.type){case"Point":return!wr(t,e);case"LineString":return!function(t,e){return nn(t,e).features.length>0}(t,e);case"Polygon":return!br(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Pt(e,t);case"LineString":return!br(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Pt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Pt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)})}),n},t.booleanContains=function(t,e){var n=K(t),r=K(e),i=J(t),o=J(e),s=U(t),a=U(e);switch(n){case"Point":switch(r){case"Point":return Nr(s,a);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Nr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Nr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return Nn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Nn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!Nn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Nn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!Nn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Pt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=j(t),o=j(e);if(!Ir(i,o))return!1;for(;r<e.coordinates.length-1;r++){var s=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1]);if(Pt({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){var n=j(t),r=j(e);if(!Ir(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Pt(e.coordinates[0][i],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Pt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=K(t),r=K(e),i=J(t),o=J(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Cr(i,o);case"Polygon":return Mr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Cr(o,i);case"LineString":return function(t,e){if(nn(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Lr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return Sr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Mr(o,i);case"LineString":return Sr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=or,t.booleanOverlap=Tr,t.booleanPointOnLine=Nn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return K(t)===K(e)&&new ja({precision:6}).compare(te(t),te(e))},t.booleanWithin=Cn,t.clone=Gt,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(W(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Gt(t),r=r||3;var o=new Ha.DBSCAN,s=-1;return o.run(T(t),E(e,i),r,qt).forEach(function(e){s++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=s,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;W(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Gt(t));var o=T(t),s=o.slice(0,n),a=eu(o,n,s),u={};return a.centroids.forEach(function(t,e){u[e]=t}),O(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t},t.pointToLineDistance=gn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Dr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Dr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,r=en(te(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){var n=m(sn(t[0],t[1])),r=m(sn(e[0],e[1]));return n===r}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!b(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var h=X(t),l=X(n);switch(t=r(h),n=r(l),K(u)){case"FeatureCollection":if(0===u.features.length)return a([h,l]);break;case"Polygon":u=c([e(J(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=j(gr(ce(j(p)),1.15));o||(o=qt([f[0],f[1]],[f[2],f[1]],i)/100);p.features.pop(),p.features.pop();for(var g=f[0],d=f[1],y=f[2],_=f[3],m=o/qt([g,d],[y,d],i)*(y-g),v=o/qt([g,d],[g,_],i)*(_-d),x=y-g,E=_-d,w=(x-Math.floor(x/m)*m)/2,N=[],C=[],S=[],M=[],L=1/0,P=1/0,O=_-(E-Math.floor(E/v)*v)/2,R=0;O>=d;){for(var T=[],A=[],D=g+w,F=0;D<=y;){var q=r([D,O]),G=function(t,e){for(var n=0;n<e.features.length;n++)if(Pt(t,e.features[n]))return!0;return!1}(q,u);T.push(G?0:1),A.push(D+"|"+O);var B=qt(q,t);!G&&B<L&&(L=B,S={x:F,y:R});var k=qt(q,n);!G&&k<P&&(P=k,M={x:F,y:R}),D+=m,F++}C.push(T),N.push(A),O-=v,R++}var z=new qr(C,{diagonal:!0}),U=z.grid[S.y][S.x],Y=z.grid[M.y][M.x],V=[h];return nu.search(z,U,Y).forEach(function(t){var e=N[t.x][t.y].split("|");V.push([+e[0],+e[1]])}),V.push(l),te(a(V))},t.voronoi=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return W(t,"Point","points"),c(fu().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(li))},t.ellipse=pi,t.centerMean=gi,t.centerMedian=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.counter||10;if(!b(n))throw new Error("counter must be a number");var r=e.weight,i=gi(t,{weight:e.weight}),o=c([]);return O(t,function(t){o.features.push(ye(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},di(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!b(n))throw new Error("steps must be a number");if(!I(i))throw new Error("properties must be a number");var o=T(t).length,s=gi(t,{weight:r}),a=0,u=0,h=0;O(t,function(t){var e=t.properties[r]||1,n=yi(U(t),U(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,h+=n.x*n.y*e});var l=a-u,p=Math.sqrt(Math.pow(l,2)+4*Math.pow(h,2)),f=2*h,g=Math.atan((l+p)/f),d=180*g/Math.PI,y=0,_=0,m=0;O(t,function(t){var e=t.properties[r]||1,n=yi(U(t),U(s));y+=Math.pow(n.x*Math.cos(g)-n.y*Math.sin(g),2)*e,_+=Math.pow(n.x*Math.sin(g)+n.y*Math.cos(g),2)*e,m+=e});var v=Math.sqrt(2*y/m),x=Math.sqrt(2*_/m),E=pi(s,v,x,{units:"degrees",angle:d,steps:n,properties:i}),w=Rt(t,c([E])),N={meanCenterCoordinates:U(s),semiMajorAxis:v,semiMinorAxis:x,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*T(w).length/o};return E.properties.standardDeviationalEllipse=N,E},t.difference=function(t,n){var r=J(t),i=J(n),o=t.properties||{};if(r=Ui(r),i=Ui(i),!r)return null;if(!i)return e(r,o);var s=new bh,a=s.read(r),u=s.read(i),c=Cf.difference(a,u);return c.isEmpty()?null:e((new Ih).write(c),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return A(t,function(t){var n=bo(t,e,r,i);n&&o.push(n)}),c(o);case"FeatureCollection":return O(t,function(t){var n=bo(t,e,r,i);n&&O(n,function(t){t&&o.push(t)})}),c(o)}return bo(t,e,r,i)},t.union=Mo,t.intersect=Lo,t.dissolve=function(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.propertyName;W(t,"Polygon","dissolve");var r=Gt(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var s=Qe();s.load(r);for(var u in i){var c=i[u],h=!1;if(s.search(c).features.forEach(function(t){c=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Po(e,o);0!==r&&(e-=r)}if(e!==+u){var l=i[e];l&&c&&(void 0!==n&&l.properties[n]!==c.properties[n]||Tr(c,l)&&function(t,e){var n=a(T(t)),r=a(T(e));return nn(n,r).features.length>0}(c,l)&&(i[u]=Mo(c,l),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,s.remove(c,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),h=!0))}}),h){if(!c)continue;c.properties.origIndexPosition=u,s.insert(c),u--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.hexGrid=Oo,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],n=[];return F(t,function(t){var r=t.geometry.coordinates,i=r[0],s=r.slice(1);e.push(o([i])),s.forEach(function(t){n.push(o([t]))})}),[c(e),c(n)]}(t),i=r[0],s=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),F(e,function(t){r.push(t.geometry.coordinates[0])}),F(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}(n,i=Ro(i),s=Ro(s))},t.squareGrid=Ao,t.triangleGrid=Do,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(W(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=j(t);switch(r){case"point":case"points":s=Ln(a,e,n);break;case"square":case"squares":s=Ao(a,e,n);break;case"hex":case"hexes":s=Oo(a,e,n);break;case"triangle":case"triangles":s=Do(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return O(s,function(e){var s=0,a=0;O(t,function(t){var u,c=qt("point"===r?e:ye(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(s=u);var h=1/Math.pow(c,o);a+=h,s+=h*u});var c=Gt(e);c.properties[i]=s/a,u.push(c)}),c(u)},t.pointOnSurface=yn,t.polygonToLineString=kn,t.lineStringToPolygon=jn,t.inside=Pt,t.within=Rt,t.bezier=ue,t.nearest=Fe,t.pointOnLine=on,t.lineDistance=bn,t.radians2degrees=v,t.degrees2radians=x,t.distanceToDegrees=_,t.distanceToRadians=y,t.radiansToDistance=d,t.bearingToAngle=m,t.convertDistance=E,t.toMercator=cn,t.toWgs84=hn,t.randomPosition=_i,t.randomPoint=mi,t.randomPolygon=vi,t.randomLineString=xi,t.getCluster=wi,t.clusterEach=bi,t.clusterReduce=Ii,t.createBins=Ni,t.applyFilter=Ci,t.propertiesContainsFilter=Si,t.filterProperties=Mi,t.earthRadius=Fo,t.factors=qo,t.unitsFactors=Go,t.areaFactors=Bo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=c,t.multiLineString=h,t.multiPoint=l,t.multiPolygon=p,t.geometryCollection=f,t.round=g,t.radiansToLength=d,t.lengthToRadians=y,t.lengthToDegrees=_,t.bearingToAzimuth=m,t.radiansToDegrees=v,t.degreesToRadians=x,t.convertLength=E,t.convertArea=w,t.isNumber=b,t.isObject=I,t.validateBBox=N,t.validateId=C,t.getCoord=X,t.getCoords=U,t.containsNumber=Y,t.geojsonType=V,t.featureOf=H,t.collectionOf=W,t.getGeom=J,t.getGeomType=Z,t.getType=K,t.coordEach=S,t.coordReduce=M,t.propEach=L,t.propReduce=P,t.featureEach=O,t.featureReduce=R,t.coordAll=T,t.geomEach=A,t.geomReduce=D,t.flattenEach=F,t.flattenReduce=q,t.segmentEach=G,t.segmentReduce=B,t.lineEach=k,t.lineReduce=z,Object.defineProperty(t,"__esModule",{value:!0})});
} }
    );
    include.tag( "types-esri3d",
        { loader: "script", url: "smk/viewer-esri3d/types-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/types-esri3d.js]" ); include.module("types-esri3d",["esri3d"],function(){"use strict";return new Promise(function(e){var r=["esri/config","esri/request","esri/Map","esri/views/SceneView","esri/views/ui/3d/DefaultUI3D","esri/views/ui/UI","esri/core/watchUtils","esri/widgets/NavigationToggle","esri/widgets/Compass","esri/widgets/Zoom","esri/widgets/DirectLineMeasurement3D","esri/widgets/AreaMeasurement3D","esri/layers/MapImageLayer","esri/layers/WMSLayer","esri/layers/BaseDynamicLayer","esri/layers/GraphicsLayer","esri/Graphic","esri/Color","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/SpatialReference","esri/geometry/geometryEngine","esri/geometry/support/webMercatorUtils"];SMK.TYPE.Esri3d={},require(r,function(){var o=[].slice.call(arguments);r.forEach(function(e,r){for(var i=e.replace("esri/","").split("/"),s=SMK.TYPE.Esri3d,t=0;t<i.length-1;t+=1)i[t]in s||(s[i[t]]={}),s=s[i[t]];s[i[i.length-1]]=o[r]}),e(SMK.TYPE.Esri3d)})})});} }
    );
    include.tag( "util",
        { loader: "script", url: "smk/util.js", load: function () { console.debug( "[smk/util.js]" ); include.module("util",null,function(e){"use strict";Object.assign(window.SMK.UTIL,{makePromise:function(e){return new Promise(e||function(){})},resolved:function(){return Promise.resolve.apply(Promise,arguments)},rejected:function(){return Promise.reject.apply(Promise,arguments)},waitAll:function(e){return Promise.all(e)},type:function(e){var t=typeof e;return"object"!=t?t:Array.isArray(e)?"array":null===e?"null":"object"},templatePattern:/<%=\s*(.*?)\s*%>/g,templateReplace:function(e,n){if(!e)return e;if(!n)return e;var r,t=String(e).match(this.templatePattern);if(!t)return e;if(r=n,n=function(e,t){var n=r.apply(null,arguments);return null==n?t:n},1!=t.length||t[0]!=e)return String(e).replace(this.templatePattern,function(e,t){return n(t,e)});var i=this.templatePattern.exec(e);return n(i[1],e)},isDeepEqual:function(e,t){var n=this.type(e);if(n!=this.type(t))return!1;switch(n){case"array":if(e.length!=t.length)return!1;for(var r=0;r<e.length;r+=1)if(!SMK.UTIL.isDeepEqual(e[r],t[r]))return!1;return!0;case"object":var i=Object.keys(e).sort(),o=Object.keys(t).sort();if(!SMK.UTIL.isDeepEqual(i,o))return!1;for(var a=0;a<i.length;a+=1)if(!SMK.UTIL.isDeepEqual(e[i[a]],t[i[a]]))return!1;return!0;case"string":return e==t;default:return String(e)==String(t)}throw new Error("not supposed to be here")},grammaticalNumber:function(e,t,n,r){switch(null==n&&(n=t),null==r&&(r=n),e){case 0:return null==t?"":t.replace("{}",e);case 1:return null==n?"":n.replace("{}",e);default:return null==r?"":r.replace("{}",e)}},makeSet:function(e){return e.reduce(function(e,t){return e[t]=!0,e},{})},makeDelayedCall:function(n,r){var i;function o(){i&&clearTimeout(i),i=null}r=Object.assign({delay:200},r);var e=function(){var e=r.context||this,t=r.arguments||[].slice.call(arguments);o(),i=setTimeout(function(){i=null;try{n.apply(e,t)}catch(e){console.warn("during makeDelayedCall: ",e)}},r.delay)};return e.cancel=o,e.option=r,e},extractCRS:function(e){if(e.properties&&e.properties.name)return e.properties.name;throw new Error("unable to determine CRS from: "+JSON.stringify(e))},getProjection:function(e){return include("projections").then(function(){var t=proj4(e);if(!t)throw new Error('Projection "'+e+'" is not understood');return function(e){return t.inverse(e)}})},reprojectGeoJSON:function(e,t){return this.traverse.GeoJSON(e,{coordinate:function(e){return t(e)}})},traverse:{GeoJSON:function(e,t){t=Object.assign({coordinate:function(e){return e}},t),this[e.type](e,t)},Point:function(e,t){return Object.assign(e,{coordinates:t.coordinate(e.coordinates)})},MultiPoint:function(e,t){return Object.assign(e,{coordinates:e.coordinates.map(function(e){return t.coordinate(e)})})},LineString:function(e,t){return Object.assign(e,{coordinates:e.coordinates.map(function(e){return t.coordinate(e)})})},MultiLineString:function(e,t){return Object.assign(e,{coordinates:e.coordinates.map(function(e){return e.map(function(e){return t.coordinate(e)})})})},Polygon:function(e,t){return Object.assign(e,{coordinates:e.coordinates.map(function(e){return e.map(function(e){return t.coordinate(e)})})})},MultiPolygon:function(e,t){return Object.assign(e,{coordinates:e.coordinates.map(function(e){return e.map(function(e){return e.map(function(e){return t.coordinate(e)})})})})},GeometryCollection:function(e,t){var n=this;return Object.assign(e,{geometries:e.geometries.map(function(e){return n[e.type](e,t)})})},FeatureCollection:function(e,t){var n=this;return Object.assign(e,{features:e.features.map(function(e){return n[e.type](e,t)})})},Feature:function(e,t){return Object.assign(e,{geometry:this[e.geometry.type](e.geometry,t)})}},circlePoints:function(e,t,n){for(var r=[],i=0;i<=n;i+=1)r.push([e.x+t*Math.cos(2*Math.PI*i/n),e.y+t*Math.sin(2*Math.PI*i/n)]);return r},findNearestSite:function(t){var n={point:[t.longitude,t.latitude].join(","),outputSRS:4326,locationDescriptor:"routingPoint",maxDistance:1e3};return SMK.UTIL.makePromise(function(e,t){$.ajax({timeout:1e4,dataType:"json",url:"https://geocoder.api.gov.bc.ca/sites/nearest.geojson",data:n}).then(e,t)}).then(function(e){return{longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1],civicNumber:e.properties.civicNumber,civicNumberSuffix:e.properties.civicNumberSuffix,fullAddress:e.properties.fullAddress,localityName:e.properties.localityName,localityType:e.properties.localityType,streetName:e.properties.streetName,streetType:e.properties.streetType}}).catch(function(e){return console.warn(e.responseText),t})},wrapFunction:function(e,t,n){return e[t]=(r=e[t],n.call(null,r));var r},asyncReduce:function(n,e){var r=this;return this.resolved().then(function(){return e}).then(function(e){var t;return n(e,function(e){return t=!0,e}).then(function(e){return t?e:r.asyncReduce(n,e)})})},projection:function(e){var t=[].slice.call(arguments);return function(n){return t.reduce(function(e,t){return t in n&&(e[t]=n[t]),e},{})}},makeId:function(){return[].slice.call(arguments).filter(function(e){return void 0!==e}).map(function(e){return(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^[-]|[-]$/g,"")}).map(function(e){return e||"~"}).join("=")},makeUUID:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})},getMetersPerUnit:function(e){if(!(e in t))throw new Error(e+" is an unknown unit");return t[e]},makeMutex:function(t){var n=[];return function(){for(var e=0;e<n.length;e+=1)delete n[e];return n[e]=!0,{name:t,held:function(){return n[e]},release:function(){delete n[e]}}}}});var t={Mil:2.5399999999999996e-8,MicroInch:254e-7,mm:.001,Millimeter:.001,cm:.01,Centimeter:.01,IInch:.0254,"us-in":.0254000508001016,Inch:.0254000508001016,in:.0254000508001016,inches:.0254000508001016,Decimeter:.1,ClarkeLink:.201166194976,SearsLink:.2011676512155,BenoitLink:.20116782494375873,IntnlLink:.201168,link:.201168,GunterLink:.2011684023368047,CapeFoot:.3047972615,ClarkeFoot:.3047972651151,"ind-ft":.30479841,IndianFt37:.30479841,SearsFoot:.30479947153867626,IndianFt75:.3047995,IndianFoot:.30479951,IndianFt62:.3047996,GoldCoastFoot:.3047997101815088,IFoot:.3048,Foot:.3048006096012192,ft:.3048006096012192,"us-ft":.3048006096012192,ModAmFt:.304812252984506,"ind-yd":.9143952300000001,IndianYd37:.9143952300000001,SearsYard:.914398414616029,IndianYd75:.9143985000000001,IndianYard:.9143985307444409,IndianYd62:.9143987999999998,IYard:.9143999999999999,Yard:.9144018288036576,yd:.9144018288036576,"us-yd":.9144018288036576,CaGrid:.9997380000000001,m:1,Meter:1,GermanMeter:1.0000135965,fath:1.8287999999999998,Fathom:1.8287999999999998,Rood:3.7782668980000005,Perch:5.02921005842012,Rod:5.02921005842012,Pole:5.02921005842012,Dekameter:10,Decameter:10,ClarkeChain:20.1166194976,"ind-ch":20.11669506,SearsChain:20.11676512155,BenoitChain:20.116782494375872,IntnlChain:20.1168,ch:20.1168,"us-ch":20.11684023368047,GunterChain:20.11684023368047,dm:100,Hectometer:100,Furlong:201.1684023368046,Brealey:375,km:1e3,Kilometer:1e3,IMile:1609.344,Mile:1609.3472186944373,mi:1609.3472186944373,"us-mi":1609.3472186944373,kmi:1851.9999999999998,nmi:1851.9999999999998,NautM:1852.0000000000002,"NautM-UK":1853.1840000000002,"50kilometers":5e4,"Lat-66":110943.31648893275,"Lat-83":110946.25736872235,dd:111118.97383794768,degrees:111118.97383794768,"150kilometers":15e4}});} }
    );
    include.tag( "util-esri3d",
        { loader: "script", url: "smk/viewer-esri3d/util-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/util-esri3d.js]" ); include.module("util-esri3d",["types-esri3d","terraformer"],function(e){"use strict";var o;Object.assign(window.SMK.UTIL,{geoJsonToEsriGeometry:(o={Point:function(e){return[Object.assign({type:"point"},Terraformer.ArcGIS.convert(e))]},MultiPoint:function(e){return e.coordinates.map(function(e){return o.Point({type:"Point",coordinates:e})}).reduce(function(e,r){return e.concat(r)},[])},LineString:function(e){return[Object.assign({type:"polyline"},Terraformer.ArcGIS.convert(e))]},MultiLineString:function(e){return[Object.assign({type:"polyline"},Terraformer.ArcGIS.convert(e))]},Polygon:function(e){return[Object.assign({type:"polygon"},Terraformer.ArcGIS.convert(e))]},MultiPolygon:function(e){return[Object.assign({type:"polygon"},Terraformer.ArcGIS.convert(e))]},GeometryCollection:function(e){return e.geometries.map(function(e){return o[e.type](e)}).reduce(function(e,r){return e.concat(r)},[])},FeatureCollection:function(e,r){return e.features.map(function(e){return o[e.type](e,r)}).reduce(function(e,r){return e.concat(r)},[])},Feature:function(r,t){return o[r.geometry.type](r.geometry).map(function(e){return{attributes:Object.assign({_geojsonGeometry:r.geometry},r.properties),geometry:e,symbol:t(e.type,r.properties)}}).reduce(function(e,r){return e.concat(r)},[])}},function(e,r){return r||(r=function(){}),o[e.type||"Feature"](e,r)}),smkStyleToEsriSymbol:function(e,r){var t={type:"line-3d",symbolLayers:[{type:"line",size:e.strokeWidth,material:{color:o(e.strokeColor,e.strokeOpacity)}}]};return{point:e.markerUrl?{type:"point-3d",symbolLayers:[{type:"icon",size:Math.max.apply(Math,e.markerSize)+"px",anchor:"bottom",resource:{href:r.resolveAttachmentUrl(e.markerUrl,null,"png")}}]}:{type:"point-3d",symbolLayers:[{type:"icon",size:2*e.strokeWidth,resource:{primitive:"circle"},material:{color:o(e.fillColor,e.fillOpacity)},outline:{size:e.strokeWidth/2,color:o(e.strokeColor,e.strokeOpacity)}}]},polyline:t,polygon:{type:"polygon-3d",symbolLayers:[{type:"fill",material:{color:o(e.fillColor,e.fillOpacity)}},t.symbolLayers[0]]}};function o(e,r){var t=new SMK.TYPE.Esri3d.Color(e);return t.a=r,t}}})});} }
    );
    include.tag( "viewer",
        { loader: "script", url: "smk/viewer.js", load: function () { console.debug( "[smk/viewer.js]" ); include.module("viewer",["jquery","util","event","layer","feature-set","query","turf","layer-display"],function(){"use strict";var e=SMK.TYPE.Event.define(["changedView","changedBaseMap","startedLoading","finishedLoading","pickedLocation","changedLocation","changedPopup","changedLayerVisibility","changedDevice"]);function t(){var t=this;e.prototype.constructor.call(this);var i=!1;Object.defineProperty(this,"loading",{get:function(){return i},set:function(e){!!e!=i&&(i=!!e,e?t.startedLoading():t.finishedLoading())}})}SMK.TYPE.Viewer=t,$.extend(t.prototype,e.prototype),t.prototype.basemap={Topographic:{order:1,title:"Topographic",option:{maxNativeZoom:16}},Streets:{order:2,title:"Streets"},Imagery:{order:3,title:"Imagery",option:{maxNativeZoom:14}},Oceans:{order:4,title:"Oceans"},NationalGeographic:{order:5,title:"National Geographic"},ShadedRelief:{order:6,title:"Shaded Relief"},DarkGray:{order:7,title:"Dark Gray"},Gray:{order:8,title:"Gray"},StamenTonerLight:{order:9,title:"Stamen Toner Light"}},(t.prototype.zoomScale=[])[1]=173451547.7127784,t.prototype.zoomScale[2]=89690013.7670628,t.prototype.zoomScale[3]=45203253.08071528,t.prototype.zoomScale[4]=22617698.02495323,t.prototype.zoomScale[5]=11314385.218894083,t.prototype.zoomScale[6]=5659653.605577067,t.prototype.zoomScale[7]=2829913.245708334,t.prototype.zoomScale[8]=1414856.836779603,t.prototype.zoomScale[9]=707429.7690058348,t.prototype.zoomScale[10]=353715.05331990693,t.prototype.zoomScale[11]=176857.5477505768,t.prototype.zoomScale[12]=88428.77649887519,t.prototype.zoomScale[13]=44214.496444883276,t.prototype.zoomScale[14]=22107.221783884223,t.prototype.zoomScale[15]=11053.61708610345,t.prototype.zoomScale[16]=5526.806585855153,t.prototype.zoomScale[17]=2763.4019883053297,t.prototype.zoomScale[18]=1381.6944712225031,t.prototype.zoomScale[19]=690.8367988270104,t.prototype.getZoomBracketForScale=function(e){if(e>this.zoomScale[1])return[0,1];if(e<this.zoomScale[19])return[19,20];for(var t=2;t<20;t+=1)if(e>this.zoomScale[t])return[t-1,t]},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.initialize=function(t){var i,o=this;if(this.lmfId=t.lmfId,this.type=t.viewer.type,this.serviceUrl=t.$option["service-url"],this.resolveUrl=function(e){return t.resolveAssetUrl(e)},this.clusterOption=t.viewer.clusterOption,this.identified=new SMK.TYPE.FeatureSet,this.selected=new SMK.TYPE.FeatureSet,this.searched=new SMK.TYPE.FeatureSet,this.queried={},this.layerIds=[],this.layerId={},this.visibleLayer={},this.layerIdPromise={},this.deadViewerLayer={},this.displayContext={layers:null},this.pickHandlers=[],this.query={},this.screenpixelsToMeters=o.pixelsToMillimeters(100)/1e3,Array.isArray(t.layers)){var e=t.layers.map(function(i){var r=o.addLayer(i);return i.queries&&i.queries.forEach(function(e){var t=new SMK.TYPE.Query[i.type](r.id,e);o.query[t.id]=t,o.queried[t.id]=new SMK.TYPE.FeatureSet}),r});o.defaultLayerDisplay=e}t.viewer.displayContext&&Object.keys(t.viewer.displayContext).forEach(function(e){o.setDisplayContextItems(e,t.viewer.displayContext[e])}),this.pickedLocation(function(r){SMK.UTIL.resolved();return o.pickHandlers.reduceRight(function(e,t,i){return t&&0!=t.length?e.then(function(e){return!!e||Promise.all(t.map(function(e){return SMK.UTIL.resolved().then(function(){return e.call(o,r)})})).then(function(e){return e.some(function(e){return e})})}):e},SMK.UTIL.resolved()).catch(function(e){console.warn(e)})}),$(window).resize(SMK.UTIL.makeDelayedCall(function(){var e=t.detectDevice();e&&o.changedDevice(e)},{delay:500})),t.$tool["query-place"]&&(o.queried.place=new SMK.TYPE.FeatureSet,o.query.place=new SMK.TYPE.Query.place("place"),o.layerIds.push("place"),o.layerId.place={id:"place",config:{title:"",popupTemplate:"@feature-place"}}),this.getSidepanelPosition=function(){return t.getSidepanelPosition()},this.delayedUpdateLayersVisible=SMK.UTIL.makeDelayedCall(function(){o.updateLayersVisible().then(function(){})}),this.changedLayerVisibility(function(){o.delayedUpdateLayersVisible()}),this.layersLoading=SMK.UTIL.resolved(),this.startedLoading(function(){i&&(i[1](new Error("startedLoading called before finishedLoading")),i=null),this.layersLoading=SMK.UTIL.makePromise(function(e,t){i=[e,t]})}),this.loading&&console.log("already laoding"),this.finishedLoading(function(){i&&(i[0](),i=null)}),this.acquireIdentifyMutex=SMK.UTIL.makeMutex("identify")},t.prototype.waitFinishedLoading=function(){return this.layersLoading},t.prototype.addLayer=function(e){var i=this,t=r(e);return t.hasChildren()?{id:t.id,type:"folder",title:t.config.title,isVisible:t.config.isVisible,isExpanded:!1,items:t.childLayerConfigs().map(function(e){var t=r(e);return o(t),{id:t.id}})}:(o(t),{id:t.id});function r(t){try{if(!(t.type in SMK.TYPE.Layer))throw new Error('layer type "'+t.type+'" not defined');if(!(i.type in SMK.TYPE.Layer[t.type]))throw new Error('layer type "'+t.type+'" not defined for viewer "'+i.type+'"');var e=new SMK.TYPE.Layer[t.type][i.type](t);return e.initialize(),e}catch(e){throw e.message+=', when creating layer id "'+t.id+'"',e}}function o(e){i.layerIds.push(e.id),(i.layerId[e.id]=e).startedLoading(function(){i.loading=!0}),e.finishedLoading(function(){i.loading=i.anyLayersLoading()})}},t.prototype.getLayerConfig=function(){var t=this;return this.layerIds.map(function(e){return t.layerId[e].getConfig(t.visibleLayer[e])})},t.prototype.initializeLayers=function(e){},t.prototype.isDisplayContext=function(e){return!!this.displayContext[e]},t.prototype.setDisplayContextItems=function(e,t){var i=this;if(this.isDisplayContext(e))console.warn("displayContext "+e+" is already defined");else{var r=this.displayContext[e]=new SMK.TYPE.LayerDisplayContext(t||[],this.layerId);r.changedVisibility(function(){i.changedLayerVisibility()}),this.changedView(function(){r.setView(i.getView())})}},t.prototype.eachDisplayContext=function(t){var i=this;Object.keys(this.displayContext).forEach(function(e){t.call(i,i.displayContext[e],e)})},t.prototype.getDisplayContexts=function(){var i=[],r=this.getView();return this.eachDisplayContext(function(e,t){e.setView(r),i.push(e.root)}),i},t.prototype.getDisplayContextConfig=function(){var i={};return this.eachDisplayContext(function(e,t){i[t]=e.getConfig()}),i},t.prototype.isDisplayContextItemVisible=function(t){var i=null;return this.eachDisplayContext(function(e){i=i||e.isItemVisible(t)}),i},t.prototype.getDisplayContextItem=function(t){var i=null;return this.eachDisplayContext(function(e){i=i||e.getItem(t)}),i},t.prototype.getDisplayContextLayerIds=function(){var t=[];return this.eachDisplayContext(function(e){t=t.concat(e.getLayerIds())}),t.reverse()},t.prototype.setDisplayContextItemEnabled=function(t,i){this.eachDisplayContext(function(e){e.setItemEnabled(t,i)})},t.prototype.setDisplayContextLegendsVisible=function(t){this.eachDisplayContext(function(e){e.setLegendsVisible(t,this.layerId,this)})},t.prototype.setDisplayContextFolderExpanded=function(t,i){this.eachDisplayContext(function(e){e.setFolderExpanded(t,i)})},t.prototype.handlePick=function(e,t){this.pickHandlers[e]||(this.pickHandlers[e]=[]),this.pickHandlers[e].push(t)},t.prototype.updateLayersVisible=function(){var o=this,n={};o.getDisplayContextLayerIds().forEach(function(e){n[e]=!0}),Object.keys(o.visibleLayer).forEach(function(e){n[e]=!0});var r,a=[];this.getDisplayContextLayerIds().forEach(function(e,t){if(o.isDisplayContextItemVisible(e)){var i=o.layerId[e];i&&(r?r[0].canMergeWith(i)?r.push(i):(a.push(r),r=[i]):r=[i])}}),r&&a.push(r);var s=[],c=a.length-1;return a.forEach(function(t,i){var r=t.map(function(e){return e.id}).join("##");if(delete n[r],o.visibleLayer[r])o.positionViewerLayer(o.visibleLayer[r],c-i);else{var e=o.createViewerLayer(r,t,c-i).then(function(e){return o.addViewerLayer(e),o.positionViewerLayer(e,c-i),o.visibleLayer[r]=e}).catch(function(e){console.warn("Failed to create layer "+r+":",e),t.forEach(function(e){o.setDisplayContextItemEnabled(e.id,!1)})});s.push(e)}}),Object.assign(this.deadViewerLayer,n),0==s.length&&o.finishedLoading(),SMK.UTIL.waitAll(s)},t.prototype.addViewerLayer=function(e){},t.prototype.positionViewerLayer=function(e,t){},t.prototype.createViewerLayer=function(t,i,e){var r=this;if(0==i.length)throw new Error("no layers");var o=i[0].config.type;if(!i.every(function(e){return e.config.type==o}))throw new Error("types don't match");return this.layerIdPromise[t]?this.layerIdPromise[t]:SMK.TYPE.Layer[o][r.type].create?this.layerIdPromise[t]=SMK.UTIL.resolved().then(function(){return SMK.TYPE.Layer[o][r.type].create.call(r,i,e)}).then(function(e){return r.afterCreateViewerLayer(t,o,i,e)}):SMK.UTIL.rejected(new Error("can't create viewer layer of type \""+o+'"'))},t.prototype.afterCreateViewerLayer=function(e,t,i,r){return r._smk_type=t,r._smk_id=e,r},t.prototype.getView=function(){throw new Error("not implemented")},t.prototype.circleInMap=function(e,t,i){var r=this;return turf.polygon([SMK.UTIL.circlePoints(e,t,i).map(function(e){return r.screenToMap(e)})])},t.prototype.identifyFeatures=function(n,a){var s=this,c=this.getView();this.identified.clear();var l=this.acquireIdentifyMutex();if(n&&a){var p=[];return this.layerIds.forEach(function(t,e){var r=s.layerId[t];if(s.isDisplayContextItemVisible(t)&&!1!==r.config.isQueryable&&r.inScaleRange(c)){var i={layer:s.visibleLayer[t]},o=r.getFeaturesInArea(a,c,i);o&&p.push(SMK.UTIL.resolved().then(function(){if(!l.held())throw d();return o}).then(function(e){if(!l.held())throw d();return e.forEach(function(e,t){if(r.config.titleAttribute){var i=r.config.titleAttribute.match(/^(.+?)(:[/](.+)[/])?$/);if(i)if(i[2])try{e.title=e.properties[i[1]].match(new RegExp(i[3]))[1]}catch(e){console.warn(e,i)}else e.title=e.properties[i[1]]}return e.title||(e.title="Feature #"+(t+1)),e}),e}).then(function(e){if(!l.held())throw d();e.forEach(function(e){e._identifyPoint=n.map}),s.identified.add(t,e)}).catch(function(e){if(console.debug(t,"identify fail:",e.message),e.discarded)throw e}))}}),SMK.UTIL.waitAll(p).finally(function(){if(!l.held())throw d()})}function d(){var e=Error("Identify results discarded");return e.discarded=!0,e}},t.prototype.anyLayersLoading=function(){var t=this;return this.layerIds.some(function(e){return t.layerId[e].loading})},t.prototype.resolveAttachmentUrl=function(e,t,i,r){if(e&&e.startsWith("@")&&(t=e.substr(1),e=null),e)return e;if(t)return this.serviceUrl?this.serviceUrl+"/MapConfigurations/"+this.lmfId+"/Attachments/"+t:this.resolveUrl("attachments/"+t+(i?"."+i:""));if(!1!==r)throw new Error("attachment without URL or Id")},t.prototype.pixelsToMillimeters=function(){var e=document.createElement("div");e.style="height:1mm; display:none",e.id="heightRef",document.body.appendChild(e);var t=$("#heightRef").height();return e.parentNode.removeChild(e),function(e){return e/t}}(),t.prototype.distanceToMeters=function(e,t){return"px"==t?e*this.getView().metersPerPixel:e*SMK.UTIL.getMetersPerUnit(t)},t.prototype.distanceFromMeters=function(e,t){return"px"==t?e/this.getView().metersPerPixel:e/SMK.UTIL.getMetersPerUnit(t)},t.prototype.getCurrentLocation=function(i){var t=this;return i=Object.assign({timeout:1e4,maxAge:6e5,cacheKey:"smk-location"},i),this.currentLocationPromise&&(!this.currentLocationTimestamp||this.currentLocationTimestamp>(new Date).getTime()-i.maxAge)?this.currentLocationPromise:(this.currentLocationTimestamp=null,this.currentLocationPromise=SMK.UTIL.makePromise(function(e,t){navigator.geolocation.getCurrentPosition(e,t,{timeout:i.timeout,enableHighAccuracy:!0}),setTimeout(function(){t(new Error("timeout"))},i.timeout)}).then(function(e){return t.currentLocationTimestamp=(new Date).getTime(),window.localStorage.setItem(i.cacheKey,JSON.stringify({latitude:e.coords.latitude,longitude:e.coords.longitude})),e.coords}).catch(function(e){try{var t=JSON.parse(window.localStorage.getItem(i.cacheKey));if(t&&t.latitude)return console.warn("using cached location",t),t}catch(e){}return Promise.reject(e)}).then(function(e){return SMK.UTIL.findNearestSite(e).then(function(e){return e.current=!0,e})}))}});} }
    );
    include.tag( "viewer-esri3d",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-esri3d/viewer-esri3d.js", load: function () { console.debug( "[smk/viewer-esri3d/viewer-esri3d.js]" ); include.module("viewer-esri3d",["viewer","esri3d","types-esri3d","layer-esri3d","turf"],function(){"use strict";var M=SMK.TYPE.Esri3d;function e(){SMK.TYPE.Viewer.prototype.constructor.apply(this,arguments)}SMK.TYPE.Viewer||(SMK.TYPE.Viewer={}),SMK.TYPE.Viewer.esri3d=e,$.extend(e.prototype,SMK.TYPE.Viewer.prototype),e.prototype.basemap.Topographic.esri3d="topo",e.prototype.basemap.Streets.esri3d="streets",e.prototype.basemap.Imagery.esri3d="satellite",e.prototype.basemap.Oceans.esri3d="oceans",e.prototype.basemap.NationalGeographic.esri3d="national-geographic",e.prototype.basemap.ShadedRelief.esri3d="terrain",e.prototype.basemap.DarkGray.esri3d="dark-gray",e.prototype.basemap.Gray.esri3d="gray",e.prototype.initialize=function(e){var t=this;SMK.TYPE.Viewer.prototype.initialize.apply(this,arguments);var i=e.addToContainer('<div class="smk-viewer">');if(this.map=new M.Map({basemap:this.basemap[e.viewer.baseMap].esri3d||"topo",ground:"world-elevation"}),this.view=new M.views.SceneView({container:i,map:this.map,ui:new M.views.ui["3d"].DefaultUI3D({components:["attribution"],padding:{top:5,left:5,right:5,bottom:5}})}),e.viewer.location.extent){var o=e.viewer.location.extent;this.view.extent=new M.geometry.Extent({xmin:o[0],ymin:o[1],xmax:o[2],ymax:o[3]}),console.log(JSON.stringify(this.view.extent),!!this.view.resizing)}e.viewer.location.zoom&&(this.view.zoom=e.viewer.location.zoom,console.log(JSON.stringify(this.view.extent),!!this.view.resizing)),e.viewer.location.center&&(this.view.center=new M.geometry.Point({x:e.viewer.location.center[0],y:e.viewer.location.center[1]})),this.panHandler={drag:this.view.on("drag",function(e){e.stopPropagation()}),keyDown:this.view.on("key-down",function(e){/Arrow/.test(e.key)&&e.stopPropagation()})},this.zoomHandler={keyDown:this.view.on("key-down",function(e){/^([+-_=]|Shift)$/.test(e.key)&&e.stopPropagation()}),mouseWheel:this.view.on("mouse-wheel",function(e){e.stopPropagation()}),doubleClick1:this.view.on("double-click",function(e){e.stopPropagation()}),doubleClick2:this.view.on("double-click",["Control"],function(e){e.stopPropagation()}),drag1:this.view.on("drag",["Shift"],function(e){e.stopPropagation()}),drag2:this.view.on("drag",["Shift","Control"],function(e){e.stopPropagation()})},M.core.watchUtils.whenTrue(this.view,"stationary",function(){t.changedView({operation:"move",after:"end"})}),M.core.watchUtils.whenFalse(this.view,"stationary",function(){t.changedView({operation:"move",after:"start"})}),this.changedView({}),t.finishedLoading(function(){t.map.layers.forEach(function(e){e&&e._smk_id&&t.deadViewerLayer[e._smk_id]&&(t.map.layers.remove(e),delete t.visibleLayer[e._smk_id])}),Object.keys(t.deadViewerLayer).forEach(function(e){delete t.deadViewerLayer[e],delete t.visibleLayer[e]})}),this.view.on("click",function(e){t.pickedLocation({map:e.mapPoint,screen:{x:e.x,y:e.y}})}),this.view.on("pointer-move",function(e){t.changedLocation({map:t.view.toMap(e),screen:{x:e.x,y:e.y}})}),M.core.watchUtils.watch(this.view.popup,"visible",function(){t.changedPopup()})},e.prototype.screenToGroundDistance=function(e,t){var i=this.screenToMap(e);if(i){var o=this.screenToMap(t);if(o)return 1e3*turf.distance(i,o)}},e.prototype.getView=function(){if(this.view.center){var e,t,i,o=M.geometry.support.webMercatorUtils.webMercatorToGeographic(this.view.extent),a=this.view.width,n=this.view.height,r=this.screenToGroundDistance([0,0],[100,0]),s=this.screenToGroundDistance([a,0],[a-100,0]),p=this.screenToGroundDistance([0,n],[100,n]),c=this.screenToGroundDistance([a,n],[a-100,n]),h=this.screenToGroundDistance([a/2-50,n/2],[a/2+50,n/2]);if(r&&s&&p&&c&&h){var d=Math.max(s,r)/Math.min(s,r)*100-100,w=Math.max(c,p)/Math.min(c,p)*100-100,u=Math.max(r,p)/Math.min(r,p)*100-100,l=Math.max(s,c)/Math.min(s,c)*100-100,m=Math.max(r,h)/Math.min(r,h)*100-100,y=Math.max(s,h)/Math.min(s,h)*100-100,v=Math.max(p,h)/Math.min(p,h)*100-100,f=Math.max(c,h)/Math.min(c,h)*100-100,g=Math.pow(2e3/Math.min(2e3,h),1.1);Math.max(d,w,u,l,m,y,v,f)/g<6&&(e=h)}return e&&(t=e/this.screenpixelsToMeters),i=e/100,{center:this.view.center,zoom:this.view.zoom,extent:[o.xmin,o.ymin,o.xmax,o.ymax],screen:{width:a,height:n},scale:t,metersPerPixel:i}}},e.prototype.screenToMap=function(e){var t;if(t=Array.isArray(e)?this.view.toMap({x:e[0],y:e[1]}):this.view.toMap(e))return[t.longitude,t.latitude]},e.prototype.setBasemap=function(e){this.map.basemap=this.basemap[e].esri3d,this.changedBaseMap({baseMap:e})},e.prototype.addViewerLayer=function(e){this.map.add(e)},e.prototype.positionViewerLayer=function(e,t){this.map.reorder(e,t)};var t={ShadedRelief:!0,Oceans:!0,Gray:!0,DarkGray:!0,Imagery:!0,Terrain:!0};e.prototype.createBasemapLayer=function(e){return{features:L.esri.basemapLayer(e,{detectRetina:!0}),labels:t[e]&&L.esri.basemapLayer(e+"Labels")}},e.prototype.showPopup=function(e,t,i){null==t&&(t=this.popupLocation),null!=t&&(this.popupLocation=t,this.view.popup.actions=[],this.view.popup.dockOptions={buttonEnabled:!1},this.view.popup.open(Object.assign({content:e,location:{type:"point",latitude:t.latitude,longitude:t.longitude}},i)))},e.prototype.hidePopup=function(){this.view.popup.close()},e.prototype.isPopupVisible=function(){return this.view.popup.visible}});} },
            { loader: "style", url: "smk/viewer-esri3d/viewer-esri3d.css", load: "/* [smk/viewer-esri3d/viewer-esri3d.css] */\n.smk-viewer .esri-ui .esri-popup{transform:translateY(-30px)}.smk-viewer .esri-popup__main-container{width:400px;border-radius:5px;max-height:initial;font-family:\"Helvetica Neue\",Arial,Helvetica,sans-serif;font-size:12px}.smk-viewer .esri-popup__main-container .esri-popup__header{position:absolute;top:0;left:0;right:0}.smk-viewer .esri-popup__main-container .esri-popup__header .esri-popup__header-buttons{z-index:1}.smk-viewer .esri-popup__main-container .esri-popup__header .esri-popup__header-title{display:none}.smk-viewer .esri-popup__main-container .esri-popup__content{overflow:visible;margin:15px}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction,.smk-viewer .esri-popup--aligned-top-center .esri-popup__pointer-direction{transform:translateY(-8px) scale(1.5,2) rotate(45deg)}" }
        ] }
    );
    include.tag( "viewer-leaflet",
        { loader: "group", tags: [
            { loader: "script", url: "smk/viewer-leaflet/viewer-leaflet.js", load: function () { console.debug( "[smk/viewer-leaflet/viewer-leaflet.js]" ); include.module("viewer-leaflet",["viewer","leaflet","layer-leaflet","turf"],function(){"use strict";function e(){SMK.TYPE.Viewer.prototype.constructor.apply(this,arguments)}function t(e){var t=Object.assign({detectRetina:!0},this.option),a=[];return a.push(L.esri.basemapLayer(e,t)),this.labels&&this.labels.forEach(function(e){a.push(L.esri.basemapLayer(e,t))}),a}SMK.TYPE.Viewer||(SMK.TYPE.Viewer={}),SMK.TYPE.Viewer.leaflet=e,$.extend(e.prototype,SMK.TYPE.Viewer.prototype),e.prototype.initialize=function(e){var t=this;SMK.TYPE.Viewer.prototype.initialize.apply(this,arguments),this.deadViewerLayer={};var a=e.addToContainer('<div class="smk-viewer">');if(t.map=L.map(a,{dragging:!1,zoomControl:!1,boxZoom:!1,doubleClickZoom:!1,zoomSnap:0,minZoom:e.viewer.minZoom}),t.map.scrollWheelZoom.disable(),e.viewer.location.extent){var o=e.viewer.location.extent;t.map.fitBounds([[o[1],o[0]],[o[3],o[2]]],{animate:!1,duration:0,paddingTopLeft:o[4],paddingBottomRight:o[5]})}e.viewer.location.zoom&&t.map.setZoom(e.viewer.location.zoom,{animate:!1}),e.viewer.location.center&&t.map.panTo([e.viewer.location.center[1],e.viewer.location.center[0]],{animate:!1}),e.viewer.baseMap&&t.setBasemap(e.viewer.baseMap),this.changedViewDebounced=SMK.UTIL.makeDelayedCall(function(){t.changedView()},{delay:1e3}),t.map.on("zoomstart",this.changedViewDebounced),t.map.on("movestart",this.changedViewDebounced),t.map.on("zoomend",this.changedViewDebounced),t.map.on("moveend",this.changedViewDebounced),this.changedViewDebounced(),t.finishedLoading(function(){t.map.eachLayer(function(e){e._smk_id&&t.deadViewerLayer[e._smk_id]&&(t.map.removeLayer(e),delete t.visibleLayer[e._smk_id])}),Object.keys(t.deadViewerLayer).forEach(function(e){delete t.deadViewerLayer[e],delete t.visibleLayer[e]})}),t.map.on("click",function(e){t.pickedLocation({map:{latitude:e.latlng.lat,longitude:e.latlng.lng},screen:e.containerPoint})}),t.map.on("mousemove",function(e){t.changedLocation({map:{latitude:e.latlng.lat,longitude:e.latlng.lng},screen:e.containerPoint})}),t.getVar=function(){return e.getVar.apply(e,arguments)}},e.prototype.destroy=function(){this.map.remove(),SMK.TYPE.Viewer.prototype.destroy.call(this)},e.prototype.getScale=function(){var e=this.map.getSize().y/2;return this.map.distance(this.map.containerPointToLatLng([0,e]),this.map.containerPointToLatLng([100,e]))/this.screenpixelsToMeters},e.prototype.getView=function(){var e=this.map.getBounds(),t=this.map.getSize(),a=this.map.getCenter(),o=t.y/2,i=this.map.distance(this.map.containerPointToLatLng([0,o]),this.map.containerPointToLatLng([100,o]));return{center:{latitude:a.lat,longitude:a.lng},zoom:this.map.getZoom(),extent:[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()],scale:i/this.screenpixelsToMeters,metersPerPixel:i/100,screen:{width:t.x,height:t.y}}},e.prototype.screenToMap=function(e){var t;return[(t=Array.isArray(e)?this.map.containerPointToLatLng(e):this.map.containerPointToLatLng([e.x,e.y])).lng,t.lat]},e.prototype.basemap.Topographic.create=t,e.prototype.basemap.Streets.create=t,e.prototype.basemap.Imagery.create=t,e.prototype.basemap.Imagery.labels=["ImageryTransportation","ImageryLabels"],e.prototype.basemap.Oceans.create=t,e.prototype.basemap.Oceans.labels=["OceansLabels"],e.prototype.basemap.NationalGeographic.create=t,e.prototype.basemap.ShadedRelief.create=t,e.prototype.basemap.ShadedRelief.labels=["ShadedReliefLabels"],e.prototype.basemap.DarkGray.create=t,e.prototype.basemap.DarkGray.labels=["DarkGrayLabels"],e.prototype.basemap.Gray.create=t,e.prototype.basemap.Gray.labels=["GrayLabels"],e.prototype.basemap.StamenTonerLight.create=function(e){return[L.tileLayer(this.url,{attribution:this.attribution})]},e.prototype.basemap.StamenTonerLight.url="https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",e.prototype.basemap.StamenTonerLight.attribution="Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://www.openstreetmap.org/copyright'>ODbL</a>.",e.prototype.setBasemap=function(e){var t=this;this.currentBasemap&&this.currentBasemap.forEach(function(e){t.map.removeLayer(e)}),this.currentBasemap=this.createBasemapLayer(e),this.map.addLayer(this.currentBasemap[0]),this.currentBasemap[0].bringToBack();for(var a=1;a<this.currentBasemap.length;a+=1)this.map.addLayer(this.currentBasemap[a]);this.changedBaseMap({baseMap:e})},e.prototype.createBasemapLayer=function(e){return this.basemap[e].create(e)},e.prototype.addViewerLayer=function(e){this.map.addLayer(e)},e.prototype.getPanelPadding=function(e){var t=this.getSidepanelPosition(),a=this.map.getSize(),o=t.top,i=a.y-t.top-t.height,r=t.left,n=a.x-t.left-t.width;return Math.max(o,i)>Math.max(r,n)?i<o?{topLeft:L.point(0,0),bottomRight:L.point(0,a.y-t.top)}:{topLeft:L.point(0,t.top+t.height),bottomRight:L.point(0,0)}:n<r?{topLeft:L.point(0,0),bottomRight:L.point(a.x-t.left,0)}:{topLeft:L.point(t.left+t.width,0),bottomRight:L.point(0,0)}},e.prototype.temporaryFeature=function(e,t,a){this.acetate||(this.acetate={}),this.acetate[e]||(this.acetate[e]=L.layerGroup().addTo(this.map)),this.acetate[e].clearLayers(),t&&this.acetate[e].addLayer(L.geoJSON(t,a))},e.prototype.panToFeature=function(e,t){var a;switch(turf.getType(e)){case"Point":var o=L.latLng(e.geometry.coordinates[1],e.geometry.coordinates[0]);a=L.latLngBounds([o,o]);break;default:var i=turf.bbox(e);a=L.latLngBounds([i[1],i[0]],[i[3],i[2]])}if(a){var r=this.getPanelPadding();this.map.fitBounds(a,{paddingTopLeft:r.topLeft,paddingBottomRight:r.bottomRight,maxZoom:!0!==t?this.map.getZoom():void 0,animate:!0})}}});} },
            { loader: "style", url: "smk/viewer-leaflet/viewer-leaflet.css", load: "/* [smk/viewer-leaflet/viewer-leaflet.css] */\n.leaflet-popup-content-wrapper{border-radius:5px!important}.leaflet-popup-content{max-width:500px;width:500px;min-width:200px}.smk-map-frame .smk-viewer .leaflet-control{margin-top:0;margin-left:0;margin-right:0;margin-bottom:0}.smk-map-frame .smk-viewer .leaflet-top.leaflet-left .leaflet-control{margin-top:5px;margin-left:5px}.smk-map-frame .smk-viewer .leaflet-top.leaflet-right .leaflet-control{margin-top:5px;margin-right:5px}.smk-map-frame .smk-viewer .leaflet-bottom.leaflet-left .leaflet-control{margin-left:5px;margin-bottom:10px}.smk-map-frame .smk-viewer .leaflet-bottom.leaflet-right .leaflet-control{margin-right:5px;margin-bottom:5px}.smk-map-frame .smk-viewer .leaflet-bottom.leaflet-right .leaflet-control.leaflet-control-attribution{color:#666;font-weight:700;font-size:10px;height:12px;top:-1px;text-shadow:1px 0 0 #ccc,0 -1px 0 #ccc,0 1px 0 #ccc,-1px 0 0 #ccc;text-align:right;padding:0;background-color:transparent;cursor:default}" }
        ] }
    );
    include.tag( "vue",
        { loader: "script", url: "lib/vue-2.5.11.min.js", load: function () { console.debug( "[lib/vue-2.5.11.min.js]" ); /*!
 * Vue.js v2.5.11
 * (c) 2014-2017 Evan You
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Vue=e()}(this,function(){"use strict";function t(t){return void 0===t||null===t}function e(t){return void 0!==t&&null!==t}function n(t){return!0===t}function r(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t}function i(t){return null!==t&&"object"==typeof t}function o(t){return"[object Object]"===Nn.call(t)}function a(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function s(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function c(t){var e=parseFloat(t);return isNaN(e)?t:e}function u(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}function l(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function f(t,e){return Mn.call(t,e)}function d(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}function p(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function v(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function h(t,e){for(var n in e)t[n]=e[n];return t}function m(t){for(var e={},n=0;n<t.length;n++)t[n]&&h(e,t[n]);return e}function y(t,e,n){}function g(t,e){if(t===e)return!0;var n=i(t),r=i(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),a=Array.isArray(e);if(o&&a)return t.length===e.length&&t.every(function(t,n){return g(t,e[n])});if(o||a)return!1;var s=Object.keys(t),c=Object.keys(e);return s.length===c.length&&s.every(function(n){return g(t[n],e[n])})}catch(t){return!1}}function _(t,e){for(var n=0;n<t.length;n++)if(g(t[n],e))return n;return-1}function b(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function $(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function C(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function w(t){return"function"==typeof t&&/native code/.test(t.toString())}function x(t){return new mr(void 0,void 0,void 0,String(t))}function k(t,e){var n=t.componentOptions,r=new mr(t.tag,t.data,t.children,t.text,t.elm,t.context,n,t.asyncFactory);return r.ns=t.ns,r.isStatic=t.isStatic,r.key=t.key,r.isComment=t.isComment,r.fnContext=t.fnContext,r.fnOptions=t.fnOptions,r.fnScopeId=t.fnScopeId,r.isCloned=!0,e&&(t.children&&(r.children=A(t.children,!0)),n&&n.children&&(n.children=A(n.children,!0))),r}function A(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=k(t[i],e);return r}function O(t,e,n){t.__proto__=e}function S(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];C(t,o,e[o])}}function T(t,e){if(i(t)&&!(t instanceof mr)){var n;return f(t,"__ob__")&&t.__ob__ instanceof wr?n=t.__ob__:Cr.shouldConvert&&!ur()&&(Array.isArray(t)||o(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new wr(t)),e&&n&&n.vmCount++,n}}function E(t,e,n,r,i){var o=new vr,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set,u=!i&&T(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return vr.target&&(o.depend(),u&&(u.dep.depend(),Array.isArray(e)&&I(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!=e&&r!=r||(c?c.call(t,e):n=e,u=!i&&T(e),o.notify())}})}}function j(t,e,n){if(Array.isArray(t)&&a(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(E(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function N(t,e){if(Array.isArray(t)&&a(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||f(t,e)&&(delete t[e],n&&n.dep.notify())}}function I(t){for(var e=void 0,n=0,r=t.length;n<r;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&I(e)}function L(t,e){if(!e)return t;for(var n,r,i,a=Object.keys(e),s=0;s<a.length;s++)r=t[n=a[s]],i=e[n],f(t,n)?o(r)&&o(i)&&L(r,i):j(t,n,i);return t}function M(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?L(r,i):i}:e?t?function(){return L("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function D(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function P(t,e,n,r){var i=Object.create(t||null);return e?h(i,e):i}function F(t,e,n){function r(r){var i=xr[r]||Or;u[r]=i(t[r],e[r],n,r)}"function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var r,i,a={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(a[Pn(i)]={type:null});else if(o(n))for(var s in n)i=n[s],a[Pn(s)]=o(i)?i:{type:i};t.props=a}}(e),function(t,e){var n=t.inject,r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(o(n))for(var a in n){var s=n[a];r[a]=o(s)?h({from:a},s):{from:s}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}(e);var i=e.extends;if(i&&(t=F(t,i,n)),e.mixins)for(var a=0,s=e.mixins.length;a<s;a++)t=F(t,e.mixins[a],n);var c,u={};for(c in t)r(c);for(c in e)f(t,c)||r(c);return u}function R(t,e,n,r){if("string"==typeof n){var i=t[e];if(f(i,n))return i[n];var o=Pn(n);if(f(i,o))return i[o];var a=Fn(o);if(f(i,a))return i[a];return i[n]||i[o]||i[a]}}function H(t,e,n,r){var i=e[t],o=!f(n,t),a=n[t];if(U(Boolean,i.type)&&(o&&!f(i,"default")?a=!1:U(String,i.type)||""!==a&&a!==Hn(t)||(a=!0)),void 0===a){a=function(t,e,n){if(!f(e,"default"))return;var r=e.default;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof r&&"Function"!==B(e.type)?r.call(t):r}(r,i,t);var s=Cr.shouldConvert;Cr.shouldConvert=!0,T(a),Cr.shouldConvert=s}return a}function B(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function U(t,e){if(!Array.isArray(e))return B(e)===B(t);for(var n=0,r=e.length;n<r;n++)if(B(e[n])===B(t))return!0;return!1}function V(t,e,n){if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,t,e,n))return}catch(t){z(t,r,"errorCaptured hook")}}z(t,e,n)}function z(t,e,n){if(Jn.errorHandler)try{return Jn.errorHandler.call(null,t,e,n)}catch(t){K(t,null,"config.errorHandler")}K(t,e,n)}function K(t,e,n){if(!Gn&&!Zn||"undefined"==typeof console)throw t;console.error(t)}function J(){Tr=!1;var t=Sr.slice(0);Sr.length=0;for(var e=0;e<t.length;e++)t[e]()}function q(t,e){var n;if(Sr.push(function(){if(t)try{t.call(e)}catch(t){V(t,e,"nextTick")}else n&&n(e)}),Tr||(Tr=!0,Er?Ar():kr()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}function W(t){G(t,Mr),Mr.clear()}function G(t,e){var n,r,o=Array.isArray(t);if((o||i(t))&&!Object.isFrozen(t)){if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(o)for(n=t.length;n--;)G(t[n],e);else for(n=(r=Object.keys(t)).length;n--;)G(t[r[n]],e)}}function Z(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,t)}return e.fns=t,e}function X(e,n,r,i,o){var a,s,c,u;for(a in e)s=e[a],c=n[a],u=Dr(a),t(s)||(t(c)?(t(s.fns)&&(s=e[a]=Z(s)),r(u.name,s,u.once,u.capture,u.passive)):s!==c&&(c.fns=s,e[a]=c));for(a in n)t(e[a])&&i((u=Dr(a)).name,n[a],u.capture)}function Y(r,i,o){function a(){o.apply(this,arguments),l(s.fns,a)}r instanceof mr&&(r=r.data.hook||(r.data.hook={}));var s,c=r[i];t(c)?s=Z([a]):e(c.fns)&&n(c.merged)?(s=c).fns.push(a):s=Z([c,a]),s.merged=!0,r[i]=s}function Q(t,n,r,i,o){if(e(n)){if(f(n,r))return t[r]=n[r],o||delete n[r],!0;if(f(n,i))return t[r]=n[i],o||delete n[i],!0}return!1}function tt(t){return e(t)&&e(t.text)&&function(t){return!1===t}(t.isComment)}function et(i,o){var a,s,c,u,l=[];for(a=0;a<i.length;a++)t(s=i[a])||"boolean"==typeof s||(u=l[c=l.length-1],Array.isArray(s)?s.length>0&&(tt((s=et(s,(o||"")+"_"+a))[0])&&tt(u)&&(l[c]=x(u.text+s[0].text),s.shift()),l.push.apply(l,s)):r(s)?tt(u)?l[c]=x(u.text+s):""!==s&&l.push(x(s)):tt(s)&&tt(u)?l[c]=x(u.text+s.text):(n(i._isVList)&&e(s.tag)&&t(s.key)&&e(o)&&(s.key="__vlist"+o+"_"+a+"__"),l.push(s)));return l}function nt(t,e){return(t.__esModule||fr&&"Module"===t[Symbol.toStringTag])&&(t=t.default),i(t)?e.extend(t):t}function rt(t){return t.isComment&&t.asyncFactory}function it(t){if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];if(e(r)&&(e(r.componentOptions)||rt(r)))return r}}function ot(t,e,n){n?Lr.$once(t,e):Lr.$on(t,e)}function at(t,e){Lr.$off(t,e)}function st(t,e,n){Lr=t,X(e,n||{},ot,at),Lr=void 0}function ct(t,e){var n={};if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(ut)&&delete n[u];return n}function ut(t){return t.isComment&&!t.asyncFactory||" "===t.text}function lt(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?lt(t[n],e):e[t[n].key]=t[n].fn;return e}function ft(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function dt(t,e){if(e){if(t._directInactive=!1,ft(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)dt(t.$children[n]);vt(t,"activated")}}function pt(t,e){if(!(e&&(t._directInactive=!0,ft(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)pt(t.$children[n]);vt(t,"deactivated")}}function vt(t,e){var n=t.$options[e];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(t)}catch(n){V(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e)}function ht(){Ur=!0;var t,e;for(Fr.sort(function(t,e){return t.id-e.id}),Vr=0;Vr<Fr.length;Vr++)e=(t=Fr[Vr]).id,Hr[e]=null,t.run();var n=Rr.slice(),r=Fr.slice();Vr=Fr.length=Rr.length=0,Hr={},Br=Ur=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,dt(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&vt(r,"updated")}}(r),lr&&Jn.devtools&&lr.emit("flush")}function mt(t,e,n){Jr.get=function(){return this[e][n]},Jr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Jr)}function yt(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;Cr.shouldConvert=o;var a=function(o){i.push(o);var a=H(o,e,n,t);E(r,o,a),o in t||mt(t,"_props",o)};for(var s in e)a(s);Cr.shouldConvert=!0}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]=null==e[n]?y:p(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;e=t._data="function"==typeof e?function(t,e){try{return t.call(e,e)}catch(t){return V(t,e,"data()"),{}}}(e,t):e||{},o(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);for(;i--;){var a=n[i];r&&f(r,a)||$(a)||mt(t,"_data",a)}T(e,!0)}(t):T(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=ur();for(var i in e){var o=e[i],a="function"==typeof o?o:o.get;r||(n[i]=new Kr(t,a||y,y,qr)),i in t||gt(t,i,o)}}(t,e.computed),e.watch&&e.watch!==ir&&function(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)bt(t,n,r[i]);else bt(t,n,r)}}(t,e.watch)}function gt(t,e,n){var r=!ur();"function"==typeof n?(Jr.get=r?_t(e):n,Jr.set=y):(Jr.get=n.get?r&&!1!==n.cache?_t(e):n.get:y,Jr.set=n.set?n.set:y),Object.defineProperty(t,e,Jr)}function _t(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vr.target&&e.depend(),e.value}}function bt(t,e,n,r){return o(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function $t(t,e){if(t){for(var n=Object.create(null),r=fr?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),i=0;i<r.length;i++){for(var o=r[i],a=t[o].from,s=e;s;){if(s._provided&&a in s._provided){n[o]=s._provided[a];break}s=s.$parent}if(!s&&"default"in t[o]){var c=t[o].default;n[o]="function"==typeof c?c.call(e):c}}return n}}function Ct(t,n){var r,o,a,s,c;if(Array.isArray(t)||"string"==typeof t)for(r=new Array(t.length),o=0,a=t.length;o<a;o++)r[o]=n(t[o],o);else if("number"==typeof t)for(r=new Array(t),o=0;o<t;o++)r[o]=n(o+1,o);else if(i(t))for(s=Object.keys(t),r=new Array(s.length),o=0,a=s.length;o<a;o++)c=s[o],r[o]=n(t[c],c,o);return e(r)&&(r._isVList=!0),r}function wt(t,e,n,r){var i,o=this.$scopedSlots[t];if(o)n=n||{},r&&(n=h(h({},r),n)),i=o(n)||e;else{var a=this.$slots[t];a&&(a._rendered=!0),i=a||e}var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function xt(t){return R(this.$options,"filters",t)||Un}function kt(t,e,n,r){var i=Jn.keyCodes[e]||n;return i?Array.isArray(i)?-1===i.indexOf(t):i!==t:r?Hn(r)!==e:void 0}function At(t,e,n,r,o){if(n)if(i(n)){Array.isArray(n)&&(n=m(n));var a,s=function(i){if("class"===i||"style"===i||Ln(i))a=t;else{var s=t.attrs&&t.attrs.type;a=r||Jn.mustUseProp(e,s,i)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}if(!(i in a)&&(a[i]=n[i],o)){(t.on||(t.on={}))["update:"+i]=function(t){n[i]=t}}};for(var c in n)s(c)}else;return t}function Ot(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?Array.isArray(r)?A(r):k(r):(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Tt(r,"__static__"+t,!1),r)}function St(t,e,n){return Tt(t,"__once__"+e+(n?"_"+n:""),!0),t}function Tt(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Et(t[r],e+"_"+r,n);else Et(t,e,n)}function Et(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function jt(t,e){if(e)if(o(e)){var n=t.on=t.on?h({},t.on):{};for(var r in e){var i=n[r],a=e[r];n[r]=i?[].concat(i,a):a}}else;return t}function Nt(t){t._o=St,t._n=c,t._s=s,t._l=Ct,t._t=wt,t._q=g,t._i=_,t._m=Ot,t._f=xt,t._k=kt,t._b=At,t._v=x,t._e=gr,t._u=lt,t._g=jt}function It(t,e,r,i,o){var a=o.options;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||jn,this.injections=$t(a.inject,i),this.slots=function(){return ct(r,i)};var s=Object.create(i),c=n(a._compiled),u=!c;c&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||jn),a._scopeId?this._c=function(t,e,n,r){var o=Dt(s,t,e,n,r,u);return o&&(o.fnScopeId=a._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return Dt(s,t,e,n,r,u)}}function Lt(t,e){for(var n in e)t[Pn(n)]=e[n]}function Mt(r,o,a,s,c){if(!t(r)){var u=a.$options._base;if(i(r)&&(r=u.extend(r)),"function"==typeof r){var l;if(t(r.cid)&&(l=r,void 0===(r=function(r,o,a){if(n(r.error)&&e(r.errorComp))return r.errorComp;if(e(r.resolved))return r.resolved;if(n(r.loading)&&e(r.loadingComp))return r.loadingComp;if(!e(r.contexts)){var s=r.contexts=[a],c=!0,u=function(){for(var t=0,e=s.length;t<e;t++)s[t].$forceUpdate()},l=b(function(t){r.resolved=nt(t,o),c||u()}),f=b(function(t){e(r.errorComp)&&(r.error=!0,u())}),d=r(l,f);return i(d)&&("function"==typeof d.then?t(r.resolved)&&d.then(l,f):e(d.component)&&"function"==typeof d.component.then&&(d.component.then(l,f),e(d.error)&&(r.errorComp=nt(d.error,o)),e(d.loading)&&(r.loadingComp=nt(d.loading,o),0===d.delay?r.loading=!0:setTimeout(function(){t(r.resolved)&&t(r.error)&&(r.loading=!0,u())},d.delay||200)),e(d.timeout)&&setTimeout(function(){t(r.resolved)&&f(null)},d.timeout))),c=!1,r.loading?r.loadingComp:r.resolved}r.contexts.push(a)}(l,u,a))))return function(t,e,n,r,i){var o=gr();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}(l,o,a,s,c);o=o||{},Ft(r),e(o.model)&&function(t,n){var r=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(n.props||(n.props={}))[r]=n.model.value;var o=n.on||(n.on={});e(o[i])?o[i]=[n.model.callback].concat(o[i]):o[i]=n.model.callback}(r.options,o);var f=function(n,r,i){var o=r.options.props;if(!t(o)){var a={},s=n.attrs,c=n.props;if(e(s)||e(c))for(var u in o){var l=Hn(u);Q(a,c,u,l,!0)||Q(a,s,u,l,!1)}return a}}(o,r);if(n(r.options.functional))return function(t,n,r,i,o){var a=t.options,s={},c=a.props;if(e(c))for(var u in c)s[u]=H(u,c,n||jn);else e(r.attrs)&&Lt(s,r.attrs),e(r.props)&&Lt(s,r.props);var l=new It(r,s,o,i,t),f=a.render.call(null,l._c,l);return f instanceof mr&&(f.fnContext=i,f.fnOptions=a,r.slot&&((f.data||(f.data={})).slot=r.slot)),f}(r,f,o,a,s);var d=o.on;if(o.on=o.nativeOn,n(r.options.abstract)){var p=o.slot;o={},p&&(o.slot=p)}!function(t){t.hook||(t.hook={});for(var e=0;e<Gr.length;e++){var n=Gr[e],r=t.hook[n],i=Wr[n];t.hook[n]=r?function(t,e){return function(n,r,i,o){t(n,r,i,o),e(n,r,i,o)}}(i,r):i}}(o);var v=r.options.name||c;return new mr("vue-component-"+r.cid+(v?"-"+v:""),o,void 0,void 0,void 0,a,{Ctor:r,propsData:f,listeners:d,tag:c,children:s},l)}}}function Dt(t,i,o,a,s,c){return(Array.isArray(o)||r(o))&&(s=a,a=o,o=void 0),n(c)&&(s=Xr),function(t,n,i,o,a){if(e(i)&&e(i.__ob__))return gr();e(i)&&e(i.is)&&(n=i.is);if(!n)return gr();Array.isArray(o)&&"function"==typeof o[0]&&((i=i||{}).scopedSlots={default:o[0]},o.length=0);a===Xr?o=function(t){return r(t)?[x(t)]:Array.isArray(t)?et(t):void 0}(o):a===Zr&&(o=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(o));var s,c;if("string"==typeof n){var u;c=t.$vnode&&t.$vnode.ns||Jn.getTagNamespace(n),s=Jn.isReservedTag(n)?new mr(Jn.parsePlatformTagName(n),i,o,void 0,void 0,t):e(u=R(t.$options,"components",n))?Mt(u,i,t,o,n):new mr(n,i,o,void 0,void 0,t)}else s=Mt(n,i,t,o);return e(s)?(c&&Pt(s,c),s):gr()}(t,i,o,a,s)}function Pt(r,i,o){if(r.ns=i,"foreignObject"===r.tag&&(i=void 0,o=!0),e(r.children))for(var a=0,s=r.children.length;a<s;a++){var c=r.children[a];e(c.tag)&&(t(c.ns)||n(o))&&Pt(c,i,o)}}function Ft(t){var e=t.options;if(t.super){var n=Ft(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e,n=t.options,r=t.extendOptions,i=t.sealedOptions;for(var o in n)n[o]!==i[o]&&(e||(e={}),e[o]=function(t,e,n){{if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var i=0;i<t.length;i++)(e.indexOf(t[i])>=0||n.indexOf(t[i])<0)&&r.push(t[i]);return r}return t}}(n[o],r[o],i[o]));return e}(t);r&&h(t.extendOptions,r),(e=t.options=F(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Rt(t){this._init(t)}function Ht(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name,a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=F(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)mt(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)gt(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,zn.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=h({},a.options),i[r]=a,a}}function Bt(t){return t&&(t.Ctor.options.name||t.tag)}function Ut(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!function(t){return"[object RegExp]"===Nn.call(t)}(t)&&t.test(e)}function Vt(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Bt(a.componentOptions);s&&!e(s)&&zt(n,o,r,i)}}}function zt(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,l(n,e)}function Kt(t){for(var n=t.data,r=t,i=t;e(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(n=Jt(i.data,n));for(;e(r=r.parent);)r&&r.data&&(n=Jt(n,r.data));return function(t,n){if(e(t)||e(n))return qt(t,Wt(n));return""}(n.staticClass,n.class)}function Jt(t,n){return{staticClass:qt(t.staticClass,n.staticClass),class:e(t.class)?[t.class,n.class]:n.class}}function qt(t,e){return t?e?t+" "+e:t:e||""}function Wt(t){return Array.isArray(t)?function(t){for(var n,r="",i=0,o=t.length;i<o;i++)e(n=Wt(t[i]))&&""!==n&&(r&&(r+=" "),r+=n);return r}(t):i(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}function Gt(t){return bi(t)?"svg":"math"===t?"math":void 0}function Zt(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function Xt(t,e){var n=t.data.ref;if(n){var r=t.context,i=t.componentInstance||t.elm,o=r.$refs;e?Array.isArray(o[n])?l(o[n],i):o[n]===i&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(i)<0&&o[n].push(i):o[n]=[i]:o[n]=i}}function Yt(r,i){return r.key===i.key&&(r.tag===i.tag&&r.isComment===i.isComment&&e(r.data)===e(i.data)&&function(t,n){if("input"!==t.tag)return!0;var r,i=e(r=t.data)&&e(r=r.attrs)&&r.type,o=e(r=n.data)&&e(r=r.attrs)&&r.type;return i===o||wi(i)&&wi(o)}(r,i)||n(r.isAsyncPlaceholder)&&r.asyncFactory===i.asyncFactory&&t(i.asyncFactory.error))}function Qt(t,n,r){var i,o,a={};for(i=n;i<=r;++i)e(o=t[i].key)&&(a[o]=i);return a}function te(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,r,i,o=t===Ai,a=e===Ai,s=ee(t.data.directives,t.context),c=ee(e.data.directives,e.context),u=[],l=[];for(n in c)r=s[n],i=c[n],r?(i.oldValue=r.value,ne(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(ne(i,"bind",e,t),i.def&&i.def.inserted&&u.push(i));if(u.length){var f=function(){for(var n=0;n<u.length;n++)ne(u[n],"inserted",e,t)};o?Y(e,"insert",f):f()}l.length&&Y(e,"postpatch",function(){for(var n=0;n<l.length;n++)ne(l[n],"componentUpdated",e,t)});if(!o)for(n in s)c[n]||ne(s[n],"unbind",t,t,a)}(t,e)}function ee(t,e){var n=Object.create(null);if(!t)return n;var r,i;for(r=0;r<t.length;r++)(i=t[r]).modifiers||(i.modifiers=Ti),n[function(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}(i)]=i,i.def=R(e.$options,"directives",i.name);return n}function ne(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){V(r,n.context,"directive "+t.name+" "+e+" hook")}}function re(n,r){var i=r.componentOptions;if(!(e(i)&&!1===i.Ctor.options.inheritAttrs||t(n.data.attrs)&&t(r.data.attrs))){var o,a,s=r.elm,c=n.data.attrs||{},u=r.data.attrs||{};e(u.__ob__)&&(u=r.data.attrs=h({},u));for(o in u)a=u[o],c[o]!==a&&ie(s,o,a);(Qn||er)&&u.value!==c.value&&ie(s,"value",u.value);for(o in c)t(u[o])&&(hi(o)?s.removeAttributeNS(vi,mi(o)):di(o)||s.removeAttribute(o))}}function ie(t,e,n){if(pi(e))yi(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n));else if(di(e))t.setAttribute(e,yi(n)||"false"===n?"false":"true");else if(hi(e))yi(n)?t.removeAttributeNS(vi,mi(e)):t.setAttributeNS(vi,e,n);else if(yi(n))t.removeAttribute(e);else{if(Qn&&!tr&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}function oe(n,r){var i=r.elm,o=r.data,a=n.data;if(!(t(o.staticClass)&&t(o.class)&&(t(a)||t(a.staticClass)&&t(a.class)))){var s=Kt(r),c=i._transitionClasses;e(c)&&(s=qt(s,Wt(c))),s!==i._prevClass&&(i.setAttribute("class",s),i._prevClass=s)}}function ae(t){function e(){(a||(a=[])).push(t.slice(v,i).trim()),v=i+1}var n,r,i,o,a,s=!1,c=!1,u=!1,l=!1,f=0,d=0,p=0,v=0;for(i=0;i<t.length;i++)if(r=n,n=t.charCodeAt(i),s)39===n&&92!==r&&(s=!1);else if(c)34===n&&92!==r&&(c=!1);else if(u)96===n&&92!==r&&(u=!1);else if(l)47===n&&92!==r&&(l=!1);else if(124!==n||124===t.charCodeAt(i+1)||124===t.charCodeAt(i-1)||f||d||p){switch(n){case 34:c=!0;break;case 39:s=!0;break;case 96:u=!0;break;case 40:p++;break;case 41:p--;break;case 91:d++;break;case 93:d--;break;case 123:f++;break;case 125:f--}if(47===n){for(var h=i-1,m=void 0;h>=0&&" "===(m=t.charAt(h));h--);m&&Ii.test(m)||(l=!0)}}else void 0===o?(v=i+1,o=t.slice(0,i).trim()):e();if(void 0===o?o=t.slice(0,i).trim():0!==v&&e(),a)for(i=0;i<a.length;i++)o=function(t,e){var n=e.indexOf("(");{if(n<0)return'_f("'+e+'")('+t+")";var r=e.slice(0,n),i=e.slice(n+1);return'_f("'+r+'")('+t+","+i}}(o,a[i]);return o}function se(t){console.error("[Vue compiler]: "+t)}function ce(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function ue(t,e,n){(t.props||(t.props=[])).push({name:e,value:n})}function le(t,e,n){(t.attrs||(t.attrs=[])).push({name:e,value:n})}function fe(t,e,n,r,i,o){(t.directives||(t.directives=[])).push({name:e,rawName:n,value:r,arg:i,modifiers:o})}function de(t,e,n,r,i,o){(r=r||jn).capture&&(delete r.capture,e="!"+e),r.once&&(delete r.once,e="~"+e),r.passive&&(delete r.passive,e="&"+e),"click"===e&&(r.right?(e="contextmenu",delete r.right):r.middle&&(e="mouseup"));var a;r.native?(delete r.native,a=t.nativeEvents||(t.nativeEvents={})):a=t.events||(t.events={});var s={value:n};r!==jn&&(s.modifiers=r);var c=a[e];Array.isArray(c)?i?c.unshift(s):c.push(s):a[e]=c?i?[s,c]:[c,s]:s}function pe(t,e,n){var r=ve(t,":"+e)||ve(t,"v-bind:"+e);if(null!=r)return ae(r);if(!1!==n){var i=ve(t,e);if(null!=i)return JSON.stringify(i)}}function ve(t,e,n){var r;if(null!=(r=t.attrsMap[e]))for(var i=t.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===e){i.splice(o,1);break}return n&&delete t.attrsMap[e],r}function he(t,e,n){var r=n||{},i="$$v";r.trim&&(i="(typeof $$v === 'string'? $$v.trim(): $$v)"),r.number&&(i="_n("+i+")");var o=me(e,i);t.model={value:"("+e+")",expression:'"'+e+'"',callback:"function ($$v) {"+o+"}"}}function me(t,e){var n=function(t){if(ei=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<ei-1)return(ii=t.lastIndexOf("."))>-1?{exp:t.slice(0,ii),key:'"'+t.slice(ii+1)+'"'}:{exp:t,key:null};ni=t,ii=oi=ai=0;for(;!ge();)_e(ri=ye())?be(ri):91===ri&&function(t){var e=1;oi=ii;for(;!ge();)if(t=ye(),_e(t))be(t);else if(91===t&&e++,93===t&&e--,0===e){ai=ii;break}}(ri);return{exp:t.slice(0,oi),key:t.slice(oi+1,ai)}}(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function ye(){return ni.charCodeAt(++ii)}function ge(){return ii>=ei}function _e(t){return 34===t||39===t}function be(t){for(var e=t;!ge()&&(t=ye())!==e;);}function $e(t,e,n,r,i){e=function(t){return t._withTask||(t._withTask=function(){Er=!0;var e=t.apply(null,arguments);return Er=!1,e})}(e),n&&(e=function(t,e,n){var r=si;return function i(){null!==t.apply(null,arguments)&&Ce(e,i,n,r)}}(e,t,r)),si.addEventListener(t,e,or?{capture:r,passive:i}:r)}function Ce(t,e,n,r){(r||si).removeEventListener(t,e._withTask||e,n)}function we(n,r){if(!t(n.data.on)||!t(r.data.on)){var i=r.data.on||{},o=n.data.on||{};si=r.elm,function(t){if(e(t[Li])){var n=Qn?"change":"input";t[n]=[].concat(t[Li],t[n]||[]),delete t[Li]}e(t[Mi])&&(t.change=[].concat(t[Mi],t.change||[]),delete t[Mi])}(i),X(i,o,$e,Ce,r.context),si=void 0}}function xe(n,r){if(!t(n.data.domProps)||!t(r.data.domProps)){var i,o,a=r.elm,s=n.data.domProps||{},u=r.data.domProps||{};e(u.__ob__)&&(u=r.data.domProps=h({},u));for(i in s)t(u[i])&&(a[i]="");for(i in u){if(o=u[i],"textContent"===i||"innerHTML"===i){if(r.children&&(r.children.length=0),o===s[i])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===i){a._value=o;var l=t(o)?"":String(o);(function(t,n){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,n)||function(t,n){var r=t.value,i=t._vModifiers;if(e(i)){if(i.lazy)return!1;if(i.number)return c(r)!==c(n);if(i.trim)return r.trim()!==n.trim()}return r!==n}(t,n))})(a,l)&&(a.value=l)}else a[i]=o}}}function ke(t){var e=Ae(t.style);return t.staticStyle?h(t.staticStyle,e):e}function Ae(t){return Array.isArray(t)?m(t):"string"==typeof t?Fi(t):t}function Oe(n,r){var i=r.data,o=n.data;if(!(t(i.staticStyle)&&t(i.style)&&t(o.staticStyle)&&t(o.style))){var a,s,c=r.elm,u=o.staticStyle,l=o.normalizedStyle||o.style||{},f=u||l,d=Ae(r.data.style)||{};r.data.normalizedStyle=e(d.__ob__)?h({},d):d;var p=function(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=ke(i.data))&&h(r,n);(n=ke(t.data))&&h(r,n);for(var o=t;o=o.parent;)o.data&&(n=ke(o.data))&&h(r,n);return r}(r,!0);for(s in f)t(p[s])&&Bi(c,s,"");for(s in p)(a=p[s])!==f[s]&&Bi(c,s,null==a?"":a)}}function Se(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Te(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Ee(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&h(e,Ki(t.name||"v")),h(e,t),e}return"string"==typeof t?Ki(t):void 0}}function je(t){Qi(function(){Qi(t)})}function Ne(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Se(t,e))}function Ie(t,e){t._transitionClasses&&l(t._transitionClasses,e),Te(t,e)}function Le(t,e,n){var r=Me(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===qi?Zi:Yi,c=0,u=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++c>=a&&u()};setTimeout(function(){c<a&&u()},o+1),t.addEventListener(s,l)}function Me(t,e){var n,r=window.getComputedStyle(t),i=r[Gi+"Delay"].split(", "),o=r[Gi+"Duration"].split(", "),a=De(i,o),s=r[Xi+"Delay"].split(", "),c=r[Xi+"Duration"].split(", "),u=De(s,c),l=0,f=0;e===qi?a>0&&(n=qi,l=a,f=o.length):e===Wi?u>0&&(n=Wi,l=u,f=c.length):f=(n=(l=Math.max(a,u))>0?a>u?qi:Wi:null)?n===qi?o.length:c.length:0;return{type:n,timeout:l,propCount:f,hasTransform:n===qi&&to.test(r[Gi+"Property"])}}function De(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Pe(e)+Pe(t[n])}))}function Pe(t){return 1e3*Number(t.slice(0,-1))}function Fe(n,r){var o=n.elm;e(o._leaveCb)&&(o._leaveCb.cancelled=!0,o._leaveCb());var a=Ee(n.data.transition);if(!t(a)&&!e(o._enterCb)&&1===o.nodeType){for(var s=a.css,u=a.type,l=a.enterClass,f=a.enterToClass,d=a.enterActiveClass,p=a.appearClass,v=a.appearToClass,h=a.appearActiveClass,m=a.beforeEnter,y=a.enter,g=a.afterEnter,_=a.enterCancelled,$=a.beforeAppear,C=a.appear,w=a.afterAppear,x=a.appearCancelled,k=a.duration,A=Pr,O=Pr.$vnode;O&&O.parent;)A=(O=O.parent).context;var S=!A._isMounted||!n.isRootInsert;if(!S||C||""===C){var T=S&&p?p:l,E=S&&h?h:d,j=S&&v?v:f,N=S?$||m:m,I=S&&"function"==typeof C?C:y,L=S?w||g:g,M=S?x||_:_,D=c(i(k)?k.enter:k),P=!1!==s&&!tr,F=Be(I),R=o._enterCb=b(function(){P&&(Ie(o,j),Ie(o,E)),R.cancelled?(P&&Ie(o,T),M&&M(o)):L&&L(o),o._enterCb=null});n.data.show||Y(n,"insert",function(){var t=o.parentNode,e=t&&t._pending&&t._pending[n.key];e&&e.tag===n.tag&&e.elm._leaveCb&&e.elm._leaveCb(),I&&I(o,R)}),N&&N(o),P&&(Ne(o,T),Ne(o,E),je(function(){Ne(o,j),Ie(o,T),R.cancelled||F||(He(D)?setTimeout(R,D):Le(o,u,R))})),n.data.show&&(r&&r(),I&&I(o,R)),P||F||R()}}}function Re(n,r){function o(){x.cancelled||(n.data.show||((a.parentNode._pending||(a.parentNode._pending={}))[n.key]=n),v&&v(a),$&&(Ne(a,f),Ne(a,p),je(function(){Ne(a,d),Ie(a,f),x.cancelled||C||(He(w)?setTimeout(x,w):Le(a,l,x))})),h&&h(a,x),$||C||x())}var a=n.elm;e(a._enterCb)&&(a._enterCb.cancelled=!0,a._enterCb());var s=Ee(n.data.transition);if(t(s)||1!==a.nodeType)return r();if(!e(a._leaveCb)){var u=s.css,l=s.type,f=s.leaveClass,d=s.leaveToClass,p=s.leaveActiveClass,v=s.beforeLeave,h=s.leave,m=s.afterLeave,y=s.leaveCancelled,g=s.delayLeave,_=s.duration,$=!1!==u&&!tr,C=Be(h),w=c(i(_)?_.leave:_),x=a._leaveCb=b(function(){a.parentNode&&a.parentNode._pending&&(a.parentNode._pending[n.key]=null),$&&(Ie(a,d),Ie(a,p)),x.cancelled?($&&Ie(a,f),y&&y(a)):(r(),m&&m(a)),a._leaveCb=null});g?g(o):o()}}function He(t){return"number"==typeof t&&!isNaN(t)}function Be(n){if(t(n))return!1;var r=n.fns;return e(r)?Be(Array.isArray(r)?r[0]:r):(n._length||n.length)>1}function Ue(t,e){!0!==e.data.show&&Fe(e)}function Ve(t,e,n){ze(t,e,n),(Qn||er)&&setTimeout(function(){ze(t,e,n)},0)}function ze(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=t.options.length;s<c;s++)if(a=t.options[s],i)o=_(r,Je(a))>-1,a.selected!==o&&(a.selected=o);else if(g(Je(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Ke(t,e){return e.every(function(e){return!g(e,t)})}function Je(t){return"_value"in t?t._value:t.value}function qe(t){t.target.composing=!0}function We(t){t.target.composing&&(t.target.composing=!1,Ge(t.target,"input"))}function Ge(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Ze(t){return!t.componentInstance||t.data&&t.data.transition?t:Ze(t.componentInstance._vnode)}function Xe(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Xe(it(e.children)):t}function Ye(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[Pn(o)]=i[o];return e}function Qe(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function tn(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function en(t){t.data.newPos=t.elm.getBoundingClientRect()}function nn(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function rn(t,e){var n=e?zo:Vo;return t.replace(n,function(t){return Uo[t]})}function on(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].name]=t[n].value;return e}(e),parent:n,children:[]}}function an(t,e){function n(t){t.pre&&(s=!1),Lo(t.tag)&&(c=!1)}To=e.warn||se,Lo=e.isPreTag||Bn,Mo=e.mustUseProp||Bn,Do=e.getTagNamespace||Bn,jo=ce(e.modules,"transformNode"),No=ce(e.modules,"preTransformNode"),Io=ce(e.modules,"postTransformNode"),Eo=e.delimiters;var r,i,o=[],a=!1!==e.preserveWhitespace,s=!1,c=!1;return function(t,e){function n(e){l+=e,t=t.substring(e)}function r(t,n,r){var i,s;if(null==n&&(n=l),null==r&&(r=l),t&&(s=t.toLowerCase()),t)for(i=a.length-1;i>=0&&a[i].lowerCasedTag!==s;i--);else i=0;if(i>=0){for(var c=a.length-1;c>=i;c--)e.end&&e.end(a[c].tag,n,r);a.length=i,o=i&&a[i-1].tag}else"br"===s?e.start&&e.start(t,[],!0,n,r):"p"===s&&(e.start&&e.start(t,[],!1,n,r),e.end&&e.end(t,n,r))}for(var i,o,a=[],s=e.expectHTML,c=e.isUnaryTag||Bn,u=e.canBeLeftOpenTag||Bn,l=0;t;){if(i=t,o&&Ho(o)){var f=0,d=o.toLowerCase(),p=Bo[d]||(Bo[d]=new RegExp("([\\s\\S]*?)(</"+d+"[^>]*>)","i")),v=t.replace(p,function(t,n,r){return f=r.length,Ho(d)||"noscript"===d||(n=n.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Jo(d,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});l+=t.length-v.length,t=v,r(d,l-f,l)}else{var h=t.indexOf("<");if(0===h){if(Ao.test(t)){var m=t.indexOf("--\x3e");if(m>=0){e.shouldKeepComment&&e.comment(t.substring(4,m)),n(m+3);continue}}if(Oo.test(t)){var y=t.indexOf("]>");if(y>=0){n(y+2);continue}}var g=t.match(ko);if(g){n(g[0].length);continue}var _=t.match(xo);if(_){var b=l;n(_[0].length),r(_[1],b,l);continue}var $=function(){var e=t.match(Co);if(e){var r={tagName:e[1],attrs:[],start:l};n(e[0].length);for(var i,o;!(i=t.match(wo))&&(o=t.match(_o));)n(o[0].length),r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=l,r}}();if($){!function(t){var n=t.tagName,i=t.unarySlash;s&&("p"===o&&go(n)&&r(o),u(n)&&o===n&&r(n));for(var l=c(n)||!!i,f=t.attrs.length,d=new Array(f),p=0;p<f;p++){var v=t.attrs[p];So&&-1===v[0].indexOf('""')&&(""===v[3]&&delete v[3],""===v[4]&&delete v[4],""===v[5]&&delete v[5]);var h=v[3]||v[4]||v[5]||"",m="a"===n&&"href"===v[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;d[p]={name:v[1],value:rn(h,m)}}l||(a.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d}),o=n),e.start&&e.start(n,d,l,t.start,t.end)}($),Jo(o,t)&&n(1);continue}}var C=void 0,w=void 0,x=void 0;if(h>=0){for(w=t.slice(h);!(xo.test(w)||Co.test(w)||Ao.test(w)||Oo.test(w)||(x=w.indexOf("<",1))<0);)h+=x,w=t.slice(h);C=t.substring(0,h),n(h)}h<0&&(C=t,t=""),e.chars&&C&&e.chars(C)}if(t===i){e.chars&&e.chars(t);break}}r()}(t,{warn:To,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,a,u){var l=i&&i.ns||Do(t);Qn&&"svg"===l&&(a=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];na.test(r.name)||(r.name=r.name.replace(ra,""),e.push(r))}return e}(a));var f=on(t,a,i);l&&(f.ns=l),function(t){return"style"===t.tag||"script"===t.tag&&(!t.attrsMap.type||"text/javascript"===t.attrsMap.type)}(f)&&!ur()&&(f.forbidden=!0);for(var d=0;d<No.length;d++)f=No[d](f,e)||f;if(s||(!function(t){null!=ve(t,"v-pre")&&(t.pre=!0)}(f),f.pre&&(s=!0)),Lo(f.tag)&&(c=!0),s?function(t){var e=t.attrsList.length;if(e)for(var n=t.attrs=new Array(e),r=0;r<e;r++)n[r]={name:t.attrsList[r].name,value:JSON.stringify(t.attrsList[r].value)};else t.pre||(t.plain=!0)}(f):f.processed||(cn(f),function(t){var e=ve(t,"v-if");if(e)t.if=e,un(t,{exp:e,block:t});else{null!=ve(t,"v-else")&&(t.else=!0);var n=ve(t,"v-else-if");n&&(t.elseif=n)}}(f),function(t){null!=ve(t,"v-once")&&(t.once=!0)}(f),sn(f,e)),r?o.length||r.if&&(f.elseif||f.else)&&un(r,{exp:f.elseif,block:f}):r=f,i&&!f.forbidden)if(f.elseif||f.else)!function(t,e){var n=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];t.pop()}}(e.children);n&&n.if&&un(n,{exp:t.elseif,block:t})}(f,i);else if(f.slotScope){i.plain=!1;var p=f.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[p]=f}else i.children.push(f),f.parent=i;u?n(f):(i=f,o.push(f));for(var v=0;v<Io.length;v++)Io[v](f,e)},end:function(){var t=o[o.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!c&&t.children.pop(),o.length-=1,i=o[o.length-1],n(t)},chars:function(t){if(i&&(!Qn||"textarea"!==i.tag||i.attrsMap.placeholder!==t)){var e=i.children;if(t=c||t.trim()?function(t){return"script"===t.tag||"style"===t.tag}(i)?t:ea(t):a&&e.length?" ":""){var n;!s&&" "!==t&&(n=function(t,e){var n=e?fo(e):uo;if(n.test(t)){for(var r,i,o=[],a=n.lastIndex=0;r=n.exec(t);){(i=r.index)>a&&o.push(JSON.stringify(t.slice(a,i)));var s=ae(r[1].trim());o.push("_s("+s+")"),a=i+r[0].length}return a<t.length&&o.push(JSON.stringify(t.slice(a))),o.join("+")}}(t,Eo))?e.push({type:2,expression:n,text:t}):" "===t&&e.length&&" "===e[e.length-1].text||e.push({type:3,text:t})}}},comment:function(t){i.children.push({type:3,text:t,isComment:!0})}}),r}function sn(t,e){!function(t){var e=pe(t,"key");e&&(t.key=e)}(t),t.plain=!t.key&&!t.attrsList.length,function(t){var e=pe(t,"ref");e&&(t.ref=e,t.refInFor=function(t){var e=t;for(;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(t))}(t),function(t){if("slot"===t.tag)t.slotName=pe(t,"name");else{var e;"template"===t.tag?(e=ve(t,"scope"),t.slotScope=e||ve(t,"slot-scope")):(e=ve(t,"slot-scope"))&&(t.slotScope=e);var n=pe(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,"template"===t.tag||t.slotScope||le(t,"slot",n))}}(t),function(t){var e;(e=pe(t,"is"))&&(t.component=e);null!=ve(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var n=0;n<jo.length;n++)t=jo[n](t,e)||t;!function(t){var e,n,r,i,o,a,s,c=t.attrsList;for(e=0,n=c.length;e<n;e++)if(r=i=c[e].name,o=c[e].value,Wo.test(r))if(t.hasBindings=!0,(a=function(t){var e=t.match(ta);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}(r))&&(r=r.replace(ta,"")),Qo.test(r))r=r.replace(Qo,""),o=ae(o),s=!1,a&&(a.prop&&(s=!0,"innerHtml"===(r=Pn(r))&&(r="innerHTML")),a.camel&&(r=Pn(r)),a.sync&&de(t,"update:"+Pn(r),me(o,"$event"))),s||!t.component&&Mo(t.tag,t.attrsMap.type,r)?ue(t,r,o):le(t,r,o);else if(qo.test(r))r=r.replace(qo,""),de(t,r,o,a,!1);else{var u=(r=r.replace(Wo,"")).match(Yo),l=u&&u[1];l&&(r=r.slice(0,-(l.length+1))),fe(t,r,i,o,l,a)}else le(t,r,JSON.stringify(o)),!t.component&&"muted"===r&&Mo(t.tag,t.attrsMap.type,r)&&ue(t,r,"true")}(t)}function cn(t){var e;if(e=ve(t,"v-for")){var n=e.match(Go);if(!n)return;t.for=n[2].trim();var r=n[1].trim().replace(Xo,""),i=r.match(Zo);i?(t.alias=r.replace(Zo,""),t.iterator1=i[1].trim(),i[2]&&(t.iterator2=i[2].trim())):t.alias=r}}function un(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function ln(t){return on(t.tag,t.attrsList.slice(),t.parent)}function fn(t,e,n){t.attrsMap[e]=n,t.attrsList.push({name:e,value:n})}function dn(t){if(t.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||In(t.tag)||!Fo(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(Po)))}(t),1===t.type){if(!Fo(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var e=0,n=t.children.length;e<n;e++){var r=t.children[e];dn(r),r.static||(t.static=!1)}if(t.ifConditions)for(var i=1,o=t.ifConditions.length;i<o;i++){var a=t.ifConditions[i].block;dn(a),a.static||(t.static=!1)}}}function pn(t,e){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=e),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)pn(t.children[n],e||!!t.for);if(t.ifConditions)for(var i=1,o=t.ifConditions.length;i<o;i++)pn(t.ifConditions[i].block,e)}}function vn(t,e,n){var r=e?"nativeOn:{":"on:{";for(var i in t)r+='"'+i+'":'+hn(i,t[i])+",";return r.slice(0,-1)+"}"}function hn(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return hn(t,e)}).join(",")+"]";var n=ca.test(e.value),r=sa.test(e.value);if(e.modifiers){var i="",o="",a=[];for(var s in e.modifiers)if(fa[s])o+=fa[s],ua[s]&&a.push(s);else if("exact"===s){var c=e.modifiers;o+=la(["ctrl","shift","alt","meta"].filter(function(t){return!c[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(s);a.length&&(i+=function(t){return"if(!('button' in $event)&&"+t.map(mn).join("&&")+")return null;"}(a)),o&&(i+=o);return"function($event){"+i+(n?e.value+"($event)":r?"("+e.value+")($event)":e.value)+"}"}return n||r?e.value:"function($event){"+e.value+"}"}function mn(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=ua[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key)"}function yn(t,e){var n=new pa(e);return{render:"with(this){return "+(t?gn(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function gn(t,e){if(t.staticRoot&&!t.staticProcessed)return _n(t,e);if(t.once&&!t.onceProcessed)return bn(t,e);if(t.for&&!t.forProcessed)return function(t,e,n,r){var i=t.for,o=t.alias,a=t.iterator1?","+t.iterator1:"",s=t.iterator2?","+t.iterator2:"";return t.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+a+s+"){return "+(n||gn)(t,e)+"})"}(t,e);if(t.if&&!t.ifProcessed)return $n(t,e);if("template"!==t.tag||t.slotTarget){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',r=kn(t,e),i="_t("+n+(r?","+r:""),o=t.attrs&&"{"+t.attrs.map(function(t){return Pn(t.name)+":"+t.value}).join(",")+"}",a=t.attrsMap["v-bind"];!o&&!a||r||(i+=",null");o&&(i+=","+o);a&&(i+=(o?"":",null")+","+a);return i+")"}(t,e);var n;if(t.component)n=function(t,e,n){var r=e.inlineTemplate?null:kn(e,n,!0);return"_c("+t+","+wn(e,n)+(r?","+r:"")+")"}(t.component,t,e);else{var r=t.plain?void 0:wn(t,e),i=t.inlineTemplate?null:kn(t,e,!0);n="_c('"+t.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<e.transforms.length;o++)n=e.transforms[o](t,n);return n}return kn(t,e)||"void 0"}function _n(t,e){return t.staticProcessed=!0,e.staticRenderFns.push("with(this){return "+gn(t,e)+"}"),"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function bn(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return $n(t,e);if(t.staticInFor){for(var n="",r=t.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+gn(t,e)+","+e.onceId+++","+n+")":gn(t,e)}return _n(t,e)}function $n(t,e,n,r){return t.ifProcessed=!0,Cn(t.ifConditions.slice(),e,n,r)}function Cn(t,e,n,r){function i(t){return n?n(t,e):t.once?bn(t,e):gn(t,e)}if(!t.length)return r||"_e()";var o=t.shift();return o.exp?"("+o.exp+")?"+i(o.block)+":"+Cn(t,e,n,r):""+i(o.block)}function wn(t,e){var n="{",r=function(t,e){var n=t.directives;if(!n)return;var r,i,o,a,s="directives:[",c=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var u=e.directives[o.name];u&&(a=!!u(t,o,e.warn)),a&&(c=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?',arg:"'+o.arg+'"':"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}if(c)return s.slice(0,-1)+"]"}(t,e);r&&(n+=r+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var i=0;i<e.dataGenFns.length;i++)n+=e.dataGenFns[i](t);if(t.attrs&&(n+="attrs:{"+On(t.attrs)+"},"),t.props&&(n+="domProps:{"+On(t.props)+"},"),t.events&&(n+=vn(t.events,!1,e.warn)+","),t.nativeEvents&&(n+=vn(t.nativeEvents,!0,e.warn)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=function(t,e){return"scopedSlots:_u(["+Object.keys(t).map(function(n){return xn(n,t[n],e)}).join(",")+"])"}(t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var o=function(t,e){var n=t.children[0];if(1===n.type){var r=yn(n,e.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function xn(t,e,n){if(e.for&&!e.forProcessed)return function(t,e,n){var r=e.for,i=e.alias,o=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+r+"),function("+i+o+a+"){return "+xn(t,e,n)+"})"}(t,e,n);return"{key:"+t+",fn:"+("function("+String(e.slotScope)+"){return "+("template"===e.tag?e.if?e.if+"?"+(kn(e,n)||"undefined")+":undefined":kn(e,n)||"undefined":gn(e,n))+"}")+"}"}function kn(t,e,n,r,i){var o=t.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag)return(r||gn)(a,e);var s=n?function(t,e){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(1===i.type){if(An(i)||i.ifConditions&&i.ifConditions.some(function(t){return An(t.block)})){n=2;break}(e(i)||i.ifConditions&&i.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}(o,e.maybeComponent):0,c=i||function(t,e){if(1===t.type)return gn(t,e);return 3===t.type&&t.isComment?function(t){return"_e("+JSON.stringify(t.text)+")"}(t):function(t){return"_v("+(2===t.type?t.expression:Sn(JSON.stringify(t.text)))+")"}(t)};return"["+o.map(function(t){return c(t,e)}).join(",")+"]"+(s?","+s:"")}}function An(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function On(t){for(var e="",n=0;n<t.length;n++){var r=t[n];e+='"'+r.name+'":'+Sn(r.value)+","}return e.slice(0,-1)}function Sn(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Tn(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),y}}function En(t){return Ro=Ro||document.createElement("div"),Ro.innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Ro.innerHTML.indexOf("&#10;")>0}var jn=Object.freeze({}),Nn=Object.prototype.toString,In=u("slot,component",!0),Ln=u("key,ref,slot,slot-scope,is"),Mn=Object.prototype.hasOwnProperty,Dn=/-(\w)/g,Pn=d(function(t){return t.replace(Dn,function(t,e){return e?e.toUpperCase():""})}),Fn=d(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),Rn=/\B([A-Z])/g,Hn=d(function(t){return t.replace(Rn,"-$1").toLowerCase()}),Bn=function(t,e,n){return!1},Un=function(t){return t},Vn="data-server-rendered",zn=["component","directive","filter"],Kn=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],Jn={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Bn,isReservedAttr:Bn,isUnknownElement:Bn,getTagNamespace:y,parsePlatformTagName:Un,mustUseProp:Bn,_lifecycleHooks:Kn},qn=/[^\w.$]/,Wn="__proto__"in{},Gn="undefined"!=typeof window,Zn="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Xn=Zn&&WXEnvironment.platform.toLowerCase(),Yn=Gn&&window.navigator.userAgent.toLowerCase(),Qn=Yn&&/msie|trident/.test(Yn),tr=Yn&&Yn.indexOf("msie 9.0")>0,er=Yn&&Yn.indexOf("edge/")>0,nr=Yn&&Yn.indexOf("android")>0||"android"===Xn,rr=Yn&&/iphone|ipad|ipod|ios/.test(Yn)||"ios"===Xn,ir=(Yn&&/chrome\/\d+/.test(Yn),{}.watch),or=!1;if(Gn)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){or=!0}}),window.addEventListener("test-passive",null,ar)}catch(t){}var sr,cr,ur=function(){return void 0===sr&&(sr=!Gn&&"undefined"!=typeof global&&"server"===global.process.env.VUE_ENV),sr},lr=Gn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,fr="undefined"!=typeof Symbol&&w(Symbol)&&"undefined"!=typeof Reflect&&w(Reflect.ownKeys);cr="undefined"!=typeof Set&&w(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var dr=y,pr=0,vr=function(){this.id=pr++,this.subs=[]};vr.prototype.addSub=function(t){this.subs.push(t)},vr.prototype.removeSub=function(t){l(this.subs,t)},vr.prototype.depend=function(){vr.target&&vr.target.addDep(this)},vr.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},vr.target=null;var hr=[],mr=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},yr={child:{configurable:!0}};yr.child.get=function(){return this.componentInstance},Object.defineProperties(mr.prototype,yr);var gr=function(t){void 0===t&&(t="");var e=new mr;return e.text=t,e.isComment=!0,e},_r=Array.prototype,br=Object.create(_r);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=_r[t];C(br,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var $r=Object.getOwnPropertyNames(br),Cr={shouldConvert:!0},wr=function(t){if(this.value=t,this.dep=new vr,this.vmCount=0,C(t,"__ob__",this),Array.isArray(t)){(Wn?O:S)(t,br,$r),this.observeArray(t)}else this.walk(t)};wr.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)E(t,e[n],t[e[n]])},wr.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)T(t[e])};var xr=Jn.optionMergeStrategies;xr.data=function(t,e,n){return n?M(t,e,n):e&&"function"!=typeof e?t:M(t,e)},Kn.forEach(function(t){xr[t]=D}),zn.forEach(function(t){xr[t+"s"]=P}),xr.watch=function(t,e,n,r){if(t===ir&&(t=void 0),e===ir&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};h(i,t);for(var o in e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},xr.props=xr.methods=xr.inject=xr.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return h(i,t),e&&h(i,e),i},xr.provide=M;var kr,Ar,Or=function(t,e){return void 0===e?t:e},Sr=[],Tr=!1,Er=!1;if("undefined"!=typeof setImmediate&&w(setImmediate))Ar=function(){setImmediate(J)};else if("undefined"==typeof MessageChannel||!w(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Ar=function(){setTimeout(J,0)};else{var jr=new MessageChannel,Nr=jr.port2;jr.port1.onmessage=J,Ar=function(){Nr.postMessage(1)}}if("undefined"!=typeof Promise&&w(Promise)){var Ir=Promise.resolve();kr=function(){Ir.then(J),rr&&setTimeout(y)}}else kr=Ar;var Lr,Mr=new cr,Dr=d(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}),Pr=null,Fr=[],Rr=[],Hr={},Br=!1,Ur=!1,Vr=0,zr=0,Kr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++zr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cr,this.newDepIds=new cr,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!qn.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Kr.prototype.get=function(){!function(t){vr.target&&hr.push(vr.target),vr.target=t}(this);var t,e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;V(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&W(t),vr.target=hr.pop(),this.cleanupDeps()}return t},Kr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Kr.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Kr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Hr[e]){if(Hr[e]=!0,Ur){for(var n=Fr.length-1;n>Vr&&Fr[n].id>t.id;)n--;Fr.splice(n+1,0,t)}else Fr.push(t);Br||(Br=!0,q(ht))}}(this)},Kr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||i(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){V(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Kr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Kr.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Kr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||l(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Jr={enumerable:!0,configurable:!0,get:y,set:y},qr={lazy:!0};Nt(It.prototype);var Wr={init:function(t,n,r,i){if(!t.componentInstance||t.componentInstance._isDestroyed){(t.componentInstance=function(t,n,r,i){var o={_isComponent:!0,parent:n,_parentVnode:t,_parentElm:r||null,_refElm:i||null},a=t.data.inlineTemplate;return e(a)&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns),new t.componentOptions.Ctor(o)}(t,Pr,r,i)).$mount(n?t.elm:void 0,n)}else if(t.data.keepAlive){var o=t;Wr.prepatch(o,o)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,r,i){var o=!!(i||t.$options._renderChildren||r.data.scopedSlots||t.$scopedSlots!==jn);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=i,t.$attrs=r.data&&r.data.attrs||jn,t.$listeners=n||jn,e&&t.$options.props){Cr.shouldConvert=!1;for(var a=t._props,s=t.$options._propKeys||[],c=0;c<s.length;c++){var u=s[c];a[u]=H(u,t.$options.props,e,t)}Cr.shouldConvert=!0,t.$options.propsData=e}if(n){var l=t.$options._parentListeners;t.$options._parentListeners=n,st(t,n,l)}o&&(t.$slots=ct(i,r.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,vt(n,"mounted")),t.data.keepAlive&&(e._isMounted?function(t){t._inactive=!1,Rr.push(t)}(n):dt(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?pt(e,!0):e.$destroy())}},Gr=Object.keys(Wr),Zr=1,Xr=2,Yr=0;!function(t){t.prototype._init=function(t){this._uid=Yr++,this._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(this,t):this.$options=F(Ft(this.constructor),t||{},this),this._renderProxy=this,this._self=this,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(this),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&st(t,e)}(this),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,r=n&&n.context;t.$slots=ct(e._renderChildren,r),t.$scopedSlots=jn,t._c=function(e,n,r,i){return Dt(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return Dt(t,e,n,r,i,!0)};var i=n&&n.data;E(t,"$attrs",i&&i.attrs||jn,0,!0),E(t,"$listeners",e._parentListeners||jn,0,!0)}(this),vt(this,"beforeCreate"),function(t){var e=$t(t.$options.inject,t);e&&(Cr.shouldConvert=!1,Object.keys(e).forEach(function(n){E(t,n,e[n])}),Cr.shouldConvert=!0)}(this),yt(this),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(this),vt(this,"created"),this.$options.el&&this.$mount(this.$options.el)}}(Rt),function(t){var e={};e.get=function(){return this._data};var n={};n.get=function(){return this._props},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=j,t.prototype.$delete=N,t.prototype.$watch=function(t,e,n){if(o(e))return bt(this,t,e,n);(n=n||{}).user=!0;var r=new Kr(this,t,e,n);return n.immediate&&e.call(this,r.value),function(){r.teardown()}}}(Rt),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.$on(t[r],n);else(this._events[t]||(this._events[t]=[])).push(n),e.test(t)&&(this._hasHookEvent=!0);return this},t.prototype.$once=function(t,e){function n(){r.$off(t,n),e.apply(r,arguments)}var r=this;return n.fn=e,r.$on(t,n),r},t.prototype.$off=function(t,e){if(!arguments.length)return this._events=Object.create(null),this;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)this.$off(t[n],e);return this}var i=this._events[t];if(!i)return this;if(!e)return this._events[t]=null,this;if(e)for(var o,a=i.length;a--;)if((o=i[a])===e||o.fn===e){i.splice(a,1);break}return this},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?v(n):n;for(var r=v(arguments,1),i=0,o=n.length;i<o;i++)try{n[i].apply(e,r)}catch(n){V(n,e,'event handler for "'+t+'"')}}return e}}(Rt),function(t){t.prototype._update=function(t,e){this._isMounted&&vt(this,"beforeUpdate");var n=this.$el,r=this._vnode,i=Pr;Pr=this,this._vnode=t,r?this.$el=this.__patch__(r,t):(this.$el=this.__patch__(this.$el,t,e,!1,this.$options._parentElm,this.$options._refElm),this.$options._parentElm=this.$options._refElm=null),Pr=i,n&&(n.__vue__=null),this.$el&&(this.$el.__vue__=this),this.$vnode&&this.$parent&&this.$vnode===this.$parent._vnode&&(this.$parent.$el=this.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){if(!this._isBeingDestroyed){vt(this,"beforeDestroy"),this._isBeingDestroyed=!0;var t=this.$parent;!t||t._isBeingDestroyed||this.$options.abstract||l(t.$children,this),this._watcher&&this._watcher.teardown();for(var e=this._watchers.length;e--;)this._watchers[e].teardown();this._data.__ob__&&this._data.__ob__.vmCount--,this._isDestroyed=!0,this.__patch__(this._vnode,null),vt(this,"destroyed"),this.$off(),this.$el&&(this.$el.__vue__=null),this.$vnode&&(this.$vnode.parent=null)}}}(Rt),function(t){Nt(t.prototype),t.prototype.$nextTick=function(t){return q(t,this)},t.prototype._render=function(){var t=this,e=t.$options,n=e.render,r=e._parentVnode;if(t._isMounted)for(var i in t.$slots){var o=t.$slots[i];(o._rendered||o[0]&&o[0].elm)&&(t.$slots[i]=A(o,!0))}t.$scopedSlots=r&&r.data.scopedSlots||jn,t.$vnode=r;var a;try{a=n.call(t._renderProxy,t.$createElement)}catch(e){V(e,t,"render"),a=t._vnode}return a instanceof mr||(a=gr()),a.parent=r,a}}(Rt);var Qr=[String,RegExp,Array],ti={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Qr,exclude:Qr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)zt(this.cache,t,this.keys)},watch:{include:function(t){Vt(this,function(e){return Ut(t,e)})},exclude:function(t){Vt(this,function(e){return!Ut(t,e)})}},render:function(){var t=this.$slots.default,e=it(t),n=e&&e.componentOptions;if(n){var r=Bt(n),i=this.include,o=this.exclude;if(i&&(!r||!Ut(i,r))||o&&r&&Ut(o,r))return e;var a=this.cache,s=this.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[c]?(e.componentInstance=a[c].componentInstance,l(s,c),s.push(c)):(a[c]=e,s.push(c),this.max&&s.length>parseInt(this.max)&&zt(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={};e.get=function(){return Jn},Object.defineProperty(t,"config",e),t.util={warn:dr,extend:h,mergeOptions:F,defineReactive:E},t.set=j,t.delete=N,t.nextTick=q,t.options=Object.create(null),zn.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,h(t.options.components,ti),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=v(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=F(this.options,t),this}}(t),Ht(t),function(t){zn.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&o(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(Rt),Object.defineProperty(Rt.prototype,"$isServer",{get:ur}),Object.defineProperty(Rt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Rt.version="2.5.11";var ei,ni,ri,ii,oi,ai,si,ci,ui=u("style,class"),li=u("input,textarea,option,select,progress"),fi=function(t,e,n){return"value"===n&&li(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},di=u("contenteditable,draggable,spellcheck"),pi=u("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),vi="http://www.w3.org/1999/xlink",hi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},mi=function(t){return hi(t)?t.slice(6,t.length):""},yi=function(t){return null==t||!1===t},gi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},_i=u("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),bi=u("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),$i=function(t){return _i(t)||bi(t)},Ci=Object.create(null),wi=u("text,number,password,search,email,tel,url"),xi=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(t,e){return document.createElementNS(gi[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setAttribute:function(t,e,n){t.setAttribute(e,n)}}),ki={create:function(t,e){Xt(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Xt(t,!0),Xt(e))},destroy:function(t){Xt(t,!0)}},Ai=new mr("",{},[]),Oi=["create","activate","update","remove","destroy"],Si={create:te,update:te,destroy:function(t){te(t,Ai)}},Ti=Object.create(null),Ei=[ki,Si],ji={create:re,update:re},Ni={create:oe,update:oe},Ii=/[\w).+\-_$\]]/,Li="__r",Mi="__c",Di={create:we,update:we},Pi={create:xe,update:xe},Fi=d(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}),Ri=/^--/,Hi=/\s*!important$/,Bi=function(t,e,n){if(Ri.test(e))t.style.setProperty(e,n);else if(Hi.test(n))t.style.setProperty(e,n.replace(Hi,""),"important");else{var r=Vi(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},Ui=["Webkit","Moz","ms"],Vi=d(function(t){if(ci=ci||document.createElement("div").style,"filter"!==(t=Pn(t))&&t in ci)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Ui.length;n++){var r=Ui[n]+e;if(r in ci)return r}}),zi={create:Oe,update:Oe},Ki=d(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Ji=Gn&&!tr,qi="transition",Wi="animation",Gi="transition",Zi="transitionend",Xi="animation",Yi="animationend";Ji&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Gi="WebkitTransition",Zi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Xi="WebkitAnimation",Yi="webkitAnimationEnd"));var Qi=Gn?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()},to=/\b(transform|all)(,|$)/,eo=function(i){function o(t){var n=A.parentNode(t);e(n)&&A.removeChild(n,t)}function a(t,r,i,o,a){if(t.isRootInsert=!a,!function(t,r,i,o){var a=t.data;if(e(a)){var u=e(t.componentInstance)&&a.keepAlive;if(e(a=a.hook)&&e(a=a.init)&&a(t,!1,i,o),e(t.componentInstance))return s(t,r),n(u)&&function(t,n,r,i){for(var o,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,e(o=a.data)&&e(o=o.transition)){for(o=0;o<x.activate.length;++o)x.activate[o](Ai,a);n.push(a);break}c(r,t.elm,i)}(t,r,i,o),!0}}(t,r,i,o)){var u=t.data,f=t.children,v=t.tag;e(v)?(t.elm=t.ns?A.createElementNS(t.ns,v):A.createElement(v,t),p(t),l(t,f,r),e(u)&&d(t,r),c(i,t.elm,o)):n(t.isComment)?(t.elm=A.createComment(t.text),c(i,t.elm,o)):(t.elm=A.createTextNode(t.text),c(i,t.elm,o))}}function s(t,n){e(t.data.pendingInsert)&&(n.push.apply(n,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,f(t)?(d(t,n),p(t)):(Xt(t),n.push(t))}function c(t,n,r){e(t)&&(e(r)?r.parentNode===t&&A.insertBefore(t,n,r):A.appendChild(t,n))}function l(t,e,n){if(Array.isArray(e))for(var i=0;i<e.length;++i)a(e[i],n,t.elm,null,!0);else r(t.text)&&A.appendChild(t.elm,A.createTextNode(t.text))}function f(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return e(t.tag)}function d(t,n){for(var r=0;r<x.create.length;++r)x.create[r](Ai,t);e(C=t.data.hook)&&(e(C.create)&&C.create(Ai,t),e(C.insert)&&n.push(t))}function p(t){var n;if(e(n=t.fnScopeId))A.setAttribute(t.elm,n,"");else for(var r=t;r;)e(n=r.context)&&e(n=n.$options._scopeId)&&A.setAttribute(t.elm,n,""),r=r.parent;e(n=Pr)&&n!==t.context&&n!==t.fnContext&&e(n=n.$options._scopeId)&&A.setAttribute(t.elm,n,"")}function v(t,e,n,r,i,o){for(;r<=i;++r)a(n[r],o,t,e)}function h(t){var n,r,i=t.data;if(e(i))for(e(n=i.hook)&&e(n=n.destroy)&&n(t),n=0;n<x.destroy.length;++n)x.destroy[n](t);if(e(n=t.children))for(r=0;r<t.children.length;++r)h(t.children[r])}function m(t,n,r,i){for(;r<=i;++r){var a=n[r];e(a)&&(e(a.tag)?(y(a),h(a)):o(a.elm))}}function y(t,n){if(e(n)||e(t.data)){var r,i=x.remove.length+1;for(e(n)?n.listeners+=i:n=function(t,e){function n(){0==--n.listeners&&o(t)}return n.listeners=e,n}(t.elm,i),e(r=t.componentInstance)&&e(r=r._vnode)&&e(r.data)&&y(r,n),r=0;r<x.remove.length;++r)x.remove[r](t,n);e(r=t.data.hook)&&e(r=r.remove)?r(t,n):n()}else o(t.elm)}function g(n,r,i,o,s){for(var c,u,l,f=0,d=0,p=r.length-1,h=r[0],y=r[p],g=i.length-1,b=i[0],$=i[g],C=!s;f<=p&&d<=g;)t(h)?h=r[++f]:t(y)?y=r[--p]:Yt(h,b)?(_(h,b,o),h=r[++f],b=i[++d]):Yt(y,$)?(_(y,$,o),y=r[--p],$=i[--g]):Yt(h,$)?(_(h,$,o),C&&A.insertBefore(n,h.elm,A.nextSibling(y.elm)),h=r[++f],$=i[--g]):Yt(y,b)?(_(y,b,o),C&&A.insertBefore(n,y.elm,h.elm),y=r[--p],b=i[++d]):(t(c)&&(c=Qt(r,f,p)),t(u=e(b.key)?c[b.key]:function(t,n,r,i){for(var o=r;o<i;o++){var a=n[o];if(e(a)&&Yt(t,a))return o}}(b,r,f,p))?a(b,o,n,h.elm):Yt(l=r[u],b)?(_(l,b,o),r[u]=void 0,C&&A.insertBefore(n,l.elm,h.elm)):a(b,o,n,h.elm),b=i[++d]);f>p?v(n,t(i[g+1])?null:i[g+1].elm,i,d,g,o):d>g&&m(0,r,f,p)}function _(r,i,o,a){if(r!==i){var s=i.elm=r.elm;if(n(r.isAsyncPlaceholder))e(i.asyncFactory.resolved)?$(r.elm,i,o):i.isAsyncPlaceholder=!0;else if(n(i.isStatic)&&n(r.isStatic)&&i.key===r.key&&(n(i.isCloned)||n(i.isOnce)))i.componentInstance=r.componentInstance;else{var c,u=i.data;e(u)&&e(c=u.hook)&&e(c=c.prepatch)&&c(r,i);var l=r.children,d=i.children;if(e(u)&&f(i)){for(c=0;c<x.update.length;++c)x.update[c](r,i);e(c=u.hook)&&e(c=c.update)&&c(r,i)}t(i.text)?e(l)&&e(d)?l!==d&&g(s,l,d,o,a):e(d)?(e(r.text)&&A.setTextContent(s,""),v(s,null,d,0,d.length-1,o)):e(l)?m(0,l,0,l.length-1):e(r.text)&&A.setTextContent(s,""):r.text!==i.text&&A.setTextContent(s,i.text),e(u)&&e(c=u.hook)&&e(c=c.postpatch)&&c(r,i)}}}function b(t,r,i){if(n(i)&&e(t.parent))t.parent.data.pendingInsert=r;else for(var o=0;o<r.length;++o)r[o].data.hook.insert(r[o])}function $(t,r,i,o){var a,c=r.tag,u=r.data,f=r.children;if(o=o||u&&u.pre,r.elm=t,n(r.isComment)&&e(r.asyncFactory))return r.isAsyncPlaceholder=!0,!0;if(e(u)&&(e(a=u.hook)&&e(a=a.init)&&a(r,!0),e(a=r.componentInstance)))return s(r,i),!0;if(e(c)){if(e(f))if(t.hasChildNodes())if(e(a=u)&&e(a=a.domProps)&&e(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var p=!0,v=t.firstChild,h=0;h<f.length;h++){if(!v||!$(v,f[h],i,o)){p=!1;break}v=v.nextSibling}if(!p||v)return!1}else l(r,f,i);if(e(u)){var m=!1;for(var y in u)if(!O(y)){m=!0,d(r,i);break}!m&&u.class&&W(u.class)}}else t.data!==r.text&&(t.data=r.text);return!0}var C,w,x={},k=i.modules,A=i.nodeOps;for(C=0;C<Oi.length;++C)for(x[Oi[C]]=[],w=0;w<k.length;++w)e(k[w][Oi[C]])&&x[Oi[C]].push(k[w][Oi[C]]);var O=u("attrs,class,staticClass,staticStyle,key");return function(r,i,o,s,c,u){if(!t(i)){var l=!1,d=[];if(t(r))l=!0,a(i,d,c,u);else{var p=e(r.nodeType);if(!p&&Yt(r,i))_(r,i,d,s);else{if(p){if(1===r.nodeType&&r.hasAttribute(Vn)&&(r.removeAttribute(Vn),o=!0),n(o)&&$(r,i,d))return b(i,d,!0),r;r=function(t){return new mr(A.tagName(t).toLowerCase(),{},[],void 0,t)}(r)}var v=r.elm,y=A.parentNode(v);if(a(i,d,v._leaveCb?null:y,A.nextSibling(v)),e(i.parent))for(var g=i.parent,C=f(i);g;){for(var w=0;w<x.destroy.length;++w)x.destroy[w](g);if(g.elm=i.elm,C){for(var k=0;k<x.create.length;++k)x.create[k](Ai,g);var O=g.data.hook.insert;if(O.merged)for(var S=1;S<O.fns.length;S++)O.fns[S]()}else Xt(g);g=g.parent}e(y)?m(0,[r],0,0):e(r.tag)&&h(r)}}return b(i,d,l),i.elm}e(r)&&h(r)}}({nodeOps:xi,modules:[ji,Ni,Di,Pi,zi,Gn?{create:Ue,activate:Ue,remove:function(t,e){!0!==t.data.show?Re(t,e):e()}}:{}].concat(Ei)});tr&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Ge(t,"input")});var no={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Y(n,"postpatch",function(){no.componentUpdated(t,e,n)}):Ve(t,e,n.context),t._vOptions=[].map.call(t.options,Je)):("textarea"===n.tag||wi(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("change",We),nr||(t.addEventListener("compositionstart",qe),t.addEventListener("compositionend",We)),tr&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Ve(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Je);if(i.some(function(t,e){return!g(t,r[e])})){(t.multiple?e.value.some(function(t){return Ke(t,i)}):e.value!==e.oldValue&&Ke(e.value,i))&&Ge(t,"change")}}}},ro={model:no,show:{bind:function(t,e,n){var r=e.value,i=(n=Ze(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Fe(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;if(r!==e.oldValue){(n=Ze(n)).data&&n.data.transition?(n.data.show=!0,r?Fe(n,function(){t.style.display=t.__vOriginalDisplay}):Re(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}}},io={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]},oo={name:"transition",props:io,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||rt(t)})).length){var i=this.mode,o=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return o;var a=Xe(o);if(!a)return o;if(this._leaving)return Qe(t,o);var s="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?s+"comment":s+a.tag:r(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var c=(a.data||(a.data={})).transition=Ye(this),u=this._vnode,l=Xe(u);if(a.data.directives&&a.data.directives.some(function(t){return"show"===t.name})&&(a.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(a,l)&&!rt(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=h({},c);if("out-in"===i)return this._leaving=!0,Y(f,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Qe(t,o);if("in-out"===i){if(rt(a))return u;var d,p=function(){d()};Y(c,"afterEnter",p),Y(c,"enterCancelled",p),Y(f,"delayLeave",function(t){d=t})}}return o}}},ao=h({tag:String,moveClass:String},io);delete ao.mode;var so={Transition:oo,TransitionGroup:{props:ao,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Ye(this),s=0;s<i.length;s++){var c=i[s];c.tag&&null!=c.key&&0!==String(c.key).indexOf("__vlist")&&(o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a)}if(r){for(var u=[],l=[],f=0;f<r.length;f++){var d=r[f];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?u.push(d):l.push(d)}this.kept=t(e,null,u),this.removed=l}return t(e,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(tn),t.forEach(en),t.forEach(nn),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;Ne(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Zi,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Zi,t),n._moveCb=null,Ie(n,e))})}}))},methods:{hasMove:function(t,e){if(!Ji)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Te(n,t)}),Se(n,e),n.style.display="none",this.$el.appendChild(n);var r=Me(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};Rt.config.mustUseProp=fi,Rt.config.isReservedTag=$i,Rt.config.isReservedAttr=ui,Rt.config.getTagNamespace=Gt,Rt.config.isUnknownElement=function(t){if(!Gn)return!0;if($i(t))return!1;if(t=t.toLowerCase(),null!=Ci[t])return Ci[t];var e=document.createElement(t);return t.indexOf("-")>-1?Ci[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Ci[t]=/HTMLUnknownElement/.test(e.toString())},h(Rt.options.directives,ro),h(Rt.options.components,so),Rt.prototype.__patch__=Gn?eo:y,Rt.prototype.$mount=function(t,e){return t=t&&Gn?Zt(t):void 0,function(t,e,n){t.$el=e,t.$options.render||(t.$options.render=gr),vt(t,"beforeMount");var r;return r=function(){t._update(t._render(),n)},new Kr(t,r,y,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,vt(t,"mounted")),t}(this,t,e)},Rt.nextTick(function(){Jn.devtools&&lr&&lr.emit("init",Rt)},0);var co,uo=/\{\{((?:.|\n)+?)\}\}/g,lo=/[-.*+?^${}()|[\]\/\\]/g,fo=d(function(t){var e=t[0].replace(lo,"\\$&"),n=t[1].replace(lo,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")}),po={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var n=ve(t,"class");n&&(t.staticClass=JSON.stringify(n));var r=pe(t,"class",!1);r&&(t.classBinding=r)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}},vo={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var n=ve(t,"style");n&&(t.staticStyle=JSON.stringify(Fi(n)));var r=pe(t,"style",!1);r&&(t.styleBinding=r)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},ho=function(t){return co=co||document.createElement("div"),co.innerHTML=t,co.textContent},mo=u("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),yo=u("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),go=u("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),_o=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,bo="[a-zA-Z_][\\w\\-\\.]*",$o="((?:"+bo+"\\:)?"+bo+")",Co=new RegExp("^<"+$o),wo=/^\s*(\/?)>/,xo=new RegExp("^<\\/"+$o+"[^>]*>"),ko=/^<!DOCTYPE [^>]+>/i,Ao=/^<!--/,Oo=/^<!\[/,So=!1;"x".replace(/x(.)?/g,function(t,e){So=""===e});var To,Eo,jo,No,Io,Lo,Mo,Do,Po,Fo,Ro,Ho=u("script,style,textarea",!0),Bo={},Uo={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},Vo=/&(?:lt|gt|quot|amp);/g,zo=/&(?:lt|gt|quot|amp|#10|#9);/g,Ko=u("pre,textarea",!0),Jo=function(t,e){return t&&Ko(t)&&"\n"===e[0]},qo=/^@|^v-on:/,Wo=/^v-|^@|^:/,Go=/(.*?)\s+(?:in|of)\s+(.*)/,Zo=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Xo=/^\(|\)$/g,Yo=/:(.*)$/,Qo=/^:|^v-bind:/,ta=/\.[^.]+/g,ea=d(ho),na=/^xmlns:NS\d+/,ra=/^NS\d+:/,ia=[po,vo,{preTransformNode:function(t,e){if("input"===t.tag){var n=t.attrsMap;if(n["v-model"]&&(n["v-bind:type"]||n[":type"])){var r=pe(t,"type"),i=ve(t,"v-if",!0),o=i?"&&("+i+")":"",a=null!=ve(t,"v-else",!0),s=ve(t,"v-else-if",!0),c=ln(t);cn(c),fn(c,"type","checkbox"),sn(c,e),c.processed=!0,c.if="("+r+")==='checkbox'"+o,un(c,{exp:c.if,block:c});var u=ln(t);ve(u,"v-for",!0),fn(u,"type","radio"),sn(u,e),un(c,{exp:"("+r+")==='radio'"+o,block:u});var l=ln(t);return ve(l,"v-for",!0),fn(l,":type",r),sn(l,e),un(c,{exp:i,block:l}),a?c.else=!0:s&&(c.elseif=s),c}}}}],oa={expectHTML:!0,modules:ia,directives:{model:function(t,e,n){var r=e.value,i=e.modifiers,o=t.tag,a=t.attrsMap.type;if(t.component)return he(t,r,i),!1;if("select"===o)!function(t,e,n){var r='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";r=r+" "+me(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),de(t,"change",r,null,!0)}(t,r,i);else if("input"===o&&"checkbox"===a)!function(t,e,n){var r=n&&n.number,i=pe(t,"value")||"null",o=pe(t,"true-value")||"true",a=pe(t,"false-value")||"false";ue(t,"checked","Array.isArray("+e+")?_i("+e+","+i+")>-1"+("true"===o?":("+e+")":":_q("+e+","+o+")")),de(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+e+"=$$a.concat([$$v]))}else{$$i>-1&&("+e+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+me(e,"$$c")+"}",null,!0)}(t,r,i);else if("input"===o&&"radio"===a)!function(t,e,n){var r=n&&n.number,i=pe(t,"value")||"null";ue(t,"checked","_q("+e+","+(i=r?"_n("+i+")":i)+")"),de(t,"change",me(e,i),null,!0)}(t,r,i);else if("input"===o||"textarea"===o)!function(t,e,n){var r=t.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,c=!o&&"range"!==r,u=o?"change":"range"===r?Li:"input",l="$event.target.value";s&&(l="$event.target.value.trim()"),a&&(l="_n("+l+")");var f=me(e,l);c&&(f="if($event.target.composing)return;"+f),ue(t,"value","("+e+")"),de(t,u,f,null,!0),(s||a)&&de(t,"blur","$forceUpdate()")}(t,r,i);else if(!Jn.isReservedTag(o))return he(t,r,i),!1;return!0},text:function(t,e){e.value&&ue(t,"textContent","_s("+e.value+")")},html:function(t,e){e.value&&ue(t,"innerHTML","_s("+e.value+")")}},isPreTag:function(t){return"pre"===t},isUnaryTag:mo,mustUseProp:fi,canBeLeftOpenTag:yo,isReservedTag:$i,getTagNamespace:Gt,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(ia)},aa=d(function(t){return u("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))}),sa=/^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,ca=/^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,ua={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},la=function(t){return"if("+t+")return null;"},fa={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:la("$event.target !== $event.currentTarget"),ctrl:la("!$event.ctrlKey"),shift:la("!$event.shiftKey"),alt:la("!$event.altKey"),meta:la("!$event.metaKey"),left:la("'button' in $event && $event.button !== 0"),middle:la("'button' in $event && $event.button !== 1"),right:la("'button' in $event && $event.button !== 2")},da={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:y},pa=function(t){this.options=t,this.warn=t.warn||se,this.transforms=ce(t.modules,"transformCode"),this.dataGenFns=ce(t.modules,"genData"),this.directives=h(h({},da),t.directives);var e=t.isReservedTag||Bn;this.maybeComponent=function(t){return!e(t.tag)},this.onceId=0,this.staticRenderFns=[]},va=(new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),function(t){return function(e){function n(n,r){var i=Object.create(e),o=[],a=[];if(i.warn=function(t,e){(e?a:o).push(t)},r){r.modules&&(i.modules=(e.modules||[]).concat(r.modules)),r.directives&&(i.directives=h(Object.create(e.directives||null),r.directives));for(var s in r)"modules"!==s&&"directives"!==s&&(i[s]=r[s])}var c=t(n,i);return c.errors=o,c.tips=a,c}return{compile:n,compileToFunctions:function(t){var e=Object.create(null);return function(n,r,i){(r=h({},r)).warn,delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(e[o])return e[o];var a=t(n,r),s={},c=[];return s.render=Tn(a.render,c),s.staticRenderFns=a.staticRenderFns.map(function(t){return Tn(t,c)}),e[o]=s}}(n)}}}(function(t,e){var n=an(t.trim(),e);!function(t,e){t&&(Po=aa(e.staticKeys||""),Fo=e.isReservedTag||Bn,dn(t),pn(t,!1))}(n,e);var r=yn(n,e);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}})(oa).compileToFunctions),ha=!!Gn&&En(!1),ma=!!Gn&&En(!0),ya=d(function(t){var e=Zt(t);return e&&e.innerHTML}),ga=Rt.prototype.$mount;return Rt.prototype.$mount=function(t,e){if((t=t&&Zt(t))===document.body||t===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=ya(r));else{if(!r.nodeType)return this;r=r.innerHTML}else t&&(r=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(r){var i=va(r,{shouldDecodeNewlines:ha,shouldDecodeNewlinesForHref:ma,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return ga.call(this,t,e)},Rt.compile=va,Rt});} }
    );
    include.tag( "vue-config",
        { loader: "group", tags: [
            { loader: "script", url: "smk/vue-config.js", load: function () { console.debug( "[smk/vue-config.js]" ); include.module("vue-config",["vue","vue-config.spinner-gif","util"],function(e){"use strict";function n(e,t,r){var s=parseFloat(e.toPrecision(t));if(!r)return s.toLocaleString();var n=Math.floor(s),i=s-n;return n.toLocaleString()+i.toFixed(r).substr(1)}Vue.filter("formatTitle",function(e){return null==(t=e)?"(Null)":t.replace(/([^\w\s]+)/," $1 ").replace(/\s*[A-Z]\S*?\w(?=\W)/g,function(e){return" "+e.trim()+" "}).replace(/\s*[_-]\s*/g," ").toLowerCase().replace(/^\w|\s\w/g,function(e){return e.toUpperCase()}).replace(/\s+/g," ").trim();var t}),Vue.filter("formatNumber",function(e,t,r){return n(e,t,r)}),Vue.filter("formatDate",function(e){return new Date(e).toLocaleString()}),Vue.filter("formatTime",function(e){return r=(t=e)%60,s=Math.trunc((t-r)/60)%60,(n=Math.trunc((t-r-60*s)/60/60))?("0"+n).substr(-2)+":"+("0"+s).substr(-2)+":"+("0"+r).substr(-2):("0"+s).substr(-2)+":"+("0"+r).substr(-2);var t,r,s,n}),Vue.filter("dimensionalNumber",function(e,t,r,s){if(1==t)switch(r){case"imperial":case"miles":return n(e/SMK.UTIL.getMetersPerUnit("mi"),s)+" mi";case"inches":return n(e/SMK.UTIL.getMetersPerUnit("inches"),s)+" in";case"feet":return n(e/SMK.UTIL.getMetersPerUnit("ft"),s)+" ft";case"yards":return n(e/SMK.UTIL.getMetersPerUnit("yd"),s)+" yd";case"nautical-miles":return n(e/SMK.UTIL.getMetersPerUnit("nmi"),s)+" nm";case"kilometers":return n(e/1e3,s)+" km";case"acres":return n(e/SMK.UTIL.getMetersPerUnit("mi"),s)+" mi";case"hectares":return n(e,s)+" m";case"metric":case"meters":default:return n(e,s)+" m"}if(2==t)switch(r){case"imperial":case"miles":return n(e/SMK.UTIL.getMetersPerUnit("mi")/SMK.UTIL.getMetersPerUnit("mi"),s)+" mi&sup2;";case"inches":return n(e/SMK.UTIL.getMetersPerUnit("inches")/SMK.UTIL.getMetersPerUnit("inches"),s)+" in&sup2;";case"feet":return n(e/SMK.UTIL.getMetersPerUnit("ft")/SMK.UTIL.getMetersPerUnit("ft"),s)+" ft&sup2;";case"yards":return n(e/SMK.UTIL.getMetersPerUnit("yd")/SMK.UTIL.getMetersPerUnit("yd"),s)+" yd&sup2;";case"nautical-miles":return n(e/SMK.UTIL.getMetersPerUnit("nmi")/SMK.UTIL.getMetersPerUnit("nmi"),s)+" nmi&sup2;";case"kilometers":return n(e/1e3/1e3,s)+" km&sup2;";case"acres":return n(e/SMK.UTIL.getMetersPerUnit("GunterChain")/SMK.UTIL.getMetersPerUnit("Furlong"),s)+" acres";case"hectares":return n(e/100/100,s)+" ha";case"metric":case"meters":default:return n(e,s)+" m&sup2;"}return n(e,s)}),Vue.component("busy-spinner",{template:'<img class="smk-spinner"    v-if="busy"    v-bind:src="imageUrl"    v-bind:style="{ width: size + \'px\', height: size + \'px\' }">',props:{size:{type:Number,default:24},busy:Boolean},data:function(){return{imageUrl:e["vue-config.spinner-gif"]}}}),Vue.component("status-message",{template:'<div class="smk-message" v-bind:class="\'smk-\' + status"><span v-html="message"></span></div>',props:{status:{type:String,default:"summary"},message:{type:String,default:""}}}),Vue.directive("content",{bind:function(e,t){t.value.create(e)}})});} },
            { loader: "asset", url: "smk/spinner.gif" }
        ] }
    );
window.include.SMK = true
} )( window.include.SMK );

!function(){"use strict";if(window.SMK||(window.SMK={}),window.SMK.ON_FAILURE||(window.SMK.ON_FAILURE=function(e,t){e.parseSource&&(e.message+=", while parsing "+e.parseSource),console.error(e);var r=document.createElement("div");if(r.classList.add("smk-failure"),r.innerHTML="<h1>Simple Map Kit</h1><h2>Initialization of SMK failed</h2><p>"+e+"</p>",t||(t=document.querySelector("body")),t.appendChild(r),!document.getElementById(window.SMK.ON_FAILURE.STYLE_ID)){var n=document.createElement("style");n.id=window.SMK.ON_FAILURE.STYLE_ID,n.textContent=window.SMK.ON_FAILURE.STYLE,document.getElementsByTagName("head")[0].appendChild(n)}}),window.SMK.ON_FAILURE.STYLE_ID||(window.SMK.ON_FAILURE.STYLE_ID="smk-on-failure-style"),window.SMK.ON_FAILURE.STYLE||(window.SMK.ON_FAILURE.STYLE=[".smk-failure {","box-shadow: inset 0px 0px 25px -1px #cc0000;","background-color: white;","font-family: sans-serif;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","padding: 20px;","display: flex;","flex-direction: column;","align-items: stretch;","justify-content: center;","}",".smk-failure h1 { margin: 0; }",".smk-failure h2 { margin: 0; font-size: 1.2em; }",".smk-failure p { font-size: 1.1em; }"].join("")),-1<navigator.userAgent.indexOf("MSIE ")||-1<navigator.userAgent.indexOf("Trident/")){var e,t,r=new Error("SMK will not function in Internet Explorer 11."),n=document.getElementsByTagName("script");try{omgwtf}catch(e){t=e.stack}if(t){var o=t.split(/\s+at\s+/),i=o[o.length-1].match(/[(](.+?)(?:[:]\d+)+[)]/);if(i)for(var a=0;a<n.length;a+=1)if(n[a].src==i[1]){e=n[a];break}}throw window.SMK.INIT=function(e){var t=e.containerSel||e["smk-container-sel"];setTimeout(function(){window.SMK.ON_FAILURE(r,document.querySelector(t))},2e3)},e&&e.attributes&&e.attributes["smk-container-sel"]&&window.SMK.INIT({containerSel:e.attributes["smk-container-sel"].value}),window.SMK.FAILURE=r}try{window.SMK=Object.assign({INIT:c,MAP:{},VIEWER:{},TYPE:{},UTIL:{},COMPONENT:{},CONFIG:{name:"SMK Default Map",viewer:{type:"leaflet",device:"auto",deviceAutoBreakpoint:500,themes:[],location:{extent:[-139.1782,47.6039,-110.3533,60.5939]},baseMap:"Topographic",clusterOption:{showCoverageOnHover:!1}},tools:[]},BOOT:Promise.resolve(),TAGS_DEFINED:!1,BUILD:{commit:"c311d91a5a80cc8a9a40526551ad43bc90ec08d1",branch:"release/v1.0.2",lastCommit:"2020-12-09 10:57:09 -0800",origin:"https://github.com/bcgov/smk.git",version:"1.0.2"},HANDLER:{handler:{},set:function(e,t,r){this.handler[e]||(this.handler[e]={}),this.handler[e][t]=r},get:function(e,t){return this.handler[e]&&this.handler[e][t]?this.handler[e][t]:function(){console.warn("handler "+e+"."+t+" invoked")}},has:function(e,t){return!(!this.handler[e]||!this.handler[e][t])}},PROJECTIONS:[{name:"urn:ogc:def:crs:EPSG::3005",def:"+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"},{name:"bc-albers",alias:"urn:ogc:def:crs:EPSG::3005"}]},window.SMK),window.dojoConfig={has:{"esri-promise-compatibility":1}};var s=document.currentScript;if(!SMK.BASE_URL){var l=s.src.replace(/([/]?)[^/?]+([?].+)?$/,function(e,t){return t});SMK.BASE_URL=new URL(l,document.location).toString(),console.debug("Default base path from",s.src,"is",SMK.BASE_URL)}if(s&&s.attributes&&s.attributes["smk-container-sel"]){var u=s.attributes["smk-container-sel"].value;SMK.INIT=function(){return SMK.BOOT=(SMK.BOOT||Promise.resolve()).then(function(){var e=Error("Cannot call SMK.INIT if map initialized from <script> element");throw SMK.ON_FAILURE(e,document.querySelector(u)),e}),SMK.BOOT},c(null,s)}}catch(e){throw SMK.FAILURE=e}function c(l,u){if(SMK.FAILURE)throw SMK.FAILURE;var c={};function e(t,e,r,n){r||(r=function(){}),n||(n=function(e){return e});var o,i=u&&u.attributes[e]&&u.attributes[e].value,a=l&&(l[e]||l[t]),s=function(){if(a)return console.debug("attr",t,"from INIT arguments:",a),a;if(i)return console.debug("attr",t,"from script element attribute:",i),i;var e=r();return console.debug("attr",t,"from default:",e),e};Object.defineProperty(c,t,{get:function(){return s&&(o=n(s())),s=null,o}})}e("id","smk-id",function(){return Object.keys(SMK.MAP).length+1}),e("containerSel","smk-container-sel"),e("config","smk-config",function(){return"?smk-"},function(e){return Array.isArray(e)?e:e.split(/\s*[|]\s*/).filter(function(e){return!!e})}),e("baseUrl","smk-base-url",function(){return SMK.BASE_URL});var t='SMK "'+c.id+'" initialize';return console.time(t),console.groupCollapsed(t),SMK.BOOT=(SMK.BOOT||Promise.resolve()).then(function(){return c.config.reduce(function(n,e,o){var t=function(t,e){t+=" in config["+o+"]";try{var r=e();return r&&(r.$source=t,n.push(r)),!0}catch(e){throw e.parseSource||(e.parseSource=t),e}};return function(e,t){if("object"==typeof e&&!Array.isArray(e)&&null!==e)return t("object",function(){return{obj:e}})}(e,t)||function(n,o){if(/^[?]/.test(n)){var i=new RegExp("^"+n.substr(1)+"(.+)$","i");return location.search.substr(1).split("&").forEach(function(e,r){var t;try{t=decodeURIComponent(e).match(i)}catch(e){return}t&&f(t[1],function(e,t){return o(e+" in arg["+n+","+r+"]",t)})}),!0}}(e,t)||d(e,t)||f(e,t)||m(e,t),n},[])}).then(function(e){return c.parsedConfig=e,function(t){if(include.option({baseUrl:t.baseUrl+"assets/src/"}),t.id in SMK.MAP)throw new Error('An SMK map with smk-id "'+t.id+'" already exists');return include("smk-map").then(function(){console.log('Creating map "'+t.id+'":',JSON.parse(JSON.stringify(t)));var e=SMK.MAP[t.id]=new SMK.TYPE.SmkMap(t);return e.initialize()})}(c)}).catch(function(e){try{SMK.ON_FAILURE(e,document.querySelector(c.containerSel))}catch(e){console.error("failure showing failure:",e)}throw e}).finally(function(){console.groupEnd(),console.timeEnd(t)}),SMK.BOOT}function d(e,t){if(/^[{].+[}]$/.test(e))return t("json",function(){return{obj:JSON.parse(e)}})}function f(e,r){var t=e.match(/^(.+?)([=](.+))?$/);if(t){var n=t[1].toLowerCase();if(n in h)return r("option["+n+"]",function(){var e=h[n](t[3],function(e,t){return r(e+" in option["+n+"]",t)});if(e)return{obj:e}})}}function m(e,t){return t("url["+e+"]",function(){return{url:e}})}var h={config:function(e,t){d(e,t)||m(e,t)},theme:function(e){var t=e.split(",");if(1!=t.length)throw new Error("-theme needs at least 1 argument");return{viewer:{themes:t}}},device:function(e){var t=e.split(",");if(1!=t.length)throw new Error("-device needs 1 argument");return{viewer:{device:t[0]}}},extent:function(e){var t=e.split(",");if(4!=t.length)throw new Error("-extent needs 4 arguments");return{viewer:{location:{extent:t,center:null,zoom:null}}}},center:function(e){var t=e.split(",");if(t.length<2||3<t.length)throw new Error("-center needs 2 or 3 arguments");var r={center:[t[0],t[1]]};return t[2]&&(r.zoom=t[2]),{viewer:{location:r}}},viewer:function(e){return{viewer:{type:e}}},"active-tool":function(e){var t=e.split(",");if(1!=t.length&&2!=t.length)throw new Error("-active-tool needs 1 or 2 arguments");var r=t[0];return t[1]&&(r+="--"+t[1]),{viewer:{activeTool:r}}},query:function(e){var t=e.split(",");if(t.length<3&&1!=t.length)throw new Error("-query needs at least 3 arguments, or exactly 1");var r="makeshift",n=t[0];if(1==t.length)return{viewer:{activeTool:"QueryParametersTool--"+n+"--"+r},tools:[{type:"query",instance:n+"--"+r,enabled:!0,position:"toolbar",command:{attributeMode:!0},onActivate:"execute"},{type:"toolbar",enabled:!0}],layers:[{id:n,queries:[{id:r,title:"Querying "+n,description:"Created using: "+e,parameters:[{id:"p1",type:"constant",value:1}],predicate:{operator:"equals",arguments:[{operand:"parameter",id:"p1"},{operand:"parameter",id:"p1"}]}}]}]};var o=t[1].trim().toLowerCase();if("and"!=o&&"or"!=o)throw new Error("-query conjunction must be one of: AND, OR");var s=[],l={"~":" contains","^~":" starts with","$~":" ends with","=":" is equal to",">":" is greater than","<":" is less than",">=":" is greater than or equal to","<=":" is less than or equal to"};var i=t.slice(2).map(function(e){var t=e.trim().match(/^(\w+)\s*([$^]?~|=|<=?|>=?)\s*(.+?)$/);if(!t)throw new Error("-query expression is invalid");var r,n,o,i,a=[{operand:"attribute",name:t[1]},{operand:"parameter",id:(r=t[3],n=t[2],o=t[1],i="p"+(s.length+1),"?"==r?s.push({id:i,type:"input",title:o+l[n]}):"@"==r?s.push({id:i,type:"select-unique",title:o+l[n],uniqueAttribute:o}):s.push({id:i,type:"constant",value:JSON.parse(r)}),i)}];switch(t[2].toLowerCase()){case"~":return{operator:"contains",arguments:a};case"^~":return{operator:"starts-with",arguments:a};case"$~":return{operator:"ends-with",arguments:a};case"=":return{operator:"equals",arguments:a};case">":return{operator:"greater-than",arguments:a};case"<":return{operator:"less-than",arguments:a};case">=":return{operator:"not",arguments:[{operator:"less-than",arguments:a}]};case"<=":return{operator:"not",arguments:[{operator:"greater-than",arguments:a}]}}});return{viewer:{activeTool:"QueryParametersTool--"+n+"--"+r},tools:[{type:"query",instance:n+"--"+r,enabled:!0,position:"toolbar",command:{attributeMode:!0},onActivate:"execute"},{type:"toolbar",enabled:!0}],layers:[{id:n,queries:[{id:r,title:"Querying "+n,description:"Created using: "+e,parameters:s,predicate:{operator:o,arguments:i}}]}]}},layer:function(e){var t=e.split(",");if(t.length<2)throw new Error("-layer needs at least 2 arguments");var r="layer-"+e.replace(/[^a-z0-9]+/gi,"-").replace(/(^[-]+)|([-]+$)/g,"").toLowerCase(),n=t[0].trim().toLowerCase();switch(n){case"esri-dynamic":if(t.length<3)throw new Error("-layer=esri-dynamic needs at least 3 arguments");return{layers:[{id:r,type:"esri-dynamic",isVisible:!0,serviceUrl:t[1],mpcmId:t[2],title:t[3]||"ESRI Dynamic "+t[2]}]};case"wms":if(t.length<3)throw new Error("-layer=wms needs at least 3 arguments");return{layers:[{id:r,type:"wms",isVisible:!0,serviceUrl:t[1],layerName:t[2],styleName:t[3],title:t[4]||"WMS "+t[2]}]};case"vector":return{layers:[{id:r,type:"vector",isVisible:!0,dataUrl:t[1],title:t[2]||"Vector "+t[1]}]};default:throw new Error("unknown layer type: "+n)}},"show-tool":function(e){var t=e.split(",");if(t.length<1)throw new Error("-show-tool needs at least 1 argument");return{tools:t.map(function(e){return"all"==e&&(e="*"),{type:e,enabled:!0}})}},"hide-tool":function(e){var t=e.split(",");if(t.length<1)throw new Error("-hide-tool needs at least 1 argument");return{tools:t.map(function(e){return"all"==e&&(e="*"),{type:e,enabled:!1}})}},"show-layer":function(e){var t=e.split(",");if(t.length<1)throw new Error("-show-layer needs at least 1 argument");return{layers:t.map(function(e){return"all"==e&&(e="**"),{id:e,isVisible:!0}})}},"hide-layer":function(e){var t=e.split(",");if(t.length<1)throw new Error("-hide-layer needs at least 1 argument");return{layers:t.map(function(e){return"all"==e.toLowerCase()&&(e="**"),{id:e,isVisible:!1}})}},storage:function(e){var t=e.split(",");if(t.length<1)throw new Error("-storage needs at least 1 argument");return t.map(function(e){return JSON.parse(window.sessionStorage.getItem(e))})},ll:function(e){var t=e.split(",");if(2!=t.length)throw new Error("-ll needs 2 arguments");return{viewer:{location:{center:[t[0],t[1]]}}}},z:function(e){var t=e.split(",");if(1!=t.length)throw new Error("-z needs 1 argument");return{viewer:{location:{zoom:t[0]}}}}}}();